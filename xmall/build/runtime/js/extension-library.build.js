(function(e){"use strict";typeof define=="function"&&define.amd?define("slick",["jquery"],e):typeof exports!="undefined"?module.exports=e(require("jquery")):e(jQuery)})(function(e){"use strict";var t=window.Slick||{};t=function(){function n(n,r){var i=this,s,o,u;i.defaults={accessibility:!0,adaptiveHeight:!1,appendArrows:e(n),appendDots:e(n),arrows:!0,asNavFor:null,prevArrow:'<button type="button" data-role="none" class="slick-prev" aria-label="previous">Previous</button>',nextArrow:'<button type="button" data-role="none" class="slick-next" aria-label="next">Next</button>',autoplay:!1,autoplaySpeed:3e3,centerMode:!1,centerPadding:"50px",cssEase:"ease",customPaging:function(e,t){return'<button type="button" data-role="none">'+(t+1)+"</button>"},dots:!1,dotsClass:"slick-dots",draggable:!0,easing:"linear",edgeFriction:.35,fade:!1,focusOnSelect:!1,infinite:!0,initialSlide:0,lazyLoad:"ondemand",mobileFirst:!1,pauseOnHover:!0,pauseOnDotsHover:!1,respondTo:"window",responsive:null,rtl:!1,slide:"",slidesToShow:1,slidesToScroll:1,speed:500,swipe:!0,swipeToSlide:!1,touchMove:!0,touchThreshold:5,useCSS:!0,variableWidth:!1,vertical:!1,waitForAnimate:!0},i.initials={animating:!1,dragging:!1,autoPlayTimer:null,currentDirection:0,currentLeft:null,currentSlide:0,direction:1,$dots:null,listWidth:null,listHeight:null,loadIndex:0,$nextArrow:null,$prevArrow:null,slideCount:null,slideWidth:null,$slideTrack:null,$slides:null,sliding:!1,slideOffset:0,swipeLeft:null,$list:null,touchObject:{},transformsEnabled:!1},e.extend(i,i.initials),i.activeBreakpoint=null,i.animType=null,i.animProp=null,i.breakpoints=[],i.breakpointSettings=[],i.cssTransitions=!1,i.hidden="hidden",i.paused=!1,i.positionProp=null,i.respondTo=null,i.shouldClick=!0,i.$slider=e(n),i.$slidesCache=null,i.transformType=null,i.transitionType=null,i.visibilityChange="visibilitychange",i.windowWidth=0,i.windowTimer=null,i.tmpheight=null,i.tmpwidth=null,s=e(n).data("slick")||{},i.options=e.extend({},i.defaults,s,r),i.currentSlide=i.options.initialSlide,i.originalSettings=i.options,o=i.options.responsive||null;if(o&&o.length>-1){i.respondTo=i.options.respondTo||"window";for(u in o)o.hasOwnProperty(u)&&(i.breakpoints.push(o[u].breakpoint),i.breakpointSettings[o[u].breakpoint]=o[u].settings);i.breakpoints.sort(function(e,t){return i.options.mobileFirst===!0?e-t:t-e})}typeof document.mozHidden!="undefined"?(i.hidden="mozHidden",i.visibilityChange="mozvisibilitychange"):typeof document.msHidden!="undefined"?(i.hidden="msHidden",i.visibilityChange="msvisibilitychange"):typeof document.webkitHidden!="undefined"&&(i.hidden="webkitHidden",i.visibilityChange="webkitvisibilitychange"),i.autoPlay=e.proxy(i.autoPlay,i),i.autoPlayClear=e.proxy(i.autoPlayClear,i),i.changeSlide=e.proxy(i.changeSlide,i),i.clickHandler=e.proxy(i.clickHandler,i),i.selectHandler=e.proxy(i.selectHandler,i),i.setPosition=e.proxy(i.setPosition,i),i.swipeHandler=e.proxy(i.swipeHandler,i),i.dragHandler=e.proxy(i.dragHandler,i),i.keyHandler=e.proxy(i.keyHandler,i),i.autoPlayIterator=e.proxy(i.autoPlayIterator,i),i.instanceUid=t++,i.htmlExpr=/^(?:\s*(<[\w\W]+>)[^>]*)$/,i.init(),i.checkResponsive(!0),console.log("init")}var t=0;return n}(),t.prototype.addSlide=t.prototype.slickAdd=function(t,n,r){var i=this;if(typeof n=="boolean")r=n,n=null;else if(n<0||n>=i.slideCount)return!1;i.unload(),typeof n=="number"?n===0&&i.$slides.length===0?e(t).appendTo(i.$slideTrack):r?e(t).insertBefore(i.$slides.eq(n)):e(t).insertAfter(i.$slides.eq(n)):r===!0?e(t).prependTo(i.$slideTrack):e(t).appendTo(i.$slideTrack),i.$slides=i.$slideTrack.children(this.options.slide),i.$slideTrack.children(this.options.slide).detach(),i.$slideTrack.append(i.$slides),i.$slides.each(function(t,n){e(n).attr("data-slick-index",t)}),i.$slidesCache=i.$slides,i.reinit()},t.prototype.animateHeight=function(){var e=this;if(e.options.slidesToShow===1&&e.options.adaptiveHeight===!0&&e.options.vertical===!1){var t=e.$slides.eq(e.currentSlide).outerHeight(!0);t<e.listHeight&&(t=e.listHeight),e.$list.animate({height:t},e.options.speed)}},t.prototype.animateSlide=function(t,n){var r={},i=this;i.animateHeight(),i.options.rtl===!0&&i.options.vertical===!1&&(t=-t),i.transformsEnabled===!1?i.options.vertical===!1?i.$slideTrack.animate({left:t},i.options.speed,i.options.easing,n):i.$slideTrack.animate({top:t},i.options.speed,i.options.easing,n):i.cssTransitions===!1?(i.options.rtl===!0&&(i.currentLeft=-i.currentLeft),e({animStart:i.currentLeft}).animate({animStart:t},{duration:i.options.speed,easing:i.options.easing,step:function(e){e=Math.ceil(e),i.options.vertical===!1?(r[i.animType]="translate("+e+"px, 0px)",i.$slideTrack.css(r)):(r[i.animType]="translate(0px,"+e+"px)",i.$slideTrack.css(r))},complete:function(){n&&n.call()}})):(i.applyTransition(),t=Math.ceil(t),i.options.vertical===!1?r[i.animType]="translate3d("+t+"px, 0px, 0px)":r[i.animType]="translate3d(0px,"+t+"px, 0px)",i.$slideTrack.css(r),n&&setTimeout(function(){i.disableTransition(),n.call()},i.options.speed))},t.prototype.asNavFor=function(t){var n=this,r=n.options.asNavFor!==null?e(n.options.asNavFor).slick("getSlick"):null;r!==null&&r.slideHandler(t,!0)},t.prototype.applyTransition=function(e){var t=this,n={};t.options.fade===!1?n[t.transitionType]=t.transformType+" "+t.options.speed+"ms "+t.options.cssEase:n[t.transitionType]="opacity "+t.options.speed+"ms "+t.options.cssEase,t.options.fade===!1?t.$slideTrack.css(n):t.$slides.eq(e).css(n)},t.prototype.autoPlay=function(){var e=this;e.autoPlayTimer&&clearInterval(e.autoPlayTimer),e.slideCount>e.options.slidesToShow&&e.paused!==!0&&(e.autoPlayTimer=setInterval(e.autoPlayIterator,e.options.autoplaySpeed))},t.prototype.autoPlayClear=function(){var e=this;e.autoPlayTimer&&clearInterval(e.autoPlayTimer)},t.prototype.autoPlayIterator=function(){var e=this;e.options.infinite===!1?e.direction===1?(e.currentSlide+1===e.slideCount-1&&(e.direction=0),e.slideHandler(e.currentSlide+e.options.slidesToScroll)):(e.currentSlide-1===0&&(e.direction=1),e.slideHandler(e.currentSlide-e.options.slidesToScroll)):e.slideHandler(e.currentSlide+e.options.slidesToScroll)},t.prototype.buildArrows=function(){var t=this;t.options.arrows===!0&&t.slideCount>t.options.slidesToShow&&(t.$prevArrow=e(t.options.prevArrow),t.$nextArrow=e(t.options.nextArrow),t.htmlExpr.test(t.options.prevArrow)&&t.$prevArrow.appendTo(t.options.appendArrows),t.htmlExpr.test(t.options.nextArrow)&&t.$nextArrow.appendTo(t.options.appendArrows),t.options.infinite!==!0&&t.$prevArrow.addClass("slick-disabled"))},t.prototype.buildDots=function(){var t=this,n,r;if(t.options.dots===!0&&t.slideCount>t.options.slidesToShow){r='<ul class="'+t.options.dotsClass+'">';for(n=0;n<=t.getDotCount();n+=1)r+="<li>"+t.options.customPaging.call(this,t,n)+"</li>";r+="</ul>",t.$dots=e(r).appendTo(t.options.appendDots),t.$dots.find("li").first().addClass("slick-active").attr("aria-hidden","false")}},t.prototype.buildOut=function(){var t=this;t.$slides=t.$slider.children(t.options.slide+":not(.slick-cloned)").addClass("slick-slide"),t.slideCount=t.$slides.length,t.$slides.each(function(t,n){e(n).attr("data-slick-index",t)}),t.$slidesCache=t.$slides,t.$slider.addClass("slick-slider"),t.$slideTrack=t.slideCount===0?e('<div class="slick-track"/>').appendTo(t.$slider):t.$slides.wrapAll('<div class="slick-track"/>').parent(),t.$list=t.$slideTrack.wrap('<div aria-live="polite" class="slick-list"/>').parent(),t.$slideTrack.css("opacity",0);if(t.options.centerMode===!0||t.options.swipeToSlide===!0)t.options.slidesToScroll=1;e("img[data-lazy]",t.$slider).not("[src]").addClass("slick-loading"),t.setupInfinite(),t.buildArrows(),t.buildDots(),t.updateDots(),t.options.accessibility===!0&&t.$list.prop("tabIndex",0),t.setSlideClasses(typeof this.currentSlide=="number"?this.currentSlide:0),t.options.draggable===!0&&t.$list.addClass("draggable")},t.prototype.checkResponsive=function(t){var n=this,r,i,s,o=n.$slider.width(),u=window.innerWidth||e(window).width();n.respondTo==="window"?s=u:n.respondTo==="slider"?s=o:n.respondTo==="min"&&(s=Math.min(u,o));if(n.originalSettings.responsive&&n.originalSettings.responsive.length>-1&&n.originalSettings.responsive!==null){i=null;for(r in n.breakpoints)n.breakpoints.hasOwnProperty(r)&&(n.originalSettings.mobileFirst===!1?s<n.breakpoints[r]&&(i=n.breakpoints[r]):s>n.breakpoints[r]&&(i=n.breakpoints[r]));i!==null?n.activeBreakpoint!==null?i!==n.activeBreakpoint&&(n.activeBreakpoint=i,n.breakpointSettings[i]==="unslick"?n.unslick():(n.options=e.extend({},n.originalSettings,n.breakpointSettings[i]),t===!0&&(n.currentSlide=n.options.initialSlide),n.refresh())):(n.activeBreakpoint=i,n.breakpointSettings[i]==="unslick"?n.unslick():(n.options=e.extend({},n.originalSettings,n.breakpointSettings[i]),t===!0&&(n.currentSlide=n.options.initialSlide),n.refresh())):n.activeBreakpoint!==null&&(n.activeBreakpoint=null,n.options=n.originalSettings,t===!0&&(n.currentSlide=n.options.initialSlide),n.refresh())}},t.prototype.changeSlide=function(t,n){var r=this,i=e(t.target),s,o,u;i.is("a")&&t.preventDefault(),u=r.slideCount%r.options.slidesToScroll!==0,s=u?0:(r.slideCount-r.currentSlide)%r.options.slidesToScroll;switch(t.data.message){case"previous":o=s===0?r.options.slidesToScroll:r.options.slidesToShow-s,r.slideCount>r.options.slidesToShow&&r.slideHandler(r.currentSlide-o,!1,n);break;case"next":o=s===0?r.options.slidesToScroll:s,r.slideCount>r.options.slidesToShow&&r.slideHandler(r.currentSlide+o,!1,n);break;case"index":var a=t.data.index===0?0:t.data.index||e(t.target).parent().index()*r.options.slidesToScroll;r.slideHandler(r.checkNavigable(a),!1,n);break;default:return}},t.prototype.checkNavigable=function(e){var t=this,n,r;n=t.getNavigableIndexes(),r=0;if(e>n[n.length-1])e=n[n.length-1];else for(var i in n){if(e<n[i]){e=r;break}r=n[i]}return e},t.prototype.clickHandler=function(e){var t=this;t.shouldClick===!1&&(e.stopImmediatePropagation(),e.stopPropagation(),e.preventDefault())},t.prototype.destroy=function(){var t=this;t.autoPlayClear(),t.touchObject={},e(".slick-cloned",t.$slider).remove(),t.$dots&&t.$dots.remove(),t.$prevArrow&&typeof t.options.prevArrow!="object"&&t.$prevArrow.remove(),t.$nextArrow&&typeof t.options.nextArrow!="object"&&t.$nextArrow.remove(),t.$slides.removeClass("slick-slide slick-active slick-center slick-visible").attr("aria-hidden","true").removeAttr("data-slick-index").css({position:"",left:"",top:"",zIndex:"",opacity:"",width:""}),t.$slider.removeClass("slick-slider"),t.$slider.removeClass("slick-initialized"),t.$list.off(".slick"),e(window).off(".slick-"+t.instanceUid),e(document).off(".slick-"+t.instanceUid),t.$slider.html(t.$slides)},t.prototype.disableTransition=function(e){var t=this,n={};n[t.transitionType]="",t.options.fade===!1?t.$slideTrack.css(n):t.$slides.eq(e).css(n)},t.prototype.fadeSlide=function(e,t){var n=this;n.cssTransitions===!1?(n.$slides.eq(e).css({zIndex:1e3}),n.$slides.eq(e).animate({opacity:1},n.options.speed,n.options.easing,t)):(n.applyTransition(e),n.$slides.eq(e).css({opacity:1,zIndex:1e3}),t&&setTimeout(function(){n.disableTransition(e),t.call()},n.options.speed))},t.prototype.filterSlides=t.prototype.slickFilter=function(e){var t=this;e!==null&&(t.unload(),t.$slideTrack.children(this.options.slide).detach(),t.$slidesCache.filter(e).appendTo(t.$slideTrack),t.reinit())},t.prototype.getCurrent=t.prototype.slickCurrentSlide=function(){var e=this;return e.currentSlide},t.prototype.getDotCount=function(){var e=this,t=0,n=0,r=0;if(e.options.infinite===!0)r=Math.ceil(e.slideCount/e.options.slidesToScroll);else if(e.options.centerMode===!0)r=e.slideCount;else while(t<e.slideCount)++r,t=n+e.options.slidesToShow,n+=e.options.slidesToScroll<=e.options.slidesToShow?e.options.slidesToScroll:e.options.slidesToShow;return r-1},t.prototype.getLeft=function(e){var t=this,n,r,i=0,s;return t.slideOffset=0,r=t.$slides.first().outerHeight(),t.options.infinite===!0?(t.slideCount>t.options.slidesToShow&&(t.slideOffset=t.slideWidth*t.options.slidesToShow*-1,i=r*t.options.slidesToShow*-1),t.slideCount%t.options.slidesToScroll!==0&&e+t.options.slidesToScroll>t.slideCount&&t.slideCount>t.options.slidesToShow&&(e>t.slideCount?(t.slideOffset=(t.options.slidesToShow-(e-t.slideCount))*t.slideWidth*-1,i=(t.options.slidesToShow-(e-t.slideCount))*r*-1):(t.slideOffset=t.slideCount%t.options.slidesToScroll*t.slideWidth*-1,i=t.slideCount%t.options.slidesToScroll*r*-1))):e+t.options.slidesToShow>t.slideCount&&(t.slideOffset=(e+t.options.slidesToShow-t.slideCount)*t.slideWidth,i=(e+t.options.slidesToShow-t.slideCount)*r),t.slideCount<=t.options.slidesToShow&&(t.slideOffset=0,i=0),t.options.centerMode===!0&&t.options.infinite===!0?t.slideOffset+=t.slideWidth*Math.floor(t.options.slidesToShow/2)-t.slideWidth:t.options.centerMode===!0&&(t.slideOffset=0,t.slideOffset+=t.slideWidth*Math.floor(t.options.slidesToShow/2)),t.options.vertical===!1?n=e*t.slideWidth*-1+t.slideOffset:n=e*r*-1+i,t.options.variableWidth===!0&&(t.slideCount<=t.options.slidesToShow||t.options.infinite===!1?s=t.$slideTrack.children(".slick-slide").eq(e):s=t.$slideTrack.children(".slick-slide").eq(e+t.options.slidesToShow),n=s[0]?s[0].offsetLeft*-1:0,t.options.centerMode===!0&&(t.options.infinite===!1?s=t.$slideTrack.children(".slick-slide").eq(e):s=t.$slideTrack.children(".slick-slide").eq(e+t.options.slidesToShow+1),n=s[0]?s[0].offsetLeft*-1:0,n+=(t.listWidth-s.outerWidth())/2)),n},t.prototype.getOption=t.prototype.slickGetOption=function(e){var t=this;return t.options[e]},t.prototype.getNavigableIndexes=function(){var e=this,t=0,n=0,r=[],i;e.options.infinite===!1?(i=e.slideCount-e.options.slidesToShow+1,e.options.centerMode===!0&&(i=e.slideCount)):(t=e.slideCount*-1,n=e.slideCount*-1,i=e.slideCount*2);while(t<i)r.push(t),t=n+e.options.slidesToScroll,n+=e.options.slidesToScroll<=e.options.slidesToShow?e.options.slidesToScroll:e.options.slidesToShow;return r},t.prototype.getSlick=function(){return this},t.prototype.getSlideCount=function(){var t=this,n,r,i;return i=t.options.centerMode===!0?t.slideWidth*Math.floor(t.options.slidesToShow/2):0,t.options.swipeToSlide===!0?(t.$slideTrack.find(".slick-slide").each(function(n,s){if(s.offsetLeft-i+e(s).outerWidth()/2>t.swipeLeft*-1)return r=s,!1}),n=Math.abs(e(r).attr("data-slick-index")-t.currentSlide)||1,n):t.options.slidesToScroll},t.prototype.goTo=t.prototype.slickGoTo=function(e,t){var n=this;n.changeSlide({data:{message:"index",index:parseInt(e)}},t)},t.prototype.init=function(){var t=this;e(t.$slider).hasClass("slick-initialized")||(e(t.$slider).addClass("slick-initialized"),t.buildOut(),t.setProps(),t.startLoad(),t.loadSlider(),t.initializeEvents(),t.updateArrows(),t.updateDots()),t.$slider.trigger("init",[t])},t.prototype.initArrowEvents=function(){var e=this;e.options.arrows===!0&&e.slideCount>e.options.slidesToShow&&(e.$prevArrow.on("click.slick",{message:"previous"},e.changeSlide),e.$nextArrow.on("click.slick",{message:"next"},e.changeSlide))},t.prototype.initDotEvents=function(){var t=this;t.options.dots===!0&&t.slideCount>t.options.slidesToShow&&e("li",t.$dots).on("click.slick",{message:"index"},t.changeSlide),t.options.dots===!0&&t.options.pauseOnDotsHover===!0&&t.options.autoplay===!0&&e("li",t.$dots).on("mouseenter.slick",function(){t.paused=!0,t.autoPlayClear()}).on("mouseleave.slick",function(){t.paused=!1,t.autoPlay()})},t.prototype.initializeEvents=function(){var t=this;t.initArrowEvents(),t.initDotEvents(),t.$list.on("touchstart.slick mousedown.slick",{action:"start"},t.swipeHandler),t.$list.on("touchmove.slick mousemove.slick",{action:"move"},t.swipeHandler),t.$list.on("touchend.slick mouseup.slick",{action:"end"},t.swipeHandler),t.$list.on("touchcancel.slick mouseleave.slick",{action:"end"},t.swipeHandler),t.$list.on("click.slick",t.clickHandler),t.options.autoplay===!0&&(e(document).on(t.visibilityChange,function(){t.visibility()}),t.options.pauseOnHover===!0&&(t.$list.on("mouseenter.slick",function(){t.paused=!0,t.autoPlayClear()}),t.$list.on("mouseleave.slick",function(){t.paused=!1,t.autoPlay()}))),t.options.accessibility===!0&&t.$list.on("keydown.slick",t.keyHandler),t.options.focusOnSelect===!0&&e(t.$slideTrack).children().on("click.slick",t.selectHandler),e(window).on("orientationchange.slick.slick-"+t.instanceUid,function(){t.checkResponsive(),t.setPosition()}),e(window).on("resize.slick.slick-"+t.instanceUid,function(){e(window).width()!==t.windowWidth&&(clearTimeout(t.windowDelay),t.windowDelay=window.setTimeout(function(){t.windowWidth=e(window).width(),t.checkResponsive(),t.setPosition()},50))}),e("*[draggable!=true]",t.$slideTrack).on("dragstart",function(e){e.preventDefault()}),e(window).on("load.slick.slick-"+t.instanceUid,t.setPosition),e(document).on("ready.slick.slick-"+t.instanceUid,t.setPosition)},t.prototype.initUI=function(){var e=this;e.options.arrows===!0&&e.slideCount>e.options.slidesToShow&&(e.$prevArrow.show(),e.$nextArrow.show()),e.options.dots===!0&&e.slideCount>e.options.slidesToShow&&e.$dots.show(),e.options.autoplay===!0&&e.autoPlay()},t.prototype.keyHandler=function(e){var t=this;e.keyCode===37&&t.options.accessibility===!0?t.changeSlide({data:{message:"previous"}}):e.keyCode===39&&t.options.accessibility===!0&&t.changeSlide({data:{message:"next"}})},t.prototype.lazyLoad=function(){function o(t){e("img[data-lazy]",t).each(function(){var t=e(this),n=e(this).attr("data-lazy");t.load(function(){t.animate({opacity:1},200)}).css({opacity:0}).attr("src",n).removeAttr("data-lazy").removeClass("slick-loading")})}var t=this,n,r,i,s;t.options.centerMode===!0?t.options.infinite===!0?(i=t.currentSlide+(t.options.slidesToShow/2+1),s=i+t.options.slidesToShow+2):(i=Math.max(0,t.currentSlide-(t.options.slidesToShow/2+1)),s=2+(t.options.slidesToShow/2+1)+t.currentSlide):(i=t.options.infinite?t.options.slidesToShow+t.currentSlide:t.currentSlide,s=i+t.options.slidesToShow,t.options.fade===!0&&(i>0&&i--,s<=t.slideCount&&s++)),n=t.$slider.find(".slick-slide").slice(i,s),o(n),t.slideCount<=t.options.slidesToShow?(r=t.$slider.find(".slick-slide"),o(r)):t.currentSlide>=t.slideCount-t.options.slidesToShow?(r=t.$slider.find(".slick-cloned").slice(0,t.options.slidesToShow),o(r)):t.currentSlide===0&&(r=t.$slider.find(".slick-cloned").slice(t.options.slidesToShow*-1),o(r))},t.prototype.loadSlider=function(){var e=this;e.setPosition(),e.$slideTrack.css({opacity:1}),e.$slider.removeClass("slick-loading"),e.initUI(),e.options.lazyLoad==="progressive"&&e.progressiveLazyLoad()},t.prototype.next=t.prototype.slickNext=function(){var e=this;e.changeSlide({data:{message:"next"}})},t.prototype.pause=t.prototype.slickPause=function(){var e=this;e.autoPlayClear(),e.paused=!0},t.prototype.play=t.prototype.slickPlay=function(){var e=this;e.paused=!1,e.autoPlay()},t.prototype.postSlide=function(e){var t=this;t.$slider.trigger("afterChange",[t,e]),t.animating=!1,t.setPosition(),t.swipeLeft=null,t.options.autoplay===!0&&t.paused===!1&&t.autoPlay()},t.prototype.prev=t.prototype.slickPrev=function(){var e=this;e.changeSlide({data:{message:"previous"}})},t.prototype.progressiveLazyLoad=function(){var t=this,n,r;n=e("img[data-lazy]",t.$slider).length,n>0&&(r=e("img[data-lazy]",t.$slider).first(),r.attr("src",r.attr("data-lazy")).removeClass("slick-loading").load(function(){r.removeAttr("data-lazy"),t.progressiveLazyLoad(),t.options.adaptiveHeight===!0&&t.setPosition(!0)}).error(function(){r.removeAttr("data-lazy"),t.progressiveLazyLoad()}))},t.prototype.refresh=function(){var t=this,n=t.currentSlide;t.destroy(),e.extend(t,t.initials),t.init(),t.changeSlide({data:{message:"index",index:n}},!0)},t.prototype.reinit=function(){var t=this;t.$slides=t.$slideTrack.children(t.options.slide).addClass("slick-slide"),t.slideCount=t.$slides.length,t.currentSlide>=t.slideCount&&t.currentSlide!==0&&(t.currentSlide=t.currentSlide-t.options.slidesToScroll),t.slideCount<=t.options.slidesToShow&&(t.currentSlide=0),t.setProps(),t.setupInfinite(),t.buildArrows(),t.updateArrows(),t.initArrowEvents(),t.buildDots(),t.updateDots(),t.initDotEvents(),t.options.focusOnSelect===!0&&e(t.$slideTrack).children().on("click.slick",t.selectHandler),t.setSlideClasses(0),t.setPosition(),t.$slider.trigger("reInit",[t])},t.prototype.removeSlide=t.prototype.slickRemove=function(e,t,n){var r=this;typeof e=="boolean"?(t=e,e=t===!0?0:r.slideCount-1):e=t===!0?--e:e;if(r.slideCount<1||e<0||e>r.slideCount-1)return!1;r.unload(),n===!0?r.$slideTrack.children().remove():r.$slideTrack.children(this.options.slide).eq(e).remove(),r.$slides=r.$slideTrack.children(this.options.slide),r.$slideTrack.children(this.options.slide).detach(),r.$slideTrack.append(r.$slides),r.$slidesCache=r.$slides,r.reinit()},t.prototype.setCSS=function(e){var t=this,n={},r,i;t.options.rtl===!0&&(e=-e),r=t.positionProp=="left"?Math.ceil(e)+"px":"0px",i=t.positionProp=="top"?Math.ceil(e)+"px":"0px",n[t.positionProp]=e,t.transformsEnabled===!1?t.$slideTrack.css(n):(n={},t.cssTransitions===!1?(n[t.animType]="translate("+r+", "+i+")",t.$slideTrack.css(n)):(n[t.animType]="translate3d("+r+", "+i+", 0px)",t.$slideTrack.css(n)))},t.prototype.setDimensions=function(){var e=this;e.options.vertical===!1?e.options.centerMode===!0&&e.$list.css({padding:"0px "+e.options.centerPadding}):(e.$list.height(e.$slides.first().outerHeight(!0)*e.options.slidesToShow),e.options.centerMode===!0&&e.$list.css({padding:e.options.centerPadding+" 0px"})),e.$list.width()>=e.tmpwidth?e.listWidth=e.$list.width():e.listWidth=e.tmpwidth,e.$list.height()>=e.tmpheight?e.listHeight=e.$list.height():e.listHeight=e.tmpheight;if(e.options.vertical===!1&&e.options.variableWidth===!1)e.slideWidth=Math.ceil(e.listWidth/e.options.slidesToShow),e.$slideTrack.width(Math.ceil(e.slideWidth*e.$slideTrack.children(".slick-slide").length));else if(e.options.variableWidth===!0){var t=0;e.slideWidth=Math.ceil(e.listWidth/e.options.slidesToShow),e.$slideTrack.children(".slick-slide").each(function(){t+=e.listWidth}),e.$slideTrack.width(Math.ceil(t)+1)}else e.slideWidth=Math.ceil(e.listWidth),e.$slideTrack.height(Math.ceil(e.$slides.first().outerHeight(!0)*e.$slideTrack.children(".slick-slide").length));var n=e.$slides.first().outerWidth(!0)-e.$slides.first().width();e.options.variableWidth===!1&&e.$slideTrack.children(".slick-slide").width(e.slideWidth-n)},t.prototype.setFade=function(){var t=this,n;t.$slides.each(function(r,i){n=t.slideWidth*r*-1,t.options.rtl===!0?e(i).css({position:"relative",right:n,top:0,zIndex:800,opacity:0}):e(i).css({position:"relative",left:n,top:0,zIndex:800,opacity:0})}),t.$slides.eq(t.currentSlide).css({zIndex:900,opacity:1})},t.prototype.setHeight=function(){var e=this;if(e.options.slidesToShow===1&&e.options.adaptiveHeight===!0&&e.options.vertical===!1){var t=e.$slides.eq(e.currentSlide).outerHeight(!0);t<e.listHeight&&(t=e.listHeight),e.$list.css("height",t)}},t.prototype.setOption=t.prototype.slickSetOption=function(e,t,n){var r=this;r.options[e]=t,n===!0&&(r.unload(),r.reinit())},t.prototype.setPosition=function(e){e&&(this.tmpwidth=this.$list.width(),this.tmpheight=this.$list.height());var t=this;t.setDimensions(),t.setHeight(),t.options.fade===!1?t.setCSS(t.getLeft(t.currentSlide)):t.setFade(),t.$slider.trigger("setPosition",[t])},t.prototype.setProps=function(){var e=this,t=document.body.style;e.positionProp=e.options.vertical===!0?"top":"left",e.positionProp==="top"?e.$slider.addClass("slick-vertical"):e.$slider.removeClass("slick-vertical"),(t.WebkitTransition!==undefined||t.MozTransition!==undefined||t.msTransition!==undefined)&&e.options.useCSS===!0&&(e.cssTransitions=!0),t.OTransform!==undefined&&(e.animType="OTransform",e.transformType="-o-transform",e.transitionType="OTransition",t.perspectiveProperty===undefined&&t.webkitPerspective===undefined&&(e.animType=!1)),t.MozTransform!==undefined&&(e.animType="MozTransform",e.transformType="-moz-transform",e.transitionType="MozTransition",t.perspectiveProperty===undefined&&t.MozPerspective===undefined&&(e.animType=!1)),t.webkitTransform!==undefined&&(e.animType="webkitTransform",e.transformType="-webkit-transform",e.transitionType="webkitTransition",t.perspectiveProperty===undefined&&t.webkitPerspective===undefined&&(e.animType=!1)),t.msTransform!==undefined&&(e.animType="msTransform",e.transformType="-ms-transform",e.transitionType="msTransition",t.msTransform===undefined&&(e.animType=!1)),t.transform!==undefined&&e.animType!==!1&&(e.animType="transform",e.transformType="transform",e.transitionType="transition"),e.transformsEnabled=e.animType!==null&&e.animType!==!1},t.prototype.setSlideClasses=function(e){var t=this,n,r,i,s;t.$slider.find(".slick-slide").removeClass("slick-active").attr("aria-hidden","true").removeClass("slick-center"),r=t.$slider.find(".slick-slide"),t.options.centerMode===!0?(n=Math.floor(t.options.slidesToShow/2),t.options.infinite===!0&&(e>=n&&e<=t.slideCount-1-n?t.$slides.slice(e-n,e+n+1).addClass("slick-active").attr("aria-hidden","false"):(i=t.options.slidesToShow+e,r.slice(i-n+1,i+n+2).addClass("slick-active").attr("aria-hidden","false")),e===0?r.eq(r.length-1-t.options.slidesToShow).addClass("slick-center"):e===t.slideCount-1&&r.eq(t.options.slidesToShow).addClass("slick-center")),t.$slides.eq(e).addClass("slick-center")):e>=0&&e<=t.slideCount-t.options.slidesToShow?t.$slides.slice(e,e+t.options.slidesToShow).addClass("slick-active").attr("aria-hidden","false"):r.length<=t.options.slidesToShow?r.addClass("slick-active").attr("aria-hidden","false"):(s=t.slideCount%t.options.slidesToShow,i=t.options.infinite===!0?t.options.slidesToShow+e:e,t.options.slidesToShow==t.options.slidesToScroll&&t.slideCount-e<t.options.slidesToShow?r.slice(i-(t.options.slidesToShow-s),i+s).addClass("slick-active").attr("aria-hidden","false"):r.slice(i,i+t.options.slidesToShow).addClass("slick-active").attr("aria-hidden","false")),t.options.lazyLoad==="ondemand"&&t.lazyLoad()},t.prototype.setupInfinite=function(){var t=this,n,r,i;t.options.fade===!0&&(t.options.centerMode=!1);if(t.options.infinite===!0&&t.options.fade===!1){r=null;if(t.slideCount>t.options.slidesToShow){t.options.centerMode===!0?i=t.options.slidesToShow+1:i=t.options.slidesToShow;for(n=t.slideCount;n>t.slideCount-i;n-=1)r=n-1,e(t.$slides[r]).clone(!0).attr("id","").attr("data-slick-index",r-t.slideCount).prependTo(t.$slideTrack).addClass("slick-cloned");for(n=0;n<i;n+=1)r=n,e(t.$slides[r]).clone(!0).attr("id","").attr("data-slick-index",r+t.slideCount).appendTo(t.$slideTrack).addClass("slick-cloned");t.$slideTrack.find(".slick-cloned").find("[id]").each(function(){e(this).attr("id","")})}}},t.prototype.selectHandler=function(t){var n=this,r=parseInt(e(t.target).parents(".slick-slide").attr("data-slick-index"));r||(r=0);if(n.slideCount<=n.options.slidesToShow){n.$slider.find(".slick-slide").removeClass("slick-active").attr("aria-hidden","true"),n.$slides.eq(r).addClass("slick-active").attr("aria-hidden","false"),n.options.centerMode===!0&&(n.$slider.find(".slick-slide").removeClass("slick-center"),n.$slides.eq(r).addClass("slick-center")),n.asNavFor(r);return}n.slideHandler(r)},t.prototype.slideHandler=function(e,t,n){var r,i,s,o,u=null,a=this;t=t||!1;if(a.animating===!0&&a.options.waitForAnimate===!0)return;if(a.options.fade===!0&&a.currentSlide===e)return;if(a.slideCount<=a.options.slidesToShow)return;t===!1&&a.asNavFor(e),r=e,u=a.getLeft(r),o=a.getLeft(a.currentSlide),a.currentLeft=a.swipeLeft===null?o:a.swipeLeft;if(a.options.infinite===!1&&a.options.centerMode===!1&&(e<0||e>a.getDotCount()*a.options.slidesToScroll)){a.options.fade===!1&&(r=a.currentSlide,n!==!0?a.animateSlide(o,function(){a.postSlide(r)}):a.postSlide(r));return}if(a.options.infinite===!1&&a.options.centerMode===!0&&(e<0||e>a.slideCount-a.options.slidesToScroll)){a.options.fade===!1&&(r=a.currentSlide,n!==!0?a.animateSlide(o,function(){a.postSlide(r)}):a.postSlide(r));return}a.options.autoplay===!0&&clearInterval(a.autoPlayTimer),r<0?a.slideCount%a.options.slidesToScroll!==0?i=a.slideCount-a.slideCount%a.options.slidesToScroll:i=a.slideCount+r:r>=a.slideCount?a.slideCount%a.options.slidesToScroll!==0?i=0:i=r-a.slideCount:i=r,a.animating=!0,a.$slider.trigger("beforeChange",[a,a.currentSlide,i]),s=a.currentSlide,a.currentSlide=i,a.setSlideClasses(a.currentSlide),a.updateDots(),a.updateArrows();if(a.options.fade===!0){n!==!0?a.fadeSlide(i,function(){a.postSlide(i)}):a.postSlide(i),a.animateHeight();return}n!==!0?a.animateSlide(u,function(){a.postSlide(i)}):a.postSlide(i)},t.prototype.startLoad=function(){var e=this;e.options.arrows===!0&&e.slideCount>e.options.slidesToShow&&(e.$prevArrow.hide(),e.$nextArrow.hide()),e.options.dots===!0&&e.slideCount>e.options.slidesToShow&&e.$dots.hide(),e.$slider.addClass("slick-loading")},t.prototype.swipeDirection=function(){var e,t,n,r,i=this;return e=i.touchObject.startX-i.touchObject.curX,t=i.touchObject.startY-i.touchObject.curY,n=Math.atan2(t,e),r=Math.round(n*180/Math.PI),r<0&&(r=360-Math.abs(r)),r<=45&&r>=0?i.options.rtl===!1?"left":"right":r<=360&&r>=315?i.options.rtl===!1?"left":"right":r>=135&&r<=225?i.options.rtl===!1?"right":"left":"vertical"},t.prototype.swipeEnd=function(e){var t=this,n;t.dragging=!1,t.shouldClick=t.touchObject.swipeLength>10?!1:!0;if(t.touchObject.curX===undefined)return!1;t.touchObject.edgeHit===!0&&t.$slider.trigger("edge",[t,t.swipeDirection()]);if(t.touchObject.swipeLength>=t.touchObject.minSwipe)switch(t.swipeDirection()){case"left":n=t.options.swipeToSlide?t.checkNavigable(t.currentSlide+t.getSlideCount()):t.currentSlide+t.getSlideCount(),t.slideHandler(n),t.currentDirection=0,t.touchObject={},t.$slider.trigger("swipe",[t,"left"]);break;case"right":n=t.options.swipeToSlide?t.checkNavigable(t.currentSlide-t.getSlideCount()):t.currentSlide-t.getSlideCount(),t.slideHandler(n),t.currentDirection=1,t.touchObject={},t.$slider.trigger("swipe",[t,"right"])}else t.touchObject.startX!==t.touchObject.curX&&(t.slideHandler(t.currentSlide),t.touchObject={})},t.prototype.swipeHandler=function(e){var t=this;if(t.options.swipe===!1||"ontouchend"in document&&t.options.swipe===!1)return;if(t.options.draggable===!1&&e.type.indexOf("mouse")!==-1)return;t.touchObject.fingerCount=e.originalEvent&&e.originalEvent.touches!==undefined?e.originalEvent.touches.length:1,t.touchObject.minSwipe=t.listWidth/t.options.touchThreshold;switch(e.data.action){case"start":t.swipeStart(e);break;case"move":t.swipeMove(e);break;case"end":t.swipeEnd(e)}},t.prototype.swipeMove=function(e){var t=this,n=!1,r,i,s,o,u;u=e.originalEvent!==undefined?e.originalEvent.touches:null;if(!t.dragging||u&&u.length!==1)return!1;r=t.getLeft(t.currentSlide),t.touchObject.curX=u!==undefined?u[0].pageX:e.clientX,t.touchObject.curY=u!==undefined?u[0].pageY:e.clientY,t.touchObject.swipeLength=Math.round(Math.sqrt(Math.pow(t.touchObject.curX-t.touchObject.startX,2))),i=t.swipeDirection();if(i==="vertical")return;e.originalEvent!==undefined&&t.touchObject.swipeLength>4&&e.preventDefault(),o=(t.options.rtl===!1?1:-1)*(t.touchObject.curX>t.touchObject.startX?1:-1),s=t.touchObject.swipeLength,t.touchObject.edgeHit=!1,t.options.infinite===!1&&(t.currentSlide===0&&i==="right"||t.currentSlide>=t.getDotCount()&&i==="left")&&(s=t.touchObject.swipeLength*t.options.edgeFriction,t.touchObject.edgeHit=!0),t.options.vertical===!1?t.swipeLeft=r+s*o:t.swipeLeft=r+s*(t.listHeight/t.listWidth)*o;if(t.options.fade===!0||t.options.touchMove===!1)return!1;if(t.animating===!0)return t.swipeLeft=null,!1;t.setCSS(t.swipeLeft)},t.prototype.swipeStart=function(e){var t=this,n;if(t.touchObject.fingerCount!==1||t.slideCount<=t.options.slidesToShow)return t.touchObject={},!1;e.originalEvent!==undefined&&e.originalEvent.touches!==undefined&&(n=e.originalEvent.touches[0]),t.touchObject.startX=t.touchObject.curX=n!==undefined?n.pageX:e.clientX,t.touchObject.startY=t.touchObject.curY=n!==undefined?n.pageY:e.clientY,t.dragging=!0},t.prototype.unfilterSlides=t.prototype.slickUnfilter=function(){var e=this;e.$slidesCache!==null&&(e.unload(),e.$slideTrack.children(this.options.slide).detach(),e.$slidesCache.appendTo(e.$slideTrack),e.reinit())},t.prototype.unload=function(){var t=this;e(".slick-cloned",t.$slider).remove(),t.$dots&&t.$dots.remove(),t.$prevArrow&&typeof t.options.prevArrow!="object"&&t.$prevArrow.remove(),t.$nextArrow&&typeof t.options.nextArrow!="object"&&t.$nextArrow.remove(),t.$slides.removeClass("slick-slide slick-active slick-visible").attr("aria-hidden","true").css("width","")},t.prototype.unslick=function(){var e=this;e.destroy()},t.prototype.updateArrows=function(){var e=this,t;t=Math.floor(e.options.slidesToShow/2),e.options.arrows===!0&&e.options.infinite!==!0&&e.slideCount>e.options.slidesToShow&&(e.$prevArrow.removeClass("slick-disabled"),e.$nextArrow.removeClass("slick-disabled"),e.currentSlide===0?(e.$prevArrow.addClass("slick-disabled"),e.$nextArrow.removeClass("slick-disabled")):e.currentSlide>=e.slideCount-e.options.slidesToShow&&e.options.centerMode===!1?(e.$nextArrow.addClass("slick-disabled"),e.$prevArrow.removeClass("slick-disabled")):e.currentSlide>=e.slideCount-1&&e.options.centerMode===!0&&(e.$nextArrow.addClass("slick-disabled"),e.$prevArrow.removeClass("slick-disabled")))},t.prototype.updateDots=function(){var e=this;e.$dots!==null&&(e.$dots.find("li").removeClass("slick-active").attr("aria-hidden","true"),e.$dots.find("li").eq(Math.floor(e.currentSlide/e.options.slidesToScroll)).addClass("slick-active").attr("aria-hidden","false"))},t.prototype.visibility=function(){var e=this;document[e.hidden]?(e.paused=!0,e.autoPlayClear()):(e.paused=!1,e.autoPlay())},e.fn.slick=function(){var e=this,n=arguments[0],r=Array.prototype.slice.call(arguments,1),i=e.length,s=0,o;for(s;s<i;s++){typeof n=="object"||typeof n=="undefined"?e[s].slick=new t(e[s],n):o=e[s].slick[n].apply(e[s].slick,r);if(typeof o!="undefined")return o}return e},e(function(){e("[data-slick]").slick()})}),define("components/SlickView",["./BaseView","slick"],function(e,t){return e.extend({type:"SlickView",remove:function(){this.slick&&this.$(".slick-container").slick("unslick"),e.prototype.remove.call(this,arguments)},createItem:function(e){var t=document.createElement("div");t.classList.add("image");var n=document.createElement("a"),r="";typeof e=="string"?r=e:r=e.get("src");var i=document.createElement("img");return this.slickOptions.lazyLoad=="ondemand"?i.setAttribute("data-lazy",r):i.src=r,n.appendChild(i),t.appendChild(n),t},configure:function(e){this.slick&&this.$(".slick-container").slick("unslick").empty(),e.collection&&(typeof e.collection=="string"?this.collection=window.application.getCollection(e.collection):e.collection instanceof Backbone.Collection?this.collection=e.collection:e.collection.type&&(_Collection=require("../models/"+e.collection.type),this.collection=new _Collection(e.collection.items||[],e.collection))),this.listenTo(this.collection,"reset",this.onReset)},onReset:function(){this.$el.empty();var e=document.createElement("div");e.classList.add("slick-container"),this.el.appendChild(e);var t=this.collection.models;if(t.length>0){t.forEach(_.bind(function(e){this.$(".slick-container").append(this.createItem(e))},this));var n=_.extend({},this.slickOptions,this.options.slickOptions);setTimeout(_.bind(function(){this.slick=this.$(".slick-container").slick(n)},this),0)}else this.slick&&this.$(".slick-container").slick("unslick").empty()}})}),define("components/CarouselView",["./SlickView"],function(e){return e.extend({type:"CarouselView",slickOptions:{lazyLoad:"ondemand",autoplay:!0,swipeToSlide:!0,dots:!0,speed:1e3,adaptiveHeight:!0},render:function(){e.prototype.render.apply(this,arguments);var t=$('<div class="carousel-title"></div>');return this.$el.append(t),this},configure:function(t){e.prototype.configure.apply(this,arguments),t.title?this.$(".carousel-title").show().text(t.title):this.$(".carousel-title").hide()}})}),define("components/AdCardView",["./CarouselView"],function(e){return e.extend({type:"AdCardView",createItem:function(e){var t=document.createElement("div");t.classList.add("image");var n=document.createElement("img");this.slickOptions.lazyLoad=="ondemand"?n.setAttribute("data-lazy",e.get("adImage")):n.src=e.get("adImage");var r=e.get("adType"),i=e.get("adId"),s=e.get("adTarget"),o=e.get("adName")?e.get("adName"):"微商城",u=document.createElement("a");return r=="0"&&(u.href="#home-navigate/itemdetail?goodsid="+s),u.appendChild(n),t.appendChild(u),t}})}),define("components/AddressInOrderView",["./BaseView"],function(e){return e.extend({model:null,paymentType:null,render:function(){this.$el.empty();if(this.paymentType!="afterpayment")if(this.model){var e=library.getTemplate("address-in-order1.html");this.$el.append(e(this.model.toJSON()))}else{var e=library.getTemplate("address-in-order-selector.html");this.$el.append(e)}else if(this.model){var e=library.getTemplate("after-payment-address.html");this.$el.append(e(this.model.toJSON()))}else{var e=library.getTemplate("address-in-order-selector.html");this.$el.append(e)}return this},setModel:function(e,t){if(e==null)return;this.model=e,this.paymentType=t,this.render()},getModel:function(){return this.model}})}),define("components/ListView",["require","../loader","underscore","backbone","./BaseView","backbone.paginator"],function(e,t,n,r,i,s){return String.prototype.endsWith=function(e){return e===""||this.slice(-e.length)===e},i.extend({type:"ListView",events:{"click .loadmore":"onLoadMore","click li":"onRowSelect"},defaults:{autoload:!0},mapping:{},initialize:function(e){i.prototype.initialize.apply(this,arguments),this.on("reset",this.reset)},remove:function(){i.prototype.remove.apply(this,arguments),this.off(),this.stopListening()},render:function(){var e=$('<div class="scroller"><ul class="table-view"></ul></div>');return this.$el.append(e),this.loadmore=this.getLoadingBar(this.options.isAutoLoadMore),this.loadmore.hide().appendTo(e),this},getLoadingBar:function(e){var t=$("<div></div>");if(this.options.paging)if(e){t.addClass("loadmore-loading");var n=$("<span class='label'></span>");n.text("加载更多");var r=$("<span class='icomoon-load'></span>");r.addClass("listview-loadingbar"),t.append(r).append(n)}else var t=$('<button class="loadmore"><div class="label">加载更多</div><span class="loading-icon"></span></button>');return t},configure:function(t){this.removeAllItems(),delete this.template;var n=t;t.iscroll=="true"&&(this.IScroll=new IScroll(this.el,{probeType:2,scrollX:!1,scrollY:!0,mouseWheel:!0})),n.template&&(this.template=window.library.getTemplate(n.template)),t.collection&&(typeof t.collection=="string"?this.collection=window.application.getCollection(t.collection):t.collection instanceof r.Collection?this.collection=t.collection:t.collection.type&&(_Collection=e("../models/"+t.collection.type),this.collection=new _Collection(t.collection.items||[],t.collection)),this.bindCollectionEvents(this.collection),this.reset(this.collection),t.autoload&&t.paging&&this.collection.getFirstPage?this.collection.getFirstPage():t.autoload&&this.collection.fetch()),this.$(".empty-view").remove(),this.emptyView=$("<div>已经加载全部</div>").addClass("empty-view").hide(),this.$(".scroller").append(this.emptyView),this.$(".error-view").remove(),this.errorView=$("<div>网络异常</div>").addClass("error-view").hide(),this.$(".scroller").append(this.errorView)},bindCollectionEvents:function(e){this.stopListening();var t=this;this.listenTo(e,"end",function(){t.loadmore.hide()}),this.listenTo(e,"add",function(e,n,r){t.addItem(e),t.refresh()}),this.listenTo(e,"remove",function(e,n,r){var i=t.mapping[e.cid];i&&i.animate("1s fadeOut",function(){i.remove(),delete t.mapping[e.cid]})}),this.listenTo(e,"change",function(e,t,n){}),this.listenTo(e,"reset",this.reset),this.listenTo(e,"empty",this.onEmpty),this.listenTo(e,"sync",this.onSync),this.listenTo(e,"error",this.onError),this.listenTo(e,"notify",this.reset)},refresh:function(){this.collection.hasNextPage()&&this.collection.getNextPage?(this.loadmore.show(),$(this.loadmore.find(".label")).empty().append("加载更多")):this.options.isAutoLoadMore?this.collection.length>0?(this.loadmore.show(),this.loadmore.empty().text("已加载全部")):this.loadmore.hide():this.collection.length>0?(this.loadmore.show(),$(this.loadmore.find(".label")).empty().append("已加载全部")):this.loadmore.hide(),this.IScroll&&setTimeout(n.bind(function(){this.IScroll.refresh()},this),0)},setEditing:function(e){this.editing=e,e?this.$el.addClass("editing"):(this.$el.removeClass("editing"),this.getChildren().forEach(function(e){e.removeClass("selected")}))},reset:function(e){this.options.paging&&this.loadmore.show(),this.removeAllItems();var t=this,r;e instanceof s?r=e.mode=="server"?e.models:e.fullCollection.models:e instanceof Array?r=e:r=e.models,n.each(r,function(e){t.addItem(e)}),this.refresh()},onEmpty:function(e,t,n){this.loadmore.hide(),this.emptyView.show(),this.errorView.hide()},onError:function(e,t,n){this.loadmore.hide(),this.emptyView.hide(),this.errorView.show()},onLoadMore:function(e){var t=e.currentTarget;this.trigger("loadmore",this,e),this.collection.hasNextPage()?this.collection.getNextPage():(library.Toast("已加载全部",2e3),$(this.loadmore.find(".label")).empty().append("已加载全部"),console.log("all the pages have been loaded"))},callback:null,setCallBack:function(e){this.callback=e},onRowSelect:function(e){var t=e.currentTarget,r=this.el.querySelector("ul").children,i=n.indexOf(r,t),s=this.getChildren()[i];if(!this.editing){var o=e.target.getAttribute("data-action");o?this.trigger("action:"+o,e):(this.trigger("itemSelect",this,s,i,e),this.trigger("select",this,s,i,e))}else s.toogleClass("selected");this.callback&&this.callback({item:s,index:i})},currentItem:null,addItem:function(e){var t;if(e instanceof r.Model)try{if(!this.template){var i=n.keys(e.attributes),s=i[2]||i[1]||i[0],o="<li class='table-view-cell media'><a href='#' class='navigate-right'><div class='media-body'><%="+s+"%></div></a></li>";this.template=n.template(o)}t=this.template(e.toJSON())}catch(u){this.stopListening(),console.log("	模板变量不合法！	\n"+u)}t=$(t),this.currentItem=t,this.mapping[e.cid]=t,this.addChild(t),this.$("ul.table-view").append($(t))},removeItem:function(e){var t=$.isNumberic(e)?e:this.getChildren().indexOf(e);t!=-1&&this.getChildren().splice(t,1)},removeAllItems:function(){n.each(this.getChildren(),function(e){e.remove()}),this.getChildren().splice(0,this.getChildren().length)}})}),define("components/AddressListView",["./ListView"],function(e){return e.extend({type:"AddressListView",getCollection:function(){return this.collection},addItem:function(t){e.prototype.addItem.apply(this,arguments),this.collection.indexOf(t)==this.collection.length-1&&this.itemRenderFinished&&this.itemRenderFinished()}})}),define("components/AddressSelectView",["./ListView"],function(e){return e.extend({type:"AddressListView",getCollection:function(){return this.collection}})}),define("components/AllCustomerService",["./ListView"],function(e){return e.extend({getCollection:function(){return this.collection}})}),define("components/AllOrderListView",["./ListView"],function(e){return e.extend({getCollection:function(){return this.collection}})}),define("components/AreaLoading",["./BaseView"],function(e){return e.extend({type:"AreaLoading",show:function(){this.$el.css({display:"block"})},hide:function(){this.$el.css({display:"none"})},render:function(){return this.$el.addClass("ymall-loading-wrapper"),this.$el.html("<div class='spinner'><div class='spinner-img'></div></div>"),this}})}),define("components/BillEditView",["./BaseView","require"],function(e,t){return e.extend({switchView:null,events:{"click .bill-submit":"submit","click .bill-info-back":"onFinish"},initialize:function(){var e=t("./SwitchView");this.switchView=new e,this.switchView.callBack=this.billEnabled.bind(this)},render:function(){return this.$el.empty(),this.$el.append(library.getTemplate("bill-edit.html")),this.$(".bill-switch-view").append(this.switchView.render().el),this.switchView.setBgBland(),this},setBillInfo:function(e){e?(this.switchView.setStatus(!0),$(".bill-title").val(e.title),$(".bill-content").val(e.content)):this.switchView.setStatus(!1),this.billEnabled(e)},submit:function(e){result={},result.title=$(".bill-title").val(),result.content=$(".bill-content").val();if(!result.title){library.Toast("请填写发票标题",2e3);return}if(!result.content){library.Toast("请填写发票内容",2e3);return}this.onFinish(),this.callBack&&this.callBack(result)},billEnabled:function(e){e?$(".bill").show():$(".bill").hide()},onFinish:function(){this.billEnabled(),this.$el.removeClass("bill-root-view-show")}})}),define("components/Blank_pageView",["./BaseView","require"],function(e,t){return e.extend({type:"blank_page",render:function(){var e='<div class="blank_div" style="display: none"><div class="blank_div_ico  icomoon-without"></div><div class="blank_div_label">啥都木有</div></div>';return this.$el.html(e),this}})}),define("models/StaticCollection",["backbone"],function(e){return e.Collection.extend({sync:function(){this.reset(this.models)},hasNextPage:function(){return!1}})}),define("models/BrandsModel",["./StaticCollection"],function(e){return e.extend({})}),define("components/BrandGrid",["./BaseView","../models/BrandsModel"],function(e,t){return e.extend({type:"BrandGrid",brandsModel:new t,template:null,data:[],initialize:function(){this.listenTo(this.brandsModel,"reset",this.onReset),this.brandsModel.fetch()},render:function(){return this},onRender:function(){},onReset:function(e,t){var n=this,r=[];for(var i=0;i<e.models.length;){var s=i+3;s<e.models.length?r.push(e.models.slice(i,i+3)):r.push(e.models.slice(i,e.models.length)),i=s}var o="";r.forEach(function(e,t){var n="";t>0?e.forEach(function(e,t){t==1?n+='<div data-id="'+e.get("id")+'" class=" condition-row-mid condition-item condition-item-mid" > <img src="'+e.get("image")+'"> </div>':n+='<div data-id="'+e.get("id")+'" class=" condition-row-mid condition-item" > <img src="'+e.get("image")+'"> </div>'}):e.forEach(function(e,t){t==1?n+='<div data-id="'+e.get("id")+'" class="condition-item condition-item-mid" > <img src="'+e.get("image")+'"> </div>':n+='<div data-id="'+e.get("id")+'" class=" condition-item" > <img src="'+e.get("image")+'"> </div>'}),o+='<div class="condition-row " >'+n+"</div>"});var u='<div class="filtercondition-title"> <b class="filtercondition-title-icon">|</b><span>品牌</span> </div> <div class="condition-wrap"> '+o+"</div>";this.$el.html(u),this.$el.find(".condition-wrap").on("click",".condition-item",this.brandSelect.bind(this))},getValue:function(){return this.data},brandSelect:function(e){var t=this,n=this.data.find(function(t){if(this.$(e.currentTarget).attr("data-id")==t)return t});n?(this.data.find(function(n,r,i){this.$(e.currentTarget).attr("data-id")==n&&t.data.splice(r,1)}),this.$(e.currentTarget).removeClass("condition-item-selected")):(this.$(e.currentTarget).addClass("condition-item-selected"),this.data.push(this.$(e.currentTarget).attr("data-id"))),console.log(this.data)},onRemove:function(){e.prototype.onRemove.apply(this),this.$(".condition-wrap").undelegate("click",".condition-item",this.brandSelect.bind(this))}})}),define("components/BranddetailListFilter",["./BaseView"],function(e){return e.extend({type:"ProductListFilter",render:function(){var e=library.getTemplate("branddetail-list-filter.html");return this.$el.append(e),this}})}),define("components/BussinessCategory",["./BaseView","backbone"],function(e,t){return e.extend({type:"BussinessCategory",jsonData:[{id:"1",name:"aaa"},{id:"1",name:"bbb"}],render:function(){var e=this;return this.$el.empty(),e.$el.find(".business-goods-wrap").empty(),this.$el.html(' <div class="business-goods-filter"> <header> <div class="headerbox"> <div  id="category-business-back" class="business-back left-right nav-left"> <span class="icon icomoon-back"></span> </div> <div class="mid business-title" >宝贝分类 </div> </div> </header> <div class="business-contentwrap" > <ul class="business-goods-wrap"> </ul> </div> </div> '),e.$el.find(".business-goods-wrap").append(' <li business-category-index=-1 class="icomoon-more"> <span>全部商品</span> </li>'),this.jsonData.forEach(function(t,n){e.$el.find(".business-goods-wrap").append(" <li business-category-index="+t.id+' class="icomoon-more"> <span>'+t.name+"</span> </li>")}),this.$("#category-business-back").click(function(){$("#business-main").css({display:"block"}),e.$el.removeClass("business-category-view-show")}),e.$el.find(".business-goods-wrap li").click(function(t){var n=$(t.currentTarget).attr("business-category-index");e.$el.removeClass("business-category-view-show"),e.trigger("bussiness-category",n)}),this}})}),define("components/CartEditorView",["./BaseView","require"],function(e,t){return e.extend({type:"CartEditorView",events:{"click .goods-editor-btn":"submit","click .cart-editor-view-corver":"hide","click .cart-editor-view-close":"hide"},callback:null,goodsNumber:"1",render:function(){var e=library.getTemplate("cart-editor-view.html");return this.$el.append(e),this},hide:function(){this.$(".cart-editor-view").removeClass("cart-editor-view-show"),this.$(".cart-editor-view-corver").hide(),this.callback&&this.callback()},show:function(e,t){this.callback=t,this.$(".cart-editor-view").addClass("cart-editor-view-show"),this.$(".cart-editor-view-corver").show(),this.setSpecInfo(e)},curModifyGoodsInfo:{},curMidifyGoodsId:null,wantToModifyGoodsId:null,setSpecInfo:function(e){var t=this.$(".spec-part1-content");t.empty();var n=this;this.goodsNumber=e.attributes.number;var r=e.attributes.productSpec,i=r.specName,s=$("<div></div>"),o=r.specValues;this.curModifyGoodsInfo=e.attributes,this.curMidifyGoodsId=e.attributes.productId;var u,a;for(var f=0,l=o.length;f<l;f++){var c=o[f],h=c.specParamValues,p=$("<span class='spec-part-item'>"+c.specParamName+"</span>");for(var d=0,v=h.length;d<v;d++)h[d].goodsId==e.attributes.productId&&(u=p,a=h);(function(e,t){e.bind("click",function(){n.firstLeveiItemClick(e,t,"")})})(p,h),s.append(p)}this.secondLevelWrappe=$("<div></div>"),t.append("<div>"+i+"</div>").append(s).append(this.secondLevelWrappe),this.firstLeveiItemClick(u,a,e.attributes.productId)},selectedFirstLevelItem:null,firstLeveiItemClick:function(e,t,n){var r=this;this.selectedFirstLevelItem&&this.selectedFirstLevelItem.removeClass("spec-part-item-selected"),this.secondLevelWrappe.html(""),this.selectedFirstLevelItem=e,e.addClass("spec-part-item-selected");var i,s;for(var o=0,u=t.length;o<u;o++){var a=t[o];if(a.specValue==""){this.$(".goods-img").attr("src",a.specImage),this.$(".goods-price").html("￥"+a.specPrice),this.$(".goods-stack").html("库存"+a.specStack+"件"),this.wantToModifyGoodsId=a.goodsId;continue}var f=$("<span class='spec-part-item'>"+a.specValue+"</span>");this.secondLevelWrappe.append(f),n==""&&o==0?(i=f,s=a):n==a.goodsId&&(i=f,s=a),function(e,t){e.bind("click",function(){r.secondItemClick(e,t)})}(f,a)}this.secondItemClick(i,s)},selectedSecondItem:null,secondItemClick:function(e,t){if(!e)return;this.wantToModifyGoodsId=t.goodsId,this.$(".goods-img").attr("src",t.specImage),this.selectedSecondItem&&this.selectedSecondItem.removeClass("spec-part-item-selected"),this.selectedSecondItem=e,this.selectedSecondItem.addClass("spec-part-item-selected")},createSpecItem:function(e,t){var n=$("<span class='spec-part-item'></span>");return t&&n.addClass("spec-part-item-selected"),n.text(e.name+""),n.attr("data-index",e.id),n},specChanged:function(e){var t=this.$(e.target).parent(),n=t.children();for(var r=0;r<n.length;r++)$(n[r]).removeClass("spec-part-item-selected");this.$(e.target).addClass("spec-part-item-selected"),t.hasClass("spec-part1-content")},submit:function(e){var n=t("../models/BaseModel"),r=new n;if(this.wantToModifyGoodsId==this.curMidifyGoodsId){this.hide();return}var i=window.application.getUserInfo(),s=i.userid,o=this;r.loadData({path:"/modifyCart",type:"POST",needReset:!1,data:{userId:s,cartId:this.curModifyGoodsInfo.cartId,productId:this.wantToModifyGoodsId,number:this.goodsNumber},success:function(){var e=o.pageview.findComponent("shopingcartlistview").collection;e.ajaxOptions={path:"/getCartList",type:"POST",data:{userId:i.userid},showLoading:!0,needReset:!0,success:o.getListSuceess.bind(o),error:o.getListError.bind(o)},e.loadData()},error:function(){}}),this.hide()},getListSuceess:function(){$(".shopingcart-goods-edit").show(),$(".shopingcart-goods-details-info-show").hide(),$(".shopingcart-manage").show(),$(".shopingcart-footer").hide()},getListError:function(){}})}),define("models/CommentCollection",["./StaticCollection"],function(e){return e.extend({demoData:{countInfo:{allCount:"25",goodCount:"20",commonCount:"4",badCount:"1"},comments:[{userId:"001",userName:"长者",userHead:"http://img.xiami.net/images/album/img86/1436245386/21002843221456807184_2.jpg",comment:"你问我资不资瓷？我说资瓷，我就明确告诉你，我感觉你们商家也要学习，你们非常熟悉西方这一套的，你们毕竟是Too Young，明白这意思吗？",grade:"1",date:"1999-05-20"},{userId:"002",userName:"本宝宝萌吗",userHead:"http://tp4.sinaimg.cn/3220044655/180/5751865112/0",comment:"这玩意儿好用啊，这玩意简直6到飞起啊，下次一定还来",grade:"5",date:"2016-03-08"},{userId:"003",userName:"本宝宝收到了惊吓",userHead:"http://tp4.sinaimg.cn/1837029131/180/5742660757/1",comment:"服务好！礼品还真是漂亮，超值！但，有一颗小珠有些瑕疵，这是难免的。尺寸比想象中的要小。总体还不错！",grade:"4",date:"2016-03-08"},{userId:"004",userName:"蛤蛤笑",userHead:"http://tp4.sinaimg.cn/1837029131/180/5742660757/1",comment:"美国那个华来士比你们高不知道哪去了 我和他谈笑风生。你们不就是想弄个大新闻 把我批判一番?",grade:"2",date:"2016-03-08"},{userId:"005",userName:"怪蜀黍",userHead:"http://tp1.sinaimg.cn/2397677580/180/5747756327/0",comment:"闪现空大，塔下怒送人头，吃完这家的肉松饼，麻麻再也不用担心我打不赢人机了，yeah~",grade:"5",date:"2016-03-08"},{userId:"006",userName:"夏天",userHead:"http://tp4.sinaimg.cn/1837029131/180/5742660757/1",comment:"这玩意儿好用啊，这玩意简直6到飞起啊，下次一定还来",grade:"2",date:"2016-03-08"},{userId:"007",userName:"夏天",userHead:"http://tp4.sinaimg.cn/1837029131/180/5742660757/1",comment:"这玩意儿好用啊，这玩意简直6到飞起啊，下次一定还来",grade:"5",date:"2016-03-08"},{userId:"008",userName:"夏天",userHead:"http://tp4.sinaimg.cn/1837029131/180/5742660757/1",comment:"这玩意儿好用啊，这玩意简直6到飞起啊，下次一定还来",grade:"4",date:"2016-03-08"},{userId:"009",userName:"夏天",userHead:"http://tp4.sinaimg.cn/1837029131/180/5742660757/1",comment:"这玩意儿好用啊，这玩意简直6到飞起啊，下次一定还来",grade:"1",date:"2016-03-08"},{userId:"010",userName:"夏天",userHead:"http://tp4.sinaimg.cn/1837029131/180/5742660757/1",comment:"这玩意儿好用啊，这玩意简直6到飞起啊，下次一定还来",grade:"2",date:"2016-03-08"}]},initialize:function(){this.reset(this.demoData)}})}),define("components/CommentListView",["./BaseView","../models/CommentCollection","underscore"],function(e,t,n){return e.extend({CommentCollection:new t,commentData:null,events:{},initialize:function(){this.commentData=this.CommentCollection.toJSON()},render:function(){var e=library.getTemplate("goodsCommentsListView.html"),t=this.commentData[0].comments,n=['<div class="theme-comment">','<ul class="comment-list">',"</ul>","</div>"].join(""),r=$(n);for(var i=0;i<t.length;i++){var s=$(e(t[i]));r.find(".comment-list").append(s)}return this.$el.append(r),this}})}),define("components/CouponView",["./ListView"],function(e){return e.extend({type:"CouponView",getCollection:function(){return this.collection}})}),define("components/CreateCommentListView",["./ListView"],function(e){return e.extend({})}),define("components/CreditCardView",["./ListView"],function(e){return e.extend({type:"CreditCardView",getCollection:function(){return this.collection}})}),define("models/AjaxCollection",["./StaticCollection"],function(e){return e.extend({url:function(){return window.app.api},allDataLoaded:!1,ajaxOptions:{},isLoading:!1,loadData:function(e){isLoading=!0,e=e||this.ajaxOptions,this.ajaxOptions=e;var t=this.url;t&&typeof t!="string"&&(t=t());var n=e.url||t+e.path,r=e.data||{};e.showLoading&&library.LoadingBar(e.loadingMessage);var i=this;console.log(e);var s=function(t){isLoading=!1,console.log(t),e.showLoading&&library.DismissLoadingBar();if(t.status=="0"||t.status==0){if(e.data&&e.data.size){var n=e.data.index,r=e.data.size;t.data.pageCount?i.allDataLoaded=t.data.pageCount==n:t.data.length<r&&(i.allDataLoaded=!0)}e.needReset&&(t.data&&t.data.list?e.data.index&&e.data.index>1?i.add(t?t.data.list:[]):i.reset(t?t.data.list:[]):e.data.index&&e.data.index>1?i.add(t?t.data:[]):i.reset(t?t.data:[])),e.success&&e.success(t)}else e.error&&e.error(t)},o=function(t){isLoading=!1,e.showLoading&&library.DismissLoadingBar(),i.allDataLoaded=!0,e.error&&e.error(t)};application.ajax(e.type,n,r,s,o)},hasNextPage:function(){return!this.allDataLoaded},getNextPage:function(){this.ajaxOptions.data.index++,console.log(this.ajaxOptions.data),this.loadData(this.ajaxOptions)}})}),define("models/CreditFilterCondition",["./AjaxCollection"],function(e){return e.extend({})}),define("components/CreditFilter",["./BaseView","require","../models/CreditFilterCondition"],function(e,t,n){return e.extend({type:"CreditFilter",initialize:function(){},curShow:"",leftValue:{},rightValue:{},firstLoadListView:function(e,t){this.leftValue=e||{name:"商城",id:""},this.rightValue=t||{name:"全部分类",id:""},this.shoptitle.html(e.name),this.categorytitle.html(t.name),this.pageview.refreshList(e,t)},onRender:function(){var e=new n;e.loadData(this.getFilterCondition())},setLeftValue:function(e){this.leftValue=e,this.shoptitle.html(e.name),this.hide(),this.pageview.refreshList(e,this.rightValue)},setRightValue:function(e){this.rightValue=e,this.categorytitle.html(e.name),this.hide(),this.pageview.refreshList(this.leftValue,e)},render:function(){var e=this;this.paddingTopView=$("<div class='padding-top-view'></div>"),this.filterAreaWrapper=$("<div class='cdt-fliter-area-wrapper'></div>");var t=$("<div class='cdt-fliter-area cdt-fliter-area-left'></div>");this.shoptitle=$("<span></span>"),t.append(this.shoptitle);var n=$("<div class='cdt-fliter-area'></div>");return this.categorytitle=$("<span></span>"),n.append(this.categorytitle).append($("<span class='cdt-fliter-icon icomoon-pullup'></span>")),this.leftDetailAreaWrapper=$("<div class='cdt-filter-detail'></div>"),this.leftDetailArea=$("<div class=' cdt-filter-left-detail'></div>"),this.rightDetailAreaWrapper=$("<div class='cdt-filter-detail'></div>"),this.rightDetailArea=$("<div class='cdt-filter-right-detail'></div>"),this.leftDetailAreaWrapper.append(this.leftDetailArea),this.rightDetailAreaWrapper.append(this.rightDetailArea),this.bk=$("<div class='cdt-fliter-bk'></div>"),this.filterAreaWrapper.append(t).append(n),n.bind("click",function(){e.paddingTopView.show();if(e.curShow=="right"){e.hide(),n.removeClass("cdt-fliter-item-selected");return}t.removeClass("cdt-fliter-item-selected"),n.addClass("cdt-fliter-item-selected"),e.curShow="right",e.showRight()}),this.bk.bind("click",function(){e.hide()}),this.paddingTopView.bind("click",function(){e.hide()}),this.paddingTopView.hide(),this.$el.append(this.paddingTopView).append(this.filterAreaWrapper).append(this.bk).append(this.leftDetailAreaWrapper).append(this.rightDetailAreaWrapper),this},hasBindData:!1,getFilterCondition:function(){var e={path:"/getCreditFilterCondition",type:"POST",data:{},success:this.onGetConditionSuccess.bind(this),error:this.onGetConditionError.bind(this)};return e},onGetConditionSuccess:function(e){console.log("aaaawwwa"+JSON.stringify(e)),this.initData(e)},onGetConditionError:function(){},initData:function(e){var t=this;e=e.data||{};if(this.hasBindData)return;var n=e.channelList||[];console.log(n);var r=[{name:"商城",id:""}];n[0]&&this.$el.find(".cdt-fliter-area-left span").text(n[0].name);var i=e.categoryList||[],s=[{name:"全部分类",id:""}];i=s.concat(i);for(var o=0,u=i.length;o<u;o++){var a=i[o],f=$("<div class='cdt-filter-item'>"+a.name+"</div>");(function(e,t,n){e.bind("click",function(e){n.setRightValue(t)})})(f,a,this),this.rightDetailArea.append(f)}this.firstLoadListView(n[0]||{name:"商城",id:""},{name:"全部分类",id:""}),this.rightDetailAreaWrapper.append($("<div class='cdt-filter-bottom'></div>")),this.leftDetailAreaWrapper.append($("<div class='cdt-filter-bottom'></div>")),this.hasBindData=!0},show:function(){this.$el.addClass("cdt-fliter-show"),this.filterAreaWrapper.css({"z-index":10}),this.bk.css({display:"block"}),this.paddingTopView.show()},hideLeft:function(){this.leftDetailAreaWrapper.css({display:"none"})},hideRight:function(){this.rightDetailAreaWrapper.css({display:"none"})},showLeft:function(){this.show(),this.hideRight(),this.leftDetailAreaWrapper.css({display:"block"})},showRight:function(){this.show(),this.hideLeft(),this.rightDetailAreaWrapper.css({display:"block"})},hide:function(){this.filterAreaWrapper.css({"z-index":1}),this.curShow="",this.hideLeft(),this.hideRight(),this.$el.removeClass("cdt-fliter-show"),document.body.scrollTop=document.getElementById("cdt-top-view").offsetHeight,this.bk.css({display:"none"}),this.paddingTopView.hide()}})}),define("components/Creditlistingerror",["./ListView"],function(e){return e.extend({})}),define("components/Detailslist",["./ListView"],function(e){return e.extend({jsonData:{shopName:"",shopIcon:"",shopDec:"",companyName:"",companyArea:"",companyAddr:"",contact:"",phone:"",feature:""},type:"Detailslist",render:function(){for(var e in this.jsonData)this.jsonData[e]||(this.jsonData[e]="这家伙很懒什么都没留下");this.$el.empty();var t='<header><div class="headerbox"><div  id="d-business-back" class="business-back left-right nav-left"><span class="icon icomoon-back"></span></div><div class="mid business-title" >店铺详情</div></div></header>',n="<a href='tel:"+this.jsonData.phone+"'><span class='details-list-li-icon icomoon-phone'></span></a>";return t+='<div class="details-header">',t+='<img class="details-icon" src="'+this.jsonData.shopIcon+'" alt="'+this.jsonData.shopName+'"/>',t+='<span class="details-name">'+this.jsonData.shopName+"</span>",t+='<div style="clear:both"></div></div><div class="details-list"><ul>',t+="<li class='details-list-li'><span class='details-list-li-left'>公司名称</span><span class='details-list-li-right'>"+this.jsonData.companyName+"</span></li>",t+="<li class='details-list-li'><span class='details-list-li-left'>所在地区</span><span class='details-list-li-right'>"+this.jsonData.companyArea+"</span></li>",t+="<li class='details-list-li'><span class='details-list-li-left'>详细地址</span><span class='details-list-li-right'>"+this.jsonData.companyAddr+"</span></li>",t+="<li class='details-list-li'><span class='details-list-li-left'>联系人</span><span class='details-list-li-right'>"+this.jsonData.contact+"</span></li>",t+="<li class='details-list-li'><span class='details-list-li-left'>联系电话</span><span class='details-list-li-right'>"+this.jsonData.phone+"</span>"+n+"</li>",t+="</ul></div>",this.$el.html(t),this.$("#d-business-back").click(function(){$(".business-detailslist-view").removeClass("business-detailslist-view-show")}),this},getCollection:function(){return this.collection}})}),define("models/BaseModel",["backbone","underscore"],function(e,t){return e.Model.extend({url:function(){return window.app?window.app.api:""},idAttribute:"_id",initialize:function(){var n=e.sync;e.sync=function(e,r,i){e=="update"&&(i.contentType="application/json",i.data=JSON.stringify(t.omit(r.toJSON(),"_id"))),n(e,r,i)}},ajaxOptions:{},loadData:function(e){e=e||this.ajaxOptions,this.ajaxOptions=e;var t=this.url;t&&typeof t!="string"&&(t=t());var n=e.url||t+e.path,r=e.data||{};e.showLoading&&library.LoadingBar(e.loadingMessage);var i=this,s=function(t){console.log(t),e.showLoading&&library.DismissLoadingBar(),e.needReset&&i.set(t?t.data:{}),e.success&&e.success(t)},o=function(t){e.showLoading&&library.DismissLoadingBar(),e.error&&e.error(t)};application.ajax(e.type,n,r,s,o)}})}),define("models/AddressDetailModel",["./BaseModel"],function(e){return e.extend({defaults:{receiver:"",receiverPhone:"",receiverDetailAddress:"",receiverProvince:"",receiverCity:"",receiverRegion:"",isdefault:!1}})}),function(e){typeof define=="function"&&define.amd?define("libs/cityselector/jquery.cxselect",["jquery"],e):e(jQuery)}(function(e){e.cxSelect=function(t){var n,t,r={dom:{},api:{}},i=function(e){return e&&(typeof HTMLElement=="function"||typeof HTMLElement=="object")&&e instanceof HTMLElement?!0:e&&e.nodeType&&e.nodeType===1?!0:!1},s=function(e){return e&&e.length&&(typeof jQuery=="function"||typeof jQuery=="object")&&e instanceof jQuery?!0:!1},o=function(e){return Array.isArray?Array.isArray(e):Object.prototype.toString.call(e)==="[object Array]"};for(var u=0,a=arguments.length;u<a;u++)s(arguments[u])?n=arguments[u]:i(arguments[u])?n=e(arguments[u]):typeof arguments[u]=="object"&&(t=arguments[u]);if(n.length<1)return;return r.init=function(){var r=this;r.dom.box=n,r.settings=e.extend({},e.cxSelect.defaults,t,{url:r.dom.box.data("url"),nodata:r.dom.box.data("nodata"),required:r.dom.box.data("required"),firstTitle:r.dom.box.data("firstTitle"),firstValue:r.dom.box.data("firstValue")});if(!r.settings.selects.length)return;r.selectArray=[],r.selectSum=r.settings.selects.length;for(var i=0;i<r.selectSum;i++){if(!r.dom.box.find("select."+r.settings.selects[i]))break;r.selectArray.push(r.dom.box.find("select."+r.settings.selects[i]))}r.selectSum=r.selectArray.length;if(!r.selectSum)return;typeof r.settings.url=="string"?e.getJSON(r.settings.url,function(e){r.dataJson=e,r.buildContent()}):typeof r.settings.url=="object"&&(r.dataJson=r.settings.url,r.buildContent())},r.getIndex=function(e){return this.settings.required?e:e-1},r.getNewOptions=function(t,n){if(!t)return;var r=this.settings.firstTitle,i=this.settings.firstValue,s=t.data("firstTitle"),o=t.data("firstValue"),u="";if(typeof s=="string"||typeof s=="number"||typeof s=="boolean")r=s.toString();if(typeof o=="string"||typeof o=="number"||typeof o=="boolean")i=o.toString();return this.settings.required||(u='<option value="'+i+'">'+r+"</option>"),e.each(n,function(e,t){typeof t.v=="string"||typeof t.v=="number"||typeof t.v=="boolean"?u+='<option value="'+t.v+'">'+t.n+"</option>":u+='<option value="'+t.n+'">'+t.n+"</option>"}),u},r.buildContent=function(){var e=this;e.dom.box.on("change","select",function(){e.selectChange(this.className)});var t=e.getNewOptions(e.selectArray[0],e.dataJson);e.selectArray[0].html(t).prop("disabled",!1).trigger("change"),e.setDefaultValue()},r.setDefaultValue=function(e){e=e||0;var t=this,n;if(e>=t.selectSum||!t.selectArray[e])return;n=t.selectArray[e].data("value");if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")n=n.toString(),setTimeout(function(){t.selectArray[e].val(n).trigger("change"),e++,t.setDefaultValue(e)},1)},r.selectChange=function(e){e=e.replace(/ /g,","),e=","+e+",";var t=[],n,r,i,s;for(var u=0;u<this.selectSum;u++)t.push(this.getIndex(this.selectArray[u].get(0).selectedIndex)),typeof n=="number"&&u>n&&(this.selectArray[u].empty().prop("disabled",!0),this.settings.nodata==="none"?this.selectArray[u].css("display","none"):this.settings.nodata==="hidden"&&this.selectArray[u].css("visibility","hidden")),e.indexOf(","+this.settings.selects[u]+",")>-1&&(n=u);r=n+1,i=this.dataJson;for(var u=0;u<r;u++){if(typeof i[t[u]]=="undefined"||o(i[t[u]].s)===!1||!i[t[u]].s.length)return;i=i[t[u]].s}this.selectArray[r]&&(s=this.getNewOptions(this.selectArray[r],i),this.selectArray[r].html(s).prop("disabled",!1).css({display:"",visibility:""}).trigger("change"))},r.init(),this},e.cxSelect.defaults={selects:[],url:null,nodata:null,required:!1,firstTitle:"请选择",firstValue:"0"},e.fn.cxSelect=function(t,n){return this.each(function(r){e.cxSelect(this,t,n)}),this}}),define("components/EditAddressView",["./BaseView","../models/AddressDetailModel","require","../libs/cityselector/jquery.cxselect","../loader"],function(e,t,n,r,i){return e.extend({defaults:{pageStatus:"add"},_this:null,addressInfo:null,events:{"click .goback":"goback","click .address-editBtn":"saveClick"},initialize:function(){_this=this},render:function(){return i.getTemplate("addressEditView.html").then(function(e){var n=this;window.setTimeout(function(){n.options.pageStatus!="add"?(n.addressInfo=new t(n.options.addressInfo),n.onDetailSuccess(e,n.addressInfo.toJSON())):(n.addressInfo=new t({receiverAddr:""}),n.onDetailAddSuccess(e(n.addressInfo.toJSON())))},11)}.bind(this)).catch(function(){this.$el.text("Failed to load fragment: "+arguments)}.bind(this)),this},onDetailSuccess:function(e,t){this.$el.empty().append(e(t)),this.onEditAddr(t)},onDetailAddSuccess:function(e){this.$el.empty().append(e),this.onRender()},onDetailError:function(){},onEditAddr:function(e){var t=this;$(".address-edit-info").show(),t.sendData(window.app.api+"/my-address/getProvinceList",{},function(t){if(t.status=="0"){var n="";for(var r=0;r<t.data.length;r++)n+="<option value="+t.data[r].id+">"+t.data[r].name+"</option>";$("#city select[name='address.idP']").append(n),$("#city select[name='address.idP']").val(e.receiverProvinceId),$("#city select[name='address.idP']").trigger("change",[!0])}}),$("#city select[name='address.idP']").bind("change",function(n,r){t.sendData(window.app.api+"/my-address/getCityList",{pid:n.target.value},function(t){if(t.status=="0"){var n="<option value=-1>请选择</option>",i="<option value=-1>请选择</option>";for(var s=0;s<t.data.length;s++)i+="<option value="+t.data[s].id+">"+t.data[s].name+"</option>";$("#city select[name='address.idCity']").empty(),$("#city select[name='address.idArea']").empty(),$("#city select[name='address.idArea']").append(n),$("#city select[name='address.idCity']").append(i),r&&($("#city select[name='address.idCity']").val(e.receiverCityId),$("#city select[name='address.idCity']").trigger("change",[!0]))}})}),$("#city select[name='address.idCity']").bind("change",function(n,r){t.sendData(window.app.api+"/my-address/getCityList",{pid:n.target.value},function(t){if(t.status=="0"){var n="<option value=-1>请选择</option>";for(var i=0;i<t.data.length;i++)n+="<option value="+t.data[i].id+">"+t.data[i].name+"</option>";$("#city select[name='address.idArea']").empty(),$("#city select[name='address.idArea']").append(n),r&&$("#city select[name='address.idArea']").val(e.receiverRegionId)}})})},onRender:function(){var e=this;$(".address-edit-info").show(),e.sendData(window.app.api+"/my-address/getProvinceList",{},function(e){if(e.status=="0"){var t="";for(var n=0;n<e.data.length;n++)t+="<option value="+e.data[n].id+">"+e.data[n].name+"</option>";$("#city select[name='address.idP']").append(t)}}),$("#city select[name='address.idP']").bind("change",function(t){e.sendData(window.app.api+"/my-address/getCityList",{pid:t.target.value},function(e){if(e.status=="0"){var t="<option value=-1>请选择</option>",n="<option value=-1>请选择</option>";for(var r=0;r<e.data.length;r++)n+="<option value="+e.data[r].id+">"+e.data[r].name+"</option>";$("#city select[name='address.idCity']").empty(),$("#city select[name='address.idArea']").empty(),$("#city select[name='address.idArea']").append(t),$("#city select[name='address.idCity']").append(n)}})}),$("#city select[name='address.idCity']").bind("change",function(t){e.sendData(window.app.api+"/my-address/getCityList",{pid:t.target.value},function(e){console.log(e);if(e.status=="0"){var t="<option value=-1>请选择</option>";for(var n=0;n<e.data.length;n++)t+="<option value="+e.data[n].id+">"+e.data[n].name+"</option>";$("#city select[name='address.idArea']").empty(),$("#city select[name='address.idArea']").append(t)}})})},addressModel:null,getAddressModel:function(){if(!this.addressModel){var e=n("../models/BaseModel");this.addressModel=new e}return this.addressModel},sendData:function(e,t,n){var r=this.getAddressModel();r.ajaxOptions={url:e,type:"POST",data:t,success:n,error:function(){}},r.loadData()},vertify:function(e){if(e&&e!=-1)return e;library.Toast("所有信息都必须填写完整哦");return},saveClick:function(e){var t=this,n=window.application.getUserInfo();if(!n){library.Toast("您尚未登录");return}var r={userId:n.userid,receiver:this.$el.find(".aName").val(),receiverAddr:this.$el.find(".aDetail").val(),receiverPhone:this.$el.find(".aLink").val(),receiverRegion:this.$el.find(".area").val(),receiverProvince:this.$el.find(".province").val(),receiverCity:this.$el.find(".city").val()};for(var i in r){if(i=="receiverPhone"&&!/^1[3|4|5|7|8][0-9]\d{4,8}$/.test(r[i])){library.Toast("不是完整的11位手机号或者正确的手机号前七位");return}if(!r[i]){library.Toast("所有信息必须填写完整");return}}var s=this.getAddressModel();this.options.pageStatus=="edit"?(r.addressId=this.addressInfo.get("addressId"),s.ajaxOptions={url:window.app.api+"/my-address/edit",data:r,success:this.createAddressSuccess.bind(this),error:function(){}}):s.ajaxOptions={url:window.app.api+"/my-address/add",data:r,success:this.createAddressSuccess.bind(this),error:function(){}},this.$el.removeClass("addressEdit-view-show"),s.loadData()},createAddressSuccess:function(){this.$el.removeClass("addressEdit-view-show"),this.options.callback&&this.options.callback("save")},createAddressError:function(){library.Toast("保存失败，服务器在开小差",1e3)},goback:function(e){this.$el.removeClass("addressEdit-view-show")},remove:function(){Backbone.View.prototype.remove.apply(this,arguments)}})}),define("components/EnsureOrder",["./BaseView"],function(e){return e.extend({events:{"click .ensure-order-back":"goback","click .order-comment":"addComment"},initialize:function(){},render:function(){this.$el.empty();var e=library.getTemplate("ensure-order.html");return this.$el.append(e),this},orderInfo:null,callback:null,setData:function(e,t){this.orderInfo=e,this.$("#order_product_pic").attr("src",e.imgurl),this.callback=t},addComment:function(){this.goback()},goback:function(e){this.remove(),this.callback&&this.callback()},remove:function(){Backbone.View.prototype.remove.apply(this,arguments)}})}),define("components/EvaluatePushView",["./ListView"],function(e){return e.extend({type:"EvaluatePushView",getCollection:function(){return this.collection}})}),define("models/CategoryCollection",["./AjaxCollection"],function(e){return e.extend({})}),define("components/FilterControlView",["require","./BaseView","../models/BrandsModel","../models/CategoryCollection","../loader"],function(e,t,n,r,i){return t.extend({type:"FilterControlView",brandModel:new n,categoryColletion:new r,data:{brand:[],price:{},category:[]},filterModel:null,initialize:function(){var t=e("../models/BaseModel");this.filterModel=new t;var n=window.app.api+"/productlist-filterargs",r={};this.filterModel.ajaxOptions={url:n,data:r,needReset:!0,success:this.onSuccess.bind(this),error:this.onError.bind(this)}},oncategoryColletionReset:function(e,t){var n=this,r=[];for(var i=0;i<e.models.length;){var s=i+3;s<e.models.length?r.push(e.models.slice(i,i+3)):r.push(e.models.slice(i,e.models.length)),i=s}var o="";r.forEach(function(e,t){var n="";e.forEach(function(e,t){n+='<div category-id="'+e.get("id")+'" class="filtercondition-category-item" > <div>'+e.get("text")+"</div> </div>"}),o+='<div class="filtercondition-category-row " >'+n+"</div>"}),this.$(".filtercondition-category").empty(),this.$(".filtercondition-category").append(o)},onReset:function(e,t){var n=this,r=[];for(var i=0;i<e.models.length;){var s=i+3;s<e.models.length?r.push(e.models.slice(i,i+3)):r.push(e.models.slice(i,e.models.length)),i=s}var o="";r.forEach(function(e,t){var n="";t>0?e.forEach(function(e,t){t==1?n+='<div data-id="'+e.get("id")+'" class="condition-row-mid condition-item condition-item-mid" > <img src="'+e.get("image")+'"> </div>':n+='<div data-id="'+e.get("id")+'" class="condition-row-mid condition-item" > <img src="'+e.get("image")+'"> </div>'}):e.forEach(function(e,t){t==1?n+='<div data-id="'+e.get("id")+'" class="condition-item condition-item-mid" > <img src="'+e.get("image")+'"> </div>':n+='<div data-id="'+e.get("id")+'" class="condition-item" > <img src="'+e.get("image")+'"> </div>'}),o+='<div class="condition-row " >'+n+"</div>"}),this.$(".condition-wrap").empty(),this.$(".condition-wrap").append(o),this.$(".condition-item").on("click",this.brandSelect.bind(this))},render:function(){return t.prototype.render.apply(this,arguments),this},filter:function(e){this.$(".goodsfilter .typeselected").removeClass("typeselected"),this.$(e.currentTarget).addClass("typeselected"),this.$(e.currentTarget).attr("index")==3?(this.$(".goodswrap").css({display:"none"}),this.$(".filtercondition ").css({display:"block"})):(this.$(".goodswrap").css({display:"block"}),this.$(".filtercondition ").css({display:"none"}))},brandSelect:function(e){var t=this.$(e.currentTarget).attr("data-id"),n=this.data.brand.indexOf(t);if(n>-1)var r=t;r?(this.data.brand.splice(n,1),this.$(e.currentTarget).removeClass("condition-item-selected")):(this.$(e.currentTarget).addClass("condition-item-selected"),this.data.brand.push(this.$(e.currentTarget).attr("data-id")))},comfirm:function(){this.trigger("filterResult",this)},categorySelect:function(e){e.preventDefault();var t=this,n=this.data.category.find(function(t){if(this.$(e.currentTarget).attr("category-id")==t)return t});return n?(this.data.category.find(function(n,r,i){this.$(e.currentTarget).attr("category-id")==n&&t.data.category.splice(r,1)}),this.$(e.currentTarget).find("div").removeClass("filtercondition-category-selected")):(this.$(e.currentTarget).find("div").addClass("filtercondition-category-selected"),this.data.category.push(this.$(e.currentTarget).attr("category-id"))),!1},inputPrice:function(e){this.$(e.currentTarget).attr("inputprice")=="min"?this.data.price.min=this.$(e.currentTarget).val():this.data.price.max=this.$(e.currentTarget).val()},onRender:function(){this.$el.find(".bottom-button").bind("click",this.comfirm.bind(this)),this.$(".filtercondition-category").on("click",".filtercondition-category-item",this.categorySelect.bind(this)),this.$(".filtercondition-priceinput").on("change","input",this.inputPrice.bind(this)),this.listenTo(this.brandModel,"reset",this.onReset),this.listenTo(this.categoryColletion,"reset",this.oncategoryColletionReset)},initFilterData:function(e){this.filterModel.ajaxOptions.data.category=e,this.filterModel.loadData()},onSuccess:function(e){e&&e.status=="ok"&&(this.categoryColletion.reset(e.data.filterCategory),this.brandModel.reset(e.data.filterBrand))},onError:function(e){console.log(e)}})}),define("components/GoodsCollectorView",["./ListView"],function(e){return e.extend({type:"GoodsCollectorView",getCollection:function(){return this.collection}})}),define("components/GroupBuyListView",["./ListView"],function(e){return e.extend({})}),define("components/HistoryView",["./ListView"],function(e){return e.extend({type:"HistoryView",getCollection:function(){return this.collection}})}),define("components/HomePushBrandView",["./ListView"],function(e){return e.extend({type:"HomePushBrandView",getCollection:function(){return this.collection}})}),define("components/HomePushShopView",["./ListView","../models/AjaxCollection"],function(e,t){return e.extend({type:"HomePushView",getNextPage:function(){var e=this.getCollection();e.ajaxOptions={url:window.app.api+"/getShop",data:{},type:"GET",datatype:"json",success:function(t){t.status=="ok"?(e.reset(null),e.reset(t.data)):console.log("获取数据失败")},error:function(){}},e.loadData()}})}),define("components/HomePushView",["./ListView"],function(e){return e.extend({type:"HomePushShopView",getCollection:function(){return this.collection}})}),define("components/HomeSeckillTimerView",["./ListView"],function(e){return e.extend({type:"HomeSeckillTimerView",defaults:{timer:null},initialize:function(){this.setTimer(this)},render:function(){return this.countdown(this),this},setTimer:function(e){var t="",n=0,r=0,i=0,s=0,o=0,u=0,a=0,f=new Date;n=24-f.getHours(),r=0,i=parseInt(n%3),s=parseInt((59-f.getMinutes())/10),o=(59-f.getMinutes())%10,u=parseInt((59-f.getSeconds())/10),a=(59-f.getSeconds())%10,t='<div class="home-seckill-timer" id="seckill_time">',t+='<span class="home-seckill-time">'+r+"</span>",t+='<span class="home-seckill-time">'+i+"</span>",t+='<span class="home-seckill-time-separator">:</span>',t+='<span class="home-seckill-time">'+s+"</span>",t+='<span class="home-seckill-time">'+o+"</span>",t+='<span class="home-seckill-time-separator">:</span>',t+='<span class="home-seckill-time">'+u+"</span>",t+='<span class="home-seckill-time">'+a+"</span>",t+="</div>",e.$el.html(t)},countdown:function(e){setInterval(function(){e.setTimer(e)},1e3)}})}),define("components/HomeSeckillView",["./ListView"],function(e){return e.extend({type:"HomeTopicView",getCollection:function(){return this.collection}})}),define("components/HomeTopicView",["./ListView"],function(e){return e.extend({type:"HomeTopicView",getCollection:function(){return this.collection},index:0,getNextPage:function(){var e=this.getCollection();this.index==0?(e.url=window.app.api+"/activities1",this.index=1):(e.url=window.app.api+"/ymall/activities",this.index=0),e.reset(null),e.fetch()}})}),define("components/LogisticInfoView",["./BaseView"],function(e){return e.extend({type:"LogisticInfoView",model:null,render:function(){this.$el.empty();if(this.model){this.$el.show();var e=library.getTemplate("logistics.html");this.$el.append(e(this.model.toJSON()))}else this.$el.hide();return this},setModel:function(e){this.model=e,this.render()},getModel:function(){return this.model}})}),define("components/LogiticListView",["./ListView"],function(e){return e.extend({type:"LogiticInfoView",getCollection:function(){return this.collection},addItem:function(t){e.prototype.addItem.apply(this,arguments),this.collection.indexOf(t)==0&&($(this.currentItem.find(".logidetail-address")).css({color:"#4da41e"}),$(this.currentItem.find(".logidetail-time")).css({color:"#4da41e"}),$(this.currentItem.find(".logitics-circle")).hide());var n=this.getCollection().length-1;this.collection.indexOf(t)==n&&$(this.currentItem.find(".logitics-detail")).css({"border-bottom":"0px solid #ffffff"})}})}),define("components/MembersOrderSelectView",["./BaseView"],function(e){return e.extend({events:{"click .drawBack":"goBack","click .notify-sex-mile":"selectMile","click .notify-sex-femile":"selectFemile","click .notify-sex-unknown":"selectUnknown"},initialize:function(){},render:function(){this.$el.empty();var e=library.getTemplate("MembersOrderSelect.html");return this.$el.append(e),this},goBack:function(){var e=this;$(".member-order-view").removeClass("member-order-view-show"),setTimeout(function(){e.remove()},300),$(".full-mask").hide()},remove:function(){Backbone.View.prototype.remove.apply(this,arguments)}})}),define("components/MySegmentedView",["underscore","./BaseView"],function(e,t){return t.extend({type:"MySegmentedView",itemTemplate:e.template("<a class='control-item segmented-item' data-index='<%=index%>'><%=name%></a>"),events:{"click a":"onSelect"},tabs:{},paramInfo:null,render:function(){this.$el.empty(),this.$el.append('<div class="segmented-control"></div>'),this.$el.append('<div class="segmented-content"></div>');if(this.options.items){var t=$(document.createDocumentFragment());e.reduce(this.options.items,e.bind(function(t,n,r){n=e.defaults(n,{name:"",index:r});var i=this.itemTemplate(n);return t.append($(i))},this),t),this.$el.find(".segmented-control").append(t),this.setActive(0)}return this},_createItem:function(e){var t=$(document.createDocumentFragment());this.getItemPage(e.page).then(function(n){t.append(n.$el),this.$(".segmented-content").empty().append(t),this.initCurrentPageData(e.page)}.bind(this)).catch(function(e){console.error(e),alert("页面加载失败")})},createComponent:function(e,t){if(!this.tabs[e.type]){var n=window.library.getComponent(e.type);if(!n)throw new Error("Component "+e.type+" Not Exists.");this.tabs[e.type]=(new n(e)).render(),this.tabs[e.type].el.setAttribute("data-type",e.type),this.tabs[e.type].setOptions(e)}this.tabs[e.type].initData&&this.tabs[e.type].initData(this.paramInfo?this.paramInfo[t]:{});var r=$(document.createDocumentFragment());r.append(this.tabs[e.type].$el),this.$(".segmented-content").empty().append(r)},initCurrentPageData:function(e){this.tabs[e].initData&&this.tabs[e].initData(this.paramInfo)},getItemPage:function(e){return this.tabs[e]?Promise.resolve(this.tabs[e]):loader.createPage(e).then(function(t){return this.tabs[e]=t.render(),this.tabs[e]}.bind(this))},setActive:function(e){this.$("a").removeClass("segmented-item-active").removeClass("theme-color").removeClass("theme-border-color"),this.$("a[data-index='"+e+"']").addClass("segmented-item-active").addClass("theme-color").addClass("theme-border-color");var t=this.options.items[e];t.type?this.createComponent(t,e):this._createItem(t,e)},onResume:function(){var e=this.options.items[0];this.tabs[e.type].initData&&this.tabs[e.type].initData(this.paramInfo?this.paramInfo[0]:{})},onSelect:function(e){var t=$(e.target).attr("data-index");this.setActive(t)}})}),define("components/NotifyUserInfoView",["./BaseView"],function(e){return e.extend({defaults:{name:"张三"},events:{"click .btn-save":"toSave","click .gobackPersonal":"goback"},initialize:function(){},render:function(){this.$el.empty();var e=library.getTemplate("notify-name-info.html");return this.$el.append(e),this.$el.find(".notify-user-name").val(this.options.name),this},setName:function(e){this.$el.find(".notify-user-name").val(e)},toSave:function(e){var t=this.$el.find(".notify-user-name").val();t=this.hEncode(t);if(!t||t==""){alert("名字不能为空");return}this.options.callback&&this.options.callback(t);var n=this;$(".nofity-name-info").removeClass("nofity-name-info-show"),setTimeout(function(){n.remove()},100)},hEncode:function(e){if(e==null)return e;var t="";for(var n=0;n<e.length;n++)console.log(this.hChart(e.charAt(n))),t+=this.hChart(e.charAt(n));return t},hChart:function(e){switch(e){case"&":return"&amp;";case"<":return"&lt;";case">":return"&gt;";case'"':return"&quot;";case" ":return"&nbsp;";case"/":return"&frasl;";default:return e}},goback:function(e){$(".nofity-name-info").removeClass("nofity-name-info-show");var t=this;setTimeout(function(){t.remove()},100)},remove:function(){Backbone.View.prototype.remove.apply(this,arguments)}})}),define("components/NotifyUserSexView",["./BaseView"],function(e){return e.extend({defaults:{sex:"保密"},events:{"click .gobackPersonal":"goBack","click .notify-sex-mile":"selectMile","click .notify-sex-femile":"selectFemile","click .notify-sex-unknown":"selectUnknown"},initialize:function(){},render:function(){this.$el.empty();var e=library.getTemplate("notify-sex-info.html");return this.$el.append(e),this.setSexSelected(this.options.sex),this},selectMile:function(e){this.setSexSelected("男")},selectFemile:function(e){this.setSexSelected("女")},selectUnknown:function(e){this.setSexSelected("保密")},setSexSelected:function(e){console.log(e),def={display:"none"},selected={display:"block"},this.$el.find(".item-mile").css(def),this.$el.find(".item-femile").css(def),this.$el.find(".item-unknown").css(def),e=="男"?this.$el.find(".item-mile").css(selected):e=="女"?this.$el.find(".item-femile").css(selected):e=="保密"&&this.$el.find(".item-unknown").css(selected),this.options.callback&&this.options.callback(e)},goBack:function(){var e=this;$(".nofity-sex-info").removeClass("nofity-sex-info-show"),setTimeout(function(){e.remove()},100)},remove:function(){Backbone.View.prototype.remove.apply(this,arguments)}})}),define("components/OrderOptionsSelectorView",["require","./BaseView"],function(e,t){return t.extend({listEl:null,title:null,selectedOption:{},callBack:null,optionsPay:null,optionsSend:null,selectorType:null,sendWayMap:{},events:{"click .order-options-row":"rowClick","click .btn-submit":"submit"},render:function(){this.$el.empty();var e=library.getTemplate("order-options-selector.html");return this.$el.append(e),this.listEl=$(this.$el.find(".selector-options-ul")),this},requestModel:null,setOrderOptinos:function(t,n,r){this.title=t,this.$(".selector-title").empty().append(t),this.selectedOption.id=n,this.selectorType=r;if(r=="payselector")var i="/payway",s={};else var i="/sendway",s={shopid:r};if(!this.requestModel){var o=e("../models/BaseModel");this.requestModel=new o}var u={path:i,data:s,success:this.success.bind(this),error:this.error.bind(this)};this.requestModel.loadData(u)},success:function(e){e&&e.status=="ok"?(this.selectorType=="payselector"?this.optionsPay=e.data:(this.optionsSend=e.data,this.sendWayMap[this.selectedOption.id]=this.optionsSend),this.layoutOptions(e.data)):(library.Toast(e?e.message:"哎哟，网络出小差哦~"),this.$el.hide())},error:function(e){library.Toast("哎哟，网络出小差哦~"),this.$el.hide()},layoutOptions:function(e){this.listEl.empty();var t=this;_.each(e,function(e,n){var r=$("<li></li>");r.addClass("order-options-row");var i=$("<div></div>");i.addClass("order-options-row-name").append(e.name);var s=$("<div></div>");s.addClass("order-options-row-select").addClass("theme-color"),console.log(e),console.log(t),(e.id==t.selectedOption.id||e.name==t.selectedOption.name)&&s.addClass("icomoon-right"),r.attr("data-index",n),r.append(i).append(s),t.listEl.append(r)})},rowClick:function(e){var t=$(e.target).attr("data-index");if(this.selectorType=="payselector"){if(!this.optionsPay)return;var n=this.optionsPay[t],r=this.optionsPay}else{if(!this.optionsSend)return;var n=this.optionsSend[t],r=this.optionsSend}this.selectedOption=n,$(".order-options-row-select").removeClass("icomoon-right"),$(e.currentTarget).find(".order-options-row-select").addClass("icomoon-right")},submit:function(e){if(!this.selectedOption){this.selectorType=="payselector"?library.Toast("请选择支付方式"):library.Toast("请选择配送方式");return}this.callBack&&this.callBack(this.selectedOption),this.$el.find(".order-options-content").removeClass("order-options-content-show"),$(".common-message-cover").hide()}})}),define("components/OrderShopListView",["./ListView"],function(e){return e.extend({getCollection:function(){return this.collection}})}),define("components/PopupMenu",["./BaseView"],function(e){return e.extend({type:"PopupMenu",events:{"click .root-popup-menu":"dismiss","click .menu-home":"toHome","click .menu-message":"toMessage","click .menu-search":"toSearch"},render:function(){var e=library.getTemplate("popup-menu.html");return this.$el.append(e),this},show:function(){this.$(".root-popup-menu").show(),this.$(".popup-menu").addClass("popup-menu-show")},hide:function(){this.$(".popup-menu").removeClass("popup-menu-show"),this.$(".root-popup-menu").hide()},dismiss:function(){this.hide()},toHome:function(e){this.togo("#home-navigate/home")},toMessage:function(e){this.dismiss(),this.togo("#my-navigate/messageCenter")},toSearch:function(e){this.dismiss(),this.trigger("toSearch",this)},togo:function(e){this.dismiss(),console.log(e),Backbone.history.navigate(e,{trigger:!0})}})}),define("components/ProductBottomBarView",["./BaseView"],function(e){return e.extend({render:function(){var e=library.getTemplate("product-bottom-bar.html");return this.$el.append(e),this},getCollection:function(){return this.collection}})}),define("components/ProductCommentView",["./BaseView","../models/AjaxCollection"],function(e,t){var n=t.extend({});return e.extend({type:"ProductComment",commentsData:null,initialize:function(){this.commentsData=new n},initData:function(e){if(!e||!e.productId)return;var t={id:e.productId,pagesize:10,pageindex:1},n=this,r={url:window.app.api+"/product-detailevaluate",type:"GET",data:t,success:this.setData.bind(this),error:function(){}};this.commentsData.loadData(r)},setData:function(e){if(!e||e.status=="error"){library.Toast(e?e.message:"网络出错",2e3);return}if(e.data.evaluateList.length<1)$("#goods-all-comments").hide(),$(".blank_tips").show();else{$(".blank_tips").hide(),$("#goods-all-comments").show(),e=e.data,$(".goods-evaluate-number-text").text("("+e.evaluateCount+")"),$(".goods-evaluate-ratio").text(e.good),$(".goods-evaluate-ul").empty(),console.log(e);for(var t=0;t<e.evaluateList.length;t++){var n=$("<li class='goods-evaluate-list-li'>"),r=$("<div class='goods-evaluate-clear'>"),i=$("<div class='goods-evaluate-li-toggle'>"),s=$("<div class='goods-evaluate-li-collection'>"),o=$("<span class='goods-evaluate-li-name'>"),u=$("<span class='goods-evaluate-li-time'>"),a=$("<div class='goods-evaluate-li-said'>");s.append(o),s.append(u),r.append(s),r.append(i),n.append(r),n.append(a),$(".goods-evaluate-ul").append(n),o.text(e.evaluateList[t].usernick),u.text(e.evaluateList[t].commentdate),a.text(e.evaluateList[t].commentdata);for(j=0;j<e.evaluateList[t].commentscore;j++){var f=$("<div class='goods-evaluate-li-star icomoon-star'>");i.append(f)}for(j=0;j<5-e.evaluateList[t].commentscore;j++){var f=$("<div class='goods-evaluate-li-star-no icomoon-starunclick'><div>");i.append(f)}}}},render:function(){this.$el.empty();var e=library.getTemplate("product-detail-comment.html");return this.$el.append(e),this},refresh:function(){this.render()}})}),define("components/ProductDetailInfoHeadView",["./BaseView"],function(e){return e.extend({render:function(){var e=library.getTemplate("product-detail-head.html");return this.$el.append(e),this}})}),define("components/ProductDetailInfoView",["./BaseView","../models/BaseModel"],function(e,t){return e.extend({type:"ProductDetailInfoView",model:null,initialize:function(){this.model=new t},initData:function(e){if(!e||!e.detailInfo){this.$el.empty();return}e.detailInfo==""?this.template="<div class = 'icomoon-without add-blank-leaving-icon'></div><div class = 'add-blank-leaving-words'>还没有相关售后哟~</div>":this.template=e.detailInfo,this.refresh()},render:function(){this.$el.empty();var e=this.template;return e&&this.$el.html(e),this},refresh:function(){this.render()}})}),define("components/ProductListFilter",["./BaseView"],function(e){return e.extend({type:"ProductListFilter",render:function(){var e=library.getTemplate("product-list-filter.html");return this.$el.append(e),this}})}),define("components/ProductListHeader",["./BaseView"],function(e){return e.extend({type:"ProductListHeader",render:function(){var e=library.getTemplate("product-list-header.html");return this.$el.append(e),this}})}),define("components/ProductListView",["./ListView"],function(e){return e.extend({type:"ProductListView",getCollection:function(){return this.collection},initData:function(e){if(!e||!e.detailInfo){this.$el.empty();return}this.collection.reset(e.detailInfo)}})}),define("models/PushCollection",["./AjaxCollection"],function(e){return e.extend({})}),define("components/PushForYouView",["./BaseView","./HomePushView","../models/PushCollection"],function(e,t,n){return e.extend({type:"PushForYouView",events:{"click .home-goods-discount":"itemClick"},itemClick:function(e){var t=$(e.currentTarget),n=t.attr("data-pid");console.log(e.currentTarget),n&&Backbone.history.navigate("#shopingcart-navigate/itemdetail?goodsid="+n,{trigger:!0})},render:function(){var e=library.getTemplate("push-for-you.html");return this.$el.append(e),this.initContent(),this},pushList:null,initContent:function(){var e={template:"push-for-you-item.html",collection:"AjaxCollection",type:"ListView"};this.pushList=this.getListView(e),this.$(".pfy-content").append(this.pushList.$el);var t=this,r=new n;r.loadData(t.getOption())},testData:[{id:"010011JZA8F10OQZQ17Y",unit:"套       ",price:188,sales:0,name:"Zespri佳沛有机奇异果36个（95g,+-10g）",image:"http://bmall.yonyou.com/2016/03/02/0100J1K0P1Q818SZ352R.png"},{id:"010051JZC8KQ0PHB41PZ",unit:"包       ",price:6,sales:0,name:"精选延庆生态西红柿600g",image:"http://bmall.yonyou.com/2016/03/02/010011K001QT19VIM9RX.jpg"},{id:"0100Y1JZS8MV153RI72A",unit:"件       ",price:13999,sales:0,name:"【TECO東元】42型 全民電唱LCD顯示器 (TL4270TR+TS0903TRA / TS1010TRA)",image:"http://bmall.yonyou.com/2016/03/03/0100I1K0U1RN0P6V64YH.png"},{id:"010021JZT8IO1187PQII",unit:"件       ",price:188,sales:0,name:"越南红心火龙果1.2kg",image:"http://bmall.yonyou.com/2016/03/02/0100T1K091Q418JR97NF.png"}],getOption:function(){var e={path:"/getPushInfo",type:"POST",data:{},success:this.onSuccess.bind(this),error:this.onError.bind(this)};return e},onSuccess:function(e){var t=e.data;this.pushList.collection.reset(t)},onError:function(e){},getListView:function(e){var t=window.library.getComponent(e.type);if(!t)throw new Error("Component "+e.type+" Not Exists.");var n=(new t(e)).render();return n.setOptions(e),n}})}),define("components/SearchMidPageView",["./BaseView","backbone"],function(e,t){return e.extend({type:"SearchMidPageView",localStorageKey:"xmallsearchstory",scrollTop:0,blur:function(){this.searchInput.blur()},show:function(){var e=this;this.scrollTop=document.body.scrollTop,document.body.scrollTop=0,this.wraper.show(),this.searchInput.focus();var n=this.getSearchHistoryArr();this.historyWrapper.empty();if(n.length>0){this.historyWrapper.append($("<div class='search-mid-his-item' style='color:#B3B3B3'>搜索历史</div>"));for(var r=0,i=n.length;r<i;r++){var s=$("<div class='search-mid-his-item'>"+n[r]+"</div>");(function(e,n,r){e.bind("click",function(){var e=n;r.hide(),window.app.searchKey=e,e!=""&&r.setSearchHistoryItem(e),r.pageview.$pagename=="productlist"?(r.pageview.keyword=e,r.pageview.initData()):t.history.navigate("#home-navigate/product-list",{trigger:!0}),r.searchInput.val(""),r.blur()})})(s,n[r],this),this.historyWrapper.append(s)}var o=$("<button class='search-mid-clear-btn'>清除历史纪录</button>");o.bind("click",function(){window.localStorage.removeItem(e.localStorageKey),e.historyWrapper.empty()}),this.historyWrapper.append(o)}},getSearchHistoryArr:function(){var e=window.localStorage.getItem(this.localStorageKey),t=[];if(!e)return[];try{t=JSON.parse(e)}catch(n){}return t},setSearchHistoryItem:function(e){var t=this.getSearchHistoryArr();t.length>=5&&(t=t.slice(0,4));var n=0;for(var r in t)if(t[r]==e){n=1;break}n==0&&(t=[e].concat(t)),window.localStorage.setItem(this.localStorageKey,JSON.stringify(t))},render:function(){this.wraper=$("<div class='search-mid-page'></div>");var e=$("<div class='common-search search-style2'></div>"),n=$("<div class='common-search-mid-view'></div>"),r=$("<div class='common-search-left-inner'></div>");this.searchInput=$("<input type='text' placeholder='请输入商品'/>");var i=$("<form action='javascript:void(0);' style='display:inline-block;width:85%;'></from>");i.append(this.searchInput);var s=this;document.body.addEventListener("touchmove",function(e){s.searchInput.blur()}),this.searchInput[0].addEventListener("keydown",function(e){if(e.keyCode==13){var n=s.searchInput.val()||"";s.hide(),window.app.searchKey=n,n!=""&&s.setSearchHistoryItem(n),t.history.navigate("#home-navigate/product-list",{trigger:!0}),s.callback(),s.searchInput.val(""),s.blur()}});var o=$("<span class='icomoon-search'></span>");r.append(o).append(i),n.append(r);var u=$("<div class='common-cancel-right'><span>取消</span></div>"),s=this;return u.bind("click",function(){s.hide()}),e.append(n).append(u),this.historyWrapper=$("<div></div>"),this.wraper.append(e).append(this.historyWrapper),this.$el.append(this.wraper),this},hide:function(){this.wraper.hide(),document.body.scrollTop=this.scrollTop||0},callback:function(){}})}),define("components/SenderSelect",["./ListView"],function(e){return e.extend({type:"SenderSelect",getCollection:function(){return this.collection}})}),define("components/ShareView",["./BaseView"],function(e){return e.extend({type:"ShareView",events:{"click .common-message-cover-no":"hide","click .cancel-share":"hide"},render:function(){var e=library.getTemplate("shareview.html");return this.$el.append(e),this},show:function(){$(".share-popup-view").show(),setTimeout(function(){$(".share-popup-view").addClass("share-popup-view-show")},100),$(".common-message-cover-no").show()},hide:function(){$(".common-message-cover-no").hide(),$(".share-popup-view").removeClass("share-popup-view-show")}})}),define("components/ShopCollectorView",["./ListView"],function(e){return e.extend({type:"ShopCollectorView",getCollection:function(){return this.collection}})}),define("components/ShopingcartListView",["./BaseView","backbone","../loader","../models/AjaxCollection","../models/BaseModel"],function(e,t,n,r,i){var s=r.extend({model:i});return e.extend({type:"ShopingcartListView",collection:new s,events:{"click .shopingcart-choicebox-goods":"onCilckgoods","click .shopingcart-goods-edit-btn-minus":"onCilckminus","click .shopingcart-goods-edit-btn-plus":"onCilckplus","blur .shopingcart-goods-edit-input":"onBlurinput","change .shopingcart-goods-edit-input":"onChangevalue"},initialize:function(){var e=this;this.listenTo(this.collection,"reset",this.onReset),this.listenTo(this.collection,"add",this.onAdd),this.listenTo(this.collection,"change",this.onChange)},isListEdit:!1,initData:function(e){this.isListEdit=e;var t=window.application.getUserInfo();if(!t){$(".shopingcartlist_empty").hide(),$(".ShopingcartListView").hide(),$(".shopingcart-footer").hide(),$(".unlogin_tips").show(),$(".shopingcart-ed").hide();return}$(".unlogin_tips").hide(),$(".shopingcart-ed").show(),$(".ShopingcartListView").show(),$(".shopingcart-back").show(),this.collection.ajaxOptions={path:"/getCartList",type:"POST",data:{userId:t.userid},showLoading:!0,needReset:!1,success:this.onSuccess.bind(this),error:this.onError.bind(this)},this.collection.loadData()},cartListData:null,onSuccess:function(e){if(e&&e.status=="0"){var t=e.data;this.cartListData=t,this.collection.reset(this.cartListData),window.application.setLocalStorage("cartnumber",this.cartListData.length),e.data.length<1?($(".shopingcartlist_empty").show(),$(".shopingcart-footer").hide(),$(".shopingcart-manage").hide()):($(".shopingcartlist_empty").hide(),$(".shopingcart-footer").show()),this.setTotal(),this.isListEdit&&($(".shopingcart-goods-edit").show(),e.data.length<1?($(".shopingcart-manage").hide(),$(".shoping-cart-menu").hide()):($(".shopingcart-manage").show(),$(".shoping-cart-menu").show()),$(".shopingcart-footer").hide())}else library.Toast(e?e.message:"抱歉网络不太给力")},onError:function(e){library.Toast(e?e.message:"抱歉网络不太给力")},onChange:function(e){},render:function(){return this},onCilckgoods:function(e){$(e.target).hasClass("icomoon-choice")?($(e.target).removeClass("icomoon-choice").removeClass("theme-color"),$(e.target).parents(".shopingcart-item").find(".shopingcart-choicebox-store").removeClass("icomoon-choice").removeClass("theme-color")):$(e.target).addClass("icomoon-choice").addClass("theme-color"),this.setTotal();var t=$("#shopingcartlistview"),n=t.find(".icomoon-choice").length,r=t.find(".shopingcart-choicebox-goods").length;n<r?($(".shopingcart-choicebox-manage").removeClass("icomoon-choice").removeClass("theme-color"),$(".shopingcart-choicebox-all").removeClass("icomoon-choice").removeClass("theme-color")):($(".shopingcart-choicebox-all").addClass("icomoon-choice").addClass("theme-color"),$(".shopingcart-choicebox-manage").addClass("icomoon-choice").addClass("theme-color"))},cartInfo:{},onCilckminus:function(e){var t=$(e.target).parents(".shopingcart-goods-listitem"),n=t.attr("data-cid"),r=t.attr("data-index"),i=parseInt($(e.currentTarget).attr("data-minimum")),s=this.collection.find({cartId:r}),o=s,u=o.get("number");u<=i?(library.Toast("商品数量不能小于最小起批量！",1e3),$(e.currentTarget).parent().find(".shopingcart-goods-edit-input").val(i)):(u=o.get("number")-1,o.set("number",u),$(e.currentTarget).next().val(u));var a=o.get("cartId");this.cartInfo[a]={cartId:a,number:u},this.setNember($(e.currentTarget).parents(".shopingcart-goods-listitem"),o.get("number")),this.setTotal()},onChangevalue:function(e){var t=$(e.target).parents(".shopingcart-goods-listitem"),n=t.attr("data-cid"),r=t.attr("data-index"),i=parseInt($(".shopingcart-goods-edit-btn-minus").attr("data-minimum")),s=parseInt($(".shopingcart-goods-edit-btn-plus").attr("data-maximum")),o=this.collection.find({cartId:r}),u=o,a=$(".shopingcart-goods-edit-input").val();a<=i&&(library.Toast("商品数量不能小于最小起批量！",1e3),a=i,$(e.currentTarget).val(a)),a>=s&&(library.Toast("商品数量不能大于最存货量！",1e3),a=s,$(e.currentTarget).val(a));var f=u.get("cartId");this.cartInfo[f]={cartId:f,number:a},this.setTotal()},onCilckplus:function(e){var t=$(e.target).parents(".shopingcart-goods-listitem"),n=t.attr("data-cid"),r=t.attr("data-index"),i=parseInt($(e.currentTarget).attr("data-maximum")),s=this.collection.find({cartId:r}),o=s,u=o.get("number");if(u>=i)library.Toast("商品数量不能大于最存货量！",1e3),$(e.currentTarget).parent().find(".shopingcart-goods-edit-input").val(i);else{var u=o.get("number")+1;o.set("number",u),$(e.currentTarget).prev().val(u)}var a=o.get("cartId");this.cartInfo[a]={cartId:a,number:u},this.setNember($(e.currentTarget).parents(".shopingcart-goods-listitem"),o.get("number")),this.setTotal()},onBlurinput:function(e){var t=parseInt($(e.currentTarget).prev().attr("data-minimum")),n=parseInt($(e.currentTarget).next().attr("data-maximum")),r=parseInt($(e.currentTarget).val());r>=n&&(r=n);if(r<=t||!r)r=t;var i=$(e.target).parents(".shopingcart-goods-listitem"),s=i.attr("data-cid"),o=i.attr("data-index"),n=parseInt($(e.currentTarget).attr("data-maximum")),u=this.collection.find({cartId:o}),a=u;a.set("number",r),$(e.currentTarget).val(r),this.setNember($(e.currentTarget).parents(".shopingcart-goods-listitem"),r),this.setTotal()},setTotal:function(){var e=0;$(".shopingcart-choicebox-goods.icomoon-choice").each(function(){var t=parseFloat($(this).parent().find(".shopingcart-goods-details-unit-price").attr("data-price")),n=parseInt($(this).parent().find(".shopingcart-goods-edit-input").val());e+=t*100*n}),e/=100,$(".shopingcart-info-total-price").text("¥"+e)},setNember:function(e,t){e.find(".shopingcart-goods-details-number").text("x"+t)},onReset:function(e){this.$el.empty();var t=this;e.models.forEach(function(e,n){t.onAdd(e)}),$(".shopingcart-ed").text()=="完成"?$(".shopingcart-goods-edit").show():$(".shopingcart-goods-edit").hide()},allGoodsTemplate:null,onAdd:function(e){this.allGoodsTemplate||(this.allGoodsTemplate=library.getTemplate("shopingcart-allgoods.html"));var t=e.toJSON();t.mark=t.mark||"",this.$el.append(this.allGoodsTemplate(t))}})}),define("components/SwitchView",["./BaseView"],function(e){return e.extend({type:"SwitchView",events:{"click .switchview-switch":"switchClick"},defaults:{IsOpen:!1},callBack:null,switchDiv:null,render:function(){this.switchDiv=document.createElement("div"),$(this.switchDiv).addClass("switchview-switch");var e=document.createElement("div");return $(e).addClass("switch-handle"),$(this.switchDiv).append(e),this.changeNotify(),this.$el.append(this.switchDiv),this},changeNotify:function(){this.options.IsOpen?$(this.switchDiv).addClass("active"):$(this.switchDiv).removeClass("active")},setStatus:function(e){this.options.IsOpen=e,this.changeNotify()},setBgBland:function(){this.$(".switchview-switch").addClass("switchview-bland")},switchClick:function(e){this.$el.find(".switchview-switch").toggleClass("active"),this.trigger("switchClick",this),this.options.IsOpen=!this.options.IsOpen,this.callBack&&this.callBack(this.options.IsOpen)}})}),define("components/balancePayment",["./BaseView"],function(e){return e.extend({type:"balancePayment",events:{},callBack:null,render:function(){var e=library.getTemplate("balancePayment.html");return this.$el.append(e),this}})}),define("components/myMembersOrderList",["./ListView"],function(e){return e.extend({getCollection:function(){return this.collection}})}),function(e){typeof define=="function"&&define.amd?define("libs/ajaxfileupload",["jquery"],e):e(jQuery)}(function(jQuery){jQuery.extend({createUploadIframe:function(e,t){var n="jUploadFrame"+e;if(window.ActiveXObject){var r=document.createElement('<iframe id="'+n+'" name="'+n+'" />');typeof t=="boolean"?r.src="javascript:false":typeof t=="string"&&(r.src=t)}else{var r=document.createElement("iframe");r.id=n,r.name=n}return r.style.position="absolute",r.style.top="-1000px",r.style.left="-1000px",document.body.appendChild(r),r},createUploadForm:function(e,t){var n="jUploadForm"+e,r="jUploadFile"+e,i=jQuery('<form  action="" method="POST" name="'+n+'" id="'+n+'" enctype="multipart/form-data"></form>'),s=jQuery("#"+t),o=jQuery(s).clone();return jQuery(s).attr("id",r),jQuery(s).before(o),jQuery(s).appendTo(i),jQuery(i).css("position","absolute"),jQuery(i).css("top","-1200px"),jQuery(i).css("left","-1200px"),jQuery(i).appendTo("body"),i},addEvent:function(e,t,n){if(window.addEventListener)e.addEventListener(t,n,!1);else if(window.attachEvent){var r=function(){n.call(e,window.event)};e.attachEvent("on"+t,r)}},fileFromPath:function(e){return e.replace(/.*(\/|\\)/,"")},getExt:function(e){return/[.]/.exec(e)?/[^.]+$/.exec(e.toLowerCase()):""},ajaxSelectFile:function(e){var t=this;jQuery("#"+e.fileElementId).remove();var n=document.createElement("input");n.setAttribute("type","file"),n.setAttribute("name",e.name),n.setAttribute("id",e.fileElementId),t._parentDialog=document.body;var r={position:"absolute",width:"100%",height:"91px",opacity:0,cursor:"pointer",left:0,bottom:"130px","z-index":2147483583};for(var i in r)n.style[i]=r[i];n.style.opacity!=="0"&&(n.style.filter="alpha(opacity=0)"),this._parentDialog.appendChild(n),this.addEvent(n,"change",function(){var n=t.fileFromPath(this.value);e.onSubmit.call(this,n,t.getExt(n))!=0&&t.ajaxFileUpload(e)}),this.addEvent(n,"click",function(){}),this._input=n},ajaxFileUpload:function(e){e=jQuery.extend({},jQuery.ajaxSettings,e);var t=e.fileElementId,n=jQuery.createUploadForm(t,e.fileElementId),r=jQuery.createUploadIframe(t,e.secureuri),i="jUploadFrame"+t,s="jUploadForm"+t;e.global&&!(jQuery.active++)&&jQuery.event.trigger("ajaxStart");var o=!1,u={};e.global&&jQuery.event.trigger("ajaxSend",[u,e]);var a=this,f=function(r){console.log(r),jQuery("#"+t).remove();var s=document.getElementById(i);console.log(s);debugger;try{s.contentWindow?(u.responseText=s.contentWindow.document.body?s.contentWindow.document.body.innerHTML:null,u.responseXML=s.contentWindow.document.XMLDocument?s.contentWindow.document.XMLDocument:s.contentWindow.document):s.contentDocument&&(u.responseText=s.contentDocument.document.body?s.contentDocument.document.body.innerHTML:null,u.responseXML=s.contentDocument.document.XMLDocument?s.contentDocument.document.XMLDocument:s.contentDocument.document)}catch(f){a.handleError(e,u,null,f)}console.log(u);if(u||r=="timeout"){o=!0;var l;try{l=r!="timeout"?"success":"error";if(l!="error"){var c=jQuery.uploadHttpData(u,e.dataType);e.success&&e.success(c,l),e.global&&jQuery.event.trigger("ajaxSuccess",[u,e])}else a.handleError(e,u,l)}catch(f){l="error",a.handleError(e,u,l,f)}e.global&&jQuery.event.trigger("ajaxComplete",[u,e]),e.global&&!--jQuery.active&&jQuery.event.trigger("ajaxStop"),e.complete&&e.complete(u,l),jQuery(s).unbind(),setTimeout(function(){try{jQuery(s).remove(),jQuery(n).remove()}catch(t){a.handleError(e,u,null,t)}},100),u=null}};try{var n=jQuery("#"+s);jQuery(n).attr("action",e.url),jQuery(n).attr("method","POST"),jQuery(n).attr("target",i),n.encoding?n.encoding="multipart/form-data":n.enctype="multipart/form-data",jQuery(n).submit()}catch(l){a.handleError(e,u,null,l)}return window.attachEvent?document.getElementById(i).attachEvent("onload",f):document.getElementById(i).addEventListener("load",f,!1),{abort:function(){}}},uploadHttpData:function(r,type){var data=!type;return data=type=="xml"||data?r.responseXML:r.responseText,type=="script"&&jQuery.globalEval(data),type=="json"&&eval("data = "+data),type=="html"&&jQuery("<div>").html(data).evalScripts(),data},handleError:function(e,t,n,r){e.error&&e.error.call(e.context||e,t,n,r),e.global&&(e.context?jQuery(e.context):jQuery.event).trigger("ajaxError",[t,e,r])}})}),define("libs/canlendar",[],function(){function e(e){var t=new Date;this.now_year=t.getFullYear(),this.now_month=t.getMonth()+1,this.now_day=t.getDate(),this.OneDayAreaCount=42;var n=document.createElement("DIV").style;"-webkit-transform"in n?(this.transitionend="webkitTransitionEnd",this.transform="-webkit-transform",this.transition="-webkit-transition"):(this.transitionend="transitionend",this.transform="transform",this.transition="transition"),this.alertWay="BOTTOM",this.container=document.body,e&&(this.alertWay=e.alertWay,e.container&&(this.container=e.container)),this.YearMonthDayModel="day",this.Modal="年月日",this._initLayout(),this.SelectedMonthLi=null,this.maxYear=2020,this.minYear=1900,this.callbacks={},this.WrapperWidth=window.innerWidth,this.autoScrollOffsetX=50}return e.prototype={_createElementWithClass:function(e,t){var n=t.split(" "),r=document.createElement(e);for(var i=0,s=n.length;i<s;i++){if(/^\s*$/.test(n[i]))continue;r.classList.add(n[i])}return r},setModal:function(e){return this.Modal=e||"年月日",this.Modal=="年月"&&(this.Days_Wrapper.classList.remove("yy-clda-wrapper-v"),this.Years_Wrapper.classList.add("yy-clda-wrapper-v"),this.YearMonthDayModel="year"),this},_createCldaBtnWrapper:function(){var e=this,t=this._createElementWithClass("DIV","yy-clda-btn-wrapper yy-clda-table"),n=this._createElementWithClass("DIV","yy-clda-cell yy-clda-btn yy-clda-vcenter");n.innerHTML="取消",n.addEventListener("click",function(t){e.hide()},!1);var r=this._createElementWithClass("DIV","yy-clda-cell"),i=this._createElementWithClass("DIV","yy-clda-cell yy-clda-btn yy-clda-vcenter");return i.innerHTML="确定",i.addEventListener("click",function(t){e.hide();var n=e.callbacks.ok,r=new Date(e.year_val,e.month_val-1,e.day_val);e._setValuePar(r.getFullYear(),r.getMonth()+1,r.getDate());var i=e.year_val+"-"+(e.month_val<10?"0"+e.month_val:e.month_val),s="-"+(e.day_val<10?"0"+e.day_val:e.day_val);e.Modal=="年月日"&&(i+=s),n&&typeof n=="function"&&n(i)},!1),t.appendChild(n),t.appendChild(r),t.appendChild(i),t},bind:function(e,t){return this.callbacks[e]=t,this},hide:function(){return this.Clda_BK.classList.remove("yy-clda-bk-show"),this.Clda_Dialog.classList.remove("yy-clda-dialog-show"),this},_hasInitYearArea:!1,show:function(e){this.setValue(e);var t=this;return this.Modal=="年月"&&!this._hasInitYearArea&&(this._reCreateYearsArea(),this._hasInitYearArea=!0),this.alertWay!="INLINE"&&window.setTimeout(function(){t.Clda_BK.classList.add("yy-clda-bk-show"),t.Clda_Dialog.classList.add("yy-clda-dialog-show")},0),this},_getRealYearAndMonth:function(e,t){var n=new Date(e,t,0);return{month:n.getMonth()+1,year:n.getFullYear()}},_titleLogic:function(){var e=this;this.Month_Title.addEventListener("click",function(t){e.YearMonthDayModel=="day"?(e._setMonthLiSeletced(),e.Days_Wrapper.classList.remove("yy-clda-wrapper-v"),e.Months_Wrapper.classList.add("yy-clda-wrapper-v"),e.YearMonthDayModel="month"):e.YearMonthDayModel=="month"&&e.Modal=="年月日"?(e.Days_Wrapper.classList.add("yy-clda-wrapper-v"),e.Months_Wrapper.classList.remove("yy-clda-wrapper-v"),e.YearMonthDayModel="day"):e.YearMonthDayModel=="year"&&(e._setMonthLiSeletced(),e.Months_Wrapper.classList.add("yy-clda-wrapper-v"),e.Years_Wrapper.classList.remove("yy-clda-wrapper-v"),e.YearMonthDayModel="month")},!1),this.Year_Title.addEventListener("click",function(t){e.YearMonthDayModel=="day"?(e.Days_Wrapper.classList.remove("yy-clda-wrapper-v"),e.Years_Wrapper.classList.add("yy-clda-wrapper-v"),e.YearMonthDayModel="year",e._reCreateYearsArea()):e.YearMonthDayModel=="month"?(e.Years_Wrapper.classList.add("yy-clda-wrapper-v"),e.Months_Wrapper.classList.remove("yy-clda-wrapper-v"),e.YearMonthDayModel="year",e._reCreateYearsArea()):e.YearMonthDayModel=="year"&&e.Modal=="年月日"&&(e.Days_Wrapper.classList.add("yy-clda-wrapper-v"),e.Years_Wrapper.classList.remove("yy-clda-wrapper-v"),e.YearMonthDayModel="day")},!1)},_getCurDaysAreaArr:function(){var e=this.DayAreaShowIndex==0?2:this.DayAreaShowIndex-1,t=this.DayAreaShowIndex==2?0:this.DayAreaShowIndex+1;return[e,this.DayAreaShowIndex,t]},_rebindDaysAreaByYearAndMonth:function(e,t){var n=this._getCurDaysAreaArr();for(var r=0;r<=2;r++){var i=new Date(e,r-1+t-1,1);this._fillDaysArea(this.DayAreaArr[n[r]],i.getFullYear(),i.getMonth()+1)}},_GoNextMonth:function(){var e=this;e.month+=1;var t=e._getRealYearAndMonth(e.year,e.month);e.month=t.month,e.year=t.year,e.DayAreaArr[e.DayAreaShowIndex].style[e.transition]=e.transform+" ease 0.2s",e.DayAreaArr[e.DayAreaShowIndex].style[e.transform]="translate3d("+ -1*e.WrapperWidth+"px, 0px, 0px)";var n=e.DayAreaShowIndex==0?2:e.DayAreaShowIndex-1;e.DayAreaShowIndex=e.DayAreaShowIndex==2?0:e.DayAreaShowIndex+1,e.DayAreaArr[e.DayAreaShowIndex].style[e.transition]=e.transform+" ease 0.2s",e.DayAreaArr[e.DayAreaShowIndex].style[e.transform]="translate3d(0, 0px, 0px)",e.DayAreaArr[n].style[e.transition]="none",e.DayAreaArr[n].style[e.transform]="translate3d("+1*e.WrapperWidth+"px, 0px, 0px)",e.rebindMonthAndYearTitle();var r=e._getRealYearAndMonth(e.year,e.month+1);e._fillDaysArea(e.DayAreaArr[n],r.year,r.month),e._setMonthLiSeletced(),e.YearMonthDayModel=="year"&&e._setYearSelected(e.year),e.Modal=="年月"&&(e.year_val=e.year,e.month_val=e.month)},_GoPreMonth:function(){var e=this;e.month-=1;var t=e._getRealYearAndMonth(e.year,e.month);e.month=t.month,e.year=t.year,e.DayAreaArr[e.DayAreaShowIndex].style[e.transition]=e.transform+" ease 0.2s",e.DayAreaArr[e.DayAreaShowIndex].style[e.transform]="translate3d("+1*e.WrapperWidth+"px, 0px, 0px)";var n=e.DayAreaShowIndex==2?0:e.DayAreaShowIndex+1;e.DayAreaShowIndex=e.DayAreaShowIndex==0?2:e.DayAreaShowIndex-1,e.DayAreaArr[e.DayAreaShowIndex].style[e.transition]=e.transform+" ease 0.2s",e.DayAreaArr[e.DayAreaShowIndex].style[e.transform]="translate3d(0, 0px, 0px)",e.DayAreaArr[n].style[e.transition]="none",e.DayAreaArr[n].style[e.transform]="translate3d("+ -1*e.WrapperWidth+"%, 0px, 0px)",e.rebindMonthAndYearTitle();var r=e._getRealYearAndMonth(e.year,e.month-1);e._fillDaysArea(e.DayAreaArr[n],r.year,r.month),e._setMonthLiSeletced(),e.YearMonthDayModel=="year"&&e._setYearSelected(e.year),e.Modal=="年月"&&(e.year_val=e.year,e.month_val=e.month)},_createCldaSwitchWrapper:function(){var e=this._createElementWithClass("DIV","yy-clda-switch-wrapper yy-clda-table");this.Year_Left_Icon=this._createElementWithClass("DIV","yy-clda-cell yy-clda-switch-icon yy-clda-switch-icon-left"),this.Year_Title=this._createElementWithClass("DIV","yy-clda-cell yy-clda-vcenter"),this.Year_Right_Icon=this._createElementWithClass("DIV","yy-clda-cell yy-clda-switch-icon"),this.Month_Left_Icon=this._createElementWithClass("DIV","yy-clda-cell yy-clda-switch-icon  yy-clda-switch-icon-left"),this.Month_Title=this._createElementWithClass("DIV","yy-clda-cell yy-clda-vcenter"),this.Month_Right_Icon=this._createElementWithClass("DIV","yy-clda-cell yy-clda-switch-icon");var t=this;return this._titleLogic(),this.Year_Right_Icon.addEventListener("click",function(e){t.year=t.year+1,t.month=t.month-1,t._rebindDaysAreaByYearAndMonth(t.year,t.month),t._GoNextMonth()},!1),this.Month_Right_Icon.addEventListener("click",function(e){t._GoNextMonth()},!1),this.Year_Left_Icon.addEventListener("click",function(e){t.year=t.year-1,t.month=t.month+1,t._rebindDaysAreaByYearAndMonth(t.year,t.month),t._GoPreMonth()},!1),this.Month_Left_Icon.addEventListener("click",function(e){t._GoPreMonth()},!1),e.appendChild(this.Year_Left_Icon),e.appendChild(this.Year_Title),e.appendChild(this.Year_Right_Icon),e.appendChild(this.Month_Left_Icon),e.appendChild(this.Month_Title),e.appendChild(this.Month_Right_Icon),e},rebindMonthAndYearTitle:function(){this.Year_Title.innerHTML=this.year,this.Month_Title.innerHTML=this.month+"月"},_createDayScrollWrapper:function(){var e=this._createElementWithClass("DIV","yy-clda-day-scroll"),t=this._createElementWithClass("DIV","yy-clda-day-area"),n=this._createElementWithClass("DIV","yy-clda-day-area"),r=this._createElementWithClass("DIV","yy-clda-day-area");return t.style[this.transform]="translate3d(-100%, 0px, 0px)",n.style[this.transform]="translate3d(0, 0px, 0px)",r.style[this.transform]="translate3d(100%, 0px, 0px)",this.DayAreaArr=[t,n,r],e.appendChild(t),e.appendChild(n),e.appendChild(r),e},_createDaysWrapper:function(){var e=this._createElementWithClass("DIV","yy-clda-day-wrapper"),t=this._createElementWithClass("DIV","yy-clda-week-bar yy-clda-table"),n=["日","一","二","三","四","五","六"];for(var r=0,i=n.length;r<i;r++){var s=this._createElementWithClass("DIV","yy-clda-cell yy-clda-vcenter");s.innerHTML=n[r],t.appendChild(s)}return this.DayScrollWraper=this._createDayScrollWrapper(),e.appendChild(t),e.appendChild(this.DayScrollWraper),e},_setMonthLiSeletced:function(){this.SelectedMonthLi&&this.SelectedMonthLi.classList.remove("yy-clda-month-selected");var e=this.MonthLiArr[this.month-1];this.SelectedMonthLi=e,this.SelectedMonthLi.classList.add("yy-clda-month-selected")},_createMonthWrapper:function(){this.MonthLiArr=[];var e=this._createElementWithClass("DIV","yy-clda-month-wrapper"),t=this._createElementWithClass("UL",""),n=["一","二","三","四","五","六","七","八","九","十","十一","十二"];for(var r=0;r<n.length;r++){var i=document.createElement("LI"),s=document.createElement("SPAN");s.innerHTML=n[r],i.appendChild(s),i.setAttribute("data-month",r+1),i.setAttribute("data-month-zh",n[r]),this.MonthLiArr.push(i),t.appendChild(i)}return e.appendChild(t),e.addEventListener("touchmove",function(e){e.preventDefault()},!1),e},_createYearsWrapper:function(){var e=this._createElementWithClass("DIV","yy-clda-year-wrapper"),t=this._createElementWithClass("DIV","yy-clda-year-area"),n=this._createElementWithClass("DIV","yy-clda-year-area"),r=this._createElementWithClass("DIV","yy-clda-year-area");return t.style[this.transform]="translate3d(-100%, 0px, 0px)",n.style[this.transform]="translate3d(0, 0px, 0px)",r.style[this.transform]="translate3d(100%, 0px, 0px)",this.YearAreaArr=[t,n,r],this.YearAreaConfig=[{},{},{}],this.CurYearAreaIndex=1,e.appendChild(t),e.appendChild(n),e.appendChild(r),e},_getCurYearAreaIndexArr:function(){var e=this.CurYearAreaIndex==0?2:this.CurYearAreaIndex-1,t=this.CurYearAreaIndex==2?0:this.CurYearAreaIndex+1;return[e,this.CurYearAreaIndex,t]},_reCreateYearsArea:function(){var e=this._getCurYearAreaIndexArr();this.YearAreaConfig[e[1]].start=this.year-4,this.YearAreaConfig[e[0]].start=this.YearAreaConfig[e[1]].start-12,this.YearAreaConfig[e[2]].start=this.YearAreaConfig[e[1]].start+12;for(var t=0;t<=2;t++)this._createSingleYearArea(this.YearAreaArr[e[t]],this.YearAreaConfig[e[t]].start);this._setYearSelected(this.year)},_createSingleYearArea:function(e,t){e.innerHTML="";if(t==-1e3)return;var n=document.createElement("UL"),r=t+11;for(var i=t;i<=r;i++){var s=document.createElement("LI"),o=document.createElement("SPAN");s.setAttribute("data-year",i),i==this.year&&s.classList.add("yy-clda-year-selected"),o.innerHTML=i,s.appendChild(o),n.appendChild(s)}e.appendChild(n)},_bindWrapperEvents:function(){function s(t,n){if(Math.abs(r)<e.autoScrollOffsetX)for(var s=0;s<=2;s++){var o=e.YearAreaArr[i[s]],u=(s-1)*e.WrapperWidth;o.style[e.transition]=e.transform+" ease 0.2s",o.style[e.transform]="translate3d("+u+"px, 0px, 0px)"}else r>0?e._GoPreYearArea(i):r<0&&e._GoNextYearArea(i);r==0,r=0}var e=this;this.Months_Wrapper.addEventListener("click",function(t){var n=t.target,r=n.tagName;if(r!="UL")while(n&&n.tagName!="BODY"&&r!="LI"){n=n.parentNode;if(n.tagName=="LI")break}var i=n.getAttribute("data-month");i&&!isNaN(i)&&(i=parseInt(i),e.month=i,e._rebindDaysAreaByYearAndMonth(e.year,e.month),e._setMonthLiSeletced(),e.Modal=="年月日"?(e.Days_Wrapper.classList.add("yy-clda-wrapper-v"),e.Months_Wrapper.classList.remove("yy-clda-wrapper-v"),e.YearMonthDayModel="day"):e.month_val=i,e.rebindMonthAndYearTitle())},!1);var t=0,n=0,r=0,i;this.Years_Wrapper.addEventListener("touchstart",function(n){i=e._getCurYearAreaIndexArr(),t=n.touches[0].pageX},!1),this.Years_Wrapper.addEventListener("touchmove",function(s){s.preventDefault(),n=s.touches[0].pageX,r=n-t;for(var o=0;o<=2;o++){var u=e.YearAreaArr[i[o]],a=(o-1)*e.WrapperWidth+r;u.style[e.transition]="none",u.style[e.transform]="translate3d("+a+"px, 0px, 0px)"}},!1),this.Years_Wrapper.addEventListener("click",function(t){var n=t.target,r=n.tagName;if(r!="UL"){while(n&&n.tagName!="BODY"&&r!="LI"){n=n.parentNode;if(n.tagName=="LI")break}var i=n.getAttribute("data-year");i&&(e._clearCurrentYearSelected(),n.classList.add("yy-clda-year-selected"),i=parseInt(i),e.year=i,e._rebindDaysAreaByYearAndMonth(e.year,e.month),e._setMonthLiSeletced(),e.Modal=="年月日"?(e.Days_Wrapper.classList.add("yy-clda-wrapper-v"),e.Years_Wrapper.classList.remove("yy-clda-wrapper-v"),e.YearMonthDayModel="day"):e.year_val=i,e.rebindMonthAndYearTitle())}},!1),this.Years_Wrapper.addEventListener("touchend",function(e){s(e,"end")},!1),this.Years_Wrapper.addEventListener("touchcancel",function(e){s(e,"cancel")},!1),this._bindDaysWrapperEvents()},_bindDaysWrapperEvents:function(){var e=0,t=0,n=0,r,i=this;this.Days_Wrapper.addEventListener("touchstart",function(t){r=i._getCurDaysAreaArr(),e=t.touches[0].pageX},!1),this.Days_Wrapper.addEventListener("touchmove",function(s){s.preventDefault(),t=s.touches[0].pageX,n=t-e;for(var o=0;o<=2;o++){var u=i.DayAreaArr[r[o]],a=(o-1)*i.WrapperWidth+n;u.style[i.transition]="none",u.style[i.transform]="translate3d("+a+"px, 0px, 0px)"}},!1),this.Days_Wrapper.addEventListener("touchend",function(e){if(Math.abs(n)<i.autoScrollOffsetX)for(var t=0;t<=2;t++){var s=i.DayAreaArr[r[t]],o=(t-1)*i.WrapperWidth;s.style[i.transition]=i.transform+" ease 0.2s",s.style[i.transform]="translate3d("+o+"px, 0px, 0px)"}else n>0?i._GoPreMonth():n<0&&i._GoNextMonth();n=0},!1),this.Days_Wrapper.addEventListener("click",function(e){var t=e.target,n=t.tagName;if(n!="UL"){while(t&&t.tagName!="BODY"&&n!="LI"){t=t.parentNode;if(t.tagName=="LI")break}var r=t.getAttribute("data-year"),s=t.getAttribute("data-month"),o=t.getAttribute("data-day");r&&s&&o&&(r=parseInt(r),s=parseInt(s),o=parseInt(o),i.day_val=o,i.month_val=s,i.year_val=r,i._clearDaySelectedStyle(),(s>i.month&&r==i.year||i.year<r&&s==1)&&i._GoNextMonth(),(s<i.month&&r==i.year||i.year>r&&s==12)&&i._GoPreMonth())}},!1)},_clearDaySelectedStyle:function(e,t,n){for(var r=0,i=this.DayAreaArr.length;r<i;r++){var s=this.DayAreaArr[r],o=s.childNodes[0].childNodes;for(var u=0,a=o.length;u<a;u++){var f=o[u];f.classList.remove("yy-clda-day-selected");var l=f.getAttribute("data-year"),c=f.getAttribute("data-month"),h=f.getAttribute("data-day");l&&c&&h&&(l=parseInt(l),c=parseInt(c),h=parseInt(h),l==this.year_val&&c==this.month_val&&h==this.day_val?f.classList.add("yy-clda-day-selected"):f.classList.remove("yy-clda-day-selected"))}}},_GoNextYearArea:function(e){var t=this,n=t.YearAreaArr[e[1]],r=t.YearAreaArr[e[0]],i=t.YearAreaArr[e[2]];n.style[t.transition]=t.transform+" ease 0.3s",n.style[t.transform]="translate3d("+t.WrapperWidth*-1+"px, 0px, 0px)",i.style[t.transition]=t.transform+" ease 0.3s",i.style[t.transform]="translate3d(0px, 0px, 0px)",r.style[t.transition]="none",r.style[t.transform]="translate3d("+this.WrapperWidth*1+"px, 0px, 0px)",t.YearAreaConfig[e[0]].start=t.YearAreaConfig[e[2]].start+12,t._createSingleYearArea(r,t.YearAreaConfig[e[0]].start),t.CurYearAreaIndex=t.CurYearAreaIndex==2?0:t.CurYearAreaIndex+1},_GoPreYearArea:function(e){var t=this,n=t.YearAreaArr[e[1]],r=t.YearAreaArr[e[0]],i=t.YearAreaArr[e[2]];n.style[t.transition]=t.transform+" ease 0.3s",n.style[t.transform]="translate3d("+t.WrapperWidth*1+"px, 0px, 0px)",r.style[t.transition]=t.transform+" ease 0.3s",r.style[t.transform]="translate3d(0px, 0px, 0px)",i.style[t.transition]="none",i.style[t.transform]="translate3d("+t.WrapperWidth*-1+"px, 0px, 0px)",t.YearAreaConfig[e[2]].start=t.YearAreaConfig[e[0]].start-12,t._createSingleYearArea(i,t.YearAreaConfig[e[2]].start),t.CurYearAreaIndex=t.CurYearAreaIndex==0?2:t.CurYearAreaIndex-1},_clearCurrentYearSelected:function(){var e=this._getCurYearAreaIndexArr(),t=this.YearAreaArr[e[1]],n=t.childNodes[0].childNodes;for(var r=0,i=n.length;r<i;r++)n[r].classList.remove("yy-clda-year-selected");return{CurYearAreaIndexArr:e,midlis:n}},_setYearSelected:function(e){var t=this._clearCurrentYearSelected(),n=t.CurYearAreaIndexArr,r=this.YearAreaConfig[n[1]];if(e>=r.start&&e<r.start+12)t.midlis[e-r.start].classList.add("yy-clda-year-selected");else if(e<r.start&&e>r.start-12)this._GoPreYearArea(n),this._setYearSelected(this.year);else if(e>=r.start+12&&e<r.start+12+12)this._GoNextYearArea(n),this._setYearSelected(this.year);else if(e>r.start){this.YearAreaConfig[n[2]].start=this.year-4,this.YearAreaConfig[n[1]].start=this.YearAreaConfig[n[2]].start-12,this.YearAreaConfig[n[0]].start=this.YearAreaConfig[n[1]].start-12;for(var i=0;i<=2;i++)this._createSingleYearArea(this.YearAreaArr[n[i]],this.YearAreaConfig[n[i]].start);this._GoNextYearArea(n),this._setYearSelected(this.year)}else if(e<r.start){var n=this._getCurYearAreaIndexArr();this.YearAreaConfig[n[0]].start=this.year-4,this.YearAreaConfig[n[1]].start=this.YearAreaConfig[n[0]].start+12,this.YearAreaConfig[n[2]].start=this.YearAreaConfig[n[1]].start+12;for(var i=0;i<=2;i++)this._createSingleYearArea(this.YearAreaArr[n[i]],this.YearAreaConfig[n[i]].start);this._GoPreYearArea(n),this._setYearSelected(this.year)}},_createCldaSelectorWrapper:function(){var e=this._createElementWithClass("DIV","yy-clda-selector-wrapper");return this.Days_Wrapper=this._createDaysWrapper(),this.Months_Wrapper=this._createMonthWrapper(),this.Years_Wrapper=this._createYearsWrapper(),e.appendChild(this.Days_Wrapper),e.appendChild(this.Months_Wrapper),e.appendChild(this.Years_Wrapper),this._bindWrapperEvents(),e},_initLayout:function(){this.Clda_BK=this._createElementWithClass("DIV","yy-clda-bk"),this.Clda_Dialog=this._createElementWithClass("DIV",this.alertWay=="INLINE"?"yy-clda-dialog-inline":"yy-clda-dialog"),this.Clda_Switch_Wrapper=this._createCldaSwitchWrapper(),this.Clda_Selector_Wrapper=this._createCldaSelectorWrapper(),this.alertWay!="INLINE"&&(this.Clda_Btn_Wrapper=this._createCldaBtnWrapper(),this.Clda_Dialog.appendChild(this.Clda_Btn_Wrapper)),this.Clda_Dialog.appendChild(this.Clda_Switch_Wrapper),this.Clda_Dialog.appendChild(this.Clda_Selector_Wrapper),this.Days_Wrapper.classList.add("yy-clda-wrapper-v"),this.container.appendChild(this.Clda_BK),this.container.appendChild(this.Clda_Dialog),this.DayAreaShowIndex=1;var e=this;this.Clda_BK.addEventListener("click",function(t){e.hide()},!1)},_setValuePar:function(e,t,n){this.year=e,this.year_val=e,this.month=t,this.month_val=t,this.day=n,this.day_val=n},setValue:function(e){this._setValuePar(this.now_year,this.now_month,this.now_day);if(typeof e=="string"){var t=e.split("-");if(t.length==3&&this.Modal=="年月日"){var n=parseInt(t[0]),r=parseInt(t[1]),i=parseInt(t[2]),s=new Date(n,r-1,i);this._setValuePar(s.getFullYear(),s.getMonth()+1,s.getDate())}else if(t.length==2){var n=parseInt(t[0]),r=parseInt(t[1]),i=1,s=new Date(n,r-1,i);this._setValuePar(s.getFullYear(),s.getMonth()+1,s.getDate())}else{var o=e.split("年");if(o.length==2){var u=o[0],a=o[1],f=a.split("月"),l=f[0],c=f[1],h=c.split("日"),p=h[0];if(!isNaN(u)&&!isNaN(l)&&!isNaN(p)){var n=parseInt(u),r=parseInt(l),i=parseInt(p),s=new Date(n,r-1,i);this._setValuePar(s.getFullYear(),s.getMonth()+1,s.getDate())}}}}this.rebindMonthAndYearTitle(),this._rebindDaysAreaByYearAndMonth(this.year,this.month)},_getMonthDayCount:function(e,t){var n=new Date(e,t,0);return n.getDate()},_fillDaysArea:function(e,t,n){e.innerHTML="";var r=document.createElement("UL"),i=this._getMonthDayCount(t,n),s=new Date(t,n-1,1),o=s.getDay(),u=o,a=this.OneDayAreaCount-i-u,f={start:0,end:0},l={start:1,end:a},c=t,h;if(u>0){var p=new Date(t,n-1,0);c=p.getFullYear(),h=p.getMonth()+1;var d=p.getDate();f.end=d,f.start=d-u+1}if(f.start>0)for(var v=f.start;v<=f.end;v++)this._appendDayUnitLiToUl(r,c,h,v,"yy-clda-no-curmonth-day");for(var v=1;v<=i;v++)this._appendDayUnitLiToUl(r,t,n,v);var m=new Date(t,n,1),g=m.getFullYear(),y=m.getMonth()+1;for(var v=l.start;v<=l.end;v++)this._appendDayUnitLiToUl(r,g,y,v,"yy-clda-no-curmonth-day");e.appendChild(r)},_appendDayUnitLiToUl:function(e,t,n,r,i){var s=document.createElement("LI"),o=document.createElement("SPAN");i&&s.classList.add(i),o.innerHTML=r,s.setAttribute("data-year",t),s.setAttribute("data-month",n),s.setAttribute("data-day",r),s.appendChild(o),t==this.year_val&&n==this.month_val&&this.day_val==r&&s.classList.add("yy-clda-day-selected"),e.appendChild(s)},Destory:function(){this.Clda_BK&&this.container.removeChild(this.Clda_BK),this.Clda_Dialog&&this.container.removeChild(this.Clda_Dialog),this.Clda_Dialog=null,this.Clda_BK=null}},{Calendar:e}}),!function(e,t){"function"==typeof define&&(define.amd||define.cmd)?define("libs/jweixin",[],function(){return t(e)}):t(e,!0)}(this,function(e,t){function n(t,n,r){e.WeixinJSBridge?WeixinJSBridge.invoke(t,i(n),function(e){o(t,e,r)}):f(t,r)}function r(t,n,r){e.WeixinJSBridge?WeixinJSBridge.on(t,function(e){r&&r.trigger&&r.trigger(e),o(t,e,n)}):r?f(t,r):f(t,n)}function i(e){return e=e||{},e.appId=O.appId,e.verifyAppId=O.appId,e.verifySignType="sha1",e.verifyTimestamp=O.timestamp+"",e.verifyNonceStr=O.nonceStr,e.verifySignature=O.signature,e}function s(e){return{timeStamp:e.timestamp+"",nonceStr:e.nonceStr,"package":e.package,paySign:e.paySign,signType:e.signType||"SHA1"}}function o(e,t,n){var r,i,s;switch(delete t.err_code,delete t.err_desc,delete t.err_detail,r=t.errMsg,r||(r=t.err_msg,delete t.err_msg,r=u(e,r),t.errMsg=r),n=n||{},n._complete&&(n._complete(t),delete n._complete),r=t.errMsg||"",O.debug&&!n.isInnerInvoke&&alert(JSON.stringify(t)),i=r.indexOf(":"),s=r.substring(i+1)){case"ok":n.success&&n.success(t);break;case"cancel":n.cancel&&n.cancel(t);break;default:n.fail&&n.fail(t)}n.complete&&n.complete(t)}function u(e,t){var n,r,i=e,s=v[i];return s&&(i=s),n="ok",t&&(r=t.indexOf(":"),n=t.substring(r+1),"confirm"==n&&(n="ok"),"failed"==n&&(n="fail"),-1!=n.indexOf("failed_")&&(n=n.substring(7)),-1!=n.indexOf("fail_")&&(n=n.substring(5)),n=n.replace(/_/g," "),n=n.toLowerCase(),("access denied"==n||"no permission to execute"==n)&&(n="permission denied"),"config"==i&&"function not exist"==n&&(n="ok"),""==n&&(n="fail")),t=i+":"+n}function a(e){var t,n,r,i;if(e){for(t=0,n=e.length;n>t;++t)r=e[t],i=d[r],i&&(e[t]=i);return e}}function f(e,t){if(!(!O.debug||t&&t.isInnerInvoke)){var n=v[e];n&&(e=n),t&&t._complete&&delete t._complete,console.log('"'+e+'",',t||"")}}function l(){0!=A.preVerifyState&&(w||E||O.debug||"6.0.2">N||A.systemType<0||C||(C=!0,A.appId=O.appId,A.initTime=L.initEndTime-L.initStartTime,A.preVerifyTime=L.preVerifyEndTime-L.preVerifyStartTime,D.getNetworkType({isInnerInvoke:!0,success:function(e){var t,n;A.networkType=e.networkType,t="http://open.weixin.qq.com/sdk/report?v="+A.version+"&o="+A.preVerifyState+"&s="+A.systemType+"&c="+A.clientVersion+"&a="+A.appId+"&n="+A.networkType+"&i="+A.initTime+"&p="+A.preVerifyTime+"&u="+A.url,n=new Image,n.src=t}})))}function c(){return(new Date).getTime()}function h(t){S&&(e.WeixinJSBridge?t():m.addEventListener&&m.addEventListener("WeixinJSBridgeReady",t,!1))}function p(){D.invoke||(D.invoke=function(t,n,r){e.WeixinJSBridge&&WeixinJSBridge.invoke(t,i(n),r)},D.on=function(t,n){e.WeixinJSBridge&&WeixinJSBridge.on(t,n)})}var d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M,_,D;if(!e.jWeixin)return d={config:"preVerifyJSAPI",onMenuShareTimeline:"menu:share:timeline",onMenuShareAppMessage:"menu:share:appmessage",onMenuShareQQ:"menu:share:qq",onMenuShareWeibo:"menu:share:weiboApp",onMenuShareQZone:"menu:share:QZone",previewImage:"imagePreview",getLocation:"geoLocation",openProductSpecificView:"openProductViewWithPid",addCard:"batchAddCard",openCard:"batchViewCard",chooseWXPay:"getBrandWCPayRequest"},v=function(){var e,t={};for(e in d)t[d[e]]=e;return t}(),m=e.document,g=m.title,y=navigator.userAgent.toLowerCase(),b=navigator.platform.toLowerCase(),w=!!b.match("mac")||!!b.match("win"),E=-1!=y.indexOf("wxdebugger"),S=-1!=y.indexOf("micromessenger"),x=-1!=y.indexOf("android"),T=-1!=y.indexOf("iphone")||-1!=y.indexOf("ipad"),N=function(){var e=y.match(/micromessenger\/(\d+\.\d+\.\d+)/)||y.match(/micromessenger\/(\d+\.\d+)/);return e?e[1]:""}(),C=!1,k=!1,L={initStartTime:c(),initEndTime:0,preVerifyStartTime:0,preVerifyEndTime:0},A={version:1,appId:"",initTime:0,preVerifyTime:0,networkType:"",preVerifyState:1,systemType:T?1:x?2:-1,clientVersion:N,url:encodeURIComponent(location.href)},O={},M={_completes:[]},_={state:0,data:{}},h(function(){L.initEndTime=c()}),D={config:function(e){O=e,f("config",e);var t=O.check===!1?!1:!0;h(function(){var e,r,i;if(t)n(d.config,{verifyJsApiList:a(O.jsApiList)},function(){M._complete=function(e){L.preVerifyEndTime=c(),_.state=1,_.data=e},M.success=function(){A.preVerifyState=0},M.fail=function(e){M._fail?M._fail(e):_.state=-1};var e=M._completes;return e.push(function(){l()}),M.complete=function(){for(var t=0,n=e.length;n>t;++t)e[t]();M._completes=[]},M}()),L.preVerifyStartTime=c();else{for(_.state=1,e=M._completes,r=0,i=e.length;i>r;++r)e[r]();M._completes=[]}}),O.beta&&p()},ready:function(e){0!=_.state?e():(M._completes.push(e),!S&&O.debug&&e())},error:function(e){"6.0.2">N||k||(k=!0,-1==_.state?e(_.data):M._fail=e)},checkJsApi:function(e){var t=function(e){var t,n,r=e.checkResult;for(t in r)n=v[t],n&&(r[n]=r[t],delete r[t]);return e};n("checkJsApi",{jsApiList:a(e.jsApiList)},function(){return e._complete=function(e){if(x){var n=e.checkResult;n&&(e.checkResult=JSON.parse(n))}e=t(e)},e}())},onMenuShareTimeline:function(e){r(d.onMenuShareTimeline,{complete:function(){n("shareTimeline",{title:e.title||g,desc:e.title||g,img_url:e.imgUrl||"",link:e.link||location.href,type:e.type||"link",data_url:e.dataUrl||""},e)}},e)},onMenuShareAppMessage:function(e){r(d.onMenuShareAppMessage,{complete:function(){n("sendAppMessage",{title:e.title||g,desc:e.desc||"",link:e.link||location.href,img_url:e.imgUrl||"",type:e.type||"link",data_url:e.dataUrl||""},e)}},e)},onMenuShareQQ:function(e){r(d.onMenuShareQQ,{complete:function(){n("shareQQ",{title:e.title||g,desc:e.desc||"",img_url:e.imgUrl||"",link:e.link||location.href},e)}},e)},onMenuShareWeibo:function(e){r(d.onMenuShareWeibo,{complete:function(){n("shareWeiboApp",{title:e.title||g,desc:e.desc||"",img_url:e.imgUrl||"",link:e.link||location.href},e)}},e)},onMenuShareQZone:function(e){r(d.onMenuShareQZone,{complete:function(){n("shareQZone",{title:e.title||g,desc:e.desc||"",img_url:e.imgUrl||"",link:e.link||location.href},e)}},e)},startRecord:function(e){n("startRecord",{},e)},stopRecord:function(e){n("stopRecord",{},e)},onVoiceRecordEnd:function(e){r("onVoiceRecordEnd",e)},playVoice:function(e){n("playVoice",{localId:e.localId},e)},pauseVoice:function(e){n("pauseVoice",{localId:e.localId},e)},stopVoice:function(e){n("stopVoice",{localId:e.localId},e)},onVoicePlayEnd:function(e){r("onVoicePlayEnd",e)},uploadVoice:function(e){n("uploadVoice",{localId:e.localId,isShowProgressTips:0==e.isShowProgressTips?0:1},e)},downloadVoice:function(e){n("downloadVoice",{serverId:e.serverId,isShowProgressTips:0==e.isShowProgressTips?0:1},e)},translateVoice:function(e){n("translateVoice",{localId:e.localId,isShowProgressTips:0==e.isShowProgressTips?0:1},e)},chooseImage:function(e){n("chooseImage",{scene:"1|2",count:e.count||9,sizeType:e.sizeType||["original","compressed"],sourceType:e.sourceType||["album","camera"]},function(){return e._complete=function(e){if(x){var t=e.localIds;t&&(e.localIds=JSON.parse(t))}},e}())},previewImage:function(e){n(d.previewImage,{current:e.current,urls:e.urls},e)},uploadImage:function(e){n("uploadImage",{localId:e.localId,isShowProgressTips:0==e.isShowProgressTips?0:1},e)},downloadImage:function(e){n("downloadImage",{serverId:e.serverId,isShowProgressTips:0==e.isShowProgressTips?0:1},e)},getNetworkType:function(e){var t=function(e){var t,n,r,i=e.errMsg;if(e.errMsg="getNetworkType:ok",t=e.subtype,delete e.subtype,t)e.networkType=t;else switch(n=i.indexOf(":"),r=i.substring(n+1)){case"wifi":case"edge":case"wwan":e.networkType=r;break;default:e.errMsg="getNetworkType:fail"}return e};n("getNetworkType",{},function(){return e._complete=function(e){e=t(e)},e}())},openLocation:function(e){n("openLocation",{latitude:e.latitude,longitude:e.longitude,name:e.name||"",address:e.address||"",scale:e.scale||28,infoUrl:e.infoUrl||""},e)},getLocation:function(e){e=e||{},n(d.getLocation,{type:e.type||"wgs84"},function(){return e._complete=function(e){delete e.type},e}())},hideOptionMenu:function(e){n("hideOptionMenu",{},e)},showOptionMenu:function(e){n("showOptionMenu",{},e)},closeWindow:function(e){e=e||{},n("closeWindow",{},e)},hideMenuItems:function(e){n("hideMenuItems",{menuList:e.menuList},e)},showMenuItems:function(e){n("showMenuItems",{menuList:e.menuList},e)},hideAllNonBaseMenuItem:function(e){n("hideAllNonBaseMenuItem",{},e)},showAllNonBaseMenuItem:function(e){n("showAllNonBaseMenuItem",{},e)},scanQRCode:function(e){e=e||{},n("scanQRCode",{needResult:e.needResult||0,scanType:e.scanType||["qrCode","barCode"]},function(){return e._complete=function(e){var t,n;T&&(t=e.resultStr,t&&(n=JSON.parse(t),e.resultStr=n&&n.scan_code&&n.scan_code.scan_result))},e}())},openProductSpecificView:function(e){n(d.openProductSpecificView,{pid:e.productId,view_type:e.viewType||0,ext_info:e.extInfo},e)},addCard:function(e){var t,r,i,s,o=e.cardList,u=[];for(t=0,r=o.length;r>t;++t)i=o[t],s={card_id:i.cardId,card_ext:i.cardExt},u.push(s);n(d.addCard,{card_list:u},function(){return e._complete=function(e){var t,n,r,i=e.card_list;if(i){for(i=JSON.parse(i),t=0,n=i.length;n>t;++t)r=i[t],r.cardId=r.card_id,r.cardExt=r.card_ext,r.isSuccess=r.is_succ?!0:!1,delete r.card_id,delete r.card_ext,delete r.is_succ;e.cardList=i,delete e.card_list}},e}())},chooseCard:function(e){n("chooseCard",{app_id:O.appId,location_id:e.shopId||"",sign_type:e.signType||"SHA1",card_id:e.cardId||"",card_type:e.cardType||"",card_sign:e.cardSign,time_stamp:e.timestamp+"",nonce_str:e.nonceStr},function(){return e._complete=function(e){e.cardList=e.choose_card_info,delete e.choose_card_info},e}())},openCard:function(e){var t,r,i,s,o=e.cardList,u=[];for(t=0,r=o.length;r>t;++t)i=o[t],s={card_id:i.cardId,code:i.code},u.push(s);n(d.openCard,{card_list:u},e)},chooseWXPay:function(e){n(d.chooseWXPay,s(e),e)}},t&&(e.wx=e.jWeixin=D),D}),define("libs/wechat",["./jweixin"],function(e){var t={init:function(t){this.setlocalStorage("wscWechatSign",t),e.config({debug:!1,appId:t.appId.toString(),timestamp:t.timestamp.toString(),nonceStr:t.nonceStr.toString(),signature:t.signature.toString(),jsApiList:["onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ","chooseImage","scanQRCode","uploadImage","chooseWXPay"]})},scanQRCode:function(t,n){e.scanQRCode({needResult:t,scanType:["qrCode","barCode"],success:function(e){var t=e.resultStr;n&&typeof n=="function"&&n(t)}})},onMenuShareTimeline:function(t,n){var r=this.getlocalStorage("wscWechatSign");e.onMenuShareTimeline({title:r.title,link:r.link,imgUrl:r.imgUrl,success:function(){t&&typeof t=="function"&&t()},cancel:function(){n&&typeof n=="function"&&n()}})},onMenuShareAppMessage:function(t,n){var r=this.getlocalStorage("wscWechatSign");e.onMenuShareAppMessage({title:r.title,link:r.link,imgUrl:r.imgUrl,desc:r.desc,type:"",dataUrl:"",success:function(){t&&typeof t=="function"&&t()},cancel:function(){n&&typeof n=="function"&&n()}})},onMenuShareQQ:function(t,n){var r=this.getlocalStorage("wscWechatSign");e.onMenuShareQQ({title:r.title,link:r.link,imgUrl:r.imgUrl,desc:r.desc,success:function(){t&&typeof t=="function"&&t()},cancel:function(){n&&typeof n=="function"&&n()}})},chooseImage:function(t){e.chooseImage({count:1,sizeType:["original","compressed"],sourceType:["album","camera"],success:function(e){var n=e.localIds;t&&typeof t=="function"&&t(n)}})},uploadImage:function(t,n,r){e.uploadImage({localId:t,isShowProgressTips:n,success:function(e){var t=e.serverId;r&&typeof r=="function"&&r(t)}})},downloadImage:function(t,n){e.downloadImage({serverId:t,isShowProgressTips:1,success:function(e){var t=e.localId;n&&typeof n=="function"&&n(t)}})},onBridgeReady:function(){},chooseWXPay:function(e){WeixinJSBridge.invoke("getBrandWCPayRequest",{appId:e.config.appId,timeStamp:e.config.timeStamp,nonceStr:e.config.nonceStr,"package":e.config.package,signType:"MD5",paySign:e.config.paySign},function(t){t.err_msg=="get_brand_wcpay_request:ok"?e.success&&typeof e.success=="function"&&e.success(t):e.error&&typeof e.error=="function"&&e.error(t)})},closeWindow:function(){e.closeWindow()},getLocation:function(){e.getLocation({type:"wgs84",success:function(e){var t=e.latitude,n=e.longitude,r=e.speed,i=e.accuracy}})},getlocalStorage:function(e){var t=localStorage.getItem(e);return t&&t!="null"&&t!="undefined"?JSON.parse(t):!1},setlocalStorage:function(e,t){return localStorage.setItem(e,JSON.stringify(t))}};return t}),define("models/AddShoppingCart",["./BaseModel"],function(e){return e.extend({})}),define("models/AddressListCollection",["./AjaxCollection"],function(e){return e.extend({})}),define("models/AjaxCollection0",["./StaticCollection"],function(e){return e.extend({url:function(){return window.app.api},allDataLoaded:!1,ajaxOptions:{},isLoading:!1,loadData:function(e){isLoading=!0,e=e||this.ajaxOptions,this.ajaxOptions=e;var t=this.url;t&&typeof t!="string"&&(t=t());var n=e.url||t+e.path,r=e.data||{};e.showLoading&&library.LoadingBar(e.loadingMessage);var i=this;console.log(e);var s=function(t){isLoading=!1,console.log(t),e.showLoading&&library.DismissLoadingBar();if(t.status=="0"||t.status==0){if(e.data&&e.data.size){var n=e.data.index,r=e.data.size;t.data.pageCount?i.allDataLoaded=t.data.pageCount==n:t.data.length<r&&(i.allDataLoaded=!0)}e.needReset&&(t.data&&t.data.list?e.data.index&&e.data.index>1?i.add(t?t.data.list:[]):i.reset(t?t.data.list:[]):e.data.index&&e.data.index>1?i.add(t?t.data:[]):i.reset(t?t.data:[])),e.success&&e.success(t)}else e.error&&e.error(t)},o=function(t){isLoading=!1,e.showLoading&&library.DismissLoadingBar(),i.allDataLoaded=!0,e.error&&e.error(t)};application.ajax(e.type,n,r,s,o)},hasNextPage:function(){return!this.allDataLoaded},getNextPage:function(){this.ajaxOptions.data.index++,console.log(this.ajaxOptions.data),this.loadData(this.ajaxOptions)}})}),define("models/AllOrderListCollection",["./AjaxCollection"],function(e){return e.extend({allDataLoaded:!1,allOrderUrl:window.app.api+"/getOrderList",queryData:{},filterData:function(e){this.queryData.status=e||0,this.queryData.status=this.queryData.status+"",this.queryData.index=1,this.ajaxOptions.data=this.queryData,this.loadData(this.ajaxOptions)},filterType:function(e){this.queryData.type=e||0,this.queryData.type=this.queryData.type+"",this.queryData.index=1,this.ajaxOptions.data=this.queryData,this.loadData(this.ajaxOptions)},reloadData:function(){this.ajaxOptions.data.index=1,this.loadData(this.ajaxOptions)}})}),define("models/AllServiceListCollection",["./AjaxCollection"],function(e){return e.extend({allDataLoaded:!1,allServiceUrl:window.app.api+"/getServiceList",queryData:{},filterData:function(e){this.queryData.resultType=e||0,this.ajaxOptions.data=this.queryData,this.loadData(this.ajaxOptions)},filterType:function(e){this.queryData.type=e||0,this.queryData.type=this.queryData.type+"",this.queryData.index=1,this.ajaxOptions.data=this.queryData,this.loadData(this.ajaxOptions)},reloadData:function(){this.ajaxOptions.data.index=1,this.loadData(this.ajaxOptions)}})}),define("models/BalanceDetailCollection",["./AjaxCollection"],function(e){return e.extend({queryData:{},testData:[],initialize:function(){},getNextPage:function(){},parse:function(e){return console.log(e),alert("s"),e.productlist},filterData:function(e){this.queryData.orderStatus=e,this.queryData.pageindex=1,this.ajaxOptions.data=this.queryData,this.loadData(this.ajaxOptions)},reloadData:function(){this.ajaxOptions.data.pageindex=1,this.loadData(this.ajaxOptions)}})}),define("models/BranIntroduceModel",["./BaseModel"],function(e){return e.extend({})}),define("models/BrandListCollection",["./AjaxCollection"],function(e){return e.extend({})}),define("models/BusinessModle",["backbone"],function(e){return e.Model.extend({defaults:{shoplogo:"images/product_list/1.jpg",shopid:102001,shopname:"中国大保健",tel:"13431027468",isCollected:!0}})}),define("models/BusunessAllProductsCollection",["./AjaxCollection"],function(e){return e.extend({queryData:{},url:window.app.api,onFilter:function(e){console.log(e),console.log(this.ajaxOptions);if(!e)return;this.ajaxOptions.data.category=e.category.join(","),this.ajaxOptions.data.brandid=e.brand.join(","),this.ajaxOptions.data.priceMin=e.price.min,this.ajaxOptions.data.priceMax=e.price.max,this.ajaxOptions.data.sorttype=5,this.ajaxOptions.data.pageindex=1,this.loadData()}})}),define("models/BusunessNewProductsCollection",["./AjaxCollection"],function(e){return e.extend({queryData:{},url:window.app.api,onFilter:function(e){console.log(e),console.log(this.ajaxOptions);if(!e)return;this.ajaxOptions.data.category=e.category.join(","),this.ajaxOptions.data.brandid=e.brand.join(","),this.ajaxOptions.data.priceMin=e.price.min,this.ajaxOptions.data.priceMax=e.price.max,this.ajaxOptions.data.sorttype=5,this.ajaxOptions.data.pageindex=1,this.loadData()}})}),define("models/BusunessProductsCollection",["./AjaxCollection"],function(e){return e.extend({queryData:{},url:window.app.api,onFilter:function(e){console.log(e),console.log(this.ajaxOptions);if(!e)return;this.ajaxOptions.data.category=e.category.join(","),this.ajaxOptions.data.brandid=e.brand.join(","),this.ajaxOptions.data.priceMin=e.price.min,this.ajaxOptions.data.priceMax=e.price.max,this.ajaxOptions.data.sorttype=5,this.ajaxOptions.data.pageindex=1,this.loadData()}})}),define("models/CatelogDetailListCollection",["./AjaxCollection"],function(e){return e.extend({})}),define("models/CatelogListCollection",["./AjaxCollection"],function(e){return e.extend({})}),define("models/ConfirmOrderSetCollection",["./AjaxCollection"],function(e){return e.extend({})}),define("models/ConfirmSetModel",["./BaseModel"],function(e){return e.extend({})}),define("models/CouponCollection",["./AjaxCollection"],function(e){return e.extend({})}),define("models/CouponCollection1",["./AjaxCollection"],function(e){return e.extend({})}),define("models/CreditCardCollection",["./StaticCollection"],function(e){return e.extend({demoData:{items:[{cardId:"LC1234453",cardValue:"10"},{cardId:"LC1234455",cardValue:"20"}]},initialize:function(){this.reset(this.demoData.items)}})}),define("models/CreditCollection",["./AjaxCollection"],function(e){return e.extend({queryData:{},testData:[],initialize:function(){},getNextPage:function(){this.add([{name:"ssss"}])},filterData:function(e){this.queryData.orderStatus=e,this.queryData.pageindex=1,this.ajaxOptions.data=this.queryData,this.loadData(this.ajaxOptions)},reloadData:function(){this.ajaxOptions.data.pageindex=1,this.loadData(this.ajaxOptions)}})}),define("models/CreditDetailCollection",["./AjaxCollection"],function(e){return e.extend({queryData:{},testData:[],initialize:function(){},getNextPage:function(){},parse:function(e){return console.log(e),alert("s"),e.productlist},filterData:function(e){this.queryData.orderStatus=e,this.queryData.pageindex=1,this.ajaxOptions.data=this.queryData,this.loadData(this.ajaxOptions)},reloadData:function(){this.ajaxOptions.data.pageindex=1,this.loadData(this.ajaxOptions)}})}),define("models/CrowdfundingCollection",["./AjaxCollection"],function(e){return e.extend({})}),define("models/EvaluateGoodsModel",["./AjaxCollection"],function(e){return e.extend({commentOrderUrl:window.app.api+"/getAllOrderList"})}),define("models/GoodDetailModel",["./BaseModel"],function(e){return e.extend({})}),define("models/GoodsCollector",["./AjaxCollection"],function(e){return e.extend({})}),define("models/GroupBuyListCollection",["./AjaxCollection"],function(e){return e.extend({})}),define("models/HistoryCollection",["./AjaxCollection"],function(e){return e.extend({})}),define("models/HomeADImgsModel",["./AjaxCollection"],function(e){return e.extend({})}),define("models/HomeAllModel",["./BaseModel"],function(e){return e.extend({})}),define("models/HomeBrandModel",["./StaticCollection"],function(e){return e.extend({items:[{imageurl:"http://img.alicdn.com/bao/uploaded/TB1lP2_HpXXXXbHXXXXSutbFXXX.jpg_120x120Q30.jpg"},{imageurl:"http://img.alicdn.com/bao/uploaded/TB1T0E_IXXXXXbBaXXXwu0bFXXX.png_120x120Q30.jpg"},{imageurl:"http://img.alicdn.com/bao/uploaded/TB1UN.sIpXXXXXEXFXXq6xXFXXX_120x120Q30.jpg"},{imageurl:"http://img.alicdn.com/bao/uploaded/TB1f5.HIpXXXXawXXXXq6xXFXXX_120x120Q30.jpg"},{imageurl:"http://gw2.alicdn.com/bao/uploaded//2c/9c/TB1HzKeGXXXXXadXVXXSutbFXXX.jpg"},{imageurl:"http://img.alicdn.com/bao/uploaded/TB1dAMgIXXXXXcjXXXXSutbFXXX.jpg_120x120Q30.jpg"},{imageurl:"http://img.alicdn.com/bao/uploaded/TB1FIXKJFXXXXbiXFXXSutbFXXX.jpg_120x120Q30.jpg"},{imageurl:"http://img.alicdn.com/bao/uploaded/TB15ktbIFXXXXbAaXXXSutbFXXX.jpg_120x120Q30.jpg"},{imageurl:"http://img.alicdn.com/bao/uploaded/TB19PfQHpXXXXaTXFXXwu0bFXXX.png_120x120Q30.jpg"}],sync:function(){this.reset(this.models)}})}),define("models/HomeRecommendModel",["./AjaxCollection"],function(e){return e.extend({})}),define("models/MongoRestCollection",["backbone","./BaseCollection","underscore"],function(e,t,n){return t.extend({mode:"server",initialize:function(){t.prototype.initialize.apply(this,arguments),this.model.prototype.idAttribute="_id";var r=e.sync;e.sync=function(e,t,i){e=="update"&&(i.contentType="application/json",i.data=JSON.stringify(n.omit(t.toJSON(),"_id"))),r(e,t,i)}},parse:function(e){return e.length<this.state.pageSize&&this.trigger("end",this),e},hasNextPage:function(){return!0},state:{firstPage:0,pageSize:10},queryParams:{currentPage:null,pageSize:"limit",skip:function(){return this.state.pageSize*this.state.currentPage},totalRecords:null}})}),define("models/HomeSeckillModel",["./MongoRestCollection"],function(e){return e.extend({demoData:[{id:"xx1111xx",price:"59",discount:"19",imageurl:"http://m.360buyimg.com/mobilecms/s220x220_jfs/t2422/135/111075801/207818/600c8ba0/55eebb92Nce3ca09a.jpg!q70.jpg"},{id:"x111111111111111xxx",price:"61",discount:"20",imageurl:"http://m.360buyimg.com/mobilecms/s220x220_jfs/t1882/91/1046307344/76483/3b98ea0f/56399ebeN9ab907f6.jpg!q70.jpg"},{id:"1111",price:"59",discount:"10",imageurl:"http://m.360buyimg.com/mobilecms/s220x220_jfs/t2437/158/655023102/128758/b15c8422/561df2c7N98845f3f.jpg!q70.jpg"}],initialize:function(){this.reset(this.demoData)},url:function(){return"http://do.kdweibo.com/openauth2/api/appAuth2"},loadData:function(e){this.fetch({success:function(){e.success&&e.success()},error:function(){e.error&&e.error()}})},parse:function(e,t){return this.demoData}})}),define("models/HomeShopModel",["./AjaxCollection"],function(e){return e.extend({})}),define("models/HomeTopicModel",["./MongoRestCollection"],function(e){return e.extend({urls:[window.app.api+"/activities1",window.app.api+"/activities"],url:function(e){var t;return e?t=(window.app?window.app.api:"")+e:t=(window.app?window.app.api:"")+"/activities",t},loadData:function(e){this.fetch({success:function(t){e.success&&e.success(t.attributes)},error:function(){e.error&&e.error()}})}})}),define("models/LogisticsModel",["./BaseModel"],function(e){return e.extend({})}),define("models/MessageCenterCollection",["./AjaxCollection"],function(e){return e.extend({queryData:{},testData:[],initialize:function(){},getNextPage:function(){this.add([{name:"ssss"}])},filterData:function(e){this.queryData.orderStatus=e,this.queryData.pageindex=1,this.ajaxOptions.data=this.queryData,this.loadData(this.ajaxOptions)},reloadData:function(){this.ajaxOptions.data.pageindex=1,this.loadData(this.ajaxOptions)}})}),define("models/MyAccountModel",["backbone"],function(e){return e.Model.extend({defaults:{account:"",name:"",sex:"保密",birthday:"",headurl:"./images/login/person_head.png",phoneNum:""}})}),define("models/OrderAddressModel",["./BaseModel"],function(e){return e.extend({url:function(){return""},parse:function(e){return e}})}),define("models/OrderInfoModel",["./BaseModel"],function(e){return e.extend({createOrderUrl:window.app.api+"/createorder",orderInfoUrl:window.app.api+"/getOrderDetail",cancelOrderUrl:window.app.api+"/cancelOrder",receiveOrderUrl:window.app.api+"/confirmOrder",receiveCreditOrderUrl:window.app.api+"/updateOrderStatu"})}),define("models/OrderShopListCollection",["./StaticCollection"],function(e){return e.extend({})}),define("models/OverdueCouponCollection",["./AjaxCollection"],function(e){return e.extend({})}),define("models/PackageAllOrderListCollection",["./AjaxCollection"],function(e){return e.extend({allDataLoaded:!1,allOrderUrl:window.app.api+"/getSuitOrderList",queryData:{},filterData:function(e){this.queryData.status=e||0,this.queryData.status=this.queryData.status+"",this.queryData.index=1,this.ajaxOptions.data=this.queryData,this.loadData(this.ajaxOptions)},filterType:function(e){this.queryData.type=e||0,this.queryData.type=this.queryData.type+"",this.queryData.index=1,this.ajaxOptions.data=this.queryData,this.loadData(this.ajaxOptions)},reloadData:function(){this.ajaxOptions.data.index=1,this.loadData(this.ajaxOptions)}})}),define("models/PayModel",["./BaseModel"],function(e){return e.extend({payCallback:null,startPay:function(e,t,n,r,i,s){this.payCallback=i;var o={path:s,type:"POST",needReset:!1,showLoading:!0,data:{userId:t,payWayId:n,sendWayId:r,orderId:e},success:function(e){e?e.data&&e.data.payInfo&&e.data.payInfo.prePayId?this.toPay(e.data.payInfo.prePayId):library.Toast("调起银联失败，请重试"):library.Toast("调起银联失败 获取prePayId失败")}.bind(this),error:function(e){console.log(e),library.Toast("调起银联失败，请重试 ")}};this.loadData(o)},startBalancePay:function(e,t,n){var r={path:n,showLoading:!0,data:e,success:t,error:t};this.loadData(r)},startWXInnerPay:function(){var e=function(e){e.err_msg=="ok"}},toPay:function(e,t){cordova&&cordova.plugins?cordova.plugins.yypay.pay(e,"01",this.payCallback,this.payCallback):console.log("支付插件初始化失败")}})}),define("models/ProductListCollection",["./AjaxCollection"],function(e){return e.extend({queryData:{},testData:[],initialize:function(){},filterData:function(e){this.queryData.orderStatus=e,this.queryData.pageindex=1,this.ajaxOptions.data=this.queryData,this.loadData(this.ajaxOptions)},reloadData:function(){this.ajaxOptions.data.pageindex=1,this.loadData(this.ajaxOptions)}})}),define("models/ProductParameterCollection",["./AjaxCollection"],function(e){return e.extend({queryData:{},testData:[],initialize:function(){},filterData:function(e){this.queryData.orderStatus=e,this.queryData.pageindex=1,this.ajaxOptions.data=this.queryData,this.loadData(this.ajaxOptions)},reloadData:function(){this.ajaxOptions.data.pageindex=1,this.loadData(this.ajaxOptions)}})}),define("models/ShopCollector",["./AjaxCollection"],function(e){return e.extend({})}),define("models/ShoppingcartnumCollection",["backbone"],function(e){return e.Collection.extend({url:function(){return(window.app?window.app.api:"")+"/shopingcart"}})}),define("models/SlickViewCollection",["./StaticCollection"],function(e){return e.extend({items:[{src:"./images/carousel/chuangmeigongyi.jpg",linkurl:"http://ymall.yonyou.com/"},{src:"./images/carousel/yonyoududu.jpg",linkurl:"http://ymall.yonyou.com/"},{src:"./images/carousel/dianshang.jpg",linkurl:"http://ymall.yonyou.com/"},{src:"./images/carousel/changjiewangyin.jpg",linkurl:"http://ymall.yonyou.com/"},{src:"./images/carousel/chaoke.jpg",linkurl:"http://ymall.yonyou.com/"}],initialize:function(){this.reset(this.items)},sync:function(){Backbone.trigger("sync"),this.reset(this.models)}})}),define("models/credit-list",["./AjaxCollection"],function(e){return e.extend({})}),define("models/itemDetailCollection",["./AjaxCollection"],function(e){return e.extend({})}),define("models/logiticsCollection",["./AjaxCollection"],function(e){return e.extend({})}),define("models/logiticsModel",["backbone"],function(e){return e.Model.extend({url:function(){return(window.app?window.app.url:"")+"/api/v2/collections/"+this.id},defaults:{state:"运输中",id:"K189279783928",company:"用友深圳配送中心"},fetch:function(){},parse:function(e){return e}})}),define("models/myOrderListCollection",["./StaticCollection"],function(e){return e.extend({url:function(){return window.app.api},allServiceUrl:window.app.api+"/getMembersOrders",queryData:{},allDataLoaded:!1,ajaxOptions:{},isLoading:!1,loadData:function(e){isLoading=!0,e=e||this.ajaxOptions,this.ajaxOptions=e;var t=this.url;t&&typeof t!="string"&&(t=t());var n=e.url||t+e.path,r=e.data||{};e.showLoading&&library.LoadingBar(e.loadingMessage);var i=this;console.log(e);var s=function(t){isLoading=!1,console.log(t),e.showLoading&&library.DismissLoadingBar();if(t.status=="0"||t.status==0){if(e.data&&e.data.size){var n=e.data.index,r=e.data.size;t.data.pageCount?i.allDataLoaded=t.data.pageCount==n:t.data.length<r&&(i.allDataLoaded=!0)}e.needReset&&(t.data&&t.data.orderList?e.data.index&&e.data.index>1?i.add(t?t.data.orderList:[]):i.reset(t?t.data.orderList:[]):e.data.index&&e.data.index>1?i.add(t?t.data:[]):i.reset(t?t.data:[])),e.success&&e.success(t)}else e.error&&e.error(t)},o=function(t){isLoading=!1,e.showLoading&&library.DismissLoadingBar(),i.allDataLoaded=!0,e.error&&e.error(t)};application.ajax(e.type,n,r,s,o)},hasNextPage:function(){return!this.allDataLoaded},getNextPage:function(){this.ajaxOptions.data.index++,console.log(this.ajaxOptions.data),this.loadData(this.ajaxOptions)},filterData:function(e){this.ajaxOptions.data=e,this.loadData(this.ajaxOptions)},filterType:function(e){this.queryData.type=e||0,this.queryData.type=this.queryData.type+"",this.queryData.index=1,this.ajaxOptions.data=this.queryData,this.loadData(this.ajaxOptions)},reloadData:function(){this.ajaxOptions.data.index=1,this.loadData(this.ajaxOptions)}})}),define("models/packageCollection",["./AjaxCollection"],function(e){return e.extend({})}),define("models/packageDetailCollection",["./AjaxCollection"],function(e){return e.extend({})}),define("models/senderCollection",["./AjaxCollection"],function(e){return e.extend({})}),define("text!pages/about.html",[],function(){return'<div class=\'us-about-top\'>\n    <img src="images/login/pic_logo.png" class="us-logo">\n    <div class="us-about-v">V1.0版本</div>\n</div>\n<div>\n  <component id="PopupMenu"/>\n</div>\n'}),define("pages/about",["./PageView","require"],function(e,t){return e.extend({events:{"click .header-icon-back":"onBack","click .icomoon-moremore":"menuMore"},initialize:function(){this.listenTo(this.findComponent("PopupMenu"),"toSearch",this.toSearch.bind(this))},menuMore:function(e){this.findComponent("PopupMenu").show()},toSearch:function(e){this.findComponent("SearchMidPageView").show()},render:function(){return e.prototype.render.apply(this,arguments),this},onBack:function(){window.history.back()},onResume:function(){this.toggleBar&&this.toggleBar("hide"),this.$(".bar").show();var e=t("../models/BaseModel"),n=new e;n.loadData({path:"/checkVersionUpdate",type:"POST",data:{},success:function(){},error:function(){}})}})}),define("text!pages/about.json",[],function(){return'{\n    "template": "about.html",\n    "type": "about",\n    "header": {\n        "title": "关于",\n        "items": [{\n            "type": "link",\n            "icon": "header-icon-back icomoon-back",\n            "pull": "left",\n            "event": "back"\n        }, {\n            "type": "link",\n            "icon": "header-icon-menu icomoon-moremore",\n            "pull": "right",\n            "event": "menuMore"\n        }]\n    },\n    "components": [{\n            "id": "PopupMenu",\n            "type": "PopupMenu"\n        }\n    ]\n}\n'}),define("text!pages/addressSelect.html",[],function(){return'<div class="my-address-title">\n  <header class="headerbox">\n      <div class=" nav-left header-icon-back address-title-icon">\n          <span class="icomoon icomoon-back"></span>\n      </div>\n      <div class=\'mid\'>\n        <span class="common-title">收货地址选择</span>\n      </div>\n      <div class="left-right nav-right">\n\n      </div>\n\n  </header>\n</div>\n<div>\n  <component id=\'AddressListView\'/>\n</div>\n<div class="address-actionBtn-div">\n  <button class="address-actionBtn theme-backgorund-color">管理收货地址</button>\n</div>\n'}),define("pages/addressSelect",["./PageView","require"],function(e,t){return e.extend({events:{"click .header-icon-back":"goback","click .address-select-li":"cellClickChange","click .address-actionBtn":"addressManageClick"},notifyEdit:null,_this:null,isDefault:null,defaultTarget:null,defaultCurrentTarget:null,addressCollection:null,onRender:function(){this.$el.css("background-color","whitesmoke"),this.initData()},initData:function(){var e=window.application.getUserInfo();if(!e){library.Toast("您尚未登录"),window.history.back();return}this.addressCollection=this.findComponent("AddressListView").collection;var t={path:"/my-address/list",needReset:!0,showLoading:!0,type:"POST",data:{userId:e.userid,index:1,size:10}};this.addressCollection.loadData(t)},cellClickChange:function(e){window.app.param1=this.findComponent("AddressListView").collection.models[$(e.currentTarget).index()],window.history.back()},addressManageClick:function(e){Backbone.history.navigate("#home-navigate/my-address",{trigger:!0})},goback:function(e){window.history.back()},onResume:function(){this.toggleBar&&this.toggleBar("hide"),this.$(".bar").show()}})}),define("text!pages/addressSelect.json",[],function(){return'{\n  "template": "addressSelect.html",\n  "type":"addressSelect",\n  "components" : [\n    {\n      "type": "AddressListView",\n      "id" : "AddressListView",\n      "template": "addressSelectView.html",\n      "collection": "AddressListCollection"\n    }]\n}\n'}),define("text!pages/addshoppingcart.html",[],function(){return'<div class="add-shop-cart">\n  <div class="shop-cart-info">\n    <div class="shopcart-info-title">\n      <img class="info-title-img" src="//img.alicdn.com/bao/uploaded/i3/TB1sIZ1JFXXXXcfXXXXXXXXXXXX_!!0-item_pic.jpg_480x480q50.jpg" alt="" />\n      <div class="info-title-words">\n        <div class="info-title-words-collection">\n          applegir女士睡衣灯芯绒可爱居家红色套装纯棉 时尚保暖加厚秋季居家服\n        </div>\n        <span class="info-title-words-rmb">\n          ¥\n        </span>\n        <span class="info-title-words-num">\n          12.5\n        </span>\n      </div>\n      <div class="info-title-svg icomoon-close"></div>\n    </div>\n    <div class="shopcart-info-method">\n      <div class="info-method-title">\n        交易方式\n      </div>\n      <div class="info-method-microcredit info-spec-selected">小额批发</div><div class="info-method-staple info-spec-selected-no">大宗交易</div>\n      <div class="info-method-tips">\n        最小起批量10\n      </div>\n    </div>\n    <div class="shopcart-info-spec">\n      <div class="info-spec-title">\n        规格\n      </div>\n      <ul>\n        <li class="info-spec-box info-spec-selected-no" data-index = "1">\n          xxxx\n        </li><li class="info-spec-box info-spec-selected-no" data-index = "2">\n          xxxx\n        </li><li class="info-spec-box info-spec-selected-no" data-index = "3">\n          xxxx\n        </li><li class="info-spec-box info-spec-selected-no" data-index = "4">\n          xxxx\n        </li><li class="info-spec-box info-spec-selected-no" data-index = "5">\n          xxxx\n        </li>\n      </ul>\n\n    </div>\n    <div class="shopcart-info-number">\n      <div class="info-number-title">\n        数量\n      </div>\n      <div class="info-number-tips">\n        剩余100件\n      </div>\n      <div class="mui-number">\n        <button type="button" class="mui-numbox-btn-minus">-</button><input class="mui-numbox-input" type="tel" value="10" min="10" max="100"/><button type="button" class="mui-numbox-btn-plus">+</button>\n      </div>\n    </div>\n    <div class="shopcart-info-btn theme-backgorund-color">\n      确定\n\n    </div>\n  </div>\n</div>\n'}),define("pages/addshoppingcart",["./PageView"],function(e){return e.extend({events:{"change .mui-numbox-input":"inputchange"},inputchange:function(){var e=$(".mui-numbox-input").val();e>100&&(e=100),e<10&&(e=10),e=parseInt(e),$(".mui-numbox-input").val(e)},render:function(){return e.prototype.render.apply(this,arguments),this},onRender:function(){_this=this,this.$el.find(".info-title-svg").click(function(){$(".add-shop-cart").removeClass("add-shop-cart-show")}),this.$el.find(".info-method-staple").click(function(){_this.$(".info-method-staple").hasClass("info-spec-selected-no")&&(_this.$(".info-method-staple").removeClass("info-spec-selected-no"),_this.$(".info-method-staple").addClass("info-spec-selected"),_this.$(".info-method-microcredit").addClass("info-spec-selected-no"),_this.$(".info-method-microcredit").removeClass("info-spec-selected"),_this.$(".info-method-tips").text("最小起批量100"),_this.$(".shopcart-info-spec").hide())}),this.$el.find(".info-method-microcredit").click(function(){_this.$(".info-method-microcredit").hasClass("info-spec-selected-no")&&(_this.$(".info-method-microcredit").removeClass("info-spec-selected-no"),_this.$(".info-method-microcredit").addClass("info-spec-selected"),_this.$(".info-method-staple").addClass("info-spec-selected-no"),_this.$(".info-method-staple").removeClass("info-spec-selected"),_this.$(".info-method-tips").text("最小起批量10"),_this.$(".shopcart-info-spec").show())}),this.$el.find(".info-spec-box").click(function(e){var t=$(e.target).attr("data-index");_this.$(".info-spec-box").removeClass("info-spec-selected"),_this.$(".info-spec-box").addClass("info-spec-selected-no"),_this.$(".info-spec-box[data-index='"+t+"']").removeClass("info-spec-selected-no"),_this.$(".info-spec-box[data-index='"+t+"']").addClass("info-spec-selected")}),this.$el.find(".mui-numbox-btn-minus").click(function(){var e=$(".mui-numbox-input").val();e=parseInt(e),e-=1,e>=10&&$(".mui-numbox-input").val(e)}),this.$el.find(".mui-numbox-btn-plus").click(function(){var e=$(".mui-numbox-input").val();e=parseInt(e),e+=1,e<=100&&$(".mui-numbox-input").val(e)})}})}),define("text!pages/addshoppingcart.json",[],function(){return'{\n  "type": "addshoppingcart",\n  "template":"addshoppingcart.html"\n}\n'}),define("text!pages/afterPayment.html",[],function(){return'<div class="after-payment-page">\n	<component id="SearchMidPageView" />\n	<component id="PopupMenu" />\n	<div class="paysuccess-common-order">\n		<div class="paysuccess-order-info">\n			<component id="OrderShopListView" />\n			<component id="AddressInOrderView" />\n		</div>\n		<div class="paid-number-item">\n			<span class="paid-text">实付款：</span>			\n			<span class="paid-number theme-color"></span>\n		</div>\n		<div style="background-color: white;border-bottom: 1px solid #ddd;height: 1.33333333rem;line-height: 1.33333333rem;">\n			<span style="padding-left:0.26667rem;"class="jifen-paid-text">积分抵款：</span>\n		       <span class="jifen-paid-number theme-color"></span>\n		</div>\n		\n	</div>\n	<div class="paysuccess-group-cf-order">\n		<div class="group-cf-order-logo icomoon icomoon-success"></div>\n		<div class="group-cf-order-des"></div>\n	</div>\n\n	<div class="paid-bottom-button">\n		<div class="theme-backgorund-color left-button">订单详情</div>\n		<div class="right-button white-style">继续购买</div>\n	</div>\n	<div ><component id="ShareView"/></div>\n</div>\n'}),define("pages/afterPayment",["./PageView","require"],function(e,t){return e.extend({events:{"click .icomoon-back":"onBack","click .icomoon-moremore":"menuMore","click .left-button":"toOrderDetail","click .right-button":"toShareMenu"},orderMap:{},orderId:null,suitId:null,productInfo:null,createOrderResult:null,initialize:function(){this.listenTo(this.findComponent("PopupMenu"),"toSearch",this.toSearch.bind(this))},menuMore:function(e){this.findComponent("PopupMenu").show()},toSearch:function(e){this.findComponent("SearchMidPageView").show()},onBack:function(){this.onRemove(),Backbone.history.navigate("#home-navigate/",{trigger:!0})},onResume:function(){this.toggleBar&&this.toggleBar("hide"),this.$(".bar").show(),this.createOrderResult=window.app.createOrderResult;if(!this.createOrderResult){window.history.back();return}console.log(this.createOrderResult),this.productInfo=this.createOrderResult.orderInfo.productInfo,this.orderId=this.createOrderResult.orderInfo.orderId,this.suitId=this.createOrderResult.orderInfo.productInfo.suitId,window.app.createOrderType==5?(this.$(".paysuccess-common-order").hide(),this.$(".paysuccess-group-cf-order").show(),this.$(".group-cf-order-des").text("参团成功，请您耐心等待订单后续通知")):window.app.createOrderType==6?(this.$(".paysuccess-common-order").hide(),this.$(".paysuccess-group-cf-order").show(),this.$(".group-cf-order-des").text("众筹成功，请您耐心等待订单后续通知")):this.suitId?(this.$(".paysuccess-common-order").show(),this.$(".paysuccess-group-cf-order").hide(),this.setSuitOrderInfo()):this.orderId&&(this.$(".paysuccess-common-order").show(),this.$(".paysuccess-group-cf-order").hide(),this.setCommonOrderInfo()),window.app.createOrderResult=null},setCommonOrderInfo:function(){var e={};e.discountPrice=this.productInfo.discountPrice,e.freightPrice=this.productInfo.freightPrice,e.isSuit=this.productInfo.isSuit,e.suitNumber=this.productInfo.suitNumber,e.totalPrice=this.productInfo.totalPrice;var t=[];for(var n=0;n<this.productInfo.goodsList.length;n++){var r={};r.goodName=this.productInfo.goodsList[n].goodName,r.goodsId=this.productInfo.goodsList[n].goodsId,r.goodsImage=this.productInfo.goodsList[n].goodsImage,r.goodsPrice=this.productInfo.goodsList[n].goodsPrice,r.goodsSpec=this.productInfo.goodsList[n].goodsSpec,r.isDiscount=this.productInfo.goodsList[n].isDiscount,r.number=this.productInfo.goodsList[n].number,r.startTime=this.productInfo.goodsList[n].startTime,t.push(r)}e.items=t,this.setAddressModel(this.createOrderResult.orderInfo.addressModel),this.findComponent("OrderShopListView").collection.reset(e),this.$(".shop-info").css({"margin-top":"0"}),this.$(".paid-number").text("￥"+this.createOrderResult.orderFee),this.$(".jifen-paid-number").text("￥"+this.createOrderResult.orderInfo.productInfo.totalPrice)},setSuitOrderInfo:function(){var e={};e.discountPrice=this.productInfo.discountPrice,e.freightPrice=this.productInfo.freightPrice,e.isSuit=this.productInfo.isSuit,e.suitNumber=this.productInfo.suitNumber,e.totalPrice=this.productInfo.totalPrice;var t=[];for(var n=0;n<this.productInfo.goodsList.length;n++){var r={};r.goodName=this.productInfo.goodsList[n].goodName,r.goodsId=this.productInfo.goodsList[n].goodsId,r.goodsImage=this.productInfo.goodsList[n].goodsImage,r.goodsPrice=this.productInfo.goodsList[n].goodsPrice,r.goodsSpec=this.productInfo.goodsList[n].goodsSpec,r.isDiscount=this.productInfo.goodsList[n].isDiscount,r.number=this.productInfo.goodsList[n].number,r.startTime=this.productInfo.goodsList[n].startTime,t.push(r)}e.items=t,this.setAddressModel(this.createOrderResult.orderInfo.addressModel),this.findComponent("OrderShopListView").collection.reset(e),this.$(".shop-info").css({"margin-top":"0"}),this.$(".paid-number").text("￥"+this.createOrderResult.orderFee),this.$(".jifen-paid-number").text("￥"+this.createOrderResult.orderInfo.productInfo.totalPrice)},onRemove:function(){console.log("onRemove"),window.app.createOrderType=0,window.app.createOrderResult=null},setAddressModel:function(e){if(!e)return;this.findComponent("AddressInOrderView").setModel(e,"afterpayment"),this.$(".order-address-icon-right").hide(),this.$(".address-icon-map").hide(),this.$(".order-address").css({"margin-left":"0"})},toOrderDetail:function(){this.suitId?Backbone.history.navigate("#my-navigate/confirm-order-completion?orderId="+this.orderId+"&suitId="+this.suitId,{trigger:!0}):this.orderId&&Backbone.history.navigate("#my-navigate/order-detail?orderId="+this.orderId,{trigger:!0})},toShareMenu:function(){Backbone.history.navigate("#home-navigate",{trigger:!0})}})}),define("text!pages/afterPayment.json",[],function(){return'{\n  "template": "afterPayment.html",\n  "type": "afterPayment",\n  "header": {\n    "title": "支付成功",\n    "items": [{\n      "type": "link",\n      "icon": "header-icon-back icomoon-back",\n      "pull": "left",\n      "event": "back"\n    }, {\n      "type": "link",\n      "icon": "header-icon-menu icomoon-moremore",\n      "pull": "right",\n      "event": "menuMore"\n    }]\n  },\n  "components": [{\n    "id": "SearchMidPageView",\n    "type": "SearchMidPageView"\n  }, {\n    "id": "PopupMenu",\n    "type": "PopupMenu"\n  }, {\n    "type": "AddressInOrderView",\n    "id": "AddressInOrderView"\n  }, {\n    "type": "OrderShopListView",\n    "id": "OrderShopListView",\n    "collection": "OrderShopListCollection",\n    "template": "order-product-list-item.html"\n  },\n  {\n    "id": "ShareView",\n    "type": "ShareView"\n  }]\n}\n'}),define("text!pages/applyAfterSale.html",[],function(){return'<div class="apply-after-title">\n    <header class="headerbox">\n        <div class=" nav-left header-icon-back address-title-icon">\n            <span class="icomoon icomoon-back"></span>\n        </div>\n        <div class=\'mid\'>\n            <span class="common-title">申请售后</span>\n        </div>\n        <div class="left-right nav-right">\n            <a class="header-icon-menu icomoon icomoon-moremore"></a>\n        </div>\n\n    </header>\n\n    <div class="blank-top"></div>\n    <div>\n        <component id=\'SearchMidPageView\'/>\n        <component id="PopupMenu"/>\n    </div>\n</div>\n\n<div class="apply-after-block">\n    <div class="apply-type-choiceBox">\n        <div class="choice-return choice-item">\n            <span class="icomoon-choice theme-color choice-circle"></span>\n            <span class="choice-type-str">退货</span>\n        </div>\n        <div class="choice-exchange choice-item">\n            <span class="icomoon-choicebox choice-circle"></span>\n            <span class="choice-type-str">换货</span>\n        </div>\n    </div>\n    <div class="apply-type-tips">退货后您的积分也会相应扣除哦</div>\n    <div class="apply-after-reason">\n        <div class="row-left">选择原因</div>\n        <div class="row-right">\n            <span class="reason-id" hidden="true"></span>\n            <span class="reason-description"></span>\n            <span class="icomoon-details"></span>\n        </div>\n    </div>\n    <div class="apply-after-service">\n         <!-- <div class="row-service"></div> -->\n    </div>\n       <div class="apply-after-num">\n        <div class="row-left">数量</div>\n        <div class="row-right">\n             <input class="package-num" type="text"/>\n        </div>\n    </div>\n    <div class="most-return-num">\n        <div class="row-left">最多可退金额</div>\n        <div class="row-right">\n            <span class="return-money-most"></span>\n            <span>元</span>\n        </div>\n    </div>\n</div>\n\n<div class="add-comment-photo">\n    <textarea class="add-apply-comment" placeholder="写点什么吧，以便其他小伙伴们提供参考，字数在10-200个字"></textarea>\n    <div class="add-apply-photo-view">\n        <div class="add-apply-photo-content">\n            <div class="image-preview"></div>\n            <div class="image-add">\n                <div class="image-upload"><span class="icomoon icomoon-camera"></span></div>\n                <!-- <input class="input-image-upload" type="file" id="Files" name="files[]" accept="image/*" multiple=""> -->\n            </div>\n        </div>\n    </div>\n   <!-- <div class="image-upload-view">\n        <div class="image-upload-content">\n            <div class="image-preview"></div>\n            <div class="image-add">\n                <div class="image-upload"><span class="icomoon icomoon-camera"></span></div>\n                <input class="input-image-upload" type="file" id="Files" name="files[]" accept="image/*" multiple="">\n            </div>\n        </div>\n    </div>-->\n</div>\n<div class="apply-after-sale-btn theme-backgorund-color">申请</div>\n\n\n'}),define("pages/applyAfterSale",["./PageView","require","../libs/canlendar","../libs/wechat"],function(e,t,n,r){return e.extend({events:{"click .header-icon-back":"goback","click .icomoon-moremore":"menuMore","click .menu-search":"toSearch","click .preImg":"imgClick","click .choice-return":"selectReturn","click .choice-exchange":"selectExchange","click .image-upload":"upload","click .apply-after-reason":"selectSale","click .apply-after-sale-btn":"doSaleService"},saleDetail:null,imgArray:[],editItem:null,imagefiles:[],applyType:null,shopAfterSaleType:null,shopAfterSale:null,initialize:function(){this.isWeiXin()&&this.initWechat()},initWechat:function(){var e=t("../models/BaseModel"),n=new e,i={url:window.app.api+"/getSignUrl",type:"POST",needReset:!0,data:{url:document.location.origin+document.location.pathname},success:function(e){e.status=="0"?r.init(e.data):library.Toast("JS-SDK签名失败")},error:function(){library.Toast("JS-SDK签名失败")}};n.loadData(i)},isWeiXin:function(){var e=window.navigator.userAgent.toLowerCase();return e.match(/MicroMessenger/i)=="micromessenger"?!0:!1},onResume:function(){$(".bar-tab").hide(),this.$(".apply-after-num").hide(),$(".reason-id").text(""),$(".add-apply-comment").text(""),this.$(".package-num").val(""),console.log(this.$(".package-num").val()),this.shopAfterSaleType=window.app.shopAfterSaleType,this.shopAfterSale=window.app.shopAfterSale,this.shopAfterSaleType=="10200"?(this.$(".apply-after-num").show(),this.selectExchange(),applyType="02",this.getPackageSaleService()):(applyType="01",this.getSaleService())},getPackageSaleService:function(){var e=this,n=t("../models/BaseModel"),r=new n,i={url:window.app.api+"/getReturnReasonSet",type:"POST",needReset:!0,data:{},success:function(t){t.status==0&&(console.log(t),e.saleDetail=t.data.returnslist)},error:function(){}};r.loadData(i)},getSaleService:function(){var e=this,n=window.application.getQueryString("orderId"),r=window.application.getQueryString("ogid"),i=t("../models/BaseModel"),s=new i,o=window.application.getUserInfo(),u=o?o.userid:"",a={url:window.app.api+"/getServiceApplication",type:"POST",needReset:!0,data:{orderid:n,memberid:u,ogid:r},success:function(t){e.saleDetail=t.data.returnslist,$(".return-money-most").text(t.data.goodsamount);var n=$(".return-money-most").text()},error:function(){}};s.loadData(a)},selectSale:function(){$(".apply-after-service").empty();var e=this.saleDetail;for(var t in e)$(".apply-after-service").append("<div hidden='true'>"+e[t].id+"</div><div class='row-service'>"+e[t].name+"</div>");$(".apply-after-service").animate({opacity:"1"}),$(".row-service").click(function(){$(".reason-description").text($(this).text()),$(".reason-id").text($(this).prev().text()),$(".apply-after-service").animate({opacity:"0"}),$(".apply-after-service").empty()})},upload:function(){var e=this;if(this.isWeiXin()){var n=t("../models/BaseModel"),i=new n,s=JSON.parse(localStorage.getItem("userinfo"));r.chooseImage(function(t){library.LoadingBar("正在上传"),r.uploadImage(t.toString(),0,function(t){var n={url:window.app.api+"/uploadImageWX",type:"POST",needReset:!0,data:{mediaId:t,userId:s.userid},success:function(t){library.DismissLoadingBar(),t.status=="0"?e.addImage(t.data.imageurl,""):library.Toast(t&&t.message?t.message:"上传失败")},error:function(){library.DismissLoadingBar(),library.Toast("网络错误")}};i.loadData(n)})})}else alert("请从微信上传")},handleFiles:function(e){this.editItem=$(e.target).parents(".add-comment-photo");var t=this,n=$(e.target)[0].files,r=[];for(var i=0,s;s=n[i];i++){var o=/image.*/;if(!s.type.match(o))continue;var u=Math.random()*new Date,a={_id:u,file:s},f=new FileReader;f.onload=function(e){var n=e.target.result;t.addImage(n,u),a.src=n},t.imagefiles.push(a),f.readAsDataURL(s);if(t.imgArray.length>=t.options.max-1){t.hideAdd();return}}},selectReturn:function(){if(this.shopAfterSaleType=="10200")return;this.$(".apply-after-num").hide(),$(".most-return-num").show(),$(".choice-circle").removeClass("icomoon-choice").removeClass("theme-color").addClass("icomoon-choicebox"),$(".choice-return").find(".choice-circle").removeClass("icomoon-choicebox").addClass("icomoon-choice theme-color"),applyType="01"},selectExchange:function(){this.$(".apply-after-num").show(),$(".most-return-num").hide(),$(".choice-circle").removeClass("icomoon-choice").removeClass("theme-color").addClass("icomoon-choicebox"),$(".choice-exchange").find(".choice-circle").removeClass("icomoon-choicebox").addClass("icomoon-choice theme-color"),applyType="02"},toSearch:function(e){this.findComponent("SearchMidPageView").show()},menuMore:function(e){this.findComponent("PopupMenu").show()},goback:function(e){window.app.shopAfterSaleType="",window.history.back()},imgClick:function(e){this._modalAtlasList()},remove:function(){this.$(".input-image-upload").unbind("change",this.handleFiles)},addImage:function(e,t){var n=$("<img />");n.attr("src",e),n.attr("_id",t),n.addClass("preImg"),this.imgArray.push(e);var r={};r.src=e,this.imagefiles.push(r),this.$(".image-preview").append(n),this.imgArray.length==5&&this.editItem.find(".image-add").hide()},_modalAtlasList:function(){var e=window.innerWidth,t=$('<div class="atlas-list"></div>'),n=$('<div class="atlas-top"></div>'),r=$('<div class="atlas-top-back-btn"></div>'),i=$('<span class=" icommon icomoon-back"></span>');$atlas_top_delete=$('<div class="atlas-top-delete icomoon icomoon-delete"></div>'),atlas_footer=['<span class="atlas-span-info">','<span class="atlas-span-current">1</span>','<span class="atlas_span_total">-'+this.imagefiles.length+"</span>","</span>"].join(""),$atlas_footer=$(atlas_footer),r.append(i).append($atlas_footer),slick_out_wrapper=['<div class="slick-out-wraper">','<div class="slick-container" style="width: '+window.innerWidth+'px"></div>',"</div>"].join(""),$slick_out_wrapper=$(slick_out_wrapper),r.on("click",function(n){t.css({transition:"all 0.5s ease","-webkit-transition":"all 0.5s ease",transform:"translate3d("+e+"px, 0, 0)"}),window.setTimeout(function(){t.remove()},600)});var s=this;$atlas_top_delete.on("click",function(n){var r=t.find(".atlas-span-current").text();if(!r)return;r=parseInt(r),s.imagefiles.length>=r&&(r--,s._removeCurrentImg(r),t.css({transition:"all 0.5s ease","-webkit-transition":"all 0.5s ease",transform:"translate3d("+e+"px, 0, 0)"}),window.setTimeout(function(){t.remove()},600))}),n.append(r),t.append(n).append($atlas_top_delete).append($slick_out_wrapper),$("body").append(t);var o=t.find(".slick-container");this.slick=o.slick({lazyLoad:"ondemand",autoplay:!1,swipeToSlide:!0,dots:!1,speed:100,adaptiveHeight:!0});if(this.imagefiles){var s=this;setTimeout(function(){s.imagefiles.forEach(function(e){o.slick("slickAdd",s._createAtlasItem(e))}),o.on("beforeChange",function(e,n,r,i){var s="",o=i+1;t.find(".atlas-footer-h").text(s),t.find(".atlas-span-current").text(o)})},0)}t.css({transition:"none","-webkit-transition":"none",transform:"translate3d("+e+"px, 0, 0)"}),window.setTimeout(function(){t.css({transition:"all 0.5s ease","-webkit-transition":"all 0.5s ease",transform:"translate3d(0, 0, 0)"})},30)},_removeCurrentImg:function(e){this.$(".image-preview").children().eq(e).remove(),this.imagefiles.splice(e,1),this.imgArray.splice(e,1)},_createAtlasItem:function(e){var t=['<div class="slick-imagediv">','<img class="slick-img" src="'+e.src+'" />',"</div>"].join("");return $(t)[0]},doSaleService:function(){var e;this.imgArray?e=this.imgArray.join(";"):e="";if(applyType==1){if(!$(".reason-id").text()){library.Toast("请选择退货原因",2e3);return}if(!$(".add-apply-comment").val()){library.Toast("请填写退货原因",2e3);return}}else{if(!$(".reason-id").text()){library.Toast("请选择换货原因",2e3);return}if(!$(".add-apply-comment").val()){library.Toast("请填写换货原因",2e3);return}}var n=window.application.getUserInfo(),r=n?n.userid:"",i=t("../models/BaseModel"),s=new i,o=this,u=window.application.getQueryString("orderId"),a=window.application.getQueryString("productId"),f=window.application.getQueryString("number"),l=window.application.getQueryString("ogid");if(this.shopAfterSaleType=="10200"){if(!this.$(".package-num").val())return library.Toast("数量不能为空"),!1;var c=/^[0-9]*$/;if(!c.test(this.$(".package-num").val()))return library.Toast("请输入正整数"),!1;console.log(this.shopAfterSale.itemProduct.goodsNumber+"aaaaaaaa"),console.log(this.$(".package-num").val()+"aaaaaaaa");if(this.$(".package-num").val()>this.shopAfterSale.itemProduct.goodsNumber)return library.Toast("可售后的数量不足"),!1;var h={url:window.app.api+"/saveAfterSave",type:"POST",needReset:!0,data:{orderid:this.shopAfterSale.item.orderId,extensioncode:"02",reasonsId:this.$(".reason-id").text(),applyreason:this.$(".add-apply-comment").val(),imgUrl:e,goodsid:this.shopAfterSale.itemProduct.goodsId,memberId:r,exchangeNumber:this.$(".package-num").val(),goodsAmount:this.$(".return-money-most").text(),ogid:this.shopAfterSale.itemProduct.ogid,ordergoodsid:this.shopAfterSale.itemProduct.orderGoodsId},success:function(e){console.log(e),library.Toast("申请成功"),window.history.back()},error:function(){}};s.loadData(h)}else{if(applyType=="02"){if(!this.$(".package-num").val())return library.Toast("数量不能为空"),!1;var c=/^[0-9]*$/;if(!c.test(this.$(".package-num").val()))return library.Toast("请输入正整数"),!1;if(this.$(".package-num").val()>f)return library.Toast("可售后的数量不足"),!1;f=this.$(".package-num").val()}var p={url:window.app.api+"/applyService",type:"POST",needReset:!0,data:{serviceType:applyType,applyReason:this.$(".reason-id").text(),applyDes:this.$(".add-apply-comment").val(),applyImages:e,productId:a,userId:r,orderId:u,ordergoodsid:l,exchangeNumber:f,goodsAmount:this.$(".return-money-most").text()},success:function(e){library.Toast("申请成功"),window.history.back()},error:function(){}};s.loadData(p)}}})}),define("text!pages/applyAfterSale.json",[],function(){return'{\n  "template":"applyAfterSale.html",\n  "type": "applyAfterSale",\n  "template": "applyAfterSale.html",\n  "components" : [\n    {\n      "id": "SearchMidPageView",\n      "type": "SearchMidPageView"\n    },\n    {\n      "id": "PopupMenu",\n      "type": "PopupMenu"\n    }\n    ]\n}\n'}),define("text!pages/bill-lading.html",[],function(){return'<header class="headerbox">\n      <div class="nav-left header-icon-back address-title-icon">\n          <span class="icomoon icomoon-back"></span>\n      </div>\n      <div class="mid">\n        <span class="common-title">提货单</span>\n      </div>\n  </header>\n<div id="AddressInOrderView" class="BaseView" data-type="AddressInOrderView" style="padding-top:1.17333333rem;">\r\n\r\n     <component id="AddressInOrderView" />\r\n</div>\r\n<div class="bill-lading">\r\n     <div class="scroller">\r\n          <ul class="table-view dataea" style="border-top-width: 1px; border-top-style: solid; border-top-color: rgb(221, 221, 221); border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgb(221, 221, 221); margin-bottom: 5px; background-color: rgb(255, 255, 255);">\r\n               <component id="GroupBuyListView" />\r\n          </ul>\r\n     </div>\r\n</div>\r\n<div class="bill-order-info psb-selector place-bg send-way">\r\n      <span class="bill-method-des psb-selector-des">配送方式</span>\r\n      <span class="icomoon icomoon-more psb-selector-more"></span>\r\n      <div class="bill-method-value psb-selector-value send-way-value">\r\n</div>\r\n    </div>\r\n    \r\n    <!-- <div class="bill-order-info psb-selector place-bg invoice-info">\r\n      <span class="bill-method-des psb-selector-des">发票信息</span>\r\n      <span class="icomoon icomoon-more psb-selector-more"></span>\r\n      <div class="bill-method-value psb-selector-value invoice-info-value">不需要</div>\r\n    </div> -->\n<div class="delivered-btn">提交</div>'}),define("pages/bill-lading",["./PageView","require"],function(e,t){return e.extend({events:{"click .header-icon-back":"goback","click #AddressInOrderView":"onChangeAddress","click .send-way":"sendSelector","click .delivered-btn":"createOrder"},addressModel:null,product:null,orderMap:{},initialize:function(){this.listenTo(this.findComponent("PopupMenu"))},goback:function(e){window.history.back()},menuMore:function(e){this.findComponent("PopupMenu").show()},onResume:function(){this.orderMap={},this.$(".invoice-info").hide(),this.toggleBar&&this.toggleBar("hide");if(window.app.param1)this.addressModel=window.app.param1,this.setAddressModel(this.addressModel);else{var e=window.application.getUserInfo();console.log(e);var n=this,r=t("../models/AjaxCollection"),i=new r;i.loadData({path:"/my-address/list",type:"POST",needReset:!0,data:{userId:JSON.parse(localStorage.getItem("userinfo")).userid,index:1,size:10},success:function(e){var t=i.findWhere({isdefault:"true"})||i.models[0];n.addressModel=t,n.setAddressModel(t)}})}this.$(".send-way-value").text(""),window.app.sendmode?(this.orderMap.sendmode=window.app.sendmode,this.$(".send-way-value").text(window.app.sendmode.sendWayName),window.app.sendmode=null):this.initdata()},onChangeAddress:function(){Backbone.history.navigate("#home-navigate/addressSelect",{trigger:!0})},setAddressModel:function(e){if(!e)return;var n=t("../models/BaseModel"),r=e.toJSON();localStorage.setItem("receiverRegionId",r.receiverRegionId);var i=new n(r);i.set("receiverDetailAddress",i.get("receiverProvince")+i.get("receiverCity")+i.get("receiverRegion")+i.get("receiverAddr")),this.findComponent("AddressInOrderView").setModel(i,"afterPayment")},sendSelector:function(e){Backbone.history.navigate("#home-navigate/distributionMode",{trigger:!0})},initdata:function(){var e=this,t=window.application.getUserInfo(),n=t?t.userid:"";orderId=window.application.getQueryString("orderId");var r=this.findComponent("GroupBuyListView").collection,i={path:"/addBillOfLading",type:"POST",needReset:!0,data:{memberId:n,orderId:orderId},success:function(t){t.data.goodsListData.length>0?e.product=t.data:$(".loadmore").hide()},error:function(e){}};r.loadData(i)},createOrder:function(){var e=this;orderId=window.application.getQueryString("orderId");var n=0;for(var r in this.product.selectGoods)this.product.selectGoods[n].goodsRestNum!=0&&n++;if(n==0){library.Toast("没有可提的货物",2e3);return}if(!this.addressModel){library.Toast("请选择收货地址！",2e3);return}receiveId=this.addressModel.attributes.addressId;if(!receiveId){library.Toast("请选择收货地址！",2e3);return}console.log(this.orderMap.sendmode);if(!this.orderMap.sendmode){library.Toast("请选择配送方式");return}var i=/^[0-9]*$/,s="",o="";this.$("li").each(function(){var e=$(this).find(".num").val(),t=$(this).find(".numnum").text(),n=$(this).find(".ogids").text();if(e!=""){if(!i.test(e))return library.Toast("请输入正整数"),!1;if(e>parseInt(t))return library.Toast("请输入正确的提货数量"),!1;o+=","+$(this).find(".num").val(),s+=","+$(this).find(".ogids").text()}});if(!s){library.Toast("数量不能为空");return}o=o.substring(1),s=s.substring(1);var u=t("../models/BaseModel"),a=new u,f={path:"/submitShipping",type:"POST",needReset:!0,data:{addressId:receiveId,networkId:"",dealerId:"",ogids:s,goodsNums:o,orderId:orderId,invoiceTitle:"",invoiceContent:"",companyName:"",shippingId:this.orderMap.sendmode.sendWayId},success:function(e){e.status==0?(library.Toast("提货单提交成功！",2e3),window.history.back()):library.Toast("提交失败！",2e3)},error:function(e){}};a.loadData(f)}})}),define("text!pages/bill-lading.json",[],function(){return'{\n  "template": "bill-lading",\n  "type":"bill-lading",\n    "components":[\n    {\n      "type": "AddressInOrderView",\n      "id": "AddressInOrderView"\n    },\n    {\n      "id":"GroupBuyListView",\n      "type":"GroupBuyListView",\n      "template":"bill-loding-item.html",\n      "collection":"packageCollection"\n    },\n    {\n      "id": "PopupMenu",\n      "type": "PopupMenu"\n    }, {\n      "id": "SearchMidPageView",\n      "type": "SearchMidPageView"\n    }\n  ]\n}'}),define("text!pages/bind-mobile.html",[],function(){return'<div class="login-page-view mobile-bind" style="background-color: white;">\n    <header class="headerbox" style="position: relative">\n        <div class="left-right nav-left goback">\n            <span class="icomoon icomoon-back"></span>\n        </div>\n        <div class=\'mid\'>\n            <span class="common-title">绑定手机</span>\n        </div>\n        <div class="left-right nav-right">\n\n        </div>\n    </header>\n    <div class="form-list-group">\n        <div class="form-row">\n            <label>手机号</label>\n            <span class="phoneNum"></span>\n            <!--<input type="text" class="phoneNum-input"/>-->\n        </div>\n        <div class="form-row">\n            <label>验证码</label>\n            <input type="text" class="form-input code-input" placeholder="请输入验证码"/>\n            <div class="identifyCode-btn theme-color">获取验证码</div>\n        </div>\n    </div>\n    <!--<div class="login-view-normal">\n        <div class="input-background">\n            <div class="input-accountdiv" id="bind-input">\n                <label class="input-label-account">手机号</label>\n                <input class="input-account" type="text" placeholder="手机号码" />\n            </div>\n        </div>\n        <div class="input-pwddiv">\n            <label class="input-label-pwd">验证码</label>\n            <input class="input-pwd" type="text" placeholder="请输入密码" />\n            <a href="javascript:;" class="btn-retransmit btn-retransmit-disabled"  >获取验证码</a>\n        </div>\n    </div>-->\n    <div>\n        <button class="submit-btn theme-backgorund-color-contrast theme-border-color-contrast btnNext" disabled>下一步</button>\n    </div>\n\n</div>\n'}),define("pages/bind-mobile",["require","./PageView"],function(e,t){return t.extend({defaults:{toastTime:null},events:{"click .identifyCode-btn":"askForCode","click .btnNext":"nextStep","input .code-input":"btnStatus","click .goback":"goBack"},baseModel:null,initialize:function(e){t.prototype.initialize.apply(this,arguments),this.userinfo=application.getUserInfo()},render:function(){return t.prototype.render.apply(this,arguments),this},onResume:function(){$(".phoneNum").text(""),this.$el.find(".input-account").val(""),this.$el.find(".input-pwd").val(""),this.$el.find(".btnLogin").attr("disabled","disabled"),this.$el.find(".btnLogin").removeClass("active"),this.toggleBar&&this.toggleBar("hide"),this.userinfo.phoneNumber&&this.$el.find(".phoneNum").text(this.userinfo.phoneNumber),this.$(".bar").show()},btnStatus:function(){var e=this.$el.find(".code-input").val();e&&$(".identifyCode-btn").hasClass("identifyCode-btn-disabled")&&(this.$el.find(".submit-btn").removeAttr("disabled"),$(".submit-btn").removeClass("theme-backgorund-color-contrast").removeClass("theme-border-color-contrast"),$(".submit-btn").addClass("theme-backgorund-color").addClass("theme-border-color"))},checkPhone:function(e){var t=/^1[0-9]{10}$/;return t.test(e)},askForCode:function(){var e=$(".identifyCode-btn");if(e.hasClass("identifyCode-btn-disabled"))return;e.html("已获取验证码(30)").addClass("identifyCode-btn-disabled").removeClass("theme-color");var t=30,n=setInterval(function(){--t,t==0?(e.html("获取验证码").removeClass("identifyCode-btn-disabled").addClass("theme-color"),clearInterval(n)):e.html("已获取验证码("+t+")")},1e3),r=this;this.checkPhone(this.$(".phoneNum").text().trim())?this.sendData(window.app.api+"/getVerifyCode",{userPhone:$(".phoneNum").text().trim()},function(e){e.status=="0"?r.sessionid=e.data.sessionId:library.Toast(e.message)}.bind(this),function(){library.Toast("网络错误")}):library.Toast("手机号格式错误")},sendData:function(t,n,r,i){var s=e("../models/BaseModel"),o=new s,u={type:"POST",url:t,data:n,datatype:"json",success:r,error:i};o.loadData(u)},pwdTypeChange:function(){if($(".input-pwd").attr("type")=="password"){$(".input-pwd").attr("type","text");var e=this.$el.find(".icomoon-conceal");e.removeClass("icomoon-conceal"),e.addClass("icomoon-display")}else{$(".input-pwd").attr("type","password");var e=this.$el.find(".icomoon-display");e.removeClass("icomoon-display"),e.addClass("icomoon-conceal")}},pwdChange:function(){this.valueChange()},nameChange:function(){this.valueChange()},valueChange:function(){var e=/^[\u4e00-\u9fa5]+$/,t=this.$el.find(".btnLogin"),n=this.$el.find(".input-pwd"),r=this.$el.find(".input-account");n.val().trim().length>0&&r.val().trim().length>0&&!e.test(r.val().trim())?(t.removeAttr("disabled"),t.addClass("active").removeClass("theme-backgorund-color-contrast").removeClass("theme-border-color-contrast").addClass("theme-backgorund-color").addClass(".theme-border-color")):(t.attr("disabled","disabled"),t.removeClass("active").addClass("theme-backgorund-color-contrast").addClass("theme-border-color-contrast").removeClass("theme-backgorund-color").removeClass(".theme-border-color"))},nextStep:function(){if($(".code-input").val()){library.LoadingBar("验证中...");var t={url:window.app.api+"/verifyCheckCode",type:"POST",needReset:!0,data:{checkCode:this.$(".code-input").val(),userPhone:this.$(".phoneNum").text().trim(),sessionId:this.sessionid},datatype:"json",success:function(e){e.status=="0"?(library.DismissLoadingBar(),Backbone.history.navigate("#my-navigate/bind-new?verifyId="+e.data.sessionId,{trigger:!0})):(library.DismissLoadingBar(),library.Toast(e.message))},error:function(){library.DismissLoadingBar(),library.Toast("网络错误")}};if(!this.baseModel){var n=e("../models/BaseModel");this.baseModel=new n}this.baseModel.loadData(t)}else library.Toast("请输入验证码")},goBack:function(){window.history.back()}})}),define("text!pages/bind-mobile.json",[],function(){return'{\n  "template":"bind-mobile.html",\n  "type":"bind-mobile"\n}'}),define("text!pages/bind-new.html",[],function(){return'<div class="login-page-view mobile-bind" style="background-color: white;">\n    <header class="headerbox" style="position: relative">\n        <div class="left-right nav-left goback">\n            <span class="icomoon icomoon-back"></span>\n        </div>\n        <div class=\'mid\'>\n            <span class="common-title">绑定手机</span>\n        </div>\n        <div class="left-right nav-right">\n\n        </div>\n    </header>\n    <div class="form-list-group">\n        <div class="form-row">\n            <label>手机号</label>\n            <input type="text" class="phoneNum-input" placeholder="请输入新手机号"/>\n        </div>\n        <div class="form-row">\n            <label>验证码</label>\n            <input type="text" class="form-input code-input" placeholder="请输入验证码"/>\n            <div class="identifyCode-btn bind-new-code-btn theme-color">获取验证码</div>\n        </div>\n    </div>\n    <div>\n        <button class="submit-btn theme-backgorund-color-contrast theme-border-color-contrast btnNext" disabled>完成</button>\n    </div>\n\n</div>\n\n<div class="success-tips-view">\n    <header class="headerbox" style="position: relative">\n        <div class="left-right nav-left">\n            <span class="icomoon"></span>\n        </div>\n        <div class=\'mid\'>\n            <span class="common-title">绑定手机</span>\n        </div>\n        <div class="left-right nav-right">\n\n        </div>\n    </header>\n    <div class="icomoon-choice success-img"></div>\n    <div class="success-tips">绑定手机成功</div>\n    <div class="back-btn default-color">返回</div>\n\n</div>\n'}),define("pages/bind-new",["require","./PageView"],function(e,t){return t.extend({defaults:{toastTime:null},route:function(e){t.prototype.route.apply(this,arguments)},postRoute:function(){this.triggerEvent("barHide")},events:{"click .goback":"goBack","click .back-btn":"comeBack","click .btnNext":"nextStep","click .bind-new-code-btn":"askForCode","input .phoneNum-input":"btnStatus","input .code-input":"btnStatus"},initialize:function(e){t.prototype.initialize.apply(this,arguments)},render:function(){return t.prototype.render.apply(this,arguments),this},onResume:function(){this.toggleBar&&this.toggleBar("hide"),this.$(".bar").show()},btnStatus:function(){var e=this.$el.find(".code-input").val(),t=this.$el.find(".phoneNum-input").val();e&&t&&$(".bind-new-code-btn").hasClass("identifyCode-btn-disabled")&&(this.$el.find(".submit-btn").removeAttr("disabled"),$(".submit-btn").removeClass("theme-backgorund-color-contrast").removeClass("theme-border-color-contrast"),$(".submit-btn").addClass("theme-backgorund-color").addClass("theme-border-color"))},checkPhone:function(e){var t=/^1[0-9]{10}$/;return t.test(e)},askForCode:function(){var e=this,t=this.$el.find(".phoneNum-input").val();if(!this.checkPhone(t.trim()))library.Toast("手机号格式错误");else{var n=$(".bind-new-code-btn");if(n.hasClass("identifyCode-btn-disabled"))return;n.html("已获取验证码(30)").addClass("identifyCode-btn-disabled").removeClass("theme-color");var r=30,i=setInterval(function(){--r,r==0?(n.html("获取验证码").removeClass("identifyCode-btn-disabled").addClass("theme-color"),clearInterval(i)):n.html("已获取验证码("+r+"s)")},1e3);this.sendData(window.app.api+"/getVerifyCode",{userPhone:t.trim()},function(t){console.log(t),t.status=="0"?e.sessionid=t.data.sessionId:library.Toast(t.message)}.bind(this),function(){library.Toast("网络错误")})}},sendData:function(t,n,r,i){var s=e("../models/BaseModel"),o=new s,u={type:"POST",url:t,data:n,datatype:"json",success:r,error:i};o.loadData(u)},nextStep:function(){var t=this.$el.find(".code-input").val(),n=this.$el.find(".phoneNum-input").val(),r=this.params.verifyId;if(!r){library.Toast("请验证原手机号码再进行绑定");return}if(t&&n){var i=JSON.parse(localStorage.getItem("userinfo"));library.LoadingBar("验证中...");var s={url:window.app.api+"/bandUserPhone",type:"POST",needReset:!0,data:{userid:i.userid,checkCode:t,userPhone:n,sessionId:this.sessionid,verifyId:r},datatype:"json",success:function(e){e.status=="0"?($(".mobile-bind").hide(),$(".success-tips-view").show(),library.DismissLoadingBar()):(library.DismissLoadingBar(),library.Toast(e.message))},error:function(){library.DismissLoadingBar(),library.Toast("网络错误")}};if(!this.baseModel){var o=e("../models/BaseModel");this.baseModel=new o}this.baseModel.loadData(s)}else library.Toast("请输入验证码")},comeBack:function(e){Backbone.history.navigate("#my-navigate/my",{trigger:!0})},goBack:function(){window.history.back()}})}),define("text!pages/bind-new.json",[],function(){return'{\n  "template": "bind-new.html",\n  "type":"bind-new"\n}'}),define("text!pages/brand-navigate.json",[],function(){return'{\n  "type": "NavigationView",\n  "rootPage" : "brand"\n}\n'}),define("text!pages/brand.html",[],function(){return"<div><component id='cate_search_midpage'/></div>\n<header class='common-search search-style1'>\n    <div class=\"common-search-left\">\n        <div class=\"common-search-left-inner\">\n          <span class='icomoon-search'></span>\n          <span class='common-search-holder'>请输入商品</span>\n        </div>\n    </div>\n    <div class=\"common-search-right\">\n      <span class='icomoon-scan'></span>\n      <span class='home-scan-title'>扫一扫</span>\n    </div>\n    </div>\n</header>\n<div class=\"brand-list\">\n  <component id=\"HomePushBrandView\" />\n</div>\n"}),define("pages/brand",["./PageView"],function(e){return e.extend({events:{"click .common-search-right":"scanCode","click .common-search-left-inner":"toSearch"},toSearch:function(){this.findComponent("cate_search_midpage").show()},onRender:function(){this.findComponent("HomePushBrandView").collection.loadData({path:"/brands",type:"GET",needReset:!0,data:{pagesize:12,pageindex:1}})},onResume:function(){this.toggleBar&&this.toggleBar("show")},branddetail:function(){Backbone.history.navigate("#brand-navigate/branddetail",{trigger:!0})},scanCode:function(e){typeof cordova!="undefined"&&cordova.plugins.barcodeScanner.scan(function(e){e.text},function(e){alert("Scanning failed: "+e)})}})}),define("text!pages/brand.json",[],function(){return'{\n  "template": "brand.html",\n  "type":"brand",\n  "components" : [\n    {\n      "id":"cate_search_midpage",\n      "type":"SearchMidPageView"\n    },\n    {\n      "type": "HomePushBrandView",\n      "id" : "HomePushBrandView",\n      "template": "brand.html",\n      "paging": true,\n      "autoload":false,\n      "collection": "BrandListCollection"\n    }\n  ]\n}\n'}),define("pages/branddetail",["./PageView","require"],function(e,t){return e.extend({type:"branddetail",categoryColletion:null,demo:{goodslistmenu:[{title:"综合",isdefault:!1},{title:"销量",isdefault:!1},{title:"价格",isdefault:!1},{title:"筛选",isdefault:!0}]},data:{brand:[],price:{min:10,max:20},category:[]},productListView:null,initialize:function(){var e=library.getTemplate("branddetail-head.html");this.$el.append(e),this.productListView=this.findComponent("ProductListView"),this.categoryColletion=this.productListView.getCollection(),this.productListView.setCallBack(this.clickRowListener.bind(this));var t=this.findComponent("FilterControlView")},clickRowListener:function(e){var t=this.categoryColletion.models[e.index];t&&t.get("id")?Backbone.history.navigate("#home-navigate/itemdetail?goodsid="+t.get("id"),{trigger:!0}):library.Toast("该产品可能已下架")},onRender:function(){this.setInfo(),this.$(".goodsfilter").css({"margin-top":"0px","border-bottom":"solid 1px #c8c8c8"}),this.$("#ProductListView").css({"padding-top":"1.33333333rem","border-top":"solid 0px #c8c8c8"})},initData:function(){var e={pagesize:10,pageindex:1,sorttype:1,id:window.application.getQueryString("id")};this.categoryColletion.ajaxOptions={path:"/branddetaillist",data:e,type:"GET",needReset:!0,showLoading:!0,success:this.onSuccess.bind(this),error:this.onError.bind(this)},$(".order-all").trigger("click");var t=this;window.setTimeout(function(){t.categoryColletion.loadData(t.categoryColletion.ajaxOptions)},300)},onSuccess:function(e){this.categoryColletion.ajaxOptions.data.pageindex==1&&this.isListEmpty(e)},onError:function(){},onResume:function(){this.toggleBar&&this.toggleBar("hide"),this.$(".bar").show(),this.initData()},setInfo:function(){var e=this,n=t("../models/BaseModel"),r=new n;r.loadData({path:"/branddetail",type:"GET",data:{id:window.application.getQueryString("id")},success:function(t){t.status=="ok"&&(console.log(t.data.branddes),e.$(".branddetail-name").append(t.data.brandname),e.$(".title").append(t.data.brandtitle),e.$(".branddetail-head-left-picture").attr("src",t.data.brandlogo))}})},onBack:function(){window.history.back()},oncategoryColletionReset:function(e,t){var n=this,r=[];for(var i=0;i<e.models.length;){var s=i+3;s<e.models.length?r.push(e.models.slice(i,i+3)):r.push(e.models.slice(i,e.models.length)),i=s}var o="";r.forEach(function(e,t){var n="";e.forEach(function(e,t){n+='<div category-id="'+e.get("id")+'" class="filtercondition-category-item" > <div>'+e.get("text")+"</div> </div>"}),o+='<div class="filtercondition-category-row " >'+n+"</div>"}),this.$(".filtercondition-category").empty(),this.$(".filtercondition-category").append(o)},listType:"simple",events:{"click .header-box-mid-inner":"toSearch","click .nav-left":"toBack","click .nav-right":"onListTypeChange","click .filter-filter":"onFilter","click .header-icon-back":"onBack","click .branddetail-head":"toBrandIntroduce","click .order-all":"orderAll","click .order-sales":"orderSales","click .order-price":"orderPrice"},filterResult:function(e){this.categoryColletion.onFilter(e.data),this.resetFilterUI()},toSearch:function(e){this.findComponent("SearchMidPageView").show()},toBack:function(e){window.history.back()},toBrandIntroduce:function(){},onListTypeChange:function(e){this.listType=this.listType=="simple"?"double":"simple",this.resetFilterUI()},notifyListType:function(){var e=this.$el.find(".menu-list-type"),t=this.$el.find("li"),n=this.$el.find(".media-object"),r=this.$el.find(".media-body");this.listType=="double"?($("#ProductListView").css({padding:"0px 15px","padding-top":"1.33333333rem"}),e.removeClass("icomoon-list").addClass("icomoon-class_click"),t.css({"border-bottom":"0px solid #ddd"}),$(".table-view").css({"border-top":"0px solid #ddd","border-bottom":"0px solid #ddd","margin-bottom":"0px","background-color":"#f5f5f5"}),t.addClass("list-row-control"),$(".list-item").addClass("item-double-inline"),n.removeClass("pull-left"),n.removeClass("item-media-object-single-line"),r.addClass("list-row-media-body-control"),$(".item-media-des").css({display:"none"})):($("#ProductListView").css({padding:"0px","padding-top":"1.33333333rem"}),t.css({"border-bottom":"1px solid #ddd"}),$(".table-view").css({"border-top":"1px solid #ddd","border-bottom":"1px solid #ddd","margin-bottom":"15px","background-color":"#fff"}),e.removeClass("icomoon-class_click").addClass("icomoon-list"),t.removeClass("list-row-control"),$(".list-item").removeClass("item-double-inline"),n.addClass("pull-left"),n.addClass("item-media-object-single-line"),r.removeClass("list-row-media-body-control"),$(".item-media-des").css({display:"block"}))},orderType:"down",filterStatus:0,orderAll:function(){this.onOrder({sorttype:"1",pageindex:1}),this.resetFilterUI("all")},orderSales:function(){this.onOrder({sorttype:"2",pageindex:1}),this.resetFilterUI("sales")},orderPrice:function(){this.orderType=this.orderType=="up"?"down":"up",this.orderType=="up"?this.onOrder({sorttype:"4",pageindex:1}):this.onOrder({sorttype:"3",pageindex:1}),this.resetFilterUI("price")},onFilter:function(e){this.$(".goodsfilter .typeselected").removeClass("typeselected"),this.$(e.currentTarget).addClass("typeselected"),this.resetFilterUI("filter"),this.$("#FilterControlView").css({top:"","margin-top":"1.9333333333rem"})},onOrder:function(e){if(e)for(key in e)this.categoryColletion.ajaxOptions.data[key]=e[key];var t=this;this.categoryColletion.loadData()},onChangeFilter:function(){this.filterStatus==1?(console.log(),$("#ProductListView").css({display:"none"}),$(".filtercondition ").css({display:"block"})):($("#ProductListView").css({display:"block"}),$(".filtercondition ").css({display:"none"}))},resetFilterUI:function(e){e!="filter"&&(this.filterStatus=0),$(".order-all").removeClass("theme-color"),$(".order-sales").removeClass("theme-color"),$(".order-price").removeClass("theme-color"),$(".filter-filter").removeClass("theme-color"),$(".filter-icon-down").removeClass("theme-color"),$(".filter-icon-up").removeClass("theme-color"),$(".icomoon-screen").removeClass("theme-color"),e=="all"?$(".order-all").addClass("theme-color"):e=="sales"?$(".order-sales").addClass("theme-color"):e=="price"?($(".order-price").addClass("theme-color"),this.orderType=="down"?$(".filter-icon-down").addClass("theme-color"):$(".filter-icon-up").addClass("theme-color")):e=="filter"&&($(".filter-filter").addClass("theme-color"),$(".icomoon-screen").addClass("theme-color"),this.filterStatus=this.filterStatus==1?0:1),this.onChangeFilter(),this.notifyListType()},comfirm:function(){alert(JSON.stringify(this.data))},categorySelect:function(e){e.preventDefault();var t=this,n=this.data.category.find(function(t){if(this.$(e.currentTarget).attr("category-id")==t)return t});return n?(this.data.category.find(function(n,r,i){this.$(e.currentTarget).attr("category-id")==n&&t.data.category.splice(r,1)}),this.$(e.currentTarget).find("div").removeClass("filtercondition-category-selected")):(this.$(e.currentTarget).find("div").addClass("filtercondition-category-selected"),this.data.category.push(this.$(e.currentTarget).attr("category-id"))),!1},inputPrice:function(e){this.$(e.currentTarget).attr("inputprice")=="min"?this.data.price.min=this.$(e.currentTarget).val():this.data.price.max=this.$(e.currentTarget).val()},isListEmpty:function(e){e&&e.data&&e.data.length<1?(console.log(this.productListView),this.productListView.$el.hide(),console.log($(".blank_tips")),$(".blank_div").show()):(this.productListView.$el.show(),$(".blank_div").hide())}})}),define("text!pages/branddetail.json",[],function(){return'{\n  "type": "branddetail",\n  "header": {\n    "title": " ",\n    "items": [{\n      "type": "link",\n      "icon": "header-icon-back icomoon-back",\n      "pull": "left",\n      "event": "back"\n    }]\n  },\n  "components" : [\n    {\n      "type": "FilterControlView",\n      "id":"FilterControlView"\n    },\n    {\n      "type": "BranddetailListFilter",\n      "id": "ProductListFilter"\n    },\n    {\n      "style": "padding-top:2.4rem;",\n      "type": "ProductListView",\n      "id" : "ProductListView",\n      "paging": true,\n      "autoload": false,\n      "template": "product-list.html",\n      "collection": "ProductListCollection"\n    },\n    {\n      "type":"Blank_pageView",\n      "id":"Blank_pageView"\n    }\n  ]\n}\n'}),define("text!pages/brandintroduce.html",[],function(){return'<div class="branddetail-page">\n  <div class="branddetail-head">\n      <div class="branddetail-head-left">\n        <div class="branddetail-head-left-logo">\n          <img src="" class="branddetail-head-left-picture">\n        </div>\n        <div class="brnaddetail-left-name">\n          <span class="branddetail-name"></span> \n        </div>\n      </div>\n      <!-- <div class="branddetail-head-right">\n      <div class="item-right-name"></div>\n      <div class="usersetting-right-icon icomoon-details"></div>\n          </div> -->\n  </div>\n\n  <div class="brandintroduce-picturediv">\n  	<!--<img src="images/product_list/brand_intro.jpg" class="brandintroduce-picture">-->\n  </div>\n</div>'}),define("pages/brandintroduce",["./PageView","require"],function(e,t){return e.extend({type:"brandintroduce",events:{"click .header-icon-back":"onBack"},onRender:function(){this.setInfo()},onResume:function(){this.toggleBar&&this.toggleBar("hide"),this.$(".bar").show()},setInfo:function(){var e=this,n=t("../models/BaseModel"),r=new n;r.loadData({path:"/branddetail",type:"GET",data:{id:window.application.getQueryString("id")},success:function(t){t.status=="ok"?(e.$(".brandintroduce-picturediv").html(t.data.branddes),e.$(".branddetail-name").append(t.data.brandname),e.$(".title").append(t.data.brandtitle),e.$(".branddetail-head-left-picture").attr("src",t.data.brandlogo)):(library.Toast(t.message),e.onBack())},error:function(e){}})},onBack:function(){window.history.back()}})}),define("text!pages/brandintroduce.json",[],function(){return'{\n	"template": "brandintroduce.html",\n	"type": "brandintroduce",\n    "header": {\n      "title": " ",\n      "items": [{\n      "type": "link",\n      "icon": "header-icon-back icomoon-back",\n      "pull": "left",\n      "event": "back"\n      }]\n    }\n}\n'}),define("text!pages/business.html",[],function(){return'<div><component id=\'searchMidPageView\'/></div>\n<div id="business-main">\n    <header>\n        <div class="headerbox">\n            <div class="left-right nav-left">\n                <span class="icon icomoon-back"></span>\n            </div>\n            <div class=\'mid\'>\n                <div class=\'header-box-mid-inner\'>\n                    <span class=\'icomoon-search\'></span>\n                    <span class=\'common-search-holder\'>请输入商品</span>\n                </div>\n            </div>\n            <div class="left-right nav-right">\n                <span class="icon icomoon-class_click menu-list-type"></span>\n            </div>\n        </div>\n    </header>\n<div class="business-contentwrap" >\n\n<div class="logo-wrap">\n    <div class="business-cover">\n    </div>\n    <div class="business-brandinfo">\n    <div>\n    <img class="logo">\n    </div>\n\n         <div class="business-shop">\n             <p>耐克</p>\n         </div>\n    <div class="business-collect">\n        <p><span class="icomoon-collect"></span></p>\n        <p>收藏</p>\n    </div>\n     </div>\n</div>\n<ul class=\'business-tab\'>\n    <li business-index="0" class="theme-color">\n        <p><span  class="icomoon-all"></span></p>\n        <p >全部商品</p></li>\n    <li business-index="1">\n        <p><span class="icomoon-new"></span></p>\n        <p>新品上架</p>\n    </li>\n</ul>\n<div class="business-product">\n    <div>\n    <component id="allproducts" />\n        </div>\n    <div>\n    <component id="newproducts" />\n        </div>\n</div>\n\n\n<div class="business-bottom">\n    <div id="business-bottom-category">\n        宝贝分类\n    </div>\n    <div class="vertical-div">\n    </div>\n    <div id="business-bottom-detail">\n        店铺详情\n    </div>\n    <div class="vertical-div">\n    </div>\n    <div id="business-bottom-contact">\n        <a>联系卖家</a>\n    </div>\n\n</div>\n<div>\n</div>\n    </div>\n    </div>\n    <!-- 分类赛选-->\n    <div class="business-category-view-m">\n    <component id="business-category" />\n    </div>\n<div class="details-body business-detailslist-view">\n\n    <component id="business-detailslist" />\n</div>\n'}),define("pages/business",["./PageView","../models/BusinessModle","require"],function(e,t,n){return e.extend({events:{"click .home-goods-box":"goDetails","click .header-box-mid-inner":"toSearch"},toSearch:function(){this.findComponent("searchMidPageView").show()},isload:!1,BusinessModle:new t,initialize:function(){this.listenTo(this.BusinessModle,"bussiness-update",this.updateui),this.listenTo(this.findComponent("business-category"),"bussiness-category",this.onCategory)},onCategory:function(e){console.log(e),e==-1?this.$el.find('li[business-index="0"]').trigger("click",{shopid:window.application.getQueryString("shopid")}):this.$el.find('li[business-index="0"]').trigger("click",{shopid:window.application.getQueryString("shopid"),categoryid:e})},updateui:function(){this.BusinessModle.get("iscollected")&&$(".business-collect").addClass("theme-color"),$(".business-brandinfo img").attr("src",this.BusinessModle.get("shoplogo")),$(".business-shop p").text(this.BusinessModle.get("shopname")),this.$el.find("#business-bottom-contact a").attr("href","tel:"+this.BusinessModle.get("tel")),$(".logo-wrap").css({"background-image":"url("+this.BusinessModle.get("banner")+")"})},render:function(){return e.prototype.render.apply(this,arguments),this},onRender:function(){var e=this;$(".add-blank-leaving-icon").removeClass("icomoon-wait").removeClass("add-blank-leaving-icon"),$(".add-blank-leaving-words").text("").removeClass("add-blank-leaving-words"),$(".business-product").show(),this.findComponent("business-category").$el.addClass("business-category-view"),this.$el.find("#business-bottom-category").click(function(){e.findComponent("business-category").$el.addClass("business-category-view-show")}),this.$el.find(".business-collect").click(function(t){if(e.$(t.currentTarget).hasClass("theme-color")){library.Toast("您已经收藏");return}var r=JSON.parse(window.localStorage.getItem("userinfo"));if(r){var i={url:window.app.api+"/collect-shop",type:"POST",needReset:!0,data:{userid:r.userid,shopid:window.application.getQueryString("shopid")},datatype:"json",success:function(t){console.log(t),t.status=="ok"&&(e.$(".business-collect").addClass("theme-color"),library.Toast(t.data))},error:function(){}};if(!this.baseModel){var s=n("../models/BaseModel");this.baseModel=new s}this.baseModel.loadData(i)}else library.Toast("请先登录")}),this.$el.find(".business-tab li").click(function(t,n){e.$(".business-tab li").removeClass("theme-color"),e.$(t.currentTarget).addClass("theme-color");var r=e.$(t.currentTarget).attr("business-index");r==0?(e.$("#allproducts").css({display:"block"}),e.$("#newproducts").css({display:"none"}),n&&n.shopid&&!n.categoryid?(e.newColletion=e.findComponent("allproducts").getCollection(),e.newColletion.loadData({path:"/shop-productlist",data:{shopid:n.shopid,type:0,pageindex:1,pagesize:10,sorttype:0},needReset:!0,showLoading:!0,type:"GET"})):n&&n.shopid&&n.categoryid&&(e.newColletion=e.findComponent("allproducts").getCollection(),e.newColletion.loadData({path:"/getgoodsbyshopcategory",data:{categoryid:n.categoryid,pageindex:1,pagesize:10,sorttype:0},needReset:!0,showLoading:!0,type:"GET"}))):(e.$("#allproducts").css({display:"none"}),e.$("#newproducts").css({display:"block"}),n&&n.shopid&&(e.newColletion=e.findComponent("newproducts").getCollection(),e.newColletion.loadData({path:"/shop-productlist",data:{shopid:n.shopid,type:1,pageindex:1,pagesize:10,sorttype:0},needReset:!0,showLoading:!0,type:"GET"})))}),this.$el.find("#business-main .nav-left").click(function(){window.history.back()}),this.$el.find(".nav-right").click(function(){e.findComponent("business-category").$el.addClass("business-category-view-show")}),this.$el.find("#business-bottom-detail").click(function(){$(".business-detailslist-view").addClass("business-detailslist-view-show")}),this.$el.find('li[business-index="1"]').trigger("click",{shopid:window.application.getQueryString("shopid")}),this.$el.find('li[business-index="0"]').trigger("click",{shopid:window.application.getQueryString("shopid")})},init:function(){var e=window.application.getQueryString("shopid"),t=this,r={url:window.app.api+"/shop",type:"GET",needReset:!0,data:{shopid:e},datatype:"json",success:function(e){console.log(e),e.status=="ok"&&(t.BusinessModle.set(e.data),t.BusinessModle.trigger("bussiness-update"))},error:function(){}};if(!this.baseModel){var i=n("../models/BaseModel");this.baseModel=new i}window.setTimeout(function(){t.baseModel.loadData(r)},300);var s={url:window.app.api+"/getshopinfo",type:"GET",needReset:!0,data:{shopid:e},datatype:"json",success:function(e){console.log(e);if(e.status=="ok"){var n=t.findComponent("business-detailslist");n.jsonData=e.data,n.render()}},error:function(){}};if(!this.baseModel){var i=n("../models/BaseModel");this.baseModel=new i}window.setTimeout(function(){t.baseModel.loadData(s)},300);var o={url:window.app.api+"/getshopcategory",type:"GET",needReset:!0,data:{shopid:e},datatype:"json",success:function(e){console.log(e);if(e.status=="ok"){var n=t.findComponent("business-category");n.jsonData=e.data,n.render()}},error:function(){}};if(!this.baseModel){var i=n("../models/BaseModel");this.baseModel=new i}window.setTimeout(function(){t.baseModel.loadData(o)},300)},onResume:function(){e.prototype.onResume.apply(this,arguments),this.init()}})}),define("text!pages/business.json",[],function(){return'{\n  "style":"background-color: white;",\n  "template": "business.html",\n  "type":"business",\n  "components":[\n    {\n      "id":"searchMidPageView",\n      "type":"SearchMidPageView"\n    },\n    {\n      "type": "HomePushView",\n      "id" : "allproducts",\n      "paging": true,\n      "autoload": false,\n      "template": "business-product.html",\n      "collection": "BusunessAllProductsCollection"\n    },{\n      "type": "HomePushView",\n      "id" : "newproducts",\n      "template": "business-product.html",\n      "paging": true,\n      "autoload": false,\n      "collection": "BusunessNewProductsCollection"\n    },{\n      "type": "Detailslist",\n      "id" : "business-detailslist"\n    },{\n      "style":"display:block",\n      "type": "BussinessCategory",\n      "id":"business-category"\n    }\n\n  ]\n}\n'}),define("text!pages/cancel-back-money.html",[],function(){return'<header class="headerbox">\n    <div class="left-right nav-left goback">\n        <span class="icomoon icomoon-back"></span>\n    </div>\n    <div class=\'mid order-type-selector-btn\'>\n        <span class="common-title title-mid order-list-title">申请退货</span>\n        <!--<span class="order-type-selector-icon icomoon icomoon-pulldown title-mid"></span>-->\n    </div>\n    <div class="left-right nav-right header-menu">\n        <span ></span>\n    </div>\n</header>\n<div class="cancel-order-number">\n     您正在申请退款 订单号：<span id="cancel"></span>\n</div>\n<div class="cancel-reason">\n     <div class="cancel-title">取消原因</div>\n     \n</div>\n <div class="cancel-next-button">提交</div> '}),define("pages/cancel-back-money",["./PageView","require"],function(e,t){return e.extend({type:"cancle-order-reason",events:{"click .select_mode li":"selectReason","click .cancel-next-button":"nextButton","click .goback":"goback"},reasionId:null,onResume:function(){this.$(".bar-tab").hide();var e=this;this.orderId=window.application.getQueryString("orderId");var n=t("../models/BaseModel"),r=new n,i={path:"/cancelOrderView",type:"POST",data:{orderId:this.orderId},showLoading:!0,needReset:!0,success:function(t){console.log(t),e.updateUI(t)},error:function(){}};r.loadData(i)},updateUI:function(e){this.productInfoObj=e,this.setSupportInfo(e.data)},setSupportInfo:function(e){this.$("#cancel").text(e.ordersn);var t=this.$(".cancel-title");t.html("");for(var n=0;n<e.reasonList.length;n++)t.append(this.getLevelItem(e.reasonList[n]))},getLevelItem:function(e){var t=library.getTemplate("cancel-order-money-list.html");return t(e)},selectReason:function(e){this.reasionId=$(e.currentTarget).prev().text(),$("li").find("i").removeClass("select").addClass("no_select"),$(e.currentTarget).find("i").removeClass("no_select").addClass("select")},goback:function(){window.history.back()},nextButton:function(){if(this.reasionId==null){library.Toast("请选择申请退款原因");return}var e=this,n=window.application.getQueryString("orderId"),r=window.application.getQueryString("suitId"),i=t("../models/BaseModel"),s=new i,o={path:"/cancelOrderComfirmView",type:"POST",data:{orderId:n},showLoading:!0,needReset:!0,success:function(t){if(t.status==0){Backbone.history.navigate("#my-navigate/cancel-order-money?orderId="+n+"&reasionId="+e.reasionId+"&suitId="+r,{trigger:!0});return}library.Toast(t.message)},error:function(){}};s.loadData(o)}})}),define("text!pages/cancel-back-money.json",[],function(){return'{\n  "template": "cancel-back-money.html",\n  "type":"cancel-back-money"\n}'}),define("text!pages/cancel-order-money.html",[],function(){return'<div class="left-right nav-left goback">\n        <span class="icomoon icomoon-back" style="font-size: 0.6rem;margin-left: 0.4rem;"></span>\n    </div>\n<div class="cancel-order-number">\n   <span style="color: #000;">支付方式</span>\n   <span class="paytype"></span>\n</div>\n<div class="cancel-order-number">\n   <span style="color: #000;">退款金额</span>\n   <span class="orderamount"></span>\n</div>\n<!-- <div class="cancel-order-number">\n   <span style="color: #000;">已经使用的优惠券</span>\n   <span class="integralpaid"></span>\n</div> -->\n <div class="cancel-next-button">提交</div> '}),define("pages/cancel-order-money",["./PageView","require"],function(e,t){return e.extend({type:"cancle-order-reason",events:{"click .select_mode li":"selectReason","click .cancel-next-button":"nextButton","click .goback":"goback"},reasionId:null,onResume:function(){this.$(".bar-tab").hide();var e=this;this.orderId=window.application.getQueryString("orderId");var n=t("../models/BaseModel"),r=new n,i={path:"/cancelOrderComfirmView",type:"POST",data:{orderId:this.orderId},showLoading:!0,needReset:!0,success:function(e){console.log(e.data.paytype),$(".paytype").html(e.data.paytype),$(".orderamount").html(e.data.orderamount),$(".integralpaid").html(e.data.integralpaid)},error:function(){}};r.loadData(i)},goback:function(){window.history.back()},nextButton:function(){var e=window.application.getUserInfo();this.orderId=window.application.getQueryString("orderId"),this.reasionId=window.application.getQueryString("reasionId");var n=window.application.getQueryString("suitId"),r=t("../models/BaseModel"),i=new r,s={path:"/cancellationcharge",type:"POST",data:{orderId:this.orderId,memberId:e.userid,reasonId:this.reasionId},showLoading:!0,success:function(e){e.status==0?(library.Toast("操作成功"),n=="null"?Backbone.history.navigate("#my-navigate/order-list?list_type=2",{trigger:!0}):Backbone.history.navigate("#my-navigate/package-order-list?list_type=2",{trigger:!0})):library.Toast(e.message)},error:function(){}};i.loadData(s)}})}),define("text!pages/cancel-order-money.json",[],function(){return'{\n  "template": "cancel-order-money.html",\n  "type":"cancel-order-money"\n}'}),define("text!pages/cancel-order-reason.html",[],function(){return'<div class="left-right nav-left goback"style="background:#fff;padding-top:0.3rem;padding-bottom:0.2rem">\n        <span class="icomoon icomoon-back" style="font-size: 0.6rem;margin-left: 0.4rem;"></span>\n        <span style="margin-left:2.8rem;font-size:0.45rem;">取消原因</span>\n    </div>\n<div class="cancel-order-number">\n     您正在取消订单：<span id="cancel"></span>\n</div>\n<div class="cancel-reason">\n     <div class="cancel-title">取消原因</div>\n     \n</div>\n <div class="cancel-next-button">提交</div> '}),define("pages/cancel-order-reason",["./PageView","require"],function(e,t){return e.extend({type:"cancle-order-reason",events:{"click .select_mode li":"selectReason","click .cancel-next-button":"nextButton","click .goback":"goback"},reasionId:null,onResume:function(){this.$(".bar-tab").hide();var e=this;this.orderId=window.application.getQueryString("orderId");var n=t("../models/BaseModel"),r=new n,i={path:"/cancelOrderView",type:"POST",data:{orderId:this.orderId},showLoading:!0,needReset:!0,success:function(t){console.log(t),e.updateUI(t)},error:function(){}};r.loadData(i)},updateUI:function(e){this.productInfoObj=e,this.setSupportInfo(e.data)},setSupportInfo:function(e){this.$("#cancel").text(e.ordersn);var t=this.$(".cancel-title");t.html("");for(var n=0;n<e.reasonList.length;n++)t.append(this.getLevelItem(e.reasonList[n]))},getLevelItem:function(e){var t=library.getTemplate("cancel-order-reasion-list.html");return t(e)},selectReason:function(e){this.reasionId=$(e.currentTarget).prev().text(),$("li").find("i").removeClass("select").addClass("no_select"),$(e.currentTarget).find("i").removeClass("no_select").addClass("select")},goback:function(){window.history.back()},nextButton:function(){if(this.reasionId==null){library.Toast("请选择退货原因");return}var e=window.application.getUserInfo();this.orderId=window.application.getQueryString("orderId");var n=t("../models/BaseModel"),r=new n,i={path:"/cancellationcharge",type:"POST",data:{orderId:this.orderId,memberId:e.userid,reasonId:this.reasionId},showLoading:!0,needReset:!0,success:function(e){e.status==0?(library.Toast(e.message),window.history.back()):library.Toast(e.message)},error:function(){}};r.loadData(i)}})}),define("text!pages/cancel-order-reason.json",[],function(){return'{\n  "template": "cancel-order-reason.html",\n  "type":"cancel-order-reason"\n}'}),define("text!pages/category-navigate.json",[],function(){return'{\n  "type": "NavigationView",\n  "rootPage" : "category"\n}\n'}),define("text!pages/category.html",[],function(){return"<div><component id='cate_search_midpage'/></div>\n<header class='common-search search-style1'>\n  <div class=\"common-search-left common-search-icon theme-color\">\n    <span class='icomoon-logo'></span>\n  </div>\n  <div class=\"common-search-mid\">\n      <div class=\"common-search-left-inner\">\n        <span class='icomoon-search'></span>\n        <input type='text' readonly='true' placeholder='查找商品'/>\n      </div>\n  </div>\n  <div class=\"common-search-right common-search-icon\">\n    <span class='icomoon-talk'></span>\n    <span class='home-scan-title'>消息</span>\n  </div>\n  <div class='home-header-bk theme-backgorund-color' id='home_header_bk'>\n  </div>\n</header>\n<div class='cate-wrapper'>\n  <div class='cate-left' id='cate_left'>\n  </div>\n  <div class='cate-right' id='cate_right'>\n  </div>\n</div>\n"}),define("pages/category",["./PageView","../models/CatelogListCollection","../models/CatelogDetailListCollection"],function(e,t,n){function r(e,t){var n=this,r=document.createElement("DIV").style;this.wrapper=e,this.innerWraper=t,this.area_height=this.wrapper.offsetHeight,this.scroller_height=this.innerWraper.offsetHeight,this.canScrollHeight=this.scroller_height-this.area_height,"-webkit-transform"in r?(this.transitionend="webkitTransitionEnd",this.transform="-webkit-transform",this.transition="-webkit-transition"):(this.transitionend="transitionend",this.transform="transform",this.transition="transition"),this.leftTouchPara={startY:0,offsetY:0,midOffset:0},e.addEventListener("touchstart",function(e){var t=e.touches[0];this.start_time=new Date,n.leftTouchPara.startY=t.pageY,n.leftTouchPara.midOffset=0,n.diff=0},!1),e.addEventListener("touchmove",function(e){e.preventDefault();var r=e.touches[0];n.diff=r.pageY-n.leftTouchPara.startY;if(n.diff>0)n.leftTouchPara.midOffset=n.leftTouchPara.offsetY+n.diff,n.leftTouchPara.midOffset=n.leftTouchPara.midOffset>0?n.leftTouchPara.midOffset/3:n.leftTouchPara.midOffset;else{var i=n.canScrollHeight<0?0:n.canScrollHeight;0-n.leftTouchPara.midOffset-110>i||(n.leftTouchPara.midOffset=n.leftTouchPara.offsetY+n.diff)}t.style[n.transition]="none",t.style[n.transform]="translate3d(0, "+n.leftTouchPara.midOffset+"px, 0px)"},!1),e.addEventListener("touchend",function(e){if(n.diff==0)return;var r=new Date,i=r-this.start_time,s=0;n.leftTouchPara.offsetY=n.leftTouchPara.midOffset,i<300&&(n.diff>0?n.leftTouchPara.offsetY=n.leftTouchPara.midOffset+200:n.leftTouchPara.offsetY=n.leftTouchPara.midOffset-200),t.style[n.transition]=n.transform+" ease 0.6s",t.style[n.transform]="translate3d(0, "+n.leftTouchPara.offsetY+"px, 0px)",n.leftTouchPara.offsetY>0&&(n.leftTouchPara.offsetY=0,t.style[n.transition]=n.transform+" ease 0.4s",t.style[n.transform]="translate3d(0, 0px, 0px)"),0-n.leftTouchPara.offsetY>n.canScrollHeight&&(n.leftTouchPara.offsetY=n.canScrollHeight<0?0:0-n.canScrollHeight,t.style[n.transition]=n.transform+" ease 0.4s",t.style[n.transform]="translate3d(0, "+n.leftTouchPara.offsetY+"px, 0px)")},!1)}return r.prototype={refresh:function(){this.area_height=this.wrapper.offsetHeight,this.leftTouchPara.offsetY=0,this.scroller_height=this.innerWraper.offsetHeight,this.canScrollHeight=this.scroller_height-this.area_height,this.innerWraper.style[this.transform]="translate3d(0, 0, 0)"},scrollTo:function(e){this.leftTouchPara.offsetY=e,this.innerWraper.style[this.transition]=this.transform+" ease 0.4s",this.innerWraper.style[this.transform]="translate3d(0, "+e+"px, 0px)"}},e.extend({leftArea:null,leftItemHeight:49,leftUL:null,area_height:0,events:{"click .common-search-right":"goMessageCenter","click .common-search-left-inner":"toSearch"},toSearch:function(){this.findComponent("cate_search_midpage").show()},initLayout:function(e,t){var i=t;e.C_Detail_Col=new n;var s=e,o;e.leftArea=e.$el.find("#cate_left"),e.leftArea[0].addEventListener("click",function(e){var t=e.target;if(t.tagName=="LI"){var n=t.getAttribute("data-index"),r=t.getAttribute("data-id"),i=parseInt(n),o=t.offsetHeight;Math.abs(i*t.offsetHeight)<s.leftScroller.canScrollHeight+o&&s.leftScroller.scrollTo(0-i*o),s.leftArea.find(".cate-left-li-cur").removeClass("cate-left-li-cur").removeClass("theme-color"),t.classList.add("cate-left-li-cur"),t.classList.add("theme-color"),s.createDetailById(r)}},!1),e.rightArea=e.$el.find("#cate_right"),e.rightInnerArea=$("<div></div>"),e.rightArea.append(e.rightInnerArea),e.leftArea.html(""),e.leftUL=$("<ul></ul>");for(var u=0,a=i.length;u<a;u++){var f="cate-left-li-cur theme-color";u==0&&(o=i[u].id),u!=0&&(f=""),e.leftUL.append($("<li data-id='"+i[u].id+"' data-index='"+u+"' class='"+f+"'>"+i[u].name+"</li>"))}e.leftArea.append(e.leftUL),e.leftScroller=new r(e.leftArea[0],e.leftUL[0]),e.createDetailById(o)},leftScroller:null,rightScroller:null,createDetailById:function(e){var t=this;this.C_Detail_Col.loadData({path:"/getCategoryDetail",data:{id:e},success:function(e){if(!e||e.status!="0"){library.Toast("加载数据失败");return}Data=e.data,t.rightInnerArea.html("");for(var n=0,i=Data.length;n<i;n++){var s=Data[n],o=$("<div class='cate-right-group'><div>"),u=s.list||[],a=$("<ul></ul>");for(var f=0,l=u.length;f<l;f++){var c=$("<li></li>"),h=u[f],p=$("<a href='#category-navigate/product-list?id="+h.id+"'></a>"),d=$("<img src='"+h.image+"'/>"),v=$("<span>"+h.name+"</span>");p.append(d).append(v),c.append(p),a.append(c)}o.append($("<div class='cate-right-group-title'>"+s.cName+"</div>")),o.append(a),t.rightInnerArea.append(o)}t.rightInnerArea.append($("<div class='cate-group-empty'></div>")),t.rightScroller?t.rightScroller.refresh():t.rightScroller=new r(t.rightArea[0],t.rightInnerArea[0])},error:function(){}})},onRender:function(){var e=new t,n=this;e.loadData({success:function(e){e.status=="0"?(n.initLayout(n,e.data),window.application.setLocalStorage("category",e.data)):library.Toast("数据出错")},path:"/getCategory",type:"POST",error:function(){}})},render:function(){return e.prototype.render.apply(this,arguments),this},onResume:function(){this.toggleBar&&this.toggleBar("show")},goMessageCenter:function(){var e=application.getUserInfo();!e||!e.userid?Backbone.history.navigate("#category-navigate/login/login",{trigger:!0}):Backbone.history.navigate("#category-navigate/messageCenter",{trigger:!0})}})}),define("text!pages/category.json",[],function(){return'{\n  "template": "category.html",\n  "type":"category",\n  "components": [\n    {\n      "id":"cate_search_midpage",\n      "type":"SearchMidPageView"\n    }\n  ]\n}\n'}),define("text!pages/confirm-order-completion.html",[],function(){return'\r\n<div class="PageView"\r\n	style="transform: none; position: relative; top: 0px; left: 0px; backface-visibility: hidden; display: block; transition: all 0.4s cubic-bezier(0, 0, 0.25, 1);">\r\n	<header class="headerbox">\r\n		<div class=" nav-left header-icon-back address-title-icon">\r\n			<span class="icomoon icomoon-back"></span>\r\n		</div>\r\n		<div class="mid">\r\n			<span class="common-title">订单详情</span>\r\n		</div>\r\n	</header>\r\n	<div class="create-order">\r\n		<div class="confirm-order-completion">\r\n			<!-- 2015-09-09   12:12:12  交易完成！ -->\r\n		</div>\r\n		<div id="AddressInOrderView" class="BaseView"\r\n			data-type="AddressInOrderView">\r\n			<div class="address-in-order">\r\n				<div class="address-icon-map">\r\n					<div class="icomoon icomoon-location"></div>\r\n				</div>\r\n				<div class="order-address">\r\n					<div class="order-address-user-info">\r\n						<div class="order-address-user-name">\r\n							<span class="address-user-name-des">收件人：</span><span\r\n								id="confirm-name"> <!-- 齐天大圣 -->\r\n							</span>\r\n						</div>\r\n						<div class="order-address-user-phone">\r\n							<!-- 15891160778 -->\r\n						</div>\r\n					</div>\r\n					<div class="order-address-address">\r\n						<span id="confirm-address"> <!-- 北京北京市海淀区北清路 -->\r\n						</span>\r\n					</div>\r\n				</div>\r\n				<!--   <div class="order-address-icon-right"><span class="icomoon icomoon-more"></span></div> -->\r\n			</div>\r\n		</div>\r\n		<div id="CreateOrderListView" class="ListView" data-type="ListView">\r\n			<div class="scroller-item">\r\n				<div class="confirm-order-goods">\r\n					<img id="packageImg" src="" alt="" class="confirm-order-img">\r\n\r\n					<div class="goods-order-title cofirm-order-top">\r\n						<div class="package-list-title">\r\n							<!-- 101020套餐商品 大米+红桃+甘露 -->\r\n						</div>\r\n						<div class="package-list-Selling">\r\n							<span id="packageDetailDesc"></span>\r\n							<!-- 超值好礼 促销优惠 -->\r\n							<i>热销</i>\r\n						</div>\r\n						<div class="package-list-money">\r\n							<!-- ￥12202 -->\r\n						</div>\r\n						<div class="goods-order-number">\r\n							<!-- X1 -->\r\n						</div>\r\n					</div>\r\n					<p class="confirm-order-deliver-time">\r\n						<!-- 预计发货时间 2016.8.6 -->\r\n					</p>\r\n				</div>\r\n				<div class="scroller"></div>\r\n			</div>\r\n			<div class="common-padding"></div>\r\n			<div class="freight-count">\r\n				<div>运费</div>\r\n				<div class="money monney-fee">\r\n					<!-- ￥6.00 -->\r\n				</div>\r\n				<div>积分抵款</div>\r\n				<div class="money monney-points">\r\n					<!-- ￥6.00 -->\r\n				</div>\r\n				<div>实付款（含运费）</div>\r\n				<div class="money money-total">\r\n					<!-- ￥1897.00 -->\r\n				</div>\r\n			</div>\r\n\r\n		</div>\r\n		<div class="order-detail-info"\r\n			style="color: #b1b1b1; font-size: 0.35rem; background: #fff; margin-top: 0.2rem; line-height: 0.5rem; padding-left: 0.3rem;">\r\n			<div class="order-info-info" style="padding-top: 0.1rem;">\r\n				<span class="order-info-des">订单编号：</span> <span\r\n					class="order-code-value"></span>\r\n			</div>\r\n			<div class="order-info-info order-create-time-sub">\r\n				<span class="order-info-des">创建时间：</span> <span\r\n					class="create-order-time"></span>\r\n			</div>\r\n			<div class="order-info-info order-pay-time-sub">\r\n				<span class="order-info-des">付款时间：</span> <span\r\n					class="order-pay-time"></span>\r\n			</div>\r\n		</div>\r\n	</div>\r\n\r\n</div>\r\n<!-- 底部bar -->\r\n<div class="pick-up">\r\n	<span class="evaluate evaluate-appraise">去评价</span> \r\n		<span class="evaluate evaluate-checkout">申请退款</span> \r\n		<span class="evaluate evaluate-getpackage">提货</span> \r\n		<span class="evaluate evaluate-cancel">取消订单</span> \r\n		<span class="evaluate evaluate-list">提货记录</span> \r\n		<span class="evaluate evaluate-topay">去支付</span>\r\n		<span class="evaluate evaluate-checkLog">查看物流</span>\r\n		<span class="evaluate evaluate-ensureOrder">确认收货</span>\r\n		<span class="evaluate evaluate-buyAgain">再次购买</span>\r\n</div>'}),define("pages/confirm-order-completion",["./PageView","require"],function(e,t){return e.extend({events:{"click .header-icon-back":"goback","click .evaluate-appraise":"addComment","click .evaluate-checkout":"cancelPayMoney","click .evaluate-getpackage":"getPackage","click .evaluate-cancel":"toCancelOrder","click .evaluate-list":"showList","click .evaluate-topay":"toPay","click .customer-comment":"addPackageComment","click .customer-service-sale":"toSaleAfter","click .evaluate-checkLog":"checkLog","click .evaluate-ensureOrder":"ensureOrder","click .evaluate-buyAgain":"buyAgain"},productInfoObj:null,gbDetailModel:null,initialize:function(){this.listenTo(this.findComponent("PopupMenu"))},menuMore:function(e){this.findComponent("PopupMenu").show()},goback:function(e){window.history.back()},onResume:function(){this.$(".evaluate").hide(),e.prototype.onResume.apply(this,arguments),$(".product-bottom-bar").show();if(!this.gbDetailModel){var n=t("../models/GoodDetailModel");this.gbDetailModel=new n}this.setAjaxOptions();var r=this;window.setTimeout(function(){r.gbDetailModel.loadData()},520)},setAjaxOptions:function(){var e=this;this.goodsid=window.application.getQueryString("orderId");var t=window.application.getQueryString("suitId"),n=window.application.getUserInfo(),r=n?n.userid:"";this.gbDetailModel.ajaxOptions={url:window.app.api+"/getOrderDetail",showLoading:!0,data:{orderId:this.goodsid,userId:r,suitId:t},success:function(t){t?e.updateUI(t):(library.Toast("数据出错",2e3),window.history.back())}.bind(this),error:function(e){console.log(e||"数据出错")}.bind(this)}},updateUI:function(e){this.productInfoObj=e,this.$("#confirm-name").text(e.data.receiveInfo.receiver),this.$(".order-address-user-phone").text(e.data.receiveInfo.receiverPhone),this.$("#confirm-address").text(e.data.receiveInfo.receiverDetailAddress),this.$(".confirm-order-completion").text("订单"+e.data.describe),this.$(".package-list-title").text(e.data.suitName),this.$(".confirm-order-img").attr("src",e.data.suitImages[0].suitImage),this.$("#packageDetailDesc").text(e.data.remark),this.$(".package-list-money").text("￥"+e.data.suitPrice),this.$(".monney-fee").text("￥"+e.data.deliveryFee),this.$(".monney-points").text("￥"+e.data.pointFee),this.$(".money-total").text("￥"+e.data.orderFee),this.$(".order-code-value").text(e.data.orderCode),this.$(".create-order-time").text(e.data.createTime),this.$(".order-pay-time").text(e.data.payTime);if(e.data.suitType==1)for(var t in e.data.productList);this.setSupportInfo(e.data),e.data.orderStatus==2?(this.$(".evaluate-cancel").show(),this.$(".evaluate-topay").show()):e.data.orderStatus==3?e.data.suitType==1?(e.data.ladingFlag==1?this.$(".evaluate-checkout").hide():this.$(".evaluate-checkout").show(),this.$(".evaluate-getpackage").show(),this.$(".evaluate-list").show()):this.$(".evaluate-checkout").show():e.data.orderStatus==4?e.data.suitType==1?this.$(".evaluate-list").show():(this.$(".evaluate-ensureOrder").show(),this.$(".evaluate-checkLog").show()):e.data.orderStatus==5?(this.$(".evaluate-list").show(),this.$(".customer-service").show()):e.data.orderStatus==6&&this.$(".evaluate-buyAgain").show()},setSupportInfo:function(e){var t=this.$(".scroller");t.html("");for(var n=0;n<e.productList.length;n++)e.productList[n].suitType=e.suitType,t.append(this.getLevelItem(e.productList[n]))},getLevelItem:function(e){var t=library.getTemplate("confirm-order-completion-item.html");return t(e)},showList:function(){var e=this.productInfoObj.data.orderId;Backbone.history.navigate("#my-navigate/confirm-order-set?orderId="+e,{trigger:!0})},getPackage:function(){var e=this.productInfoObj.data.orderId;console.log(e),Backbone.history.navigate("#my-navigate/bill-lading?orderId="+e,{trigger:!0})},toCancelOrder:function(){var e=this.productInfoObj.data.orderId;Backbone.history.navigate("#my-navigate/cancel-order-reason?orderId="+e,{trigger:!0})},toPay:function(){var e=this.productInfoObj.data;window.app.createOrderResult=e,Backbone.history.navigate("#my-navigate/payMode",{trigger:!0})},cancelPayMoney:function(){var e=this.productInfoObj.data.orderId,t=this.productInfoObj.data.suitId;Backbone.history.navigate("#my-navigate/cancel-back-money?orderId="+e+"&suitId="+t,{trigger:!0})},addPackageComment:function(e){var t=this.$(e.currentTarget).next().text();console.log(t);var n={};for(var r in this.productInfoObj.data.productList)t==this.productInfoObj.data.productList[r].ogid&&(n=this.productInfoObj.data.productList[r]);n.orderId=this.productInfoObj.data.orderId;if(n.isComment==0){library.Toast("评价已完成",2e3);return}var i=[];i.push(n),window.app.waitCommentOrderType="10200",window.app.waitCommentOrder=i,Backbone.history.navigate("#my-navigate/create-comment",{trigger:!0})},toSaleAfter:function(e){var t=this.productInfoObj.data.orderId,n=this.$(e.currentTarget).prev().text(),r={};for(var i in this.productInfoObj.data.productList)n==this.productInfoObj.data.productList[i].ogid&&(r=this.productInfoObj.data.productList[i]);if(r.isSupport==0){library.Toast("正在售后中，请耐心等待",2e3);return}var s=r.productId,o=r.number;Backbone.history.navigate("#my-navigate/applyAfterSale?orderId="+t+"&ogid="+n+"&productId="+s+"&number="+o,{trigger:!0})},checkLog:function(){var e=this.productInfoObj.data.orderId,t=this.productInfoObj.data.logisId;Backbone.history.navigate("#my-navigate/logiticsDetail?orderId="+e+"&logisId="+t,{trigger:!0})},buyAgain:function(){var e=this.productInfoObj.data.suitId;Backbone.history.navigate("#my-navigate/packagedetail?packageId="+e,{trigger:!0})},ensureOrder:function(){param=[],leftInfo={leftText:"取消",callback:function(){}},rightInfo={rightText:"确定",callback:this.updateOrderOK.bind(this)},param.push(leftInfo),param.push(rightInfo),library.MessageBox("确认收货","您确定已收到货？",param)},updateOrderOK:function(){if(!this.productInfoObj.data)return;this.updateOrder("update")},updateOrder:function(e){var n=window.application.getUserInfo(),r=t("../models/OrderInfoModel"),i=new r,s={orderId:this.productInfoObj.data.orderId,parentSn:this.productInfoObj.data.billInfo.parentSn,userId:n.userid},o=this,u={data:s,success:function(e){e?library.Toast("确认收货成功",2e3):library.Toast("确认收货失败，网络错误",2e3),o.gbDetailModel.loadData()},error:function(){library.Toast("网络出错",2e3)},showLoading:!0};u.url=i.receiveOrderUrl,i.loadData(u)}})}),define("text!pages/confirm-order-completion.json",[],function(){return'{\n  "template": "confirm-order-completion",\n  "type":"confirm-order-completion",\n   "components": [\n        {\n            "id": "carousel",\n            "type": "CarouselView",\n            "slickOptions": {\n                "lazyLoad": "progressive",\n                "dots": true,\n                "autoplay": true,\n                "swipeToSlide": true,\n                "speed": 300,\n                "arrows": false\n            },\n            "collection": "packageDetailCollection"\n  }, {\n            "id": "PopupMenu",\n            "type": "PopupMenu"\n  }, {\n            "type": "MySegmentedView",\n            "id": "MySegmentedView",\n            "items": [{\n                "id": "ProductDetailInfoView",\n                "name": "商品详情",\n                "type": "ProductDetailInfoView"\n      }]\n    },\n        {\n            "id": "SearchMidPageView",\n            "type": "SearchMidPageView"\n  }]\n}'}),define("text!pages/confirm-order-details.html",[],function(){return'\n<div class="PageView" style="transform: none; position: relative; top: 0px; left: 0px; backface-visibility: hidden; display: block; transition: all 0.4s cubic-bezier(0, 0, 0.25, 1);">\n<header class="headerbox">\n      <div class=" nav-left header-icon-back address-title-icon">\n          <span class="icomoon icomoon-back"></span>\n      </div>\n      <div class="mid">\n        <span class="common-title">确认订单</span>\n      </div>\n      <div class="left-right nav-right">\n        <a class="header-icon-menu icomoon icomoon-moremore"></a>\n      </div>\n  </header>\n<div class="create-order">\n  <div id="AddressInOrderView" class="BaseView" data-type="AddressInOrderView"><div class="address-in-order">\n  <div class="address-icon-map">\n    <div class="icomoon icomoon-location">\n    </div>\n  </div>\n  <div class="order-address">\n    <div class="order-address-user-info">\n      <div class="order-address-user-name">\n        <span class="address-user-name-des">收件人：</span><span>齐天大圣</span>\n      </div>\n      <div class="order-address-user-phone">15891160778</div>\n    </div>\n    <div class="order-address-address">\n      <span>北京北京市海淀区北清路</span>\n    </div>\n  </div>\n  <div class="order-address-icon-right"><span class="icomoon icomoon-more"></span></div>\n</div>\n</div>\n  <div id="CreateOrderListView" class="ListView" data-type="ListView"><div class="scroller">\n  <div class="confirm-order-goods">\n            <img src="http://szli.yonyou.com//upload/20160602/010041K0V4AC0QL2IF8V.jpg" alt="" class="confirm-order-img">\n            \n        <div class="goods-order-title cofirm-order-top">\n                <div class="package-list-title">\n                    101020套餐商品 大米+红桃+甘露\n                </div>\n                <div class="package-list-Selling">超值好礼 促销优惠<i>热销</i></div>\n                <div class="package-list-money">￥12202</div>\n                <div class="goods-order-number">X1</div>\n            </div>\n           <p class="confirm-order-deliver-time">预计发货时间 2016.8.6</p> \n    </div>\n            <div class="scroller">\n                    <ul class="table-view" style="border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgb(221, 221, 221); margin-bottom: 5px; background-color: rgb(255, 255, 255);">\n                        <li class="table-view-cell media favorite-item list-content" style="border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgb(221, 221, 221);">\n                            <div class="list-item">\n                                <img class="item-package-detail-img" src="http://szli.yonyou.com//upload/20160602/0100R1K064AC0QJ7K7UW.jpg">\n                                <div class="media-body item-media-body">\n                                    <div class="item-package-detail-title">\n                                        <div class="item-package-detail-name">红枣一箱想要多少要多少</div>\n                                        <div class="item-net-content"></div>\n                                    </div>\n                                    <div class="item-package-detail-price">\n                                        <div class="price-money">￥15684</div>\n                                        <div class="right-text">x1</div>\n                                    </div>\n                                </div>\n                            </div>\n                        </li>\n                        <li class="table-view-cell media favorite-item list-content" style="border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgb(221, 221, 221);">\n                            <div class="list-item">\n                                <img class="item-package-detail-img" src="http://szli.yonyou.com//upload/20160602/0100R1K064AC0QJ7K7UW.jpg">\n                                <div class="media-body item-media-body">\n                                    <div class="item-package-detail-title">\n                                        <div class="item-package-detail-name">红枣一箱想要多少要多少</div>\n                                        <div class="item-net-content"></div>\n                                    </div>\n                                    <div class="item-package-detail-price">\n                                        <div class="price-money">￥15684</div>\n                                        <div class="right-text">x1</div>\n                                    </div>\n                                </div>\n                            </div>\n                        </li>\n                        <li class="table-view-cell media favorite-item list-content" style="border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgb(221, 221, 221);">\n                            <div class="list-item">\n                                <img class="item-package-detail-img" src="http://szli.yonyou.com//upload/20160602/0100R1K064AC0QJ7K7UW.jpg">\n                                <div class="media-body item-media-body">\n                                    <div class="item-package-detail-title">\n                                        <div class="item-package-detail-name">红枣一箱想要多少要多少</div>\n                                        <div class="item-net-content"></div>\n                                    </div>\n                                    <div class="item-package-detail-price">\n                                        <div class="price-money">￥15684</div>\n                                        <div class="right-text">x1</div>\n                                    </div>\n                                </div>\n                            </div>\n                        </li>\n                    </ul>\n                </div>\n  <div style="display: block;"></div><div class="empty-view" style="display: none;">已经加载全部</div><div class="error-view" style="display: none;">网络异常</div></div></div>\n  <div class="group-cf-operation" style="display: none;">\n    <div class="group-cf-left">份数（限购2份）</div>\n    <div class="group-cf-right">\n      <span class="icomoon icomoon-minus"></span>\n      <span class="group-cf-text">1</span>\n      <span class="icomoon icomoon-plus"></span>\n    </div>\n  </div>\n  <div class="cf-reward-info" style="display: none;">\n    <div class="cf-reward-des">回报内容</div>\n    <div class="cf-reward-name-number">\n      <span class="cf-reward-name">古井贡酒特娘</span>\n      <span class="cf-reward-name">x1</span>\n    </div>\n    <div class="cf-reward-content">感谢您的支持，您将用低于商品原价的价格购买</div>\n    <div class="cf-reward-mark">项目结束两天内发货</div>\n  </div>\n  <div class="common-padding"></div>\n  <div class="bill-order-info psb-selector place-bg">\n      <span class="bill-method-des psb-selector-des">发票信息</span>\n      <span class="icomoon icomoon-more psb-selector-more"></span>\n      <div class="bill-method-value psb-selector-value">在线支付(商场配送)\n</div>\n    </div>\n  <div class="bill-order-info psb-selector place-bg">\n      <span class="bill-method-des psb-selector-des">发票信息</span>\n      <span class="icomoon icomoon-more psb-selector-more"></span>\n      <div class="bill-method-value psb-selector-value">不需要</div>\n    </div>\n  <div class="freight-count">\n       <div>商品全额</div>\n       <div class="money">合计：￥6.00</div>\n       <div>运费</div>\n       <div class="money">￥1897.00</div>\n  </div>\n  \n  </div>\n<!-- 底部bar -->\n\n <div class="place-order">\n      <div class="place-order-all-num">合计：<span>￥2266.00</span></div>\n      <div class="place-order-div-btn">\n      <span class="place-order-button">提交订单</span>\n      </div>\n </div>\n \n</div></div></div>'}),define("pages/confirm-order-details",["./PageView","require"],function(e,t){return e.extend({})}),define("text!pages/confirm-order-details.json",[],function(){return'{\n  "template": "confirm-order-details",\n  "type":"confirm-order-details"\n}'}),define("text!pages/confirm-order-set.html",[],function(){return'\r\n<header class="headerbox">\r\n  <div class="left-right nav-left goback">\r\n    <span class="icomoon icomoon-back"></span>\r\n  </div>\r\n  <div class=\'mid\'>\r\n    <span class="common-title">提货记录</span>\r\n  </div>\r\n</header>\r\n<div class="delivered-state"> \r\n      <div id="show_nodata_div" style="height:950px;display:none">\r\n              <div class = \'icomoon-without add-blank-leaving-icon\' ></div><div class = \'add-blank-leaving-words\' >还没有相关的提货记录哦~</div>\r\n      </div>\r\n             \r\n     <div class="scroller-wait">\r\n          \r\n     </div>\r\n    \r\n     <div class="scroller-cancel">\r\n         \r\n     </div>    \r\n     <div class="scroller-finish">\r\n \r\n     </div>\r\n</div>\r\n<!-- class="delivered-btn" -->\r\n<div class="delivered-list-btn" style="width: 100%;height: 1.3rem;background: #fff;left: 0;bottom: 0;z-index: 2;line-height: 1.4rem;font-size: 0.37333333rem;text-align: right;padding-right: 0.4rem;">\r\n       <span style="background:#FF6633;padding: 0.1rem 0.5rem;border-radius: 4px;color: #fff;">提货</span>\r\n</div>'}),define("pages/confirm-order-set",["./PageView","require"],function(e,t){return e.extend({events:{"click .goback":"goback","click .goods-label-return":"goback","click .delivered-list-btn":"toCreateOrder","click .order-cancel-bill":"orderCancel","click .order-wait-bill":"orderWait","click .delivered-protuct-button":"changeProduction"},orderId:null,productInfoObj:null,gbDetailModel:null,initialize:function(){this.listenTo(this.findComponent("PopupMenu"),"toSearch",this.toSearch.bind(this))},menuMore:function(e){this.findComponent("PopupMenu").show()},toSearch:function(e){this.findComponent("SearchMidPageView").show()},goback:function(e){window.history.back()},onResume:function(){this.toggleBar&&this.toggleBar("hide");if(!this.gbDetailModel){var e=t("../models/ConfirmOrderSetCollection");this.gbDetailModel=new e}this.setAjaxOptions()},setAjaxOptions:function(){var e=t("../models/BaseModel"),n=new e,r=this;this.orderId=window.application.getQueryString("orderId");var i=window.application.getUserInfo(),s=i?i.userid:"",o={url:window.app.api+"/getShippingRecord",showLoading:!0,data:{orderId:this.orderId},success:function(e){r.updateUI(e)}.bind(this),error:function(e){console.log(e||"数据出错")}.bind(this)};n.loadData(o)},updateUI:function(e){this.productInfoObj=e,console.log(e),e.data?this.setSupportInfo(e.data):this.$("#show_nodata_div").show()},setSupportInfo:function(e){var t=this.$(".scroller-wait");t.html("");var n=this.$(".scroller-cancel");n.html("");var r=this.$(".scroller-finish");r.html("");for(var i=0;i<e.length;i++)e[i].orderStatus==3?t.append(this.getLevelItem(e[i])):e[i].orderStatus==4?n.append(this.getLevelItem(e[i])):r.append(this.getLevelItem(e[i]))},getLevelItem:function(e){var t=library.getTemplate("confirm-order-set-wait.html");return t(e)},orderCancel:function(e){var n=this.$(e.currentTarget).next().text();if(n==1){library.Toast("售后申请中，请耐心等待");return}var r=this.$(e.currentTarget).prev().text(),i=window.application.getUserInfo(),s=i?i.userid:"",o=this,u=t("../models/BaseModel"),a=new u,f={url:window.app.api+"/ShippingCancel",type:"post",needReset:!0,data:{billsId:r,memberId:s},success:function(e){o.onResume()},error:function(){}};a.loadData(f)},orderWait:function(e){var n=this.$(e.currentTarget).prev().text(),r=window.application.getUserInfo(),i=r?r.userid:"",s=this,o=t("../models/BaseModel"),u=new o,a={url:window.app.api+"/ShippingComplete",type:"post",needReset:!0,data:{billsId:n,memberId:i},success:function(e){s.onResume()},error:function(){}};u.loadData(a)},changeProduction:function(e){var t=this.$(e.currentTarget).prev().text(),n=this.$(e.currentTarget).next().text(),r={};for(var i in this.productInfoObj.data)t==this.productInfoObj.data[i].billsId&&(r=this.productInfoObj.data[i]);r.orderId=this.orderId;var s={};for(var i in r.orderGoodsList)n==r.orderGoodsList[i].ogid&&(s=r.orderGoodsList[i]);if(s.isSupport==0){library.Toast("售后处理中，请耐心等待");return}var o={};o.item=r,o.itemProduct=s,console.log(o),window.app.shopAfterSale=o,window.app.shopAfterSaleType="10200",Backbone.history.navigate("#my-navigate/applyAfterSale",{trigger:!0})},toCreateOrder:function(){Backbone.history.navigate("#my-navigate/bill-lading?orderId="+this.orderId,{trigger:!0})}})}),define("text!pages/confirm-order-set.json",[],function(){return'{\n  "template": "confirm-order-set",\n  "type":"confirm-order-set",\n    "components":[\n    {\n      "id":"GroupBuyListView",\n      "type":"GroupBuyListView",\n      "collection":"ConfirmOrderSetCollection"\n    },\n    {\n      "id": "PopupMenu",\n      "type": "PopupMenu"\n    }, {\n      "id": "SearchMidPageView",\n      "type": "SearchMidPageView"\n    }\n  ]\n}'}),define("text!pages/coupdes.html",[],function(){return'<header class="headerbox">\n    <div class="left-right nav-left goback">\n        <span class="icomoon icomoon-back"></span>\n    </div>\n    <div class=\'mid order-type-selector-btn\'>\n      <span class="common-title title-mid">使用说明</span>\n    </div>\n    <div class="left-right nav-right header-menu">\n      <span class="icomoon icomoon-moremore"></span>\n    </div>\n</header>\n<div class="discount-desciption-content">\n  <div class="main-content"></div>\n</div>\n<div>\n  <component id="PopupMenu"/>\n  <component id="SearchMidPageView"/>\n</div>\n'}),define("pages/coupdes",["./PageView","require"],function(e,t){return e.extend({type:"coupdes",events:{"click .goback":"onBack","click .header-menu":"menuMore"},initialize:function(){this.listenTo(this.findComponent("PopupMenu"),"toSearch",this.toSearch.bind(this))},menuMore:function(e){this.findComponent("PopupMenu").show()},toSearch:function(e){this.findComponent("SearchMidPageView").show()},onBack:function(){window.history.back()},onResume:function(){var e=t("../models/BaseModel");this.coupdesModel=new e,this.toggleBar&&this.toggleBar("hide"),this.coupdesModel.loadData({path:"/getCouponReadme",type:"GET",success:this.loadSuccess.bind(this),error:this.loadError.bind(this)})},loadSuccess:function(e){this.$(".main-content").html("这里是优惠券说明这里是优惠券说明这里是优惠券说明这里是优惠券说明这里是优惠券说明这里是优惠券说明")},loadError:function(){}})}),define("text!pages/coupdes.json",[],function(){return'{\n  "type":"coupdes",\n  "template":"coupdes.html",\n  "components":[\n    {\n      "id": "PopupMenu",\n      "type": "PopupMenu"\n    },\n    {\n      "id": "SearchMidPageView",\n      "type": "SearchMidPageView"\n    }\n  ]\n}\n'}),define("text!pages/create-comment.html",[],function(){return'<header class="headerbox">\n    <div class=" nav-left header-icon-back create-comment-title-icon">\n        <span class="icomoon icomoon-back"></span>\n    </div>\n    <div class=\'mid\'>\n      <span class="common-title">评价商品</span>\n    </div>\n    <div class="left-right nav-right header-icon-menu">\n        <a class="header-icon-menu icomoon icomoon-moremore"></a>\n    </div>\n</header>\n<div class="create-comment">\n  <div class="create-comment-info" id="create-comment-info">\n    <div class="create-comment-list-view">\n      <component id="CreateCommentListView" />\n    </div>\n    <div class="comment-bottom-padding">\n\n    </div>\n    <div class="create-comment-btn">提交评价</div>\n  </div>\n  <div class="create-comment-success">\n    <div class="submit-success">\n      <img src="./images/comment/pic_image_comment.png" />\n      <div>\n        <br/><span>感谢您的评价！</span><br/>\n      </div>\n    </div>\n    <div class="other-guide">\n      <span class="look-order guide-btn">查看订单</span>\n      <span class="back-home guide-btn">去首页逛逛</span>\n    </div>\n  </div>\n  <div>\n     <component id=\'SearchMidPageView\'/>\n     <component id="PopupMenu"/>\n  </div>\n</div>\n'}),define("pages/create-comment",["require","./PageView"],function(e,t){return t.extend({type:"create-comment",events:{"click .header-icon-back":"goBack","click .header-icon-menu":"menuMore","click img":"imgClick","click .level-item":"commentLevel","click .evaluate-star":"makeStar","click .look-order":"goBack","click .back-home":"goHome","click .create-comment-btn":"submitComment"},order:null,orderType:null,productList:null,product:null,imgArray:[],editItem:null,level:null,initialize:function(){this.listenTo(this.findComponent("PopupMenu"),"toSearch",this.toSearch.bind(this))},menuMore:function(e){this.findComponent("PopupMenu").show()},toSearch:function(e){this.findComponent("SearchMidPageView").show()},goBack:function(){window.history.back()},goHome:function(){Backbone.history.navigate("#home-navigate/home",{trigger:!0})},toDetail:function(){var e=this.order.get("orderId");Backbone.history.navigate("#my-navigate/order-detail?"+e,{trigger:!0})},submitComment:function(t){if(!this.$(".level-item").hasClass("level-item-selected"))return library.Toast("请选择评价态度"),!1;if(!this.$(".comment-content-text").val())return library.Toast("请输入评价内容"),!1;var n=this.$(".comment-content-text").val(),r=/^[\u4e00-\u9fa50-9A-Za-z]{10,200}$/;if(!r.test(n))return library.Toast("评价内容在10~200之间"),!1;var i=e("../models/BaseModel"),s=new i,o=this.$(".comment-content-text").val();_this=this;var u,a,f;if(this.orderType=="10200")this.order=window.app.waitCommentOrder,this.productList=this.order,u=this.productList[0].orderId,a=this.productList[0].productId,f=this.productList;else{var l=this.order.get("productList");u=this.order.get("orderId"),a=l[0].productId,f=this.pro}var c=window.application.getUserInfo(),h={type:"POST",path:"/addComment",data:{userId:c.userid,commentList:f,productId:a,orderId:u,level:_this.level,commentContent:o?o:"无"},showLoading:!0,datatype:"json",success:function(e){_this.$("#create-comment-info").hide(),_this.$(".create-comment-btn").hide(),_this.$(".create-comment-success").show()},error:function(){library.Toast("网络错误")}};s.loadData(h)},makeStar:function(e){var t=this,n=$(e.currentTarget).parent(),r=$(e.currentTarget).parents(".evaluate-goods-marking").next(".evaluate-goods-comment"),i=$(e.currentTarget).data("star");r.attr("data-star",i),n.find(".evaluate-star").removeClass("icomoon-star comment--star-selected").addClass("icomoon-starunclick"),$(e.currentTarget).removeClass("unclick icomoon-starunclick").addClass("icomoon-star comment--star-selected"),$(e.currentTarget).prevAll().each(function(){$(this).removeClass("unclick icomoon-starunclick").addClass("icomoon-star comment--star-selected")})},onResume:function(){console.log(111),t.prototype.onResume.apply(this,arguments),this.orderType=window.app.waitCommentOrderType,this.orderType=="10200"?(this.order=window.app.waitCommentOrder,this.productList=this.order):(this.order=window.app.waitCommentOrder,this.productList=this.order.get("productList")),console.log(this.productList),this.productList&&(this.findComponent("CreateCommentListView").collection.reset(this.productList),this.contentView=$(".image-upload-content"),this.$(".input-image-upload").bind("change",this.handleFiles.bind(this))),$(".create-comment-info").show(),$(".create-comment-success").hide()},onRender:function(){console.log(222)},imagefiles:[],handleFiles:function(e){this.editItem=$(e.target).parents(".create-comment-list-item");var t=this,n=$(e.target)[0].files,r=[];for(var i=0,s;s=n[i];i++){var o=/image.*/;if(!s.type.match(o))continue;var u=Math.random()*new Date,a={_id:u,file:s},f=new FileReader;f.onload=function(e){var n=e.target.result;t.addImage(n,u),a.src=n},t.imagefiles.push(a),f.readAsDataURL(s);if(t.imgArray.length>=t.options.max-1){t.hideAdd();return}}},commentLevel:function(e){var t=$(e.target).parents(".comment-level");t.find(".level-item").removeClass("level-item-selected"),$(e.target).addClass("level-item-selected"),$(e.target).text()=="好评"?this.level="5":$(e.target).text()=="较好"?this.level="4":$(e.target).text()=="一般"?this.level="3":$(e.target).text()=="较差"?this.level="2":$(e.target).text()=="差评"&&(this.level="1")},addImage:function(e,t){var n=$("<img />");n.attr("src",e),n.attr("_id",t),this.imgArray.push(e),this.editItem.find(".image-preview").append(n),this.imgArray.length==5&&this.editItem.find(".image-add").hide()},getImagesValue:function(){var e=[];return this.imagefiles.forEach(function(t,n,r){e[n]=t.file}),e},remove:function(){this.$(".input-image-upload").unbind("change",this.handleFiles)},imgClick:function(e){this._modalAtlasList()},_modalAtlasList:function(){var e=window.innerWidth,t=$('<div class="atlas-list"></div>'),n=$('<div class="atlas-top"></div>'),r=$('<div class="atlas-top-back-btn"></div>'),i=$('<span class=" icommon icomoon-back"></span>');$atlas_top_delete=$('<div class="atlas-top-delete icomoon icomoon-delete"></div>'),atlas_footer=['<span class="atlas-span-info">','<span class="atlas-span-current">1</span>','<span class="atlas_span_total">/'+this.imagefiles.length+"</span>","</span>"].join(""),$atlas_footer=$(atlas_footer),r.append(i).append($atlas_footer),slick_out_wrapper=['<div class="slick-out-wraper">','<div class="slick-container" style="width: '+window.innerWidth+'px"></div>',"</div>"].join(""),$slick_out_wrapper=$(slick_out_wrapper),r.on("click",function(n){t.css({transition:"all 0.5s ease","-webkit-transition":"all 0.5s ease",transform:"translate3d("+e+"px, 0, 0)"}),window.setTimeout(function(){t.remove()},600)});var s=this;$atlas_top_delete.on("click",function(n){var r=t.find(".atlas-span-current").text();if(!r)return;r=parseInt(r),s.imagefiles.length>=r&&(r--,s._removeCurrentImg(r),t.css({transition:"all 0.5s ease","-webkit-transition":"all 0.5s ease",transform:"translate3d("+e+"px, 0, 0)"}),window.setTimeout(function(){t.remove()},600))}),n.append(r),t.append(n).append($atlas_top_delete).append($slick_out_wrapper),$("body").append(t);var o=t.find(".slick-container");this.slick=o.slick({lazyLoad:"ondemand",autoplay:!1,swipeToSlide:!0,dots:!1,speed:100,adaptiveHeight:!0});if(this.imagefiles){var s=this;setTimeout(function(){s.imagefiles.forEach(function(e){o.slick("slickAdd",s._createAtlasItem(e))}),o.on("beforeChange",function(e,n,r,i){var s="",o=i+1;t.find(".atlas-footer-h").text(s),t.find(".atlas-span-current").text(o)})},0)}t.css({transition:"none","-webkit-transition":"none",transform:"translate3d("+e+"px, 0, 0)"}),window.setTimeout(function(){t.css({transition:"all 0.5s ease","-webkit-transition":"all 0.5s ease",transform:"translate3d(0, 0, 0)"})},30)},_removeCurrentImg:function(e){this.editItem.find(".image-preview").children().eq(e).remove(),this.imagefiles.splice(e,1),this.imgArray.splice(e,1)},_createAtlasItem:function(e){var t=['<div class="slick-imagediv">','<img class="slick-img" src="'+e.src+'" />',"</div>"].join("");return $(t)[0]}})}),define("text!pages/create-comment.json",[],function(){return'{\n  "type":"create-comment",\n  "template":"create-comment.html",\n  "components":[\n    {\n      "id":"CreateCommentListView",\n      "type":"CreateCommentListView",\n      "template":"create-comment-product-item.html",\n      "collection":"AjaxCollection"\n    },\n    {\n      "id": "SearchMidPageView",\n      "type": "SearchMidPageView"\n    },\n    {\n      "id": "PopupMenu",\n      "type": "PopupMenu"\n    }\n  ]\n\n}\n'}),define("text!pages/create-order-for-point.html",[],function(){return'\n<header class="headerbox">\n      <div class=" nav-left header-icon-back address-title-icon">\n          <span class="icomoon icomoon-back"></span>\n      </div>\n      <div class=\'mid\'>\n        <span class="common-title">确认订单</span>\n      </div>\n      <div class="left-right nav-right">\n\n      </div>\n\n  </header>\n  <div class="create-order">\n  <component id="AddressInOrderView" />\n  <component id="OrderShopListView"/>\n  <!-- 支付方式、配送方式-->\n  <div class="pay-send-selector">\n    <div class="send-method-order psb-selector">\n      <span class="pay-send-des psb-selector-des">配送方式</span>\n      <span class="icomoon icomoon-more psb-selector-more"></span>\n      <span id="point-send-value" class="send-method-value psb-selector-value"></span >\n    </div>\n    <!--<div class="bill-order-info psb-selector">\n      <span class="bill-method-des psb-selector-des">发票信息</span>\n      <span class="icomoon icomoon-more psb-selector-more"></span>\n      <div class="bill-method-value psb-selector-value">不需要</div>\n    </div>-->\n  </div>\n  <div class="order-message">\n    <input type="text" placeholder="备注：您有什么要求，可以写在这里" class="message"/>\n  </div>\n\n  <!--<div class="pay-send-selector">\n    <div class="order-fee-info-points" style="padding-bottom: 0">\n      <span class="order-fee-info-points-des">商品金额</span>\n      <span class="order-fee-info-points-value theme-color"></span>\n      <span class="order-fee-info-points-value-des">合计：</span>\n    </div>-->\n    <!--<div class="order-fee-info-points">\n      <span class="order-fee-info-points-des">运费</span>\n      <span class="order-fee-info-points-post-value theme-color">¥0.00</span>\n    </div>-->\n  </div>\n\n <!-- 底部bar -->\n <div class="order-btm-bar" style="position: fixed">\n   <div class="order-total-fee order-total-fee-points">\n     <span class="order-total-fee-des order-total-fee-des-points">所需积分：</span>\n     <span class="order-total-fee-fee order-total-fee-fee-points">0</span>\n     <span class="order-total-fee-fee-points">积分</span>\n   </div>\n   <div class="order-submit theme-backgorund-color">去结算</div>\n </div>\n\n</div>\n'}),define("pages/create-order-for-point",["./PageView","require"],function(e,t){return e.extend({type:"create-order-for-point",events:{"click #AddressInOrderView":"onChangeAddress","click .header-icon-back":"goback","click .pay-method":"paySelector","click .send-method-order":"sendSelector","click .bill-order-info":"setOrderBillInfo","click .order-submit":"orderSubmit"},addressModel:null,productInfo:null,orderMap:{},initialize:function(){},onRender:function(){},onResume:function(){this.toggleBar&&this.toggleBar("hide");if(window.app.param1)this.addressModel=window.app.param1,this.setAddressModel(this.addressModel);else{var e=this,n=t("../models/AjaxCollection"),r=new n;r.loadData({path:"/my-address/list",type:"POST",needReset:!0,data:{userId:JSON.parse(localStorage.getItem("userinfo")).userid,index:1,size:10},success:function(t){var n=r.findWhere({isdefault:"true"});e.addressModel=n,e.setAddressModel(n)}})}this.productInfo=window.app.shopsOrder,this.initData(),window.app.paymode&&(this.$(".pay-method-value").text(window.app.paymode.payWayName),console.log(window.app.paymode.payWayName)),window.app.sendmode&&this.$(".send-method-value").text(window.app.sendmode.sendWayName),window.app.invoice&&this.$(".bill-method-value.psb-selector-value").text(window.app.invoice),this.$(".address-in-order").css({})},initData:function(){this.productInfo||(library.Toast("信息出错",2e3),window.history.back()),this.findComponent("OrderShopListView").collection.reset(null),this.findComponent("OrderShopListView").collection.reset(this.productInfo),this.setShopInfo(this.productInfo),console.log(this.productInfo)},setShopInfo:function(e){if(!e){library.Toast("订单失效，请重新下单"),window.history.back();return}this.setAddressModel(this.addressModel);var t=0;_.each(e,function(e){for(var n=0;n<e.items.length;n++)t+=e.items[n].point}),this.$(".order-fee-info-points-value").text(t+"分"),this.$(".order-total-fee-fee").text(t),this.orderMap.orderFee=t},setAddressModel:function(e){if(!e)return;var n=t("../models/BaseModel"),r=e.toJSON(),i=new n(r);i.set("receiverDetailAddress",i.get("receiverProvince")+i.get("receiverCity")+i.get("receiverRegion")+i.get("receiverAddr")),this.findComponent("AddressInOrderView").setModel(i,"afterPayment"),console.log(this.addressModel)},onChangeAddress:function(){Backbone.history.navigate("#my-navigate/addressSelect",{trigger:!0})},goback:function(){window.history.back()},orderOptionsSelector1:null,orderOptionsSelector2:null,paySelector:function(){if(!this.orderOptionsSelector1){var e=t("../components/OrderOptionsSelectorView");this.orderOptionsSelector1=new e,this.$el.append(this.orderOptionsSelector1.render().el),this.$el.append(this.orderOptionsSelector1.el)}console.log(this),this.orderOptionsSelector1.setOrderOptinos("支付方式",this.orderMap.paySelected,"payselector"),this.orderOptionsSelector1.callBack=this.paySelectorHandle.bind(this),this.orderOptionsSelector1.$el.find(".common-message-cover").show(),this.orderOptionsSelector1.$el.find(".order-options-content").addClass("order-options-content-show")},paySelectorHandle:function(e){$(".pay-method-value").empty().append(e.name),this.orderMap.payInfo||(this.orderMap.payInfo={}),this.orderMap.payInfo.paywayId=e.id},sendSelectorIndex:null,sendCurrentTarget:null,sendSelector:function(e){Backbone.history.navigate("#my-navigate/paySelector?type=points",{trigger:!0})},BillSetting:null,setOrderBillInfo:function(e){Backbone.history.navigate("#my-navigate/invoice",{trigger:!0})},getMemberAddressInfo:function(){return{consignee:this.addressModel.attributes.receiver||"",tel:this.addressModel.attributes.receiverPhone||"",mobile:this.addressModel.attributes.receiverPhone,postCode:this.addressModel.attributes.postCode||"",country:"86",province:this.addressModel.attributes.receiverProvinceId||"",city:this.addressModel.attributes.receiverCityId||"",district:this.addressModel.attributes.receiverRegionId||"",address:this.addressModel.attributes.receiverAddr||""}},orderInfo:null,orderSubmit:function(e){if(!this.orderInfo){var n=t("../models/BaseModel");this.orderInfo=new n}var r,i,s=this.productInfo[0].items[0].goodsId,o=this.productInfo[0].items[0].itemNumber;if(!window.app.sendmode){library.Toast("请选择配送方式！");return}var u=window.app.sendmode.sendWayId;if(!this.addressModel){library.Toast("请选择收货地址！",2e3);return}r=this.addressModel.attributes.addressId;if(!r){library.Toast("请选择收货地址！",2e3);return}var a=this.$el.find(".message").val();i=this.orderMap.orderFee;var f={userId:application.getUserInfo().userid,productId:s,number:o,receiveId:r,sendWay:u,mark:a,totalFee:i},l={path:"/createPointOrder",type:"POST",data:f,success:this.createOrderSuccess.bind(this),error:this.createOrderError};this.orderInfo.loadData(l)},createOrderResult:null,createOrderSuccess:function(e){e.status=="1"&&e.data.notFound?library.Toast("请在【会员中心-账户信息】完善身份证信息后使用积分!"):e&&e.status=="0"?(library.Toast("下单成功",2e3),this.createOrderResult=e.data,Backbone.history.navigate("#home-navigate",{trigger:!0})):library.Toast(e?e.message:"下单失败，请稍后再试",2e3)},createOrderError:function(){library.Toast("下单失败，请稍后再试",2e3)}})}),define("text!pages/create-order-for-point.json",[],function(){return'{\n  "template": "create-order-for-point.html",\n  "type": "create-order-for-point",\n  "components":[\n    {\n      "type": "AddressInOrderView",\n      "id": "AddressInOrderView"\n    },\n    {\n      "type": "OrderShopListView",\n      "id": "OrderShopListView",\n      "collection":"OrderShopListCollection",\n      "template":"order-product-list-item-points.html"\n    }\n  ]\n}\n'}),define("text!pages/create-order.html",[],function(){return'<header class="headerbox">\n      <div class=" nav-left header-icon-back address-title-icon">\n          <span class="icomoon icomoon-back"></span>\n      </div>\n      <div class=\'mid\'>\n        <span class="common-title">确认订单</span>\n      </div>\n      <div class="left-right nav-right">\n        <a class="header-icon-menu icomoon icomoon-moremore"></a>\n      </div>\n  </header>\n<div class="create-order">\n\n  <component id="AddressInOrderView" />\n  <div class="common-padding"></div>\n    <div class="confirm-order-goods">\n            <img id="packageImg" src="http://szli.yonyou.com//upload/20160602/010041K0V4AC0QL2IF8V.jpg" alt="" class="confirm-order-img">\n            \n        <div class="goods-order-title cofirm-order-top">\n                <div class="package-list-title">\n                    101020套餐商品 大米+红桃+甘露\n                </div>\n                <div class="package-list-Selling"><span id="desc">超值好礼 促销优惠</span><i>热销</i></div>\n                <div class="package-list-money">￥12202</div>\n                <div class="goods-order-number">X1</div>\n            </div>\n          <!--  <p class="confirm-order-deliver-time">预计发货时间 2016.8.6</p>  -->\n    </div>\n  <component id="CreateOrderListView"/>\n  <!-- <div class="group-cf-operation">\n    <div class="group-cf-left">份数（限购2份）</div>\n    <div class="group-cf-right">\n      <span class="icomoon icomoon-minus"></span>\n      <span class="group-cf-text">1</span>\n      <span class="icomoon icomoon-plus"></span>\n    </div> \n  </div>-->\n<!--   <div class="cf-reward-info">\n    <div class="cf-reward-des">回报内容</div>\n    <div class="cf-reward-name-number">\n      <span class="cf-reward-name">古井贡酒特娘</span>\n      <span class="cf-reward-name">x1</span>\n    </div>\n    <div class="cf-reward-content">感谢您的支持，您将用低于商品原价的价格购买</div>\n    <div class="cf-reward-mark">项目结束两天内发货</div>\n  </div> -->\n  <div class="common-padding"></div>\n  <!-- 支付方式、配送方式-->\n  <div class="pay-send-selector">\n    <!-- <div class="send-method-order psb-selector">\n    <span class="send-method-des psb-selector-des">支付配送</span>\n    <span class="icomoon icomoon-more psb-selector-more"></span>\n    <span class="pay-method-value"></span>\n    <span class="send-method-value"></span>\n  </div> -->\n   <div class="send-method-order psb-selector">\n      <span class="pay-send-des psb-selector-des">配送方式</span>\n      <span class="icomoon icomoon-more psb-selector-more"></span>\n      <div id="point-send-value" class="send-method-value psb-selector-value"></div>\n    </div>\n    <div class="bill-order-info psb-selector">\n      <span class="bill-method-des psb-selector-des">发票信息</span>\n      <span class="icomoon icomoon-more psb-selector-more"></span>\n      <div class="bill-method-value psb-selector-value">不需要</div>\n    </div>\n  </div>\n  <div class="order-message">\n    <input type="text" placeholder="备注：您有什么要求，可以写在这里" class="message"/>\n  </div>\n  <div class="goods-total">\n    <div class="goods-total-price">\n      <span>商品金额</span>\n      <div class="total-price">\n        <span class="total-price-text">合计：</span>\n        <span class="total-price-num theme-color"></span>\n      </div>\n    </div>\n  </div>\n  <div class="goods-total">\n      <div class="goods-total-freight">\n        <span>运费</span>\n        <div class="total-freight theme-color">+ 0</div>\n      </div>\n  </div>\n  <div class="goods-total package-hidden">\n      <div class="goods-total-freight">\n        <span>活动折扣</span>\n        <div class="total-discount theme-color">- 0</div>\n      </div>\n  </div>\n  <div class="order-discount-info-view">\n    <div class="use-coupon-item">\n      <div class="use-coupon small-order-item">使用优惠券</div>\n      <component id="CouponView"/>\n    </div>\n    <!-- <div class="use-credit-card">\n      <div class="small-order-item">使用礼品卡</div>\n      <component id=\'CreditCardView\'/>\n    </div> -->\n  </div>\n  <div class="aboutPoint">\n        <div class="usePoint" style="padding-left: 0.3rem;background: #fff;padding-top: 0.2rem;font-size: 0.34666667rem;margin-top: 0.2rem;margin-bottom: 0.2rem;">\n            <span class="usePointSpan">您有积分<a class="hasPoint currentPoint"></a></span>\n            <span class="usePointSpan">本次可用积分<a class="hasPoint usePointMoney"></a></span>\n            <span class="usePointSpan">可抵款<a class="hasPoint rdMoney"></a>元</span>\n            <div class="everyPonitReduce" style="margin-top: 0.2rem;">\n                <span style="">本次使用积分</span><input  id="thisUsePoint" class="thisUsePoint" style="width: 2rem;height:0.6rem;font-size:0.38rem"type="text" ><span style="">(每<a class="aboutPointUse">100</a>积分可以抵<a class="aboutMoneyReduce">1</a>元)</span>\n            </div>\n            <div class="useOrCancle" >\n                <button  class="usePointD" style="margin-bottom: 0.2rem;\n                font-size: 0.34666667rem;margin-left: 6rem; width: 1.6rem;border-radius: 8px;">使用</button>\n                <button  class="canclePonitD" style="margin-bottom: 0.2rem;\n                font-size: 0.34666667rem; width: 1.6rem;border-radius: 8px;">取消</button>\n            </div>\n        </div>\n		<!-- <div class="acquirePoint" style="font-size: 0.38rem;margin-left: 0.2rem;background-color: #fff">\n			 <p style="font-size: 0.38rem;">温馨提示</p>				 \n			 <span>本单获得积分:<a class="acquirePointDetail"></a></span>\n		</div> -->	\n    </div>\n</div>\n<!-- 底部bar -->\n\n <div class="order-btm-bar">\n   <div class="order-total-fee">\n     <span class="order-total-fee-des">共计：</span>\n     <span class="fee-unit">¥</span>\n     <span class="order-total-fee-fee" id="order-total-fee-fee-sum">0</span>\n   </div><div class="order-submit theme-backgorund-color">去结算</div>\n </div>\n <div>\n   <component id=\'SearchMidPageView\'/>\n   <component id="PopupMenu"/>\n </div>\n</div>\n'}),define("pages/create-order",["./PageView","require"],function(e,t){return e.extend({type:"create-order",events:{"click #AddressInOrderView":"onChangeAddress","click .header-icon-back":"goback","click .pay-method":"paySelector","click .send-method-order":"sendSelector","click .bill-order-info":"setOrderBillInfo","click .order-submit":"orderSubmit","click .coupon-selector":"couponSelector","click .credit-card":"creditSelector","click .credit-card2":"creditSelector","click .icomoon-moremore":"menuMore","focus .message":"mesFocus","click .icomoon-plus":"plusClick","click .icomoon-minus":"reduceClick","click .usePointD":"usePointD","click .canclePonitD":"canclePonitD"},usePoint:0,addressModel:null,productInfo:null,pointInfo:null,gcfNum:1,dealerintegral:null,htintegral:null,integrall:null,flag:null,mesFocus:function(e){this.$(".create-order")[0].scrollTop=e.target.offsetTop},orderMap:{},initialize:function(){this.listenTo(this.findComponent("PopupMenu"),"toSearch",this.toSearch.bind(this))},usePointD:function(){this.flag==undefined&&(this.flag=0),this.flag--,console.log(this.productInfo);var e=this.productInfo.totalPrice;e==undefined&&(e=this.productInfo[0].items[0].totalPrice),console.log(e);var t=this.pointInfo.m;console.log(this.pointInfo);var n=this.pointInfo.n;console.log(n);var r=this.$el.find("#thisUsePoint").val();console.log(r),r==null&&(r=0);if(!r){library.Toast("请输入您需要使用的积分");return}if(r>window.app.availableIntegral){library.Toast("不能大于可使用积分"),this.$el.find("#thisUsePoint").val(""),$(".order-total-fee-fee").text(window.app.totalprice);return}this.usePoint=r;var i=r/t*n;console.log(i);var s=(e-i).toFixed(3).toString();console.log(s),window.app.totalprice=this.productInfo.totalPrice,s.indexOf(".")>0?($(".order-total-fee-fee").text(s.substr(0,s.indexOf(".")+3)),window.app.orderFee=s.substr(0,s.indexOf(".")+3)):($(".order-total-fee-fee").text(s),window.app.orderFee=s),this.orderMap.orderFee=window.app.orderFee,console.log(s.substr(0,s.indexOf(".")+3))},canclePonitD:function(){this.flag==undefined&&(this.flag=0),this.flag--,$(".thisUsePoint").val(""),this.usePoint=0,window.app.totalprice=this.productInfo.totalPrice,window.app.orderFee=window.app.totalprice,$(".order-total-fee-fee").text(window.app.totalprice)},menuMore:function(e){this.findComponent("PopupMenu").show()},toSearch:function(e){this.findComponent("SearchMidPageView").show()},plusClick:function(){if(this.gcfNum>1)return;this.gcfNum++,this.gcfChange()},reduceClick:function(){this.gcfNum>1&&this.gcfNum--,this.gcfChange()},gcfChange:function(){console.log(this.gcfNum),this.$(".group-cf-text").text(this.gcfNum),this.productInfo[0].items[0].itemNumber=this.gcfNum,this.setProductInfo(),this.setOrderFee()},onResume:function(){this.$el.find("#thisUsePoint").val(""),this.$(".confirm-order-goods").hide(),this.toggleBar&&this.toggleBar("hide");var e=localStorage.getItem("sendwayName"),n=localStorage.getItem("sendwayId");console.log(window.app.param1);if(window.app.param1)console.log(window.app.param1),this.addressModel=window.app.param1,this.setAddressModel(this.addressModel),console.log(this.setAddressModel(this.addressModel));else{var r=window.application.getUserInfo();console.log(r);var i=this,s=t("../models/AjaxCollection"),o=new s;o.loadData({path:"/my-address/list",type:"POST",needReset:!0,data:{userId:JSON.parse(localStorage.getItem("userinfo")).userid,index:1,size:10},success:function(e){var t=o.findWhere({isdefault:"true"})||o.models[0];i.addressModel=t,i.setAddressModel(t)}})}console.log(window.app),this.productInfo=window.app.shopsOrder,this.orderType=window.app.createOrderType,this.orderType=="10200"&&this.setPackageInfo(),window.app.sendmode&&(console.log(window.app.sendmode),this.orderMap.sendmode=window.app.sendmode,this.$(".send-method-value").text(window.app.sendmode.sendWayName),window.app.sendmode=null),window.app.invoice?(this.orderMap.invoice=window.app.invoice,this.billHandle(window.app.invoice),window.app.invoice=null):(this.orderMap.invoice={},this.billHandle()),this.initData(),this.$(".thisUsePoint").val(""),this.usePoint=0,window.app.totalprice=this.productInfo[0].totalPrice,window.app.orderFee=window.app.totalprice,$(".order-total-fee-fee").text(window.app.totalprice),this.jifenData()},useBackjifen:function(){var e=$(".thisUsePoint").val();e>0&&this.usePointD()},jifenData:function(){console.log(window.app.shopsOrder),console.log(window.app.shopsOrder.length),console.log(window.application.getUserInfo()),console.log(window.app.shopsOrder[0].packageNumber);var e=this,n="",r="";for(var i=0;i<window.app.shopsOrder.length;i++)if(window.app.shopsOrder[i].items){var s=window.app.shopsOrder[i].items[0].inputSuitNumber?window.app.shopsOrder[i].items[0].inputSuitNumber:"";n+=","+window.app.shopsOrder[i].items[0].goodsId,r+=","+window.app.shopsOrder[i].items[0].itemNumber}else var o=window.app.shopsOrder[0].packageId,u=window.app.shopsOrder[0].packageNumber;var a=t("../models/BaseModel"),f=new a,l=window.application.getUserInfo().userid;console.log(this.addressModel);var c=localStorage.getItem("receiverRegionId");n=n.slice(1,n.length),r=r.slice(1,r.length),console.log(n),console.log(r);var h={path:"/integralDeduction",type:"POST",showLoading:!0,data:{goodsId:n,goodsNum:r,memberId:l,suitsId:o,suitsNum:u,districtId:c},success:function(t){console.log(t.data),t.data.integralFlag=="N"?$(".aboutPoint").hide():$(".aboutPoint").show(),console.log(t),console.log(t.data[0]),e.pointInfo=t.data;var n=t.data,r=$(".thisUsePoint").val();$(".currentPoint").text(n.integral),$(".usePointMoney").text(n.availableIntegral),window.app.availableIntegral=n.availableIntegral,n.availableIntegral==0?$(".thisUsePoint").attr("disabled","true"):$(".thisUsePoint").attr("disabled",!1),$(".rdMoney").text(n.availableMoney),$(".thisUsePoint").val(),$(".aboutPointUse").text(n.m),$(".aboutMoneyReduce").text(n.n),n.n==0&&$(".order-total-fee-fee").text(n.orderTotalMoney)},error:function(){library.Toast("错误")}};console.log(JSON.stringify(h)),f.loadData(h)},jifen2Data:function(){var e=this,n=[];for(var r=0;r<window.app.shopsOrder.length;r++){var i=window.app.shopsOrder[r].items[0].inputSuitNumber?window.app.shopsOrder[r].items[0].inputSuitNumber:"",s={};s.cartId=window.app.shopsOrder[r].items[0].cartId,s.goodsId=window.app.shopsOrder[r].items[0].goodsId,s.itemNumber=window.app.shopsOrder[r].items[0].itemNumber,s.goodsSn=window.app.shopsOrder[r].items[0].goodsSn,s.tradePrice=window.app.shopsOrder[r].items[0].tradePrice,s.totalPrice=window.app.shopsOrder[r].items[0].totalPrice,n.push(s)}var o=t("../models/BaseModel"),u=new o,a=window.application.getUserInfo().userid,f=window.app.orderFee,l=$(".total-price-num")[0].innerText,c={path:"/queryIntegral",type:"POST",showLoading:!0,data:{userId:a,goodsList:n,GoodsAmount:l,PayFee:f},success:function(t){if(t.status=="0"){var n=t.data[0];e.dealerintegral=n.dealerintegral,e.htintegral=n.htintegral,e.integrall=n.integrall,e.$el.find(".acquirePointDetail").text(n.integrall),$("#loading").hide()}},error:function(){library.Toast("错误"),number=2,$("#loading").hide()}};u.loadData(c)},initData:function(){if(!this.productInfo){library.Toast("信息出错",2e3),window.history.back();return}this.setAddressModel(this.addressModel),this.setProductInfo()},setPackageInfo:function(){this.$(".package-hidden").hide(),this.$("#packageImg").attr("src",this.productInfo[0].IMG_URL),this.$(".package-list-title").text(this.productInfo[0].SUIT_TITLE),this.$("#desc").text(this.productInfo[0].REMARK),this.$(".package-list-money").text("￥"+this.productInfo[0].SALE_PRICE),this.$(".goods-order-number").text("x"+this.productInfo[0].packageNumber),this.$(".confirm-order-goods").show()},setProductInfo:function(){var e=this,n=[],r=[];for(var i=0;i<e.productInfo.length;i++){var s=e.productInfo[i];if(s.packageId){var o={};o.packageId=s.packageId,o.number=s.packageNumber,n.push(o)}else{var u={};for(var a=0;a<s.items.length;a++){var f=s.items[a];u.goodsId=f.goodsId,u.number=f.itemNumber,f.cartId&&(u.cartId=f.cartId),r.push(u)}}}var l={};l.packageList=n,l.goodsList=r;var c=JSON.parse(localStorage.getItem("userinfo"));l.userId=c.userid;var h=t("../models/BaseModel"),p=new h,d={url:window.app.api+"/preOrderInfo",type:"POST",needReset:!0,data:l,success:function(t){library.DismissLoadingBar();if(t.status=="0"){e.productInfo=t.data;if(l.packageList.length){var n=[],r={};r.items=t.data.goodsList,n.push(r)}else{var n=[];for(var i=0;i<t.data.goodsList.length;i++){var r={items:[]};r.items.push(t.data.goodsList[i]),n.push(r)}}e.findComponent("CreateOrderListView").collection.reset(n),e.setOrderType(),e.setOrderFee()}else library.Toast(t&&t.message?t.message:"获取商品信息失败")},error:function(){library.DismissLoadingBar(),library.Toast("网络错误")}};p.loadData(d)},setOrderType:function(){this.$(".order-discount-info-view").hide(),this.orderType==5?(this.$(".group-cf-operation").show(),this.$(".roup-cf-left").text("份数（限购2份）"),this.$(".cf-reward-info").hide(),this.$(".order-message").hide(),this.$(".goods-details-description").hide(),this.$(".goods-details-price").hide(),this.$(".goods-details-title").css({"margin-right":"1rem"}),this.$(".goods-details-listitem").append("<span style='position:absolute;right:10px;top:0.37333333rem;'>"+this.$(".goods-details-number").text()+"</span>").append("<div style='position:absolute;left:3.30666667rem;top:1.97333333rem;font-size:0.37666667rem;color:#666666;margin-right:10px'>感谢您的支持,您将用低于商品原价的价格购买</div>"),this.setDiscountStatus()):this.orderType==6?(this.$(".group-cf-operation").show(),this.$(".roup-cf-left").text("数量"),this.$(".cf-reward-info").show(),this.setDiscountStatus()):(this.productInfo.isSuit!="1"&&(this.initDiscountInfo(),this.$(".order-discount-info-view").show()),this.$(".group-cf-operation").hide(),this.$(".cf-reward-info").hide(),this.$(".pay-send-selector").show(),this.setDiscountStatus(!0))},initDiscountInfo:function(){collection=this.findComponent("CouponView").collection;var e={path:"/getCouponList",type:"POST",needReset:!1,data:{userId:application.getUserInfo().userid,type:"2",index:1,size:10},success:function(e){e.status=="0"&&e.data.pageCount>0&&(collection.reset(e.data.couponList),this.$(".order-discount-info-view").show())}.bind(this),error:function(e){}};collection.loadData(e)},setDiscountStatus:function(e){e?(this.$(".discount-detail").show(),this.$(".use-coupon-item").show(),this.$(".use-credit-card").show()):(this.$(".discount-detail").hide(),this.$(".use-coupon-item").hide(),this.$(".use-credit-card").hide())},setOrderFee:function(){var e=0,e=Number(this.productInfo.totalPrice)-Number(this.productInfo.discountPrice)+Number(this.productInfo.freightPrice);$(".order-total-fee-fee").text(e),$(".total-price-num").text("¥"+this.productInfo.totalPrice+"");var t=this.productInfo.freightPrice;if(t>0)$(".total-freight").text("¥"+t).fixed();else{var n=parseInt(t);$(".total-freight").text("¥"+n)}$(".total-discount").text("-¥"+this.productInfo.discountPrice),$(".discount-detail").text(this.productInfo.discountInfo),this.orderMap.orderFee=e},setAddressModel:function(e){if(!e)return;var n=t("../models/BaseModel"),r=e.toJSON();localStorage.setItem("receiverRegionId",r.receiverRegionId);var i=new n(r);i.set("receiverDetailAddress",i.get("receiverProvince")+i.get("receiverCity")+i.get("receiverRegion")+i.get("receiverAddr")),this.findComponent("AddressInOrderView").setModel(i,"afterPayment")},onChangeAddress:function(){Backbone.history.navigate("#home-navigate/addressSelect",{trigger:!0})},goback:function(){window.history.back()},sendSelector:function(e){Backbone.history.navigate("#home-navigate/distributionMode",{trigger:!0})},BillSetting:null,setOrderBillInfo:function(e){Backbone.history.navigate("#home-navigate/invoice",{trigger:!0})},billHandle:function(e){if(e&&e.title){$(".bill-method-value").empty();var t=$("<div class='bill-result-title'></div>"),n=$("<div class='bill-result-content'></div>"),r=e.title,i=e.content;t.append(r),n.append(i),$(".bill-method-value").append(t).append(n)}else $(".bill-method-value").text("不需要")},couponSelector:function(e){var t=$(e.currentTarget),n="theme-color",r=t.find(".order-checkbox").attr("class"),i=parseFloat(t.find(".order-money-num").attr("favor-num")),s=t.find(".order-money-num").attr("data-index");if(r.indexOf(n)>=0){t.find(".order-checkbox").removeClass("theme-color").removeClass("icomoon-choice").addClass("icomoon-choicebox"),this.orderMap.orderFee+=i,this.orderMap.coupon||(this.orderMap.coupon=[]);var o=this.orderMap.coupon.indexOf(s);o>-1&&this.orderMap.coupon.splice(o,1)}else{if($(".order-checkbox").hasClass("theme-color")){var u=this.$el.find(".icomoon-choice").parent().find(".order-money-num"),a=parseFloat(u.attr("favor-num")),f=u.attr("data-index");this.orderMap.coupon||(this.orderMap.coupon=[]);var o=this.orderMap.coupon.indexOf(f);o>-1&&this.orderMap.coupon.splice(o,1),this.orderMap.orderFee+=a}$(".order-checkbox").removeClass("theme-color").removeClass("icomoon-choice").addClass("icomoon-choicebox"),t.find(".order-checkbox").addClass("theme-color").addClass("icomoon-choice").removeClass("icomoon-choicebox");var l=this.orderMap.orderFee-i;this.orderMap.orderFee=parseFloat(l.toFixed(1)),this.orderMap.coupon||(this.orderMap.coupon=[]),this.orderMap.coupon.push(s)}this.orderMap.orderFee<0?$(".order-total-fee-fee").empty().append(0):$(".order-total-fee-fee").empty().append(this.orderMap.orderFee)},creditSelector:function(e){var t=$(e.currentTarget),n="theme-color",r=this.findComponent("CreditCardView").collection,i=t.find(".order-checkbox").attr("class"),s=parseFloat(t.find(".order-money-num").attr("card-value")),o=t.find(".order-money-num").attr("data-index");if(i.indexOf(n)>=0)t.find(".order-checkbox").removeClass("theme-color").removeClass("icomoon-choice").addClass("icomoon-choicebox"),this.orderMap.orderFee+=s;else{t.find(".order-checkbox").addClass("theme-color").addClass("icomoon-choice").removeClass("icomoon-choicebox"),this.orderMap.orderFee-=s;var u=this.orderMap.coupon.indexOf(o);u>-1&&this.orderMap.coupon.splice(u,1)}$(".order-total-fee-fee").empty().append(this.orderMap.orderFee)},getMemberInfo:function(){var e=window.application.getUserInfo(),t={memberId:e?e.userid:""};return t},getShopInfo:function(){var e=this.productInfo;for(var t=0;t<e.length;t++)e[t].sendwayId=e[t].sendwayId||"1",e[t].postage="0",e[t].goodsAmount=this.orderMap.orderFee,e[t].orderAmount=this.orderMap.orderFee,e[t].finallyAmount=this.orderMap.orderFee,e[t].deductionFlag="0",e[t].remark=this.$(".message").val();return e},getMemberAddressInfo:function(){return{consignee:this.addressModel.attributes.receiver||"",tel:this.addressModel.attributes.receiverPhone||"",mobile:this.addressModel.attributes.receiverPhone,postCode:this.addressModel.attributes.postCode||"",country:"86",province:this.addressModel.attributes.receiverProvinceId||"",city:this.addressModel.attributes.receiverCityId||"",district:this.addressModel.attributes.receiverRegionId||"",address:this.addressModel.attributes.receiverAddr||""}},toPaySelector:function(){if(!this.createOrderResult)return;this.createOrderResult.addressModel=this.addressModel,this.createOrderResult.productInfo=this.productInfo,this.orderMap.orderInfo=this.createOrderResult,window.app.createOrderResult=this.orderMap,console.log($(".order-total-fee-fee").text());var e=Math.ceil(Number($("#order-total-fee-fee-sum").text()));console.log(e),e=="0"?(window.app.createOrderResult=this.orderMap,Backbone.history.navigate("#home-navigate/afterPayment",{trigger:!0})):Backbone.history.navigate("#my-navigate/payMode",{trigger:!0,replace:!0})},onRemove:function(){this.orderMap={},this.createOrderResult=null},orderInfo:null,isWeiXin:function(){var e=window.navigator.userAgent.toLowerCase();return e.match(/MicroMessenger/i)=="micromessenger"?!0:!1},orderSubmit:function(e){var n,r,i;console.log(this.addressModel);if(!this.addressModel){library.Toast("请选择收货地址！",2e3);return}n=this.addressModel.attributes.addressId;if(!n){library.Toast("请选择收货地址！",2e3);return}if(!this.orderMap.sendmode){library.Toast("请选择配送方式");return}this.orderMap.invoice||(this.orderMap.invoice={}),this.orderMap.orderFee<0?r=0:r=this.orderMap.orderFee,this.isWeiXin()?i=3:i=2;var s={userId:application.getUserInfo().userid,createrId:application.getUserInfo().userid,createrType:2,orderSource:i,receiveId:n,payWay:"",sendWayId:this.orderMap.sendmode.sendWayId,billInfo:{billTitle:this.orderMap.invoice.title,billContent:this.orderMap.invoice.content},mark:this.$(".message").val(),giftCartIds:"",points:this.$("#thisUsePoint").val(),totalFee:r};this.orderMap.coupon&&(s.discountIds=this.orderMap.coupon.join(","));if(this.productInfo.suitId)s.packageId=this.productInfo.suitId,s.packageNumber=this.productInfo.suitNumber;else{var o=[],u=this.productInfo.goodsList;for(var a=0,f=u.length;a<f;a++){var l=u[a];o.push({productId:l.goodsId,number:l.number,cartId:l.cartId||"",specId:""})}s.productList=o}if(!this.orderInfo){var c=t("../models/OrderInfoModel");this.orderInfo=new c}var h={path:"/ceateOrder",type:"POST",data:s,showLoading:!0,success:this.createOrderSuccess.bind(this),error:this.createOrderError.bind(this)};this.orderInfo.loadData(h)},createOrderResult:null,createOrderSuccess:function(e){e&&e.status=="0"?(library.Toast("下单成功",2e3),this.createOrderResult=e.data,this.toPaySelector()):library.Toast(e?e.message:"下单失败，请稍后再试",2e3)},createOrderError:function(e){library.Toast("下单失败，请稍后再试",2e3)},getTestOrderResult:function(){this.createOrderResult={orderIds:["0100F1K0E2V80VN3EHRQ"],parentOrderCode:"010071K092VX0VN3SHRI"}}})}),define("text!pages/create-order.json",[],function(){return'{\n  "template": "create-order.html",\n  "type": "create-order",\n  "components":[\n    {\n      "type": "AddressInOrderView",\n      "id": "AddressInOrderView"\n    },\n    {\n      "type": "ListView",\n      "id": "CreateOrderListView",\n      "collection":"AjaxCollection0",\n      "template":"order-product-list-item.html"\n    },\n    {\n\n      "id": "SearchMidPageView",\n      "type": "SearchMidPageView"\n    },\n    {\n      "id": "PopupMenu",\n      "type": "PopupMenu"\n    },\n    {\n      "id" : "CouponView",\n      "type": "CouponView",\n      "collection": "CouponCollection",\n      "template": "coupon-view.html"\n    },\n    {\n      "id": "CreditCardView",\n      "type": "CreditCardView",\n      "collection": "CreditCardCollection",\n      "template" : "creditcard-view.html"\n    }\n  ]\n}\n'}),define("text!pages/credit-detail.html",[],function(){return'<div class="credit-detail">\n  <header class="headerbox">\n    <div class="left-right nav-left goback">\n      <span class="icomoon icomoon-back"></span>\n    </div>\n    <div class=\'mid\'>\n      <span class="common-title">积分明细</span>\n    </div>\n    <div class="left-right nav-right header-menu">\n      <span class="icomoon icomoon-moremore"></span>\n    </div>\n  </header>\n  <div class="padding-top-view"></div>\n  \n  <div>\n    <component id="PopupMenu"/>\n    <component id=\'SearchMidPageView\'/>   \n  </div>\n</div>\n<div class="myMemberOrderbody">\n    <div class="segmented-control">\n        <a class=\'control-item segmented-item\' data-index=\'1\'>今天</a>\n        <a class=\'control-item segmented-item\' data-index=\'2\'>近一周</a>\n        <a class=\'control-item segmented-item\' data-index=\'3\'>近一个月</a>\n        <a class=\'control-item segmented-item more-item\' data-index=\'4\'>更多<span class="icomoon icomoon-pulldown" data-index=\'4\'></span></a>\n    </div>\n</div>\n<div class="full-mask"></div>\n<div>\n<div id="newdata"></div>\n    <div id=\'creditdetaillistviewDiv\'></div>\n    <div id="show_nodata_div" style="display:none;">\n    </div>\n </div>\n \n \n'}),define("pages/credit-detail",["./PageView","require","../libs/canlendar"],function(e,t,n){return e.extend({events:{"click .goback":"onBack","click .header-menu":"menuMore","click .member-order-start":"startTimeSelect","click .member-order-end":"endTimeSelect","click .time-filter-btn":"timeFilterList","click a":"setActive","click #nlistViewLoadMore":"loadMore","click .orderNumber":"rowclick"},orderSelect:null,model:null,calendarInstance0:null,calendarInstance1:null,startFlag:0,endFlag:0,currentPageNum:1,eachPageListNum:10,beginTime:"",endTime:"",initialize:function(){this.listenTo(this.findComponent("PopupMenu"),"toSearch",this.toSearch.bind(this))},menuMore:function(e){this.findComponent("PopupMenu").show()},rowclick:function(e){var t=e.currentTarget.innerText,n=t.substring(4),r=undefined,i=e.currentTarget.attributes.billuserid.value;Backbone.history.navigate("#my-navigate/order-detail?orderId="+n+"&logisId="+r+"&type="+i,{trigger:!0})},loadMore:function(e){if(e.target.innerText=="已加载全部"||e.target.innerText=="未查询到相关数据")return;this.currentPageNum+=1;var t={userId:application.getUserInfo().userid,startTime:this.beginTime,endTime:this.endTime,currentPage:this.currentPageNum,pageSize:this.eachPageListNum};this.sendData("/getCreditDetail",t,this.callback)},toSearch:function(e){this.findComponent("SearchMidPageView").show()},render:function(){return e.prototype.render.apply(this,arguments),this},onBack:function(){window.history.back()},setActive:function(e){var t=$(e.target),n=t.attr("data-index");if(n==4)this.showMore();else{this.$(".control-item").removeClass("theme-color"),t.addClass("theme-color");var r=new Date,i=this.zeroAdd(r.getMonth()+1),s=r.getFullYear()+"-"+i+"-"+this.zeroAdd(r.getDate());console.log(n);var o={},u=s;switch(n){case"1":u=s;break;case"2":u=this.addDate(r,-7);break;case"3":u=this.addDate(r,-30)}this.beginTime=u+" 00:00:00",this.endTime=s+" 23:59:59",this.currentPageNum=1,$("#creditdetaillistviewDiv").html(" "),o={userId:application.getUserInfo().userid,startTime:this.beginTime,endTime:this.endTime,currentPage:this.currentPageNum,pageSize:this.eachPageListNum},this.sendData("/getCreditDetail",o,this.callback)}},showMore:function(){this.orderSelect!=null&&this.orderSelect.remove();var e=t("../components/MembersOrderSelectView");this.orderSelect=new e,this.$el.append(this.orderSelect.render().el),setTimeout(function(){$(".full-mask").show(),$(".member-order-view").addClass("member-order-view-show")},100)},startTimeSelect:function(e){var t=$(e.target);if(this.canlendarInstance0==null){var r="年月日",i=this;this.canlendarInstance0=(new n.Calendar({container:i.el})).bind("ok",function(e){var n=e.split("-"),r=n[0]+"-"+n[1]+"-"+n[2]+"";t.text(r),t.empty().append(r),i.startFlag=1}).setModal(r)}this.canlendarInstance0.show(t.innerHTML)},endTimeSelect:function(e){var t=$(e.target);if(this.canlendarInstance1==null){var r="年月日",i=this;this.canlendarInstance1=(new n.Calendar({container:i.el})).bind("ok",function(e){var n=e.split("-"),r=n[0]+"-"+n[1]+"-"+n[2]+"";t.text(r),t.empty().append(r),i.endFlag=1}).setModal(r)}this.canlendarInstance1.show(t.innerHTML)},timeFilterList:function(){console.log("end="+this.endFlag),console.log("start="+this.startFlag);if(this.endFlag==1&&this.startFlag==1){var e=$(".member-order-start").text(),t=$(".member-order-end").text(),n=Date.parse(new Date(e)),r=Date.parse(new Date(t));if(n>r){library.Toast("开始时间必须早于结束时间！");return}$("#creditdetaillistviewDiv").html(" "),this.currentPageNum=1;var i={};i={userId:application.getUserInfo().userid,startTime:e+" 00:00:00",endTime:t+" 23:59:59",currentPage:this.currentPageNum,pageSize:this.eachPageListNum},this.sendData("/getCreditDetail",i,this.callback),$(".member-order-view").removeClass("member-order-view-show"),setTimeout(function(){$(".member-order-view").remove()},300),$(".full-mask").hide(),this.canlendarInstance1=null,this.canlendarInstance0=null,this.endFlag=0,this.startFlag=0}else library.Toast("请选择开始日期和结束日期！")},addDate:function(e,t){var n=new Date(e);n.setDate(n.getDate()+t);var r=n.getMonth()+1;return n.getFullYear()+"-"+this.zeroAdd(r)+"-"+this.zeroAdd(n.getDate())},zeroAdd:function(e){return e<10?"0"+e:e},showGetIntegralDetail:function(e){$("#showLoadingMore").remove();for(var t=0;t<e.length;t++){var n=e[t],r="",i="";switch(n.srcsys){case"1":i="零售";break;case"2":i="官方商城";break;case"3":i="呼叫中心";break;case"4":i="京东";break;case"5":i="淘宝";break;case"6":i="微信";break;case"7":i="QQ";break;case"8":i="新浪微博";break;default:i="零售"}switch(n.desc){case"1":r="消费返利";break;case"2":r="消费抵扣";break;case"3":r="兑付消耗";break;case"4":r="晋级扣减";break;case"5":r="失效";break;case"6":r="奖励积分";break;case"7":r=" 系统调整";break;case"8":r="日常奖励";break;case"9":r="消费抵扣-退还";break;case"10":Number(n.point)>0?r="转入":r="转出";break;case"11":r="消费抵扣-退还";break;case"12":r="消费返利-扣回";break;default:r="消费返利"}var s='<div><ul><li class="ListViewRow"><div class="MyHTMLView"><div class="credit-detaillistview1row"> <div>';n.point!=undefined&&(s+='<p align="center"><span>'+n.point+"</span>积分</p>"),s+='<p align="center"><span>'+r+"</span></p>"+"</div>"+"<div>",n.srcbillno!=undefined&&(i=="官方商城"?r=="兑付消耗"?s+='<p class="orderNumber" billUserId="2">订单号:<span style="border-bottom:#666666  solid 1px;">'+n.srcbillno+"</span></p>":s+='<p class="orderNumber" billUserId="1">订单号:<span style="border-bottom:#666666  solid 1px;">'+n.srcbillno+"</span></p>":s+="<p>订单号:<span>"+n.srcbillno+"</span></p>"),n.srcsys!=undefined&&(s+='<p align="center"><span>'+i+"</span></p>"),n.trader!=undefined&&(s+="<p>交易人:<span>"+n.trader+"</span></p>"),n.sourceMember!=undefined&&(s+="<p>来源:<span>"+n.sourceMember+"</span></p>"),n.receiveMember!=undefined&&(s+="<p>接受人:<span>"+n.receiveMember+"</span></p>"),n.oldLevel!=undefined&&n.newLevel!=undefined&&(s+="<p><span>"+n.oldLevel+"->"+"jsonRow.newLevel "+"</span></p>"),n.behaviorName!=undefined&&(s+="<p><span>"+n.behaviorName+"</span></p>");if(n.money!=undefined){var o=n.money,u=Math.floor(Number(o)*100)/100,a=u.toFixed(2).toString();r=="消费返利"?s+="<p>消费金额:<span>￥"+a+"</span></p>":s+="<p>交易金额:<span>￥"+a+"</span></p>"}s+="<p>时间:<span>"+n.time+"</span></p>"+" </div>"+"</div>"+"</div>"+'<div class="yy-listrow-cover"></div></li>'+"</ul>",$("#creditdetaillistviewDiv").append(s)}var f="<div id='showLoadingMore'><div class='nlistview-addmore' id='nlistViewLoadMore'></div></div>";$("#creditdetaillistviewDiv").append(f),e.length>0&&e.length<this.eachPageListNum?$("#nlistViewLoadMore").html('<button class="loadmore" style="display: inline-block;"><div class="label">已加载全部</div><span class="loading-icon"></span></button>'):$("#nlistViewLoadMore").html('<button class="loadmore" style="display: inline-block;"><div class="label">加载更多</div><span class="loading-icon"></span></button>')},onResume:function(){e.prototype.onResume.apply(this,arguments),this.toggleBar&&this.toggleBar("hide");var t=new Date,n=this.zeroAdd(t.getMonth()+1),r=t.getFullYear()+"-"+n+"-"+this.zeroAdd(t.getDate()),i=r;this.beginTime=i+" 00:00:00",this.endTime=r+" 23:59:59";var s={userId:application.getUserInfo().userid,startTime:i+" 00:00:00",endTime:r+" 23:59:59",currentPage:this.currentPageNum,pageSize:this.eachPageListNum};this.sendData("/getCreditDetail",s,this.callback)},sendData:function(e,n,r){var i=this,s=t("../models/BaseModel"),o=new s,u={type:"POST",path:e,data:n,datatype:"json",success:function(e){if(e.status=="0"){$("#showLoadingMore").remove();if(e.data.pointList!=undefined&&e.data.pointList.length>0){var t=e.data.pointList;i.showGetIntegralDetail(t)}else if(this.currentPageNum==1){var n="<div id='showLoadingMore'><div class='nlistview-addmore' id='nlistViewLoadMore'></div></div>";$("#creditdetaillistviewDiv").append(n),$("#nlistViewLoadMore").html('<button class="loadmore" style="display: inline-block;"><div class="label">未查询到相关数据</div><span class="loading-icon"></span></button>')}else{var n="<div id='showLoadingMore'><div class='nlistview-addmore' id='nlistViewLoadMore'></div></div>";$("#creditdetaillistviewDiv").append(n),$("#nlistViewLoadMore").html('<button class="loadmore" style="display: inline-block;"><div class="label">已加载全部</div><span class="loading-icon"></span></button>')}}else{var n="<div id='showLoadingMore'><div class='nlistview-addmore' id='nlistViewLoadMore'></div></div>";$("#creditdetaillistviewDiv").append(n),$("#nlistViewLoadMore").html('<button class="loadmore" style="display: inline-block;"><div class="label">未查询到相关数据</div><span class="loading-icon"></span></button>')}}};o.loadData(u)},initData:function(e){},callback:function(e){if(e.data.pointList.length>0){var t=e.data.pointList;this.showGetIntegralDetail(t)}}})}),define("text!pages/credit-detail.json",[],function(){return'{\n  "template": "credit-detail.html",\n  "type": "credit-detail",\n  "components": [\n    {\n      "type": "ListView",\n      "id":"creditdetaillistview",\n      "collection": "CreditDetailCollection",\n      "template": "creditdetaillistview.html"\n    },\n    {\n      "id": "SearchMidPageView",\n      "type": "SearchMidPageView"\n    },\n    {\n      "id": "PopupMenu",\n      "type": "PopupMenu"\n    }\n\n  ]\n}\n'}),define("text!pages/credit-list.html",[],function(){return'<header class="headerbox">\n  <div class="left-right nav-left goback">\n    <span class="icomoon icomoon-back"></span>\n  </div>\n  <div class=\'mid\'>\n    <span class="common-title">积分兑换订单</span>\n  </div>\n  <div class="left-right nav-right header-menu">\n    <span class="icomoon icomoon-moremore"></span>\n  </div>\n</header>\n<div class="padding-top-view"></div>\n<div class="scroller">\n     <ul class="public-view">\n         <component id="Creditlistingerror">\n    </ul>\n         <div id="show_nodata_div" style="display:none;"></div>\n</div>\n<div>\n  <component id=\'SearchMidPageView\'/>\n  <component id="PopupMenu"/>\n</div>'}),define("pages/credit-list",["./PageView","require"],function(e,t){return e.extend({events:{"click .goback":"onBack","click .header-menu":"menuMore","click .public-detail":"godetail","click .order-pay":"goShowDietail","click .order-cancel":"goBuyAgain","click .order-ensure":"goOrderEnsure"},isEmpty:!0,initialize:function(){this.listenTo(this.findComponent("PopupMenu"),"toSearch",this.toSearch.bind(this))},onResume:function(){this.toggleBar&&this.toggleBar("hide");var e=window.application.getUserInfo().userid;e||Backbone.history.navigate("#my-navigate/login/login",{trigger:!0});var t=this.findComponent("Creditlistingerror").collection;_this=this,this.findComponent("Creditlistingerror").collection.loadData({path:"/getPointOrderList",type:"POST",needReset:!0,data:{userId:e,index:1,size:10},datatype:"json",success:function(e){_this.changeDisplay(e)},error:function(){}})},changeDisplay:function(e){console.log(e.data.list);if(e.data.list.length>0)this.isEmpty=!1;else{$(".loadmore").hide();if(this.isEmpty){var t=$("<div class = 'icomoon-without add-blank-leaving-icon'></div><div class = 'add-blank-leaving-words'>您还没有相关的积分订单~</div>");$("#show_nodata_div").html(t).show()}else library.Toast("已加载全部",2e3)}},goOrderEnsure:function(e){var t=this.$(e.currentTarget).prev().text();console.log(t);return},goShowDietail:function(e){var t=this.$(e.currentTarget).prev().text(),n=this.$(e.currentTarget).prev().prev().text();Backbone.history.navigate("#my-navigate/credit-order-detail?orderId="+t+"&orderStatus="+n,{trigger:!0})},goBuyAgain:function(){Backbone.history.navigate("#my-navigate/credit",{trigger:!0})},toSearch:function(e){this.findComponent("SearchMidPageView").show()},onBack:function(){window.history.back()},menuMore:function(e){this.findComponent("PopupMenu").show()}})}),define("text!pages/credit-list.json",[],function(){return'{\n  "template": "credit-list.html",\n  "type":"credit-list",\n    "components": [\n    {\n      "id":"Creditlistingerror",\n      "type":"Creditlistingerror",\n      "template":"credit-list-item.html",\n      "collection":"credit-list",\n      "paging": true,\n      "autoload": false\n    },\n     {\n      "id": "SearchMidPageView",\n      "type": "SearchMidPageView"\n    },\n    \n    {\n      "id": "PopupMenu",\n      "type": "PopupMenu"\n    }\n  ]\n}\n'}),define("text!pages/credit-order-detail.html",[],function(){return'<header class="headerbox" >\n  <div class="left-right nav-left goback">\n      <span class="icomoon icomoon-back"></span>\n  </div>\n  <div class=\'mid\'>\n    <span class="common-title">订单详情</span>\n  </div>\n  <div class="left-right nav-right header-menu">\n    <span class="icomoon icomoon-moremore"></span>\n  </div>\n</header>\n<div class="order-detail">\n <div class="order-detail-success-time">交易成功！</div>\n <!-- 团购众筹订单的提示 -->\n <div style=\'display:none\' class="order-detail-success-group-cf"> 交易成功！</div>\n <component id="LogisticInfoView" />\n <component id="AddressInOrderView" />\n <div class="shop-info">\n   <component id="OrderDetailListView"/>\n   <div class="order-fee">\n     <div class="order-delivery-fee">\n       <span class="order-delivery-fee-des">运费</span>\n       <span class="order-delivery-fee-fee"><span class="fee-unit">¥</span><span class="order-delivery-fee-number">0</span>\n     </div>\n     <div class="order-product-fee">\n       <span class="order-product-fee-des">所需积分</span>\n       <span class="order-product-fee-fee"><span class="fee-unit"></span><span class="order-product-fee-number">0</span>\n     </div>\n   </div>\n </div>\n\n\n <div class="pay-send-selector">\n   <div class="pay-method psb-selector">\n     <span class="pay-method-des psb-selector-des">支付方式</span>\n     <span class="detail-pay-method-value psb-selector-value-order-detail"></span>\n   </div>\n   <div class="send-method psb-selector">\n     <span class="send-method-des psb-selector-des">配送方式</span>\n     <span class="detail-send-method-value psb-selector-value-order-detail"></span>\n   </div>\n   <div class="bill-order-info psb-selector">\n     <span class="bill-method-des psb-selector-des">发票信息</span>\n     <div class="bill-method-value psb-selector-value"></div>\n   </div>\n </div>\n\n <div class="order-detail-info">\n   <div class="order-info-info">\n     <span class="order-info-des">订单编号：</span>\n     <span class="order-code-value"></span>\n   </div>\n   <div class="order-info-info order-create-time-sub">\n     <span class="order-info-des">创建时间：</span>\n     <span class="create-order-time"></span>\n   </div>\n </div>\n\n</div>\n	<div class="order-bottom-bar">\n      <%if(application.getQueryString( "orderStatus") ==3){ %>\n          <a class="order-btm-bar-cell order-operation1 theme-color">确认收货</a>\n      <% }%>\n	  \n	</div>\n<div >\n  <component id="PopupMenu"/>\n  <component id="SearchMidPageView"/>\n</div>\n'}),define("pages/credit-order-detail",["./PageView","require"],function(e,t){return e.extend({type:"order-detail",events:{"click .goback":"goback","click .order-link-seller":"telClick","click .logistics":"toLogiDetail","click .order-btm-bar-cell":"orderOperation","click .header-menu":"menuMore","click .order-operation1":"ensureOrder"},addressModel:null,logisModel:null,orderInfoModel:null,initialize:function(){this.listenTo(this.findComponent("PopupMenu"),"toSearch",this.toSearch.bind(this))},menuMore:function(e){this.findComponent("PopupMenu").show()},toSearch:function(e){this.findComponent("SearchMidPageView").show()},onResume:function(){$(".pay-send-selector").hide(),$(".psb-selector").hide(),$(".pay-send-selector").hide(),$(".order-delivery-fee").hide(),e.prototype.onResume.apply(this,arguments),this.$(".address-in-order").hide();var n=t("../models/OrderInfoModel");this.orderInfoModel=new n;var r=application.getQueryString("orderId"),i=application.getUserInfo().userid,s={url:window.app.api+"/getPointOrderDetail",data:{orderId:r},showLoading:!0,needReset:!0,success:this.onSuccess.bind(this),error:this.onError.bind(this)};this.orderInfoModel.orderId=r,this.orderInfoModel.loadData(s)},onSuccess:function(e){this.setAddressInfo(),this.$(".order-address-icon-right").hide(),this.$(".address-in-order").show(),this.setProductInfo(),this.setOrderInfo(),this.$(".send-method-order").hide(),this.setOrderLogistModel(this.orderInfoModel.get("logisticInfo"))},setAddressInfo:function(){var e=t("../models/OrderAddressModel"),n=this.orderInfoModel.get("receiveInfo");if(!n)return;this.addressModel=new e(n),this.setAddressModel(this.addressModel)},setOrderLogistModel:function(e){if(e){var n=t("../models/LogisticsModel"),r=new n(e);this.setLogisModel(r)}else this.setLogisModel()},onError:function(){},initHeaderAnime:function(){var e=this,t=this.$el.find("#order_detail_header"),n=this.$el.find("#order_detail_header_bk");if(!t||!t[0])return;var r=t[0].offsetHeight,i=!1;document.body.addEventListener("touchmove",function(e){var t=r-document.body.scrollTop/4;n.css("opacity",(1-t/r).toString()),i=!0}),document.body.addEventListener("touchend",function(e){i=!1}),window.onscroll=function(e){if(!i){var t=r-document.body.scrollTop/4;n.css("opacity",(1-t/r).toString())}}},setAddressModel:function(e){this.findComponent("AddressInOrderView").setModel(e)},setLogisModel:function(e){this.findComponent("LogisticInfoView").setModel(e)},goback:function(e){window.history.back()},logisticDetail:function(){Backbone.history.navigate("#my-navigate/logiticsDetail",{trigger:!0})},toComment:function(){window.app.waitCommentOrder=this.orderInfoModel,Backbone.history.navigate("#my-navigate/create-comment",{trigger:!0})},setProductInfo:function(){var e=this.orderInfoModel.get("productList");this.$(".order-product-fee-number").text(this.orderInfoModel.get("orderFee"));var t=this.orderInfoModel.get("items");this.findComponent("OrderDetailListView").collection.reset(e)},setOrderInfo:function(){var e=this.orderInfoModel.attributes;this.$(".order-code-value").text(e.orderCode),e.orderDate&&this.$(".create-order-time").text(e.orderDate),e.payWayInfo&&this.$(".detail-pay-method-value").text(e.payWayInfo.payWayName),e.sendWayInfo&&this.$(".detail-send-method-value").text(e.sendWayInfo?e.sendWayInfo.sendWayName:""),this.setBillInfo(e.billInfo)},setBillInfo:function(e){$(".bill-method-value").empty();if(e&&e.billTitle){var t=$("<div class='bill-result-title'></div>"),n=$("<div class='bill-result-content'></div>"),r=e.billTitle,i=e.billContent;t.append(r),n.append(i),$(".bill-method-value").append(t).append(n)}else $(".bill-method-value").text("无")},goback:function(){window.history.back()},toLogiDetail:function(){Backbone.history.navigate("#my-navigate/logiticsDetail",{trigger:!0})},ensureOrder:function(){param=[],leftInfo={leftText:"取消",callback:this.ensureOrderCancel.bind(this)},rightInfo={rightText:"确定",callback:this.ensureOrderOK.bind(this)},param.push(leftInfo),param.push(rightInfo),library.MessageBox("确认收货","您确定已收到货？",param)},ensureOrderOK:function(){this.updateOrder("receive")},ensureOrderCancel:function(){},updateOrder:function(e){var n,r=t("../models/OrderInfoModel"),i=new r,s=window.application.getUserInfo();s||(library.Toast("您尚未登录，请前往登录",2e3),window.history.back());var o;if(e=="cancel")o={userId:s.userid,orderId:this.orderInfoModel.get("orderId")},n=i.cancelOrderUrl;else if(e=="receive"){var u=application.getQueryString("orderId");o={orderId:u},n=i.receiveCreditOrderUrl}var a={url:e?n:i.orderInfoUrl,data:o,success:this.updateOrderSuccess.bind(this),error:this.updateOrderCancel.bind(this),showLoading:!0};i.loadData(a)},updateOrderSuccess:function(e){e?(library.Toast(e.message||"操作成功",2e3),this.$(".order-operation1").hide()):library.Toast("操作失败",2e3)},updateOrderCancel:function(){library.Toast("网络出错",2e3)}})}),define("text!pages/credit-order-detail.json",[],function(){return'{\n  "type": "credit-order-detail",\n  "template": "credit-order-detail.html",\n  "components":[\n    {\n      "type":"LogisticInfoView",\n      "id":"LogisticInfoView"\n    },\n    {\n      "type":"AddressInOrderView",\n      "id":"AddressInOrderView"\n    },\n    {\n      "type": "ListView",\n      "id": "OrderDetailListView",\n      "collection":"AjaxCollection",\n      "template":"credit-order-detail-product-list-item.html"\n    },\n    {\n      "id": "PopupMenu",\n      "type": "PopupMenu"\n    }, {\n      "id": "SearchMidPageView",\n      "type": "SearchMidPageView"\n    }\n  ]\n}\n'}),define("text!pages/credit.html",[],function(){return"<header class=\"headerbox\">\n  <div class=\"left-right nav-left goback\">\n    <span class=\"icomoon icomoon-back\"></span>\n  </div>\n  <div class='mid'>\n    <span class=\"common-title\">积分商城</span>\n  </div>\n  <div class=\"left-right nav-right header-menu\">\n    <span class=\"icomoon icomoon-moremore\"></span>\n  </div>\n</header>\n<div class=\"padding-top-view\"></div>\n<div class='cdt-top-view' id='cdt-top-view'>\n  <div class='cdt-table-cell'>\n  <div class='cdt-top-item cdt-detail'>积分明细</div></div>\n  <div class='cdt-table-cell'><div>\n    <div class='cdt-my-value'>350</div>\n    <div class='cdt-my-title'>我的积分</div>\n  </div></div>\n  <div class='cdt-table-cell'><div class='cdt-top-item cdt-transform' >积分转移</div></div>\n</div>\n<div>\n  <component id=\"CreditFilter\" />\n</div>\n<div>\n  <component id=\"creditlistview\" />\n</div>\n<div>\n  <component id='SearchMidPageView'/>\n  <component id=\"PopupMenu\"/>\n</div>\n"}),define("pages/credit",["./PageView"],function(e){return e.extend({events:{"click .goback":"onBack","click .cdt-detail":"gotoDetail","click .cdt-transform":"gotoTransform","click .cdt-cell":"gotogoodsDetail","click .header-menu":"menuMore"},initialize:function(){this.listenTo(this.findComponent("PopupMenu"),"toSearch",this.toSearch.bind(this))},menuMore:function(e){this.findComponent("PopupMenu").show()},toSearch:function(e){this.findComponent("SearchMidPageView").show()},gotoDetail:function(){Backbone.history.navigate("#my-navigate/credit-detail",{trigger:!0})},onResume:function(){e.prototype.onResume.apply(this,arguments);var t=application.getUserInfo(),n=t.myPoints,r=Math.floor(Number(n)),i=r.toString();this.$(".cdt-my-value").text(i)},gotoTransform:function(){Backbone.history.navigate("#my-navigate/transferPoint",{trigger:!0})},onBack:function(){window.history.back()},refreshList:function(e,t){e=e||{},t=t||{},this.findComponent("creditlistview").collection.loadData({path:"/getCreditGoods",type:"POST",needReset:!1,data:{channelId:e.id,categoryId:t.id,index:1,size:10},success:this.loadSuccess.bind(this),error:this.loadError.bind(this)})},loadSuccess:function(e){this.findComponent("creditlistview").collection.set(e.data.productlist)},loadError:function(){},gotogoodsDetail:function(e){Backbone.history.navigate("#my-navigate/pointitemdetail?goodsid="+e.currentTarget.getAttribute("productid"),{trigger:!0})}})}),define("text!pages/credit.json",[],function(){return'{\n  "template":"credit.html",\n  "type": "credit",\n  "components": [\n    {\n      "type": "CreditFilter",\n      "id" : "CreditFilter"\n    },\n    {\n      "type": "ListView",\n      "id":"creditlistview",\n      "collection": "CreditCollection",\n      "template": "creditlistview.html"\n    },\n    {\n      "id": "SearchMidPageView",\n      "type": "SearchMidPageView"\n    },\n    {\n      "id": "PopupMenu",\n      "type": "PopupMenu"\n    }\n  ]\n}\n'}),define("text!pages/crowdfunding-detail.html",[],function(){return'<div class="group-buy-detail">\n  <header class="headerbox goods-label-return-nav">\n    <div class="left-right nav-left goback">\n      <span class="icomoon icomoon-back"></span>\n    </div>\n    <div class=\'mid\'>\n      <span class="common-title">众筹详情</span>\n    </div>\n    <div class="left-right nav-right header-menu">\n      <span class="icomoon icomoon-moremore"></span>\n    </div>\n  </header>\n  <div class="goods-label-return">\n    <div class="icomoon-back goods-label-back"></div>\n  </div>\n  <div class="goods-label-menu">\n    <div class="icomoon icomoon-moremore goods-label-menu-menu"></div>\n  </div>\n\n  <div class="cf-detail-content">\n    <component id="carousel" />\n    <div class="cf-status-info cf-info-cell">\n      <div class="cf-money">\n        <span class="cf-target-money-des">目标金额：</span>\n        <span class="cf-target-money-value">10000</span>\n        <span class="cf-target-money-already">/已达成：</span>\n        <span class="cf-target-money-already-value theme-color">￥6500</span>\n      </div>\n      <div class="cf-progress">\n        <span class="progress-default"></span>\n        <span class="progress-current"></span>\n      </div>\n      <div class="cf-people-time">\n        <div class="cf-people">\n          <span>支持人数 </span>\n          <span class="cf-people-member">40人</span>\n        </div>\n        <div class="cf-time">\n          <span class="cf-time-des"><span class="icomoon icomoon-time"></span>剩余时间</span>\n          <span class="cf-time-value">10天</span>\n        </div>\n\n      </div>\n    </div>\n\n    <div class="cf-product-info cf-info-cell">\n      <div class="product-name-info">\n        <span class="product-name">古井贡酒原浆特酿</span>\n        <span class="product-tag">众筹中</span>\n      </div>\n      <div class="product-des">感谢您的支持，您将用低于商品原价的价格购买。 商品原价的价格购买。</div>\n      <div class="icomoon icomoon-details"></div>\n    </div>\n\n    <div class="cf-buy-info">\n      <div class="cf-buy-title">回报</div>\n      <div class="cf-buy-content"></div>\n    </div>\n\n  </div>\n\n  <div>\n    <component id="PopupMenu" />\n    <component id="SearchMidPageView" />\n  </div>\n\n</div>\n'}),define("pages/crowdfunding-detail",["./PageView","require"],function(e,t){return e.extend({type:"crowdfunding-detail",events:{"click .goback":"goback","click .goods-label-return":"goback","click .header-menu":"menuMore","click .goods-label-menu":"menuMore","click .discount-title":"disItemClick","click .item-detail":"toDetail","click .cf-support-btn":"createOrder"},gbDetailModel:null,levelListShow:!0,initialize:function(){this.listenTo(this.findComponent("PopupMenu"),"toSearch",this.toSearch.bind(this))},menuMore:function(e){this.findComponent("PopupMenu").show()},toSearch:function(e){this.findComponent("SearchMidPageView").show()},goback:function(e){window.history.back()},disItemClick:function(e){this.levelListShow?(this.$(".discount-content").hide(200),this.$(".discount-title-icon").removeClass("icomoon-highpull").addClass("icomoon-spread")):(this.$(".discount-content").show(200),this.$(".discount-title-icon").addClass("icomoon-highpull").removeClass("icomoon-spread")),this.levelListShow=!this.levelListShow},onRender:function(){this.initLayout()},onResume:function(){e.prototype.onResume.apply(this,arguments),$(".product-bottom-bar").show(),$(".group-buy-detail").hide();if(!this.gbDetailModel){var n=t("../models/GoodDetailModel");this.gbDetailModel=new n}this.setAjaxOptions();var r=this;window.setTimeout(function(){r.gbDetailModel.loadData()},520)},setAjaxOptions:function(){this.gbDetailModel.goodsid="010041JZG8PN11VNAD8J";var e=window.application.getUserInfo(),t=e?e.userid:"";this.gbDetailModel.ajaxOptions={url:window.app.api+"/product",showLoading:!0,data:{id:this.gbDetailModel.goodsid,userid:t},success:function(e){e?e.status=="error"?(library.Toast(e.message||"该产品可能已下架",2e3),window.history.back()):(e=e.data,this.updateUI(e)):(library.Toast("数据出错",2e3),window.history.back())}.bind(this),error:function(e){console.log(e||"数据出错")}.bind(this)}},updateUI:function(e){this.productInfoObj=e,$(".group-buy-detail").show();var t=this.findComponent("carousel").collection;t.reset(e.images),this.setSupportInfo(this.getTestDisData())},getTestDisData:function(){var e=[];return e.push({id:"1",price:1e3,name:"古井贡酒原浆特酿",description:"感谢您的支持，您将获得低于市场价古井贡原浆特酿一瓶， 好喝的不得了",supportMember:"2"}),e.push({id:"2",price:2e3,name:"古井贡酒原浆特酿",description:"感谢您的支持，您将获得低于市场价古井贡原浆特酿一瓶， 好喝的不得了",supportMember:"1"}),e.push({id:"3",price:2e3,name:"古井贡酒原浆特酿",description:"感谢您的支持，您将获得低于市场价古井贡原浆特酿一瓶， 好喝的不得了",supportMember:"3"}),e},setSupportInfo:function(e){var t=this.$(".cf-buy-content");for(var n=0;n<e.length;n++)t.append(this.getLevelItem(e[n]))},getLevelItem:function(e){var t=library.getTemplate("crowdfunding-detail-buy-item.html");return t(e)},initLayout:function(){function o(e){}function u(o){var u=n-document.body.scrollTop/4;e.css("opacity",(u/n-.5).toString()),t.css("opacity",(u/n-.5).toString());var a=i-document.body.scrollTop/4,f=(1-a/i).toString();r.css("opacity",f),s=!0}function a(e){s=!1}var e=this.$el.find(".goods-label-return"),t=this.$el.find(".goods-label-menu"),n=70,r=this.$el.find(".goods-label-return-nav"),i=88,s=!1;document.body.addEventListener("touchstart",o,!1),document.body.addEventListener("touchmove",u,!1),document.body.addEventListener("touchend",a,!1),$(window).scroll(function(s){var o=n-document.body.scrollTop/4;e.css("opacity",(o/n-.5).toString()),t.css("opacity",(o/n-.5).toString());var u=i-document.body.scrollTop/4,a=(1-u/i).toString();r.css("opacity",a)})},createOrderItem:function(){var e=this.productInfoObj;console.log(e);var t={};return t.itemNumber=1,t.type="小额批发",t.spec="testname",t.itemId="testid",t.goodsId=e.goodsid,t.name=e.warename,t.good=e.good,t.cartId="",t.totalPrice=96,t.imgurl=e.images[0]?e.images[0].src:"",t},createOrder:function(){var e=window.application.getUserInfo();if(!e){Backbone.history.navigate("#my-navigate/login/login",{trigger:!0});return}var t=this.productInfoObj,n={};if(t.isSoldOut==1){library.Toast("该商品已下架！");return}var r=this.createOrderItem();n.shopName=t.shopname,n.shopId=t.shopid,n.shopTel=t.tel,t.delivery&&isNaN(t.delivery)?n.postage=parseInt(t.price):n.postage=t.delivery||0,n.items=[],n.items.push(r);var i=[];i.push(n),window.app.shopsOrder=i,window.app.createOrderType=6,Backbone.history.navigate("#home-navigate/create-order",{trigger:!0})}})}),define("text!pages/crowdfunding-detail.json",[],function(){return'{\n  "template": "crowdfunding-detail.html",\n  "type": "crowdfunding-detail",\n  "components": [{\n    "id": "carousel",\n    "type": "CarouselView",\n    "slickOptions": {\n      "lazyLoad": "progressive",\n      "dots": true,\n      "autoplay": true,\n      "swipeToSlide": true,\n      "speed": 300,\n      "arrows": false\n    },\n    "collection": "itemDetailCollection"\n  }, {\n    "id": "PopupMenu",\n    "type": "PopupMenu"\n  }, {\n    "id": "SearchMidPageView",\n    "type": "SearchMidPageView"\n  }]\n}\n'}),define("text!pages/crowdfunding-list.html",[],function(){return'<div class="group-buy-list">\n  <header class="headerbox">\n    <div class="left-right nav-left goback">\n      <span class="icomoon icomoon-back"></span>\n    </div>\n    <div class=\'mid\'>\n      <span class="common-title">众筹</span>\n    </div>\n    <div class="left-right nav-right header-menu">\n      <span class="icomoon icomoon-moremore"></span>\n    </div>\n  </header>\n\n  <div class="group-buy-list-content">\n    <component id="GroupBuyListView" />\n  </div>\n\n\n  <div>\n    <component id="PopupMenu" />\n    <component id="SearchMidPageView" />\n  </div>\n</div>\n'}),define("pages/crowdfunding-list",["./PageView"],function(e){return e.extend({type:"crowdfunding-list",events:{"click .goback":"goback","click .header-menu":"menuMore","click .group-list-item":"itemClick"},initialize:function(){this.listenTo(this.findComponent("PopupMenu"),"toSearch",this.toSearch.bind(this))},menuMore:function(e){this.findComponent("PopupMenu").show()},toSearch:function(e){this.findComponent("SearchMidPageView").show()},goback:function(e){window.history.back()},itemClick:function(e){}})}),define("text!pages/crowdfunding-list.json",[],function(){return'{\n  "type":"crowdfunding-list",\n  "template":"crowdfunding-list.html",\n  "components":[\n    {\n      "id":"GroupBuyListView",\n      "type":"GroupBuyListView",\n      "template":"crowdfunding-list-item.html",\n      "collection":"CrowdfundingCollection"\n    },\n    {\n      "id": "PopupMenu",\n      "type": "PopupMenu"\n    }, {\n      "id": "SearchMidPageView",\n      "type": "SearchMidPageView"\n    }\n  ]\n}\n'}),define("text!pages/details.html",[],function(){return'<div class="details-body">\n    <component id="Detailslist" />\n</div>\n'}),define("pages/details",["./PageView"],function(e){return e.extend({render:function(){return e.prototype.render.apply(this,arguments),this},events:{"click .icomoon-back":"onBack"},onBack:function(){window.history.back()}})}),define("text!pages/details.json",[],function(){return'{\n  "template":"details.html",\n  "type":"details",\n  "header": {\n    "title": "店铺详情",\n    "items": [{\n      "type": "link",\n      "icon": "header-icon-back icomoon-back",\n      "pull": "left",\n      "event": "back"\n    }]\n  },\n  "components": [\n    {\n      "type": "Detailslist",\n      "id" : "Detailslist"\n    }\n\n  ]\n\n}\n'}),define("text!pages/discountPackage.html",[],function(){return'<header class="headerbox discount-header">\n    <div class=" nav-left header-icon-back address-title-icon goback">\n        <span class="icomoon icomoon-back"></span>\n    </div>\n    <div class=\'mid\'>\n        <span class="common-title">优惠套餐</span>\n    </div>\n    <div class="left-right nav-right">\n\n    </div>\n\n</header>\n<div class="blank_top_header"></div>\n<div class="package-content">\n  <component id="PackageListView" />\n</div>\n'}),define("pages/discountPackage",["./PageView","require"],function(e,t){return e.extend({events:{"click .discount-list-title":"spreadDetail","click .goback":"goBack","click .buy-now-btn":"toBuy"},packageList:null,initialize:function(){},onRender:function(){},onResume:function(){this.packageList=window.app.packageList,this.setInfo()},setInfo:function(){if(!this.packageList)return;for(var e=0;e<this.packageList.length;e++)this.packageList[e].index=e;this.findComponent("PackageListView").collection.reset(this.packageList)},spreadDetail:function(e){var t=$(e.currentTarget).parent().find(".discount-group"),n=$(e.currentTarget).find(".right-icomoon"),r=$(e.currentTarget).parent().find(".discount-img-group");t.hasClass("group-list-active")?(n.removeClass("icomoon-highpull"),n.addClass("icomoon-spread"),t.removeClass("group-list-active"),r.show()):(n.removeClass("icomoon-spread"),n.addClass("icomoon-highpull"),t.addClass("group-list-active"),r.hide())},toBuy:function(e){var t=$(e.currentTarget),n=t.attr("data-pid"),r=this.findComponent("PackageListView").collection.find({packageId:n}),i=this.getOrderInfo(r);window.app.shopsOrder=i,Backbone.history.navigate("#home-navigate/create-order",{trigger:!0})},getOrderInfo:function(e){var t={};t.packageId=e.get("packageId"),t.packageNumber=1,t.packagePrice=e.get("packagePrice"),t.items=[];var n=e.get("products");for(var r=0;r<n.length;r++){var i={};i.name=n[r].goodsTitle,i.goodsSpec=n[r].goodsSpec,i.totalPrice=n[r].productPrice,i.itemNumber=n[r].goodsNum,i.imgurl=n[r].productImage,i.productId=n[r].productId,t.items.push(i)}var s=[];return s.push(t),s},goBack:function(){window.history.back()}})}),define("text!pages/discountPackage.json",[],function(){return'{\n  "type":"discountPackage",\n  "template":"discountPackage.html",\n  "components":[\n    {\n      "type":"ListView",\n      "id":"PackageListView",\n      "collection":"AjaxCollection",\n      "template":"discount-package-list-item.html"\n    }\n  ]\n}\n'}),define("text!pages/distributionMode.html",[],function(){return'<header class="headerbox">\n      <div class="nav-left header-icon-back address-title-icon">\n          <span class="icomoon icomoon-back"></span>\n      </div>\n      <div class="mid">\n        <span class="common-title">选择配送方式</span>\n      </div>\n  </header>\n<div class="payment-selector">\n<div class="main-payment">\n<div class="send-mode-select ps-mode-select">\n	<div class="send-mode ps-mode">配送方式:</div>\n	<div class="mode-selector send-select">\n    <!--<div>\n		<span class="span-left points-only" id="mall-sendness">商城配送</span>\n		<span class="span-five-words points-only" id="other-sendness">渠道机构配送</span>\n	</div>-->\n</div>\n<div class="sender-selector psb-selector" style="display:none">\n	<span class="sender-choose">选择配送机构</span>\n	<span class="icomoon-details"></span>\n	<div class="enter-send psb-selector-value"></div>\n</div>\n<div class="send-service">\n      <div class="send-name-phone" style="height: 1.2rem;font-size: 0.34666667rem;line-height: 1.2rem;padding-left: 0.26666667rem;padding-right: 0.26666667rem;color: #B1B1B1;background-color: #fff;"></div>\n      <div class="send-name-address" style="height: 1.2rem;font-size: 0.34666667rem;line-height: 1.2rem;padding-left: 0.26666667rem;padding-right: 0.26666667rem;color: #B1B1B1;background-color: #fff;">送货时间，将在订单提交24小时内为您发</div>\n</div>\n<div class="send-information">送货时间，将在订单提交24小时内为您发货</div>\n<div class=" theme-backgorund-color btn-sure">保存</div>\n</div>\n</div>\n<div class="choice-send-mode"><div class="send-list"></div></div>\n<component id="SearchMidPageView"/>\n<component id="PopupMenu"/>\n</div>'}),define("pages/distributionMode",["./PageView","require"],function(e,t){return e.extend({type:"paySelector",events:{"click .header-icon-back":"onBack","click .btn-sure":"onSave","click .icomoon-moremore":"menuMore","click .h-span-left":"goBack","click .send-mode":"sendMode","click .send-list-mode":"sendListMode"},paymode:{},sender:null,initialize:function(){this.listenTo(this.findComponent("PopupMenu"),"toSearch",this.toSearch.bind(this))},onRender:function(){var e=location.href,t=e.substr(e.indexOf("=")+1,e.length-e.indexOf("="));t=="points"?this.$(".title").text("选择配送方式"):(this.$(".title").text("选择配送方式"),this.$(".points-only").hide())},onResume:function(){var e=this;this.$(".send-service").hide();var t=window.application.getUserInfo(),n=t?t.userid:"",r="",i="",s="",o={userid:n};$.ajax({url:window.app.api+"/getAgency?t="+(new Date).getTime(),data:JSON.stringify(application.getSignData(o)),type:"POST",dataType:"json",contentType:"application/json;charset=UTF-8",success:function(t){console.log(t),$.each(t.data,function(n,i){if(t.data[n].sendWayName=="商城配送"){var s={};s.sendWayName=t.data[n].sendWayName,s.sendWayId=t.data[n].sendWayId,window.app.sendmode=s,r+="<div class='send-mode theme-color theme-border-color' data-id='"+t.data[n].sendWayId+"'>"+t.data[n].sendWayName+"</div>"}else r+="<div class='send-mode' data-id='"+t.data[n].sendWayId+"'>"+t.data[n].sendWayName+"</div>";if(t.data[n].dealerList){var o=t.data[n].dealerList[0];e.$(".send-name-phone").text(o.recommended+"("+o.referenceidentity+")"+"  "+o.referencephone),e.$(".send-name-address").text(o.referenceaddress)}}),$(".send-select").html(r)},error:function(){library.Toast("网络请求出错，请重试！")}})},sendMode:function(e){var t={};t.sendWayName=$(e.target).text(),t.sendWayId=$(e.target).attr("data-id"),window.app.sendmode=t,$(e.target).addClass("theme-color").addClass("theme-border-color").siblings().removeClass("theme-color").removeClass("theme-border-color"),$(e.target).text()=="服务者配送"?(this.$(".send-service").show(),this.$(".send-information").hide()):(this.$(".send-service").hide(),this.$(".send-information").show())},menuMore:function(e){console.log(this.findComponent("PopupMenu")),this.findComponent("PopupMenu").show()},toSearch:function(e){this.findComponent("SearchMidPageView").show()},onBack:function(){window.history.back()},onSave:function(){window.history.back()},goBack:function(){this.$(".main-payment").show(),this.$("#SenderSelect").hide(),this.$(".sender-select-header").remove(),this.$(".sender-sellect-container").removeClass("sender-transform")}})}),define("text!pages/distributionMode.json",[],function(){return'{\n  "type": "distributionMode",\n  "template":"distributionMode.html",\n  "header": {\n    "title": "选择配送方式",\n    "items": [{\n      "type": "link",\n      "icon": "header-icon-back icomoon-back",\n      "pull": "left",\n      "event": "back"\n    },\n    {\n      "type": "link",\n      "icon": "header-icon-menu icomoon-moremore",\n      "pull": "right",\n      "event": "menuMore"\n      }]\n  },\n  "components":[\n  {\n      "id": "SearchMidPageView",\n      "type": "SearchMidPageView"\n  },\n  {\n      "id": "PopupMenu",\n      "type": "PopupMenu"\n  },\n  {\n      "id": "SenderSelect",\n      "type": "SenderSelect",\n      "collection": "senderCollection",\n      "template": "senderSelect.html"\n  }\n  ]\n}\n'}),define("text!pages/evaluate.html",[],function(){return'<header class="headerbox">\n    <div class="left-right nav-left goback">\n        <span class="icomoon icomoon-back"></span>\n    </div>\n    <div class=\'mid\'>\n      <span class="common-title">评价</span>\n    </div>\n    <div class="left-right nav-right">\n\n    </div>\n</header>\n<!-- 评价订单 -->\n<div class="evaluate_body">\n  <div class="evaluate-toast">\n     <p class="evaluate-toast-p">评价成功</p>\n  </div>\n  <component id="EvaluatePushView">\n</div>\n'}),define("pages/evaluate",["require","./PageView"],function(e,t){return t.extend({defaults:{toastTime:null},events:{"click .icomoon-back":"onBack","click .evaluate-goods-comment-button-share":"shareClick","click .evaluate-star":"makeStar","click .evaluate-goods-comment-button-submit":"makeComment"},commentCollection:null,userInfo:null,shareClick:function(e){var t=$(e.currentTarget).parents(".evaluate-item"),n=t.data("oid"),r=t.data("index"),i=this.commentCollection.findWhere({orderId:n}),s=i.get("items")[r],o=s.name;o?prouctName.length>15&&(o=o.substr(0,15)):o="欢迎您的选购";return;var u},onBack:function(){var e=$(".evaluate-goods-comment-textarea").val(),t=$(".evaluate-goods-comment").attr("data-star");e.trim().length>1||t?library.MessageBox("提示信息","评价未提交，是否离开？",[{leftText:"确定",callback:function(){window.history.back()}},{rightText:"取消",callback:function(){}}]):e.trim().length<1||!t?library.MessageBox("提示信息","评价未完成，是否离开？",[{leftText:"确定",callback:function(){window.history.back()}},{rightText:"取消",callback:function(){}}]):window.history.back()},toastHide:function(){$(".evaluate-toast").removeClass("evaluate-toast-active")},toastPop:function(e,t){this.toastTime!=null&&clearTimeout(this.toastTime),this.$el.find(".evaluate-toast-p").html(e),this.$el.find(".evaluate-toast").addClass("evaluate-toast-active"),this.toastTime=setTimeout(t,1e3)},makeStar:function(e){var t=this,n=$(e.currentTarget).parent(),r=$(e.currentTarget).parents(".evaluate-goods-marking").next(".evaluate-goods-comment"),i=$(e.currentTarget).data("star");r.attr("data-star",i),n.find(".evaluate-star").removeClass("click icomoon-star").addClass("unclick icomoon-starunclick"),$(e.currentTarget).removeClass("unclick icomoon-starunclick").addClass("click icomoon-star"),$(e.currentTarget).prevAll().each(function(){$(this).removeClass("unclick icomoon-starunclick").addClass("click icomoon-star")})},commentModel:null,makeComment:function(t){var n=$(t.currentTarget).parent().prev(".evaluate-goods-comment-textarea").val(),r=$(t.currentTarget).parents(".evaluate-goods-comment").attr("data-star");if(!r){library.Toast("请打分后提交评价",1e3);return}n.trim().length<1&&(n="好评");var i=$(t.currentTarget).parents(".evaluate-item"),s=i.data("oid"),o=i.data("index"),u=this.commentCollection.findWhere({orderId:s}),a=u.get("items")[o];library.Toast("评价商品成功",1e3);if(!this.commentModel){var f=e("../models/BaseModel");this.commentModel=new f;var l="/commentorder",c={userid:this.getUserId()},h={path:l,data:c,showLoading:!0,success:this.commentSuccess.bind(this),error:this.commentError.bind(this)}}else var h=this.commentModel.ajaxOptions;h.data.content=n,h.data.grade=r,h.data.goodsid=a.id,h.data.orderId=u.get("orderId"),console.log(h),this.commentModel.loadData(h)},commentSuccess:function(e){console.log(e),e?library.Toast(e.message||"评论成功",2e3):library.Toast("评论失败，网络错误",2e3),$(".add-blank-leaving-icon").removeClass("icomoon-without").removeClass("add-blank-leaving-icon"),$(".add-blank-leaving-words").text("").removeClass("add-blank-leaving-words"),$("#AllOrderListView").show(),this.initData()},commentError:function(){library.Toast("网络出错",2e3)},getUserId:function(){this.userInfo=window.application.getUserInfo(),this.userInfo||(library.Toast("您尚未登录，请前往登录"),window.history.back())},onRender:function(){this.commentCollection=this.findComponent("EvaluatePushView").collection,this.initData()},initData:function(){var e=window.localStorage.userinfo;this.userInfo=JSON.parse(e),this.userInfo||(library.Toast("您尚未登录，请前往登录"),window.history.back()),this.commentCollection.queryData={userid:this.userInfo.userid,isComment:"0",orderStatus:"1",pageindex:1,pagesize:10},this.commentCollection.loadData({url:this.commentCollection.commentOrderUrl,data:this.commentCollection.queryData,needReset:!0,showLoading:!0,success:this.onSuccess.bind(this),error:this.onError.bind(this)})},onSuccess:function(e){(!e||e.status!="ok")&&library.Toast("网络错误，请稍后再试",2e3),this.setPageStatus()},onError:function(){library.DismissLoadingBar(),library.Toast("抱歉，网络错误",2e3),this.setPageStatus()},setPageStatus:function(){if(!this.commentCollection.length||this.commentCollection.length==0)library.Toast("您还没有待评论的订单"),window.history.back()}})}),define("text!pages/evaluate.json",[],function(){return'{\n  "template":"evaluate.html",\n  "type":"evaluate",\n  "components": [{\n      "type": "EvaluatePushView",\n      "id" : "EvaluatePushView",\n      "template": "evaluatepush.html",\n      "autoload":false,\n      "paging":true,\n      "collection": "EvaluateGoodsModel"\n    }\n  ]\n\n}\n'}),define("text!pages/feedback.html",[],function(){return'<div class="feedback-page-view">\n  <header class="headerbox">\n    <div class="left-right nav-left goback">\n      <span class="icomoon icomoon-back"></span>\n    </div>\n    <div class=\'mid\'>\n      <span class="common-title">意见反馈</span>\n    </div>\n    <div class="left-right nav-right header-menu">\n      <span class="icomoon icomoon-moremore"></span>\n    </div>\n  </header>\n  <div class="commom-padding-header"></div>\n  <div class="feedback-input-frame">\n        <textarea class="user-feedback-text" type="text" placeholder="您遇到什么问题，或者有什么建议吗？欢迎提供给我们，谢谢！" oninput="self.numberChange()"/>\n  </div>\n\n  <div>\n    <button class="btnfeedback theme-backgorund-color theme-border-color" onclick="">提交\n    </button>\n  </div>\n <component id=\'SearchMidPageView\'/>\n <component id="PopupMenu"/>\n\n</div>\n'}),define("pages/feedback",["./PageView"],function(e){return e.extend({type:"feedback",events:{"click .goback":"onBack","click .btnfeedback":"commit","click .header-menu":"menuMore"},initialize:function(){this.listenTo(this.findComponent("PopupMenu"),"toSearch",this.toSearch.bind(this))},render:function(){return e.prototype.render.apply(this,arguments),this},onResume:function(){this.toggleBar&&this.toggleBar("hide"),this.$(".bar").show()},onBack:function(){window.history.back()},commit:function(){var e=this.$(".user-feedback-text").val();e?(window.history.back(),library.Toast("提交成功",1e3)):library.Toast("提交内容不能为空",1e3)},menuMore:function(e){this.findComponent("PopupMenu").show()},toSearch:function(e){this.findComponent("SearchMidPageView").show()}})}),define("text!pages/feedback.json",[],function(){return'{\n  "template": "feedback.html",\n  "type": "feedback",\n  "components":[\n    {\n      "id": "SearchMidPageView",\n      "type": "SearchMidPageView"\n    },\n    {\n      "id": "PopupMenu",\n      "type": "PopupMenu"\n    }\n  ]\n}\n'}),define("text!pages/forgetpasswd.html",[],function(){return'<div class="register-page-view">\n  <div class="register-view-normal">\n    <div class="input-background">\n      <div class="input-accountdiv">\n        <input id=\'forget-reg-input-account\' class="reg-input-account" type="text" placeholder="请输入手机号码"  />\n      </div>\n    </div>\n    <div class="input-pwddiv">\n      <input id=\'forget-reg-input-pwd\' class="reg-input-pwd" type="text" placeholder="请输入验证码"  />\n      <a href="javascript:;" class="btn-retransmit btn-retransmit-disabled" >获取验证码</a>\n    </div>\n  </div>\n\n  <div>\n    <button class="btnRegister theme-border-color-contrast theme-backgorund-color-contrast" disabled >下一步</button>\n  </div>\n\n  <div class="register-toast">\n     <p class="register-toast-p">对不起,验证码输入错误,请重新输入</p>\n  </div>\n\n</div>\n'}),define("pages/forgetpasswd",["require","./PageView"],function(e,t){return t.extend({defaults:{toastTime:null},route:function(e){t.prototype.route.apply(this,arguments)},postRoute:function(){this.triggerEvent("barHide")},events:{"click .btnRegister":"btnRegisterClick","click .header-icon-back":"onBack","click .bd-agree":"onAgreeClick","input #forget-reg-input-pwd":"pwdChange","input #forget-reg-input-account":"numberChange","click .btn-retransmit":"checkRetransmit"},initialize:function(e){t.prototype.initialize.apply(this,arguments),this.listenTo(this.findComponent("switchView"),"switchClick",this.switchClick)},render:function(){return t.prototype.render.apply(this,arguments),this},onResume:function(){this.toggleBar&&this.toggleBar("hide"),this.$(".bar").show()},pwdChange:function(){this.valueChange()},numberChange:function(){var e=this.$el.find("#forget-reg-input-account"),t=$(".btn-retransmit");!t.hasClass("is-restransit")&&e.val().trim().length>0?t.removeClass("btn-retransmit-disabled").addClass("theme-color").addClass("theme-border-color"):t.addClass("btn-retransmit-disabled").removeClass("theme-color").removeClass("theme-border-color"),this.valueChange()},valueChange:function(){$("#forget-reg-input-pwd").val().trim().length>0&&$("#forget-reg-input-account").val().trim().length>0&&!$(".bd-st").hasClass("theme-backgorund-color")?($(".btnRegister").removeAttr("disabled"),$(".btnRegister").removeClass("theme-backgorund-color-contrast").removeClass("theme-border-color-contrast").addClass("theme-border-color").addClass("theme-backgorund-color")):($(".btnRegister").attr("disabled","disabled"),$(".btnRegister").addClass("theme-backgorund-color-contrast").addClass("theme-border-color-contrast").removeClass("theme-border-color").removeClass("theme-backgorund-color"))},btnRegisterClick:function(){var e=this;if($("#forget-reg-input-account").val().trim().length<1&&!e.checkPhone($("#forget-reg-input-account").val().trim()))library.Toast("手机号码不能为空",1e3);else if($("#forget-reg-input-pwd").val().length<1)library.Toast("验证码不能为空",1e3);else{var t={checkCode:$("#forget-reg-input-pwd").val(),userPhone:e.mobile,sessionId:e.sessionid};library.LoadingBar("验证中..."),this.sendData(window.app.api+"/verifyCheckCode",t,function(t){t.status="0",t.status=="0"?(library.DismissLoadingBar(),Backbone.history.navigate("#my-navigate/forgetpwd-newpwd?passSessionId="+t.data.sessionId+"&mobile="+e.mobile,{trigger:!0})):(library.DismissLoadingBar(),library.Toast(t.message))},function(){library.DismissLoadingBar(),library.Toast("验证码失效，请重新获取")})}},checkRetransmit:function(){if(!this.checkPhone($("#forget-reg-input-account").val().trim())){var e="手机号格式错误";this.toastPop(e)}else{if($(".btn-retransmit").hasClass("btn-retransmit-disabled"))return;var t=$(".btn-retransmit");t.html("重新发送（60s）").addClass("btn-retransmit-disabled").addClass("is-restransit").removeClass("theme-color");var n=60,r=setInterval(function(){--n,n==0?(t.html("获取验证码").removeClass("btn-retransmit-disabled").removeClass("is-restransit").addClass("theme-color"),clearInterval(r)):t.html("重新发送（"+n+"s）")},1e3),i=this;this.sendData(window.app.api+"/getVerifyCode",{userPhone:$("#forget-reg-input-account").val().trim()},function(e){e.status=="0"?(i.mobile=$("#forget-reg-input-account").val().trim(),i.sessionid=e.data.sessionId):library.Toast(e?e.message:"网络错误")}.bind(this),function(e){library.Toast(e?e.message:"网络错误")})}},checkPhone:function(e){var t=/^1[0-9]{10}$/;return t.test(e)},toastPop:function(e){this.toastTime!=null&&clearTimeout(this.toastTime),$(".register-toast-p").html(e),$(".register-toast").addClass("register-toast-active"),this.toastTime=setTimeout(function(){$(".register-toast").removeClass("register-toast-active")},1e3)},onBack:function(){window.history.back()},onAgreeClick:function(){$(".bd-st").hasClass("theme-backgorund-color")?$(".bd-st").removeClass("theme-backgorund-color"):$(".bd-st").addClass("theme-backgorund-color"),this.valueChange()},sendData:function(t,n,r,i){var s=e("../models/BaseModel"),o=new s,u={type:"POST",url:t,data:n,datatype:"json",success:r,error:i};o.loadData(u)}})}),define("text!pages/forgetpasswd.json",[],function(){return'{\n  "template":"forgetpasswd.html",\n  "type":"forgetpasswd",\n  "header": {\n    "title": "忘记密码",\n    "items": [{\n      "type": "link",\n      "icon": "header-icon-back icomoon-back",\n      "pull": "left",\n      "event": "back"\n    }]\n  },\n  "components": [\n  {\n      "id": "switchView",\n      "type": "SwitchView",\n      "IsOpen":false\n    }\n  ]\n}\n'}),define("text!pages/forgetpwd-newpwd.html",[],function(){return'<div class="register-page-view">\n  <div class="register-view-normal">\n    <div class="input-background">\n      <div class="input-accountdiv">\n        <input class="reg-input-account new-input-account" type="text" placeholder="请输入新密码"/>\n      </div>\n    </div>\n    <!--<div class="input-pwddiv">-->\n      <!--<input class="reg-input-pwd" type="text" placeholder="请输入验证码" oninput="self.pwdChange()"/>-->\n      <!--<a href="javascript:;" class="btn-retransmit btn-retransmit-disabled" onclick="self.checkRetransmit()">获取验证码</a>-->\n    <!--</div>-->\n  </div>\n  <!--<div class="bd-agree"><b class="bd-st"></b>同意优贸商城用户注册协议</div>-->\n  <div>\n    <button class="btnRegister theme-backgorund-color-contrast theme-border-color-contrast" disabled >下一步</button>\n  </div>\n\n  <!-- div class="register-toast"> -->\n    <!-- <p class="register-toast-p">对不起,验证码输入错误,请重新输入</p>-->\n  <!--</div>-->\n\n</div>\n'}),define("pages/forgetpwd-newpwd",["require","./PageView"],function(e,t){return t.extend({defaults:{toastTime:null},serverRes:null,route:function(e){t.prototype.route.apply(this,arguments)},events:{"click .btnforget":"btnforgetClick","click .header-icon-back":"onBack","click .bd-agree":"onAgreeClick","click .btnRegister ":"btnRegisterClick","input .new-input-account":"numberChange"},initialize:function(e){t.prototype.initialize.apply(this,arguments),this.listenTo(this.findComponent("switchView"),"switchClick",this.switchClick)},render:function(){return t.prototype.render.apply(this,arguments),this},onResume:function(){this.toggleBar&&this.toggleBar("hide"),this.$(".bar").show()},pwdChange:function(){this.valueChange()},numberChange:function(){var e=$(".btn-retransmit");!e.hasClass("is-restransit")&&$(".new-input-account").val().trim().length>0?e.removeClass("btn-retransmit-disabled").addClass("theme-color").addClass("theme-border-color"):e.addClass("btn-retransmit-disabled").removeClass("theme-color").removeClass("theme-border-color"),this.valueChange()},valueChange:function(){var e=this.$el.find(".new-input-account"),t=this.$el.find(".btnRegister");e.val().trim().length>0?(t.removeAttr("disabled"),t.removeClass("theme-backgorund-color-contrast").removeClass("theme-border-color-contrast").addClass("theme-border-color").addClass("theme-backgorund-color")):(t.attr("disabled","disabled"),t.addClass("theme-backgorund-color-contrast").addClass("theme-border-color-contrast").removeClass("theme-border-color").removeClass("theme-backgorund-color"))},sendData:function(t,n,r){var i=e("../models/BaseModel"),s=new i,o={type:"POST",url:t,data:n,datatype:"json",success:r,error:function(){}};s.loadData(o)},btnRegisterClick:function(){var e=this;if($(".new-input-account").val().trim().length<1)library.Toast("手机号码不能为空");else{var t=0,n={userPhone:e.params.mobile,password:$(".new-input-account").val().trim(),sessionId:e.params.passSessionId};console.log(n),this.sendData(window.app.api+"/resetPassword",n,function(e){e.status=="0"?Backbone.history.navigate("#my-navigate/modify-success",{trigger:!0}):library.Toast(e.message)},function(){library.DismissLoadingBar(),library.Toast("网络错误")})}},checkRetransmit:function(){var e=this;if($(".btn-retransmit").hasClass("btn-retransmit-disabled"))return;if(!this.checkPhone($(".new-input-account").val().trim())){var t="手机号格式错误";this.toastPop(t)}else{var n=$(".btn-retransmit");n.html("重新发送（60s）").addClass("btn-retransmit-disabled").addClass("is-restransit").removeClass("theme-color");var r=60,i=setInterval(function(){--r,r==0?(n.html("获取验证码").removeClass("btn-retransmit-disabled").removeClass("is-restransit").addClass("theme-color"),clearInterval(i)):n.html("重新发送（"+r+"s）")},1e3);this.sendDate("http://app.gootese.com/checkMobile",{userPhone:$(".new-input-account").val().trim()},function(e){e.code=="success"&&this.sendDate("http://app.gootese.com/sendMobileVcode",{mobile:$(".new-input-account").val().trim()},function(e){e.code=="success"&&(alert(e.message),this.serverRes=e.data,console.log(this.serverRes))}.bind(this))}.bind(this))}},callback:function(){},sendDate:function(t,n,r){var i={path:t,type:"POST",needReset:!0,data:n,datatype:"json",success:function(e){r(e)},error:function(){}};if(!this.baseModel){var s=e("../models/BaseModel");this.baseModel=new s}this.baseModel.loadData(i)},checkPhone:function(e){var t=/^1[0-9]{10}$/;return t.test(e)},toastPop:function(e){this.toastTime!=null&&clearTimeout(this.toastTime),$(".register-toast-p").html(e),$(".register-toast").addClass("register-toast-active"),this.toastTime=setTimeout(function(){$(".register-toast").removeClass("register-toast-active")},1e3)},onBack:function(){window.history.back()}})}),define("text!pages/forgetpwd-newpwd.json",[],function(){return'{\n  "template": "forgetpwd-newpwd.html",\n  "type":"forgetpwd-newpwd",\n  "header": {\n    "title": "请输入新密码",\n    "items": [{\n      "type": "link",\n      "icon": "header-icon-back icomoon-back",\n      "pull": "left",\n      "event": "back"\n    }]\n  },\n  "components": [\n  {\n      "id": "switchView",\n      "type": "SwitchView",\n      "IsOpen":false\n    }\n  ]\n}\n'}),define("text!pages/goodCollected.html",[],function(){return'<div class="position-top-blank">\n<header class="headerbox">\n      <div class=" nav-left header-icon-back address-title-icon">\n          <span class="icomoon icomoon-back"></span>\n      </div>\n      <div class=\'mid\'>\n        <span class="common-title">我的收藏</span>\n      </div>\n      <div class="left-right nav-right collector-edit">编辑</div>\n</header>\n<!-- <div class="top-good-filter">\n    <div class="default-item filters-item">默认</div><div class="decrease-first-item filters-item">降价优先</div><div class="discount-first-item filters-item">促销优先</div>\n  </div> -->\n</div>\n<div class="goodCollected-view">\n	<component id="GoodsCollectorView"/>\n</div>\n\n<div class="good-collected-bottom">\n    <span class="good-collected-checkbox icomoon-choicebox"></span>\n    <span class="left-span">全选</span>\n    <div class="good-collected-button theme-backgorund-color">删除</div>\n    <span class="span_box">\n        <span class="right-span-before">共选择</span>\n        <span class="right-span-num theme-color">0</span>\n        <span class="right-span-last">条商品</span>\n    </span>\n</div>\n'}),define("pages/goodCollected",["./PageView","require"],function(e,t){return e.extend({events:{"click .header-icon-back":"goback","click .filters-item":"select","click .collector-edit":"edit","click .goods-collector-li":"toDetail","click .good-collected-checkbox":"check","click .goods-collector-circle":"delete","click .good-collected-button":"delete"},userInfo:null,goodsCollection:null,cids:[],num:0,sortType:"0",onRender:function(){this.userInfo=window.application.getUserInfo(),this.$(".default-item").addClass("theme-color")},goback:function(e){window.history.back()},onGoodsSuccess:function(e){if(e&&e.data&&e.data.length==0){var t=$("<div class = 'icomoon-withoutcollect add-blank-leaving-icon'></div><div class = 'add-blank-leaving-words'>您还未收藏什么商品哟~</div>");this.$el.append(t)}},onGoodsError:function(e){library.Toast("网络出错")},getGoodsInfo:function(){var e="/getFavList";this.goodsCollection.loadData(this.getAjaxOptions(e,this.userInfo.userid,this.sortType,this.onGoodsSuccess.bind(this),this.onGoodsError.bind(this)))},select:function(e){$(".collector-edit").text("编辑"),this.$(".good-collected-bottom").hide(),this.$(".goodCollected-view").css({"padding-bottom":"0"}),this.$(".filters-item").removeClass("theme-color"),$(e.target).addClass("theme-color");var t=$(e.target).attr("class");t.indexOf("decrease-first-item")>=0?this.decrease():t.indexOf("discount-first-item")>=0?this.discount():this.getGoodsInfo()},decrease:function(){this.getGoodsInfo()},discount:function(){this.getGoodsInfo()},edit:function(){$(".collector-edit").text()=="编辑"?($(".collector-edit").text("完成"),this.$(".good-collected-bottom").show(),this.$(".goods-collector-sell").css({width:"56%"}),this.$(".goods-collector-circle").addClass("icomoon-choicebox"),this.$(".goods-collector-circle").show(),this.$(".goodCollected-view").css({"padding-bottom":"1.2rem"}),this.num=$(".goods-collector-circle.icomoon-choice").length,this.$(".right-span-num").text(this.num)):($(".collector-edit").text("编辑"),this.$(".good-collected-bottom").hide(),this.$(".goods-collector-circle").removeClass("icomoon-choicebox"),this.$(".goods-collector-sell").css({width:"66%"}),this.$(".goods-collector-circle").hide(),this.$(".goodCollected-view").css({"padding-bottom":"0"}))},check:function(e){$(e.currentTarget).attr("class").indexOf("theme-color")>=0?($(e.currentTarget).removeClass("icomoon-choice").removeClass("theme-color"),this.$(".goods-collector-circle").removeClass("icomoon-choice").removeClass("theme-color"),this.num=0,this.$(".right-span-num").text(this.num)):($(e.currentTarget).addClass("icomoon-choice").addClass("theme-color"),this.$(".goods-collector-circle").addClass("icomoon-choice").addClass("theme-color"),this.num=$(".goods-collector-circle.icomoon-choice").length,this.$(".right-span-num").text(this.num)),this.cids=[];var t=this;$(".goods-collector-circle.icomoon-choice").each(function(e,n){t.cids.push($(n).attr("data-cid"))})},"delete":function(e){if($(e.currentTarget).attr("class").indexOf("goods-collector-circle")>=0){$(e.currentTarget).attr("class").indexOf("theme-color")>=0?($(e.currentTarget).removeClass("icomoon-choice").removeClass("theme-color"),this.num=$(".goods-collector-circle.icomoon-choice").length,this.$(".right-span-num").text(this.num)):($(e.currentTarget).addClass("icomoon-choice").addClass("theme-color"),this.num=$(".goods-collector-circle.icomoon-choice").length,this.$(".right-span-num").text(this.num)),this.cids=[];var t=this;$(".goods-collector-circle.icomoon-choice").each(function(e,n){t.cids.push($(n).attr("data-cid"))})}else this.deleteInfo(this.cids)},getAjaxOptions:function(e,t,n,r,i){var s={path:e,showLoading:!0,type:"POST",needReset:!0,data:{userId:t,sort:n},success:r,error:i};return s},toDetail:function(e){if(!($(e.target).attr("class").indexOf("goods-collector-circle")>=0)){var t=e.currentTarget.dataset.cid,n="#my-navigate/itemdetail?goodsid="+t;Backbone.history.navigate(n,{trigger:!0})}},good_detail:function(e){var t=e.currentTarget.dataset.cid,n=e.currentTarget.className;if(e.target.dataset.name=="goods"||e.target.dataset.name=="shop")this.deleteInfo(e.target.dataset.name,t);else if(n=="shop-collector-li"){var r="#my-navigate/business?shopid="+t;Backbone.history.navigate(r,{trigger:!0})}else if(n=="goods-collector-li"){var r="#my-navigate/itemdetail?goodsid="+t;Backbone.history.navigate(r,{trigger:!0})}},deleteInfo:function(e){if(!e||e.length<=0){library.Toast("请选择要删除的物品");return}e=e.join(",");if(!this.baseModel){var n=t("../models/BaseModel");this.baseModel=new n}var r={};r.userid=this.userInfo.userid;var i=this,s="/cancelFav",o={path:s,data:{userId:this.userInfo.userid,productIds:e},success:function(e){e&&e.status=="0"?(library.Toast(e.message),i.getGoodsInfo(),i.edit()):library.Toast(e.message)}.bind(this),error:function(){library.Toast("操作失败，请重试")}.bind(this)};this.baseModel.loadData(o)},onResume:function(){this.goodsCollection=this.findComponent("GoodsCollectorView").collection,this.getGoodsInfo(),this.toggleBar&&this.toggleBar("hide"),this.$(".bar").show()}})}),define("text!pages/goodCollected.json",[],function(){return'{\n  "template":"goodCollected.html",\n  "type":"goodCollected",\n  "components":[\n    {\n      "type": "GoodsCollectorView",\n      "id" : "GoodsCollectorView",\n      "template": "goodscollectorlist.html",\n      "autoload":false,\n      "collection": "GoodsCollector"\n    }\n    ]\n}\n'}),define("text!pages/goods-create-order.html",[],function(){return'<!-- 添加全局loding效果：效果在runtime定义 + 位置style中定义-->\n    <!-- <div class="advertisement-pic" id="advertisement-pic"></div>\n    <div class="advertisement-countbox" id="advertisement-countbox" onclick="enterApp()">\n      <div class="advertisement-countbox-left">跳转</div>\n      <div class="advertisement-countbox-right" id="countbox-second"></div>\n    </div> -->\n    <div class="rotating-plane fix-center" id="rotating-plane"></div>\n    \n\n    <!-- 广告页面倒计时 -->\n  <script>\n   /*function showTime(time){\n     var t = time;\n     document.getElementById(\'countbox-second\').innerHTML= t;\n     var t =t-1;\n     if(t < 0){\n       document.getElementById(\'advertisement-pic\').remove();\n       document.getElementById(\'advertisement-countbox\').remove();\n       return ;\n     }\n     setTimeout(\'showTime(\'+t+\')\',1000);\n   }\n     showTime(3);\n   function enterApp(){\n     document.getElementById(\'advertisement-pic\').remove();\n     document.getElementById(\'advertisement-countbox\').remove();\n   }  */\n   </script>\n  \n\n<div class="TabBarView"><nav class="bar bar-tab" style="display: none;"><a class="tab-item active" href="#home-navigate"><span class="icon icomoon-home_click"></span><span class="tab-label">首页</span></a><a class="tab-item" href="#category-navigate"><span class="icon icomoon-class"></span><span class="tab-label">分类</span></a><a class="tab-item" href="#shopingcart-navigate"><span class="icon icomoon-cart"></span><span class="tab-label">购物车</span></a><a class="tab-item" href="#my-navigate"><span class="icon icomoon-mine"></span><span class="tab-label">我的</span></a></nav><div class="NavigationView"><div class="PageView" style="transform: translate3d(-100%, 0px, 0px); backface-visibility: hidden; display: block; position: fixed; transition: all 0.4s cubic-bezier(0, 0, 0.25, 1);"><div id="home-body">\n  <div>\n    <div id="SearchMidPageView" class="SearchMidPageView" data-type="SearchMidPageView"><div class="search-mid-page"><div class="common-search search-style2"><div class="common-search-mid-view"><div class="common-search-left-inner"><span class="icomoon-search"></span><form action="javascript:void(0);" style="display:inline-block;width:85%;"><input type="text" placeholder="请输入商品"></form></div></div><div class="common-cancel-right"><span>取消</span></div></div><div></div></div></div>\n  </div>\n  <header class="common-search" id="home_header">\n    <div class="common-search-left common-search-icon">\n      <span class="icomoon-logo"></span>\n    </div>\n    <div class="common-search-mid">\n      <div class="common-search-left-inner">\n        <span class="icomoon-search"></span>\n        <input type="text" readonly="true" placeholder="查找商品">\n      </div>\n    </div>\n    <div class="common-search-right common-search-icon">\n      <span class="icomoon-talk"></span>\n      <span class="home-scan-title">消息</span>\n    </div>\n    <div class="home-header-bk theme-backgorund-color" id="home_header_bk" style="opacity: 0;">\n    </div>\n  </header>\n  <img class="home-header-bg" src="./images/home/home_title_bg.png">\n  <div class="home-carousel">\n    <div id="carousel" class="AdCardView" data-type="AdCardView"><div class="slick-container slick-initialized slick-slider"><div aria-live="polite" class="slick-list draggable" tabindex="0"><div class="slick-track" style="opacity: 1; width: 11178px; transform: translate3d(-6210px, 0px, 0px);"><div class="image slick-slide slick-cloned" data-slick-index="-1" aria-hidden="true" style="width: 1242px;"><a><img class="" src="http://szli.yonyou.com//upload/20160607/0100J1K0H4F60ZZX846D.jpg"></a></div><div class="image slick-slide" data-slick-index="0" aria-hidden="true" style="width: 1242px;"><a><img class="" src="http://szli.yonyou.com//upload/20160607/0100W1K084FJ0ZJQYKUH.jpg"></a></div><div class="image slick-slide" data-slick-index="1" aria-hidden="true" style="width: 1242px;"><a><img class="" src="http://szli.yonyou.com//upload/20160607/010041K0X4F30ZNNZI3L.jpg"></a></div><div class="image slick-slide" data-slick-index="2" aria-hidden="true" style="width: 1242px;"><a><img class="" src="http://szli.yonyou.com//upload/20160607/010031K034FB0ZOJBFGQ.jpg"></a></div><div class="image slick-slide" data-slick-index="3" aria-hidden="true" style="width: 1242px;"><a><img class="" src="http://szli.yonyou.com//upload/20160607/0100V1K0B4FN0ZQKO0R5.jpg"></a></div><div class="image slick-slide slick-active" data-slick-index="4" aria-hidden="false" style="width: 1242px;"><a><img class="" src="http://szli.yonyou.com//upload/20160607/0100D1K0D4FB0ZYD0NY1.jpg"></a></div><div class="image slick-slide" data-slick-index="5" aria-hidden="true" style="width: 1242px;"><a><img class="" src="http://szli.yonyou.com//upload/20160607/0100R1K0N4FX0ZZ6J7QT.jpg"></a></div><div class="image slick-slide" data-slick-index="6" aria-hidden="true" style="width: 1242px;"><a><img class="" src="http://szli.yonyou.com//upload/20160607/0100J1K0H4F60ZZX846D.jpg"></a></div><div class="image slick-slide slick-cloned" data-slick-index="7" aria-hidden="true" style="width: 1242px;"><a><img class="" src="http://szli.yonyou.com//upload/20160607/0100W1K084FJ0ZJQYKUH.jpg"></a></div></div></div><ul class="slick-dots" style="display: block;"><li class="" aria-hidden="true"><button type="button" data-role="none">1</button></li><li aria-hidden="true" class=""><button type="button" data-role="none">2</button></li><li aria-hidden="true" class=""><button type="button" data-role="none">3</button></li><li aria-hidden="true" class=""><button type="button" data-role="none">4</button></li><li aria-hidden="false" class="slick-active"><button type="button" data-role="none">5</button></li><li aria-hidden="true" class=""><button type="button" data-role="none">6</button></li><li aria-hidden="true" class=""><button type="button" data-role="none">7</button></li></ul></div></div>\n  </div>\n  <div class="home-group-buying home-active">\n    <div class="group-buying-label  home-active-label">套餐商品</div>\n    <img class="group-buying-image" src="./images/group/test-group.png">\n  </div>\n \n\n  <div class="home-floor">\n    <div class="recommend">\n\n      <div class="home-goods">\n        <div class="home-title ">\n          <div class="home-words">\n            商品展示\n          </div>\n        </div>\n        <div id="HomePushView" class="HomePushShopView" data-type="HomePushView" style="display: block;">\n        <div class="scroller">\n        \n        <div class="loadmore-loading" style="display: block;"><span class="icomoon-load listview-loadingbar"></span><span class="label">加载更多</span></div><div class="empty-view" style="display: none;">已经加载全部</div><div class="error-view" style="display: none;">网络异常</div></div></div>\n        <div id="HomePushViewLoading" class="AreaLoading ymall-loading-wrapper" data-type="AreaLoading" style="display: none;"><div class="spinner"><div class="spinner-img"></div></div></div>\n        <div class="home-bottom-padding"></div>\n      </div>\n    </div>\n  </div>\n</div></div><div class="PageView" style="transform: translate3d(-100%, 0px, 0px); position: fixed; top: 0px; left: 0px; backface-visibility: hidden; display: block; transition: all 0.4s cubic-bezier(0, 0, 0.25, 1);"><div id="goods-page">\n  <header class="headerbox goods-label-return-nav" style="opacity: 0;">\n    <div class="left-right nav-left goback">\n      <span class="icomoon icomoon-back"></span>\n    </div>\n    <div class="mid">\n      <span class="common-title">商品详情</span>\n    </div>\n    <div class="left-right nav-right header-menu">\n      <span class="icomoon icomoon-moremore"></span>\n    </div>\n  </header>\n  <div class="goods-label-return" style="opacity: 0.5;">\n    <div class="icomoon-back goods-label-back"></div>\n  </div>\n  <div class="goods-label-menu" style="opacity: 0.5;">\n    <div class="icomoon icomoon-moremore goods-label-menu-menu"></div>\n  </div>\n  <div style="position:relative">\n  <div class="itemdetial-top">\n  <div id="carousel" class="CarouselView" data-type="CarouselView"><div class="slick-container slick-initialized slick-slider"><div aria-live="polite" class="slick-list draggable" tabindex="0" style="height: 2453px;"><div class="slick-track" style="opacity: 1; width: 6210px; transform: translate3d(-3726px, 0px, 0px);"><div class="image slick-slide slick-cloned" data-slick-index="-1" aria-hidden="true" style="width: 1242px;"><a><img class="" src="http://szli.yonyou.com//upload/20160604/010081K0O4CX133LBQ6Y.jpg"></a></div><div class="image slick-slide" data-slick-index="0" aria-hidden="true" style="width: 1242px;"><a><img class="" src="http://szli.yonyou.com//upload/20160613/0100Q1K0K4LK10U8UL2L.jpg"></a></div><div class="image slick-slide" data-slick-index="1" aria-hidden="true" style="width: 1242px;"><a><img class="" src="http://szli.yonyou.com//upload/20160604/0100Z1K0T4CV133LYP3B.png"></a></div><div class="image slick-slide slick-active" data-slick-index="2" aria-hidden="false" style="width: 1242px;"><a><img class="" src="http://szli.yonyou.com//upload/20160604/010081K0O4CX133LBQ6Y.jpg"></a></div><div class="image slick-slide slick-cloned" data-slick-index="3" aria-hidden="true" style="width: 1242px;"><a><img class="" src="http://szli.yonyou.com//upload/20160613/0100Q1K0K4LK10U8UL2L.jpg"></a></div></div></div><ul class="slick-dots" style="display: block;"><li class="" aria-hidden="true"><button type="button" data-role="none">1</button></li><li aria-hidden="true" class=""><button type="button" data-role="none">2</button></li><li aria-hidden="false" class="slick-active"><button type="button" data-role="none">3</button></li></ul></div></div>\n  </div>\n  <div class="tips-without-cover"></div>\n  <div class="goods-label" style=" overflow: hidden;">\n    <div class="goods-label-title">\n      <div class="goods-title-name">aaa</div>\n      <!-- <div class="goods-title-share">\n        <div class="icomoon-share goods-share">\n        </div>\n        <div class="goods-title-collection-name">\n          分享\n        </div>\n      </div> -->\n      <div class="goods-title-money">\n        <div class="goods-title-rmb">¥</div>\n        <div class="goods-title-num">10</div>\n        <div class="goods-title-box theme-backgorund-color" style="display: none;"></div>\n      </div>\n      <div class="goods-sale-infomation">\n        <!-- <div class="express-fee"><span>快递 </span><span>6元</span></div> -->\n        <div class="month-sale"><span>月销 </span><span class="month-sale-val">0</span></div>\n      </div>\n    </div>\n    <div class="goods-label-spec">\n      <div class="goods-spec-box">\n        <div class="goods-spec-name">\n          选择 商品规格\n        </div>\n        <div class="goods-spec-selected"></div>\n      </div>\n      <div class="goods-spec-select icomoon-details">\n      </div>\n    </div>\n    <div class="goods-label-coupon">\n      <div class="goods-coupon-title">\n          <span>优惠&nbsp;&nbsp;可享受以下优惠</span>\n          <span class="icomoon icomoon-highpull launch-ico coupon-launch-ico" style="display: none;"></span>\n      </div>\n      <div class="goods-coupon-detail coupon-detail-show">\n          <div class="coupon-row" style="display:none"><span class="coupon-tag">满减</span><span class="itemdetail-discount">无</span></div>\n          <div class="coupon-row" style="display:none"><span class="coupon-tag">送积分</span><span class="itemdetail-points">无</span></div>\n          <div class="coupon-row-last">\n              <span class="coupon-tag">优惠套餐</span>\n              <span class="coupon-desc">无</span>\n              <span class="icomoon icomoon-details launch-ico" style="display: none;"></span>\n          </div>\n          <div class="packages-details" style="display: none;">\n              <div class="flex-layout packages-details-row">\n              </div>\n          </div>\n      </div>\n      <!-- <div class="goods-service"><span>服务</span><span class="goods-service-info">7天无理由退货</span></div> -->\n    </div>\n\n    <div class="goods-label-evaluate">\n      <div class="goods-evaluate-title">\n        <div class="goods-evaluate-number">\n          商品评价(<span class="goods-comments-number"></span>)\n        </div>\n      </div>\n      <div class="goods-evaluate-filter">\n        <div id="all-evaluate" data-index="0" class="evaluate-tab evaluate-tab-active">全部(<span id="allComNum"></span>)</div>\n        <div id="good-evaluate" data-index="1" class="evaluate-tab">很好(<span id="goodComNum"></span>)</div>\n        <div id="normal-evaluate" data-index="2" class="evaluate-tab">一般(<span id="comComNum"></span>)</div>\n        <div id="bad-evaluate" data-index="3" class="evaluate-tab">较差(<span id="badComNum"></span>)</div>\n      </div>\n      <div class="goods-evaluate-list">\n        <ul class="goods-evaluate-ul">\n        </ul>\n        <div class="no-comment" style="text-align: center;margin-top: 20px;width: inherit;height: 50px;color: #b1b1b1;">暂无评价</div>\n      </div>\n      <div class="more-comment"><span style="vertical-align: middle;">查看更多评论</span><span class="icomoon icomoon-details comment-ico"></span></div>\n    </div>\n    <div class="goods-label-collection">\n      <span class="goods-collection-words">点击查看图文详情</span><span class="goods-collection-icon icomoon-spread"></span>\n    </div>\n    <div id="ProductBottomBarView" class="BaseView" data-type="ProductBottomBarView"><div class="bar bar-tab product-bottom-bar yyfixed" style="display: none; visibility: hidden; position: static;">\n  <!--<a class="tab-item tab-left tab-tel">\n    <span class="icon icomoon-phone pb-tab"></span>\n    <span class="tab-label pb-tab">电话</span>\n  </a>\n  -->\n  <a class="tab-item tab-left pb-tab first-tab goods-title-selected collection-goods">\n      <div class="collect-in">\n        <span class="ico ico-star icomoon-starunclick goods-title-collection"></span>\n        <span class="tab-label" style="display: block">收藏</span>\n      </div>\n  </a>\n  <a class="tab-item tab-left pb-tab item-shopcart">\n\n    <div class="shopcart-in">\n        <div class="goods-shoppingcart-tips">\n        </div>\n        <span class="icon icomoon-cart"></span>\n        <span class="tab-label">购物车</span>\n    </div>\n  </a>\n  <a class="tab-item item-cart tab-right">加入购物车</a>\n  <a class="tab-item item-buy theme-backgorund-color tab-right">  轻松购  </a>\n</div>\n</div>\n  </div>\n</div>\n</div>\n\n<div class="add-shop-cart yyfixed" style="visibility: hidden; position: static;">\n  <div class="shop-cart-info">\n    <div class="shopcart-info-title">\n      <img class="info-title-img" src="//img.alicdn.com/bao/uploaded/i3/TB1sIZ1JFXXXXcfXXXXXXXXXXXX_!!0-item_pic.jpg_480x480q50.jpg" alt="">\n      <div class="info-title-words">\n        <div class="info-title-words-collection">\n        </div>\n        <span class="info-title-words-rmb">\n          ¥\n        </span>\n        <span class="info-title-words-num">\n        </span>\n      </div>\n      <div class="info-title-svg icomoon-close"></div>\n    </div>\n    <div class="shopcart-info-spec"><div class="spec-title">测试规格</div><div class="first-spec"><span firstindex="0" data-specid="0100Q1K0G4LF0RFA6MK4" class="spec-item">80g</span></div><div class="second-spec"></div></div>\n    <div class="shopcart-info-number">\n      <div class="info-number-title">\n        数量 \n      </div>\n      <div class="info-number-tips">\n      </div>\n      <div class="mui-number">\n        <button type="button" class="mui-numbox-btn-minus icomoon icomoon-minus"></button>\n        <input class="mui-numbox-input" type="tel" value="1" min="1" max="10000">\n        <button type="button" class="mui-numbox-btn-plus icomoon icomoon-plus"></button>\n      </div>\n    </div>\n    <div class="shopcart-info-btn theme-backgorund-color">\n      确定\n    </div>\n  </div>\n</div>\n\n<div>\n  <div id="ShareView" class="ShareView" data-type="ShareView"><div class="share-popup-view yyfixed" style="visibility: hidden; position: static;">\n    <div class="share-select-pad">\n        <div class="title-cross-line"></div>\n        <div class="share-title">推荐给好友</div>\n        <div class="share-type shortMessage-share"><div class="share-ico icomoon-message"></div><div class="share-describe">短信</div></div>\n        <div class="share-type QQ-share"><div class="share-ico icomoon-qq"></div><div class="share-describe">QQ</div></div>\n        <div class="share-type wechat-share"><div class="share-ico icomoon-weixin"></div><div class="share-describe">微信</div></div>\n        <div class="share-type wechat-moment-share"><div class="share-ico icomoon-friend"></div><div class="share-describe">朋友圈</div></div>\n        <div class="share-type weibo-share"><div class="share-ico icomoon-weibo"></div><div class="share-describe">微博</div></div>\n    </div>\n    <div class="cancel-share">取消</div>\n</div>\n<div class="common-message-cover-no"></div>\n</div>\n</div>\n\n<div class="business-category-view-more">\n  <component id="business-category"></component>\n</div>\n\n<div class="goods-collection-info">\n    <div class="backToGoods">\n        <span class="icomoon-back"></span>\n    </div>\n    <div id="topBlank"></div>\n    <div id="MySegmentedView" class="MySegmentedView" data-type="MySegmentedView"><div class="segmented-control"><a class="control-item segmented-item segmented-item-active theme-color theme-border-color" data-index="0">商品详情</a><a class="control-item segmented-item" data-index="1">规格参数</a><a class="control-item segmented-item" data-index="2">售后服务</a></div><div class="segmented-content"><div id="ProductDetailInfoView" class="ProductDetailInfoView" data-type="ProductDetailInfoView"></div></div></div>\n</div>\n\n<div class="bigImg-view yyfixed" style="visibility: hidden; position: static;">\n    <div id="carousel1" class="CarouselView" data-type="CarouselView"><div class="slick-container slick-initialized slick-slider"><div aria-live="polite" class="slick-list draggable" tabindex="0" style="height: 1242px;"><div class="slick-track" style="opacity: 1; width: 6210px; transform: translate3d(-1242px, 0px, 0px);"><div class="image slick-slide slick-cloned" data-slick-index="-1" aria-hidden="true" style="width: 1242px;"><a><img class="" src="http://szli.yonyou.com//upload/20160604/010081K0O4CX133LBQ6Y.jpg"></a></div><div class="image slick-slide slick-active" data-slick-index="0" aria-hidden="false" style="width: 1242px;"><a><img class="" src="http://szli.yonyou.com//upload/20160613/0100Q1K0K4LK10U8UL2L.jpg"></a></div><div class="image slick-slide" data-slick-index="1" aria-hidden="true" style="width: 1242px;"><a><img class="" src="http://szli.yonyou.com//upload/20160604/0100Z1K0T4CV133LYP3B.png"></a></div><div class="image slick-slide" data-slick-index="2" aria-hidden="true" style="width: 1242px;"><a><img class="" src="http://szli.yonyou.com//upload/20160604/010081K0O4CX133LBQ6Y.jpg"></a></div><div class="image slick-slide slick-cloned" data-slick-index="3" aria-hidden="true" style="width: 1242px;"><a><img class="" src="http://szli.yonyou.com//upload/20160613/0100Q1K0K4LK10U8UL2L.jpg"></a></div></div></div><ul class="slick-dots" style="display: block;"><li class="slick-active" aria-hidden="false"><button type="button" data-role="none">1</button></li><li aria-hidden="true"><button type="button" data-role="none">2</button></li><li aria-hidden="true"><button type="button" data-role="none">3</button></li></ul></div></div>\n</div>\n<div>\n    <div id="PopupMenu" class="PopupMenu" data-type="PopupMenu"><div class="root-popup-menu">\n  <div class="popup-menu">\n    <div class="menu-arrow">\n      <span class="icomoon icomoon-pullup"></span>\n    </div>\n    <div class="menu-content">\n      <div class="menu-home menu-item">\n        <span class="menu-icomoon icomoon icomoon-home pull-left"></span>\n        <span class="pull-right">首页</span>\n      </div>\n      <div class="menu-message menu-item">\n        <span class="menu-icomoon icomoon icomoon-talk pull-left"></span>\n        <span class="pull-right">消息</span>\n      </div>\n      <div class="menu-search menu-item">\n        <span class="menu-icomoon icomoon icomoon-search pull-left"></span>\n        <span class="pull-right">搜索</span>\n      </div>\n    </div>\n  </div>\n</div>\n</div>\n    <div id="SearchMidPageView" class="SearchMidPageView" data-type="SearchMidPageView"><div class="search-mid-page"><div class="common-search search-style2"><div class="common-search-mid-view"><div class="common-search-left-inner"><span class="icomoon-search"></span><form action="javascript:void(0);" style="display:inline-block;width:85%;"><input type="text" placeholder="请输入商品"></form></div></div><div class="common-cancel-right"><span>取消</span></div></div><div></div></div></div>\n</div></div><div class="PageView" style="transform: none; position: relative; top: 0px; left: 0px; backface-visibility: hidden; display: block; transition: all 0.4s cubic-bezier(0, 0, 0.25, 1);"><header class="headerbox">\n      <div class=" nav-left header-icon-back address-title-icon">\n          <span class="icomoon icomoon-back"></span>\n      </div>\n      <div class="mid">\n        <span class="common-title">确认订单</span>\n      </div>\n      <div class="left-right nav-right">\n        <a class="header-icon-menu icomoon icomoon-moremore"></a>\n      </div>\n  </header>\n<div class="create-order">\n\n  <div id="AddressInOrderView" class="BaseView" data-type="AddressInOrderView"><div class="address-in-order">\n  <div class="address-icon-map">\n    <div class="icomoon icomoon-location">\n    </div>\n  </div>\n  <div class="order-address">\n    <div class="order-address-user-info">\n      <div class="order-address-user-name">\n        <span class="address-user-name-des">收件人：</span><span>齐天大圣</span>\n      </div>\n      <div class="order-address-user-phone">15891160778</div>\n    </div>\n    <div class="order-address-address">\n      <span>北京北京市海淀区北清路</span>\n    </div>\n  </div>\n  <div class="order-address-icon-right"><span class="icomoon icomoon-more"></span></div>\n</div>\n</div>\n  <div id="CreateOrderListView" class="ListView" data-type="ListView"><div class="scroller">\n  <div class="confirm-order-goods">\n            <img src="http://szli.yonyou.com//upload/20160602/010041K0V4AC0QL2IF8V.jpg" alt="" class="confirm-order-img">\n            \n        <div class="goods-order-title cofirm-order-top">\n                <div class="package-list-title">\n                    101020套餐商品 大米+红桃+甘露\n                </div>\n                <div class="package-list-Selling">超值好礼 促销优惠<i>热销</i></div>\n                <div class="package-list-money">￥12202</div>\n                <div class="goods-order-number">X1</div>\n            </div>\n           <p class="confirm-order-deliver-time">预计发货时间 2016.8.6</p> \n    </div>\n            <div class="scroller">\n                    <ul class="table-view" style="border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgb(221, 221, 221); margin-bottom: 5px; background-color: rgb(255, 255, 255);">\n                        <li class="table-view-cell media favorite-item list-content" style="border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgb(221, 221, 221);">\n                            <div class="list-item">\n                                <img class="item-package-detail-img" src="http://szli.yonyou.com//upload/20160602/0100R1K064AC0QJ7K7UW.jpg">\n                                <div class="media-body item-media-body">\n                                    <div class="item-package-detail-title">\n                                        <div class="item-package-detail-name">红枣一箱想要多少要多少</div>\n                                        <div class="item-net-content"></div>\n                                    </div>\n                                    <div class="item-package-detail-price">\n                                        <div class="price-money">￥15684</div>\n                                        <div class="right-text">x1</div>\n                                    </div>\n                                </div>\n                            </div>\n                        </li>\n                        <li class="table-view-cell media favorite-item list-content" style="border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgb(221, 221, 221);">\n                            <div class="list-item">\n                                <img class="item-package-detail-img" src="http://szli.yonyou.com//upload/20160602/0100R1K064AC0QJ7K7UW.jpg">\n                                <div class="media-body item-media-body">\n                                    <div class="item-package-detail-title">\n                                        <div class="item-package-detail-name">红枣一箱想要多少要多少</div>\n                                        <div class="item-net-content"></div>\n                                    </div>\n                                    <div class="item-package-detail-price">\n                                        <div class="price-money">￥15684</div>\n                                        <div class="right-text">x1</div>\n                                    </div>\n                                </div>\n                            </div>\n                        </li>\n                        <li class="table-view-cell media favorite-item list-content" style="border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgb(221, 221, 221);">\n                            <div class="list-item">\n                                <img class="item-package-detail-img" src="http://szli.yonyou.com//upload/20160602/0100R1K064AC0QJ7K7UW.jpg">\n                                <div class="media-body item-media-body">\n                                    <div class="item-package-detail-title">\n                                        <div class="item-package-detail-name">红枣一箱想要多少要多少</div>\n                                        <div class="item-net-content"></div>\n                                    </div>\n                                    <div class="item-package-detail-price">\n                                        <div class="price-money">￥15684</div>\n                                        <div class="right-text">x1</div>\n                                    </div>\n                                </div>\n                            </div>\n                        </li>\n                    </ul>\n                </div>\n  <div style="display: block;"></div><div class="empty-view" style="display: none;">已经加载全部</div><div class="error-view" style="display: none;">网络异常</div></div></div>\n  <div class="group-cf-operation" style="display: none;">\n    <div class="group-cf-left">份数（限购2份）</div>\n    <div class="group-cf-right">\n      <span class="icomoon icomoon-minus"></span>\n      <span class="group-cf-text">1</span>\n      <span class="icomoon icomoon-plus"></span>\n    </div>\n  </div>\n  <div class="cf-reward-info" style="display: none;">\n    <div class="cf-reward-des">回报内容</div>\n    <div class="cf-reward-name-number">\n      <span class="cf-reward-name">古井贡酒特娘</span>\n      <span class="cf-reward-name">x1</span>\n    </div>\n    <div class="cf-reward-content">感谢您的支持，您将用低于商品原价的价格购买</div>\n    <div class="cf-reward-mark">项目结束两天内发货</div>\n  </div>\n  <div class="common-padding"></div>\n  <!-- 支付方式、配送方式-->\n  <div class="pay-send-selector">\n    <!-- <div class="send-method-order psb-selector">\n    <span class="send-method-des psb-selector-des">支付配送</span>\n    <span class="icomoon icomoon-more psb-selector-more"></span>\n    <span class="pay-method-value"></span>\n    <span class="send-method-value"></span>\n  </div> -->\n   <div class="send-method-order psb-selector">\n      <span class="pay-send-des psb-selector-des">配送方式</span>\n      <span class="icomoon icomoon-more psb-selector-more"></span>\n      <div id="point-send-value" class="send-method-value psb-selector-value"></div>\n    </div>\n    <div class="bill-order-info psb-selector">\n      <span class="bill-method-des psb-selector-des">发票信息</span>\n      <span class="icomoon icomoon-more psb-selector-more"></span>\n      <div class="bill-method-value psb-selector-value">不需要</div>\n    </div>\n  </div>\n  <div class="order-message">\n    <input type="text" placeholder="备注：您有什么要求，可以写在这里" class="message">\n  </div>\n  <div class="goods-total">\n    <div class="goods-total-price">\n      <span>商品金额</span>\n      <div class="total-price">\n        <span class="total-price-text">合计：</span>\n        <span class="total-price-num theme-color">¥10</span>\n      </div>\n    </div>\n  </div>\n  <div class="goods-total">\n      <div class="goods-total-freight">\n        <span>运费</span>\n        <div class="total-freight theme-color">+ 0.00</div>\n      </div>\n  </div>\n  <div class="goods-total">\n      <div class="goods-total-freight">\n        <span>活动折扣</span>\n        <div class="total-discount theme-color">- 0</div>\n      </div>\n  </div>\n  <div class="order-discount-info-view" style="display: block;">\n    <div class="use-coupon-item">\n      <div class="use-coupon small-order-item">使用优惠券</div>\n      <div id="CouponView" class="CouponView" data-type="CouponView"><div class="scroller"><ul class="table-view"></ul><div style="display: block;"></div><div class="empty-view" style="display: none;">已经加载全部</div><div class="error-view" style="display: none;">网络异常</div></div></div>\n    </div>\n    <!-- <div class="use-credit-card">\n      <div class="small-order-item">使用礼品卡</div>\n      <component id=\'CreditCardView\'></component>\n    </div> -->\n  </div>\n</div>\n<!-- 底部bar -->\n\n <div class="order-btm-bar">\n   <div class="order-total-fee">\n     <span class="order-total-fee-des">共计：</span>\n     <span class="fee-unit">¥</span>\n     <span class="order-total-fee-fee">10</span>\n   </div><div class="order-submit theme-backgorund-color">去结算</div>\n </div>\n <div>\n   <div id="SearchMidPageView" class="SearchMidPageView" data-type="SearchMidPageView"><div class="search-mid-page"><div class="common-search search-style2"><div class="common-search-mid-view"><div class="common-search-left-inner"><span class="icomoon-search"></span><form action="javascript:void(0);" style="display:inline-block;width:85%;"><input type="text" placeholder="请输入商品"></form></div></div><div class="common-cancel-right"><span>取消</span></div></div><div></div></div></div>\n   <div id="PopupMenu" class="PopupMenu" data-type="PopupMenu"><div class="root-popup-menu">\n  <div class="popup-menu">\n    <div class="menu-arrow">\n      <span class="icomoon icomoon-pullup"></span>\n    </div>\n    <div class="menu-content">\n      <div class="menu-home menu-item">\n        <span class="menu-icomoon icomoon icomoon-home pull-left"></span>\n        <span class="pull-right">首页</span>\n      </div>\n      <div class="menu-message menu-item">\n        <span class="menu-icomoon icomoon icomoon-talk pull-left"></span>\n        <span class="pull-right">消息</span>\n      </div>\n      <div class="menu-search menu-item">\n        <span class="menu-icomoon icomoon icomoon-search pull-left"></span>\n        <span class="pull-right">搜索</span>\n      </div>\n    </div>\n  </div>\n</div>\n</div>\n </div>\n</div></div></div>'}),define("pages/goods-create-order",["./PageView","require"],function(e,t){return e.extend({})}),define("text!pages/goods-create-order.json",[],function(){return'{\n  "template": "goods-create-order.html",\n  "type":"goods-create-order"\n}'}),define("text!pages/goods-order-list.html",[],function(){return'<header class="headerbox">\n    <div class="left-right nav-left goback">\n        <span class="icomoon icomoon-back"></span>\n    </div>\n    <div class="mid order-type-selector-btn">\n      <span class="common-title title-mid order-list-title">全部订单</span>\n      <span class="order-type-selector-icon icomoon icomoon-pulldown title-mid"></span>\n    </div>\n    <div class="left-right nav-right header-menu">\n      <span class="icomoon icomoon-moremore"></span>\n    </div>\n</header>\n<div class="order-list">\n  <div class="order-list-control-view">\n    <div class="segmented-control order-list-segmented">\n      <a class="control-item segmented-item segmented-item-active theme-color theme-border-color" data-index="0">全部</a>\n      <a class="control-item segmented-item" data-index="1">待付款</a>\n      <a class="control-item segmented-item" data-index="2">待发货</a>\n      <a class="control-item segmented-item" data-index="3">待收货</a>\n      <a class="control-item segmented-item" data-index="4">待评价</a>\n    </div>\n  </div>\n  <div class="order-filter-blank-top"></div>\n  \n    <div id="AllOrderListView" class="ListView" data-type="AllOrderListView"><div class="scroller">\n    <ul class="table-view">\n    <li class="all-order-list-item" data-index="16080300001070918895">\n    <div class="goods-order-list-logo">\n         <img src="../images/order/szl-logo.png"/>\n    </div>\n    <div class="shop-info-order shop-item-header">\n        <span class="icomoon icomoon-store order-icomoon-store"></span>\n        <div class="shop-info-name-shopname">三主粮</div>\n        \n    </div>\n    \n    <div class="order-goods-details-listitem">\n        <div class="goods-details-img">\n            <img src="http://szli.yonyou.com//upload/20160602/010041K0V4AC0QL2IF8V.jpg" alt="">\n        </div>\n        <div class="goods-order-title">\n                <div class="package-list-title">\n                    101020套餐商品 大米+红桃+甘露\n                </div>\n                <div class="package-list-Selling">超值好礼 促销优惠<i>热销</i></div>\n                <div class="package-list-money">￥12202</div>\n                <div class="goods-order-number">X1</div>\n            </div>\n    </div>\n    \n    \n        <div class="goods-order-foot">\n            <span class="" data-name="payOrder">发货记录</span>\n            <span class="" data-name="cancelOrder">提货</span>\n            <span class="" data-name="payOrder">去评价</span>\n            <span class="" data-name="payOrder">再次购买</span>\n        </div>\n    \n</li>\n</ul>\n<button class="loadmore" style="display: inline-block;"><div class="label">加载更多</div><span class="loading-icon"></span></button><div class="empty-view" style="display: none;">已经加载全部</div><div class="error-view" style="display: none;">网络异常</div></div></div>\n  \n\n</div>'}),define("pages/goods-order-list",["./PageView","require"],function(e,t){return e.extend({})}),define("text!pages/goods-order-list.json",[],function(){return'{\n  "template": "goods-order-list",\n  "type":"goods-order-list"\n}'}),define("text!pages/goodsComments.html",[],function(){return'<header class="headerbox commentsHeader">\n        <div class="left-right nav-left goback">\n            <span class="icomoon icomoon-back"></span>\n        </div>\n        <div class=\'commentsHeader\'>\n            <span class="comment-list-title">评论</span>\n        </div>\n        <div class="left-right nav-right">\n\n        </div>\n</header>\n<div class="blank_top"></div>\n<div class="filter-top">\n    <div class="paddingToTop"></div>\n    <div class="goods-evaluate-filter">\n      <div id="all-evaluate" data-index="0" class="evaluate-tab evaluate-tab-active">全部(<span id="allComNum"></span>)</div>\n      <div id="good-evaluate" data-index="1" class="evaluate-tab">很好(<span id="goodComNum"></span>)</div>\n      <div id="normal-evaluate" data-index="2" class="evaluate-tab">一般(<span id="comComNum"></span>)</div>\n      <div id="bad-evaluate" data-index="3" class="evaluate-tab">较差(<span id="badComNum"></span>)</div>\n    </div>\n</div>\n<div class="comment-list-view">\n    <component id="CommentListView"/>\n</div>\n<div class="tips-without-cover"></div>\n<div class="blank_bottom"></div>\n<div>\n<component id="ProductBottomBarView"/>\n</div>\n<div class="add-shop-cart yyfixed">\n    <div class="shop-cart-info">\n        <div class="shopcart-info-title">\n            <img class="info-title-img" src="//img.alicdn.com/bao/uploaded/i3/TB1sIZ1JFXXXXcfXXXXXXXXXXXX_!!0-item_pic.jpg_480x480q50.jpg" alt="" />\n            <div class="info-title-words">\n                <div class="info-title-words-collection">\n                </div>\n        <span class="info-title-words-rmb">\n          ¥\n        </span>\n        <span class="info-title-words-num">\n        </span>\n            </div>\n            <div class="info-title-svg icomoon-close"></div>\n        </div>\n        <div class="shopcart-info-method">\n            <div class="info-method-title">\n                交易方式\n            </div>\n            <div class="info-method-microcredit info-spec-selected">小额批发</div><div class="info-method-staple info-spec-selected-no">大宗交易</div>\n            <div class="info-method-tips">\n            </div>\n        </div>\n        <div class="shopcart-info-spec">\n            <div class="info-spec-title">\n                规格\n            </div>\n            <ul class="info-spec-ul">\n            </ul>\n\n        </div>\n        <div class="shopcart-info-number">\n            <div class="info-number-title">\n                数量\n            </div>\n            <div class="info-number-tips">\n            </div>\n            <div class="mui-number">\n                <button type="button" class="mui-numbox-btn-minus">-</button><input class="mui-numbox-input" type="tel" value="10" min="10" max="10000"/><button type="button" class="mui-numbox-btn-plus">+</button>\n            </div>\n        </div>\n        <div class="shopcart-info-btn theme-backgorund-color">\n            确定\n        </div>\n    </div>\n</div>\n<div class="common-message-cover-no"></div>\n'}),define("pages/goodsComments",["./PageView","require"],function(e,t){return e.extend({type:"logiticsDetail",events:{"click .left-right":"onBack","click .icomoon-moremore":"menuMore","click .evaluate-tab":"filterComment"},initialize:function(){},onRender:function(){},onResume:function(){var e=window.application.getQueryString("goodsid");this.toggleBar&&this.toggleBar("hide"),this.$(".bar").show(),this.commentInfo=window.app.commentInfo,console.log(window.app.commentInfo),window.app.commentInfo=null,this.commentInfo.comments.data==undefined?this.$("#allComNum").text("0"):this.$("#allComNum").text(this.commentInfo.comments.data.length),this.$("#goodComNum").text(this.commentInfo.goodComment.length),this.$("#comComNum").text(this.commentInfo.commonComment.length),this.$("#badComNum").text(this.commentInfo.badComment.length),this.setCommentList(this.commentInfo.comments.data)},onBack:function(){window.history.back()},menuMore:function(e){this.findComponent("PopupMenu").show()},setCommentList:function(e){this.findComponent("CommentListView").collection.reset(e)},filterComment:function(e){$(".evaluate-tab").removeClass("evaluate-tab-active"),$(e.currentTarget).addClass("evaluate-tab-active");var t=this.$(e.currentTarget).attr("data-index");t==0?this.setCommentList(this.commentInfo.comments.data):t==1?this.setCommentList(this.commentInfo.goodComment):t==2?this.setCommentList(this.commentInfo.commonComment):t==3&&this.setCommentList(this.commentInfo.badComment)}})}),define("text!pages/goodsComments.json",[],function(){return'{\n  "template": "goodsComments.html",\n  "type":"goodsComments",\n  "components": [\n    {\n      "id":"CommentListView",\n      "type":"ListView",\n      "collection":"AjaxCollection",\n      "template":"goodsCommentsListView.html"\n    },\n    {\n      "type": "ProductBottomBarView",\n      "id":"ProductBottomBarView",\n      "collection":"ShoppingcartnumCollection"\n    }\n  ]\n}\n'}),define("text!pages/goodscategory.html",[],function(){return'<header >\n    <div class="headerbox">\n        <div class="left-right">\n            <img src="images/goodslist/u13.png">\n        </div>\n        <div >\n            <a href="#">全部商品</a>\n        </div>\n        <div class="left-right">\n            <img src="images/goodslist/u71.png">\n        </div>\n    </div>\n</header>\n<ul class="goodscategory">\n    <li>q</li>\n    <li>2</li>\n    <li>r</li>\n    <li>t</li>\n    <li>5</li>\n</ul>'}),define("pages/goodscategory",["./PageView"],function(e){return e.extend({data:[{id:1,name:"1"},{id:2,name:"11"},{id:3,name:"1111"},{id:4,name:"111"},{id:5,name:"1"}],render:function(){return e.prototype.render.apply(this,arguments),this},onRender:function(){this.$(".goodscategory").on("click","li",this.onItemSelect.bind(this))},onItemSelect:function(e){alert(e.currentTarget.innerHTML)}})}),define("text!pages/goodscategory.json",[],function(){return'{\n  "template": "goodscategory.html",\n  "type":"goodscategory"\n}\n'}),define("text!pages/group-buy-detail.html",[],function(){return'<div class="group-buy-detail">\n  <header class="headerbox goods-label-return-nav">\n    <div class="left-right nav-left goback">\n      <span class="icomoon icomoon-back"></span>\n    </div>\n    <div class=\'mid\'>\n      <span class="common-title">团购详情</span>\n    </div>\n    <div class="left-right nav-right header-menu">\n      <span class="icomoon icomoon-moremore"></span>\n    </div>\n  </header>\n  <div class="goods-label-return">\n    <div class="icomoon-back goods-label-back"></div>\n  </div>\n  <div class="goods-label-menu">\n    <div class="icomoon icomoon-moremore goods-label-menu-menu"></div>\n  </div>\n\n  <div class="group-buy-detail-content">\n    <div class=\'itemdetial-top\'>\n      <component id="carousel" />\n    </div>\n    <div class="group-buy-status-info">\n      <div class="info-left">\n        <span class="info-time-des">剩余时间 </span>\n        <span class="info-time-value"></span>\n      </div>\n      <div class="info-right">\n        <div class="info-group-member"></div>\n        <div class="info-group-des">人数不足自动退款</div>\n      </div>\n    </div>\n    <div class="group-buy-product-info">\n      <div class="product-name"></div>\n      <div class="product-price-status">\n        <div class="product-price">\n          <span class="price-unit theme-color">￥</span>\n          <span class="price-value theme-color">140</span>\n          <span class="price-original">￥160</span>\n        </div>\n        <div class="product-status">\n          拼团中\n        </div>\n      </div>\n    </div>\n    <div class="public-load-img">\n      <span class="public-load-words">点击查看图文详情</span>\n      <span class="icomoon icomoon-details comment-ico"></span>\n    </div>\n    <div class="group-buy-discount" style="display:none">\n      <div class="discount-title">\n        <div class="discount-title-des">优惠详情</div>\n        <div class="discount-title-icon icomoon icomoon-highpull"></div>\n      </div>\n      <div class="discount-content"></div>\n    </div>\n\n    <div class="bar bar-tab product-bottom-bar yyfixed">\n      <!-- <a class="tab-item tab-left pb-tab first-tab goods-title-selected collection-goods">\n          <div class="collect-in">\n            <span class="ico ico-star icomoon-starunclick goods-title-collection"></span>\n            <span class="tab-label" style="display: block">收藏</span>\n          </div>\n      </a> -->\n      <a class="tab-item item-cart item-detail tab-right">直接购买</a>\n      <a class="tab-item item-buy item-buy-btn theme-backgorund-color tab-right">去拼团</a>\n    </div>\n  </div>\n\n  <div>\n    <component id="PopupMenu" />\n    <component id="SearchMidPageView" />\n  </div>\n\n</div>\n<div class="goods-collection-info">\n    <div class="backToGoods">\n        <span class="icomoon-back"></span>\n    </div>\n    <div id="topBlank"></div>\n    <component id="MySegmentedView"/>\n</div>\n'}),define("pages/group-buy-detail",["./PageView","require"],function(e,t){return e.extend({type:"group-buy-detail",events:{"click .goback":"goback","click .goods-label-return":"goback","click .header-menu":"menuMore","click .goods-label-menu":"menuMore","click .discount-title":"disItemClick","click .item-detail":"toDetail","click .public-load-img":"toMoreDetail","click .backToGoods":"hideMoreDetail","click .item-buy-btn":"createOrder"},gbDetailModel:null,levelListShow:!0,shortCounts:null,good_id:null,initialize:function(){this.listenTo(this.findComponent("PopupMenu"),"toSearch",this.toSearch.bind(this))},menuMore:function(e){this.findComponent("PopupMenu").show()},toSearch:function(e){this.findComponent("SearchMidPageView").show()},goback:function(e){window.history.back()},toDetail:function(e){var t=this.gbDetailModel.goodsid;Backbone.history.navigate("#home-navigate/itemdetail?goodsid="+this.good_id,{trigger:!0})},disItemClick:function(e){this.levelListShow?(this.$(".discount-content").hide(200),this.$(".discount-title-icon").removeClass("icomoon-highpull").addClass("icomoon-spread")):(this.$(".discount-content").show(200),this.$(".discount-title-icon").addClass("icomoon-highpull").removeClass("icomoon-spread")),this.levelListShow=!this.levelListShow},onRender:function(){this.initLayout()},onResume:function(){e.prototype.onResume.apply(this,arguments),this.$(".product-bottom-bar").show();if(!this.gbDetailModel){var n=t("../models/GoodDetailModel");this.gbDetailModel=new n}this.setAjaxOptions();var r=this;window.setTimeout(function(){r.gbDetailModel.loadData()},520)},setAjaxOptions:function(){_this=this,this.gbDetailModel.goodsid=window.application.getQueryString("goodsid");var e=window.application.getUserInfo(),t=e?e.userid:"";this.gbDetailModel.ajaxOptions={url:window.app.api+"/getGroupDetail",showLoading:!0,data:{id:this.gbDetailModel.goodsid,userid:t},success:function(e){e?e.status=="error"?(library.Toast(e.message||"该产品可能已下架",2e3),window.history.back()):(e=e.data,_this.good_id=e.id,this.updateUI(e)):(library.Toast("数据出错",2e3),window.history.back())}.bind(this),error:function(e){console.log(e||"数据出错")}.bind(this)}},updateUI:function(e){var t=e.allCounts-e.member;t<0&&(t=0),this.productInfoObj=e,this.$(".group-buy-detail").show(),this.$(".product-name").text(e.name),this.$(".price-value").text(e.price),this.$(".price-original").text("¥"+e.originPrice);var n=this.findComponent("carousel").collection,r=[];for(var i=0;i<e.images.length;i++)r.push({src:e.images[i]});n.reset(r),this.setDiscountInfo(e.discountInfo),e.groupStatus!=2?(this.$(".item-buy").addClass("unable-btn"),this.$(".item-buy").removeClass("item-buy-btn")):(this.$(".item-buy").removeClass("unable-btn"),this.$(".item-buy").addClass("item-buy-btn")),e.groupStatus==1&&(this.$(".info-time-des").text("敬请期待"),this.$(".product-status").text("敬请期待"),this.$(".info-group-member").text("还差"+t+"人成团"),this.$(".info-time-value").show()),e.groupStatus==2&&(this.$(".info-time-des").text("剩余时间 "),this.$(".info-time-value").show(),this.$(".product-status").text("拼团中"),this.$(".info-group-member").text("还差"+t+"人成团")),e.groupStatus==3&&(this.$(".info-time-des").text("拼团成功等待发货"),this.$(".product-status").text("拼团成功"),this.$(".info-group-member").text("已达到拼团人数"),this.$(".info-time-value").hide()),e.groupStatus==4&&(this.$(".info-time-des").text("拼团失败"),this.$(".product-status").text("拼团失败"),this.$(".info-time-value").hide(),this.$(".info-group-member").text("没有达到拼团人数")),window.clearInterval(window.app.timeId),this.initTimer(e)},setDiscountInfo:function(e){var t=this.$(".discount-content");t.empty();for(var n=0;n<e.length;n++)t.append(this.getLevelItem(e[n]))},getLevelItem:function(e){var t=$("<div></div>");t.addClass("discount-item"),t.attr("data-id",e.id);var n=$("<span></span>");n.addClass("dis-level").addClass("theme-backgorund-color"),n.text(e.disName),t.append(n);var r=$("<span></span>");r.addClass("member"),r.text("满"+e.fullMember+"人"),t.append(r);var i=$("<span></span>");return i.addClass("price"),i.text("团购价￥"+e.price),t.append(i),t},initLayout:function(){function o(e){}function u(o){var u=n-document.body.scrollTop/4;e.css("opacity",(u/n-.5).toString()),t.css("opacity",(u/n-.5).toString());var a=i-document.body.scrollTop/4,f=(1-a/i).toString();r.css("opacity",f),s=!0}function a(e){s=!1}var e=this.$el.find(".goods-label-return"),t=this.$el.find(".goods-label-menu"),n=70,r=this.$el.find(".goods-label-return-nav"),i=88,s=!1;document.body.addEventListener("touchstart",o,!1),document.body.addEventListener("touchmove",u,!1),document.body.addEventListener("touchend",a,!1),$(window).scroll(function(s){var o=n-document.body.scrollTop/4;e.css("opacity",(o/n-.5).toString()),t.css("opacity",(o/n-.5).toString());var u=i-document.body.scrollTop/4,a=(1-u/i).toString();r.css("opacity",a)})},curDate:new Date,initTimer:function(e){_this=this,time=e.time,this.curDate.setDate(this.curDate.getDate()+1);var t=function(){var e=new Date;this.time-=1e3;var t=this.time,n=Math.floor(t/1e3/60/60/24),r=Math.floor(t/1e3/60/60%24),i=Math.floor(t/1e3/60%60),s=Math.floor(t/1e3%60),o=n+"天"+r+"时"+i+"分"+s+"秒";_this.$(".info-time-value").text(o),this.time==0&&window.clearInterval(this.id)};id=setInterval(t,1e3),window.app.timeId=id},createOrderItem:function(){var e=this.productInfoObj,t={};return t.itemNumber=1,t.type="小额批发",t.spec="testname",t.itemId="testid",t.goodsId=e.id?e.id:"0022",t.name=e.name?e.name:"测试名字",t.good=e.good?e.good:"测试产品",t.cartId="",t.totalPrice=e.price,t.imgurl=e.images[0]?e.images[0].src:"",t},createOrder:function(){var e=window.application.getUserInfo();if(!e){Backbone.history.navigate("#my-navigate/login/login",{trigger:!0});return}var t=this.productInfoObj,n={},r=this.createOrderItem();n.shopName=t.shopname,n.shopId=t.shopid,n.shopTel=t.tel,t.delivery&&isNaN(t.delivery)?n.postage=parseInt(t.price):n.postage=t.delivery||0,n.items=[],n.items.push(r);var i=[];i.push(n),window.app.shopsOrder=i,window.app.createOrderType=5,window.app.groupId=t.groupId?t.groupId:"",Backbone.history.navigate("#home-navigate/create-order",{trigger:!0})},toMoreDetail:function(){var e=this.findComponent("MySegmentedView");e.paramInfo=[{detailInfo:this.productInfoObj.mark},{detailInfo:this.productInfoObj.detailParamSpec},{detailInfo:this.productInfoObj.salesService}],e.setActive(0),$(".group-buy-detail").hide(),$(".goods-collection-info").show(),$(document.body).scrollTop(0)},hideMoreDetail:function(){$(".goods-collection-info").hide(),$(".group-buy-detail").show(),$(document.body).scrollTop(0)}})}),define("text!pages/group-buy-detail.json",[],function(){return'{\n  "template": "group-buy-detail.html",\n  "type": "group-buy-detail",\n  "components": [{\n    "id": "carousel",\n    "type": "CarouselView",\n    "slickOptions": {\n      "lazyLoad": "progressive",\n      "dots": true,\n      "autoplay": true,\n      "swipeToSlide": true,\n      "speed": 300,\n      "arrows": false\n    },\n    "collection": "itemDetailCollection"\n  }, {\n    "id": "PopupMenu",\n    "type": "PopupMenu"\n  }, {\n      "type": "MySegmentedView",\n      "id": "MySegmentedView",\n      "items": [{\n        "id": "ProductDetailInfoView",\n        "name": "商品详情",\n        "type": "ProductDetailInfoView"\n      }]\n    },\n  {\n    "id": "SearchMidPageView",\n    "type": "SearchMidPageView"\n  }]\n}\n'}),define("text!pages/group-buy-list.html",[],function(){return'<div class="group-buy-list">\n  <header class="headerbox">\n    <div class="left-right nav-left goback">\n      <span class="icomoon icomoon-back"></span>\n    </div>\n    <div class=\'mid\'>\n      <span class="common-title">团购</span>\n    </div>\n    <div class="left-right nav-right header-menu">\n      <span class="icomoon icomoon-moremore"></span>\n    </div>\n  </header>\n\n  <div class="group-buy-list-content">\n  <div id="picturehavent" class="icomoon-without add-blank-leaving-icon"></div>\n     <div class="add-blank-leaving-words">还没有相关的团购，请耐心等待，惊喜马上到来~</div>\n    <component id="GroupBuyListView" />\n  </div>\n\n\n  <div>\n    <component id="PopupMenu" />\n    <component id="SearchMidPageView" />\n  </div>\n</div>\n'}),define("pages/group-buy-list",["./PageView","require"],function(e,t){return e.extend({type:"group-buy-list",events:{"click .goback":"goback","click .header-menu":"menuMore","click .group-list-item":"itemClick"},initialize:function(){this.listenTo(this.findComponent("PopupMenu"),"toSearch",this.toSearch.bind(this))},menuMore:function(e){this.findComponent("PopupMenu").show()},toSearch:function(e){this.findComponent("SearchMidPageView").show()},goback:function(e){window.history.back()},itemClick:function(e){var t=this.$(e.currentTarget).attr("data-id");Backbone.history.navigate("#home-navigate/group-buy-detail?goodsid="+t,{trigger:!0})},onResume:function(){this.toggleBar&&this.toggleBar("hide");var e=this.findComponent("GroupBuyListView").collection;_this=this;var t={path:"/getGroupList",type:"POST",needReset:!0,data:{index:"1",size:"10"},showLoading:!0,datatype:"json",success:function(e){_this.dealTime(e),_this.changeDisplay(e)},error:function(){}};e.loadData(t)},changeDisplay:function(e){e.data.pageCount==0||!e.data.pageCount?(this.$(".loadmore").hide(),this.$(".table-view").hide()):(this.$("#picturehavent").hide(),this.$(".add-blank-leaving-words").hide())},dealTime:function(e){}})}),define("text!pages/group-buy-list.json",[],function(){return'{\n  "type":"group-buy-list",\n  "template":"group-buy-list.html",\n  "components":[\n    {\n      "id":"GroupBuyListView",\n      "type":"GroupBuyListView",\n      "template":"group-buy-list-item.html",\n      "collection":"GroupBuyListCollection",\n      "paging": true,\n      "autoload": false\n    },\n    {\n      "id": "PopupMenu",\n      "type": "PopupMenu"\n    }, {\n      "id": "SearchMidPageView",\n      "type": "SearchMidPageView"\n    }\n  ]\n}\n'}),define("text!pages/home-navigate.json",[],function(){return'{\n  "type": "NavigationView",\n  "rootPage" : "home"\n}\n'}),define("text!pages/home.html",[],function(){return'<div id="home-body">\n  <div>\n    <component id=\'SearchMidPageView\' />\n  </div>\n  <header class=\'common-search\' id=\'home_header\'>\n    <div class="common-search-left common-search-icon">\n      <span class=\'icomoon-logo\'></span>\n    </div>\n    <div class="common-search-mid">\n      <div class="common-search-left-inner">\n        <span class=\'icomoon-search\'></span>\n        <input type=\'text\' readonly=\'true\' placeholder=\'查找商品\' />\n      </div>\n    </div>\n    <div class="common-search-right common-search-icon">\n      <span class=\'icomoon-talk\'></span>\n      <span class=\'home-scan-title\'>消息</span>\n    </div>\n    <div class=\'home-header-bk theme-backgorund-color\' id=\'home_header_bk\'>\n    </div>\n  </header>\n  <img class="home-header-bg" src="./images/home/home_title_bg.png" />\n  <div class="home-carousel">\n    <component id="carousel" />\n  </div>\n  <div class="home-group-buying home-active">\n    <div class="group-buying-label  home-active-label">套餐商品</div>\n        \n   </div>\n <div class="home-carousel-package">\n    <component id="packagecarousel" />\n  </div>\n\n  <div class="home-floor">\n    <div class="recommend">\n\n      <div class="home-goods">\n        <div class="home-title ">\n          <div class="home-words">\n            商品展示\n          </div>\n        </div>\n        <component id="HomePushView" />\n        <component id=\'HomePushViewLoading\' />\n        <div class="home-bottom-padding"></div>\n      </div>\n    </div>\n  </div>\n</div>\n'}),define("pages/home",["require","./PageView","../models/HomeAllModel","../models/HomeADImgsModel"],function(e,t,n,r){return t.extend({pageY:0,events:{"click .common-search-right":"goMessageCenter","click .common-search-left-inner":"toSearch","click .home-goods-discount":"itemClick","click .home-carousel-package":"toGroupBuy","click .home-zhongchou":"toZhongChou"},listCollection:null,pageCount:0,initialize:function(){var e=window.application.getQueryString("orderId");e&&Backbone.history.navigate("#my-navigate/myback?orderId="+e,{trigger:!0});var t=this,r=new n;this.listCollection=this.findComponent("HomePushView").collection,r.loadData(this.getAdImagsOptions()),this.listCollection.loadData(this.getHomeListOptions())},getAdImagsOptions:function(){var e={path:"/getHomeInfo",type:"POST",data:{},success:this.onGetAdImagsSuccess.bind(this),error:this.onGetAdImagsError.bind(this)};return e},onGetAdImagsSuccess:function(e){e&&e.status=="0"&&this.findComponent("carousel").collection.reset(e.data.list)},onGetAdImagsError:function(){},getHomeListOptions:function(){var e={path:"/getHomeList",type:"POST",data:{index:1,size:10},needReset:!0,success:this.onHomeListSuccess.bind(this),error:this.onHomeListError.bind(this)};return e},onHomeListSuccess:function(e){this.findComponent("HomePushViewLoading").$el.hide(),e&&e.status=="0"&&(this.findComponent("HomePushView").$el.show(),e.data.list.length<=0&&$(".loadmore-loading").html("已加载全部"))},onHomeListError:function(e){library.Toast("加载失败")},goMessageCenter:function(){var e=application.getUserInfo();!e||!e.userid?Backbone.history.navigate("#home-navigate/login/login",{trigger:!0}):Backbone.history.navigate("#home-navigate/messageCenter",{trigger:!0})},toZhongChou:function(e){Backbone.history.navigate("#home-navigate/crowdfunding-list",{trigger:!0})},toGroupBuy:function(e){Backbone.history.navigate("#home-navigate/package-commodity",{trigger:!0})},itemClick:function(e){var t=$(e.currentTarget),n=t.attr("data-pid");n&&Backbone.history.navigate("#home-navigate/itemdetail?goodsid="+n,{trigger:!0})},render:function(){return t.prototype.render.apply(this,arguments),this},toSearch:function(){this.findComponent("SearchMidPageView").show()},onRender:function(){this.findComponent("HomePushView").$el.hide();var e=this,t=this.$el.find("#home_header"),n=this.$el.find("#home_header_bk"),r=t[0].offsetHeight,i=!1;document.body.addEventListener("touchmove",function(e){var t=r-document.body.scrollTop/4;n.css("opacity",(1-t/r).toString()),i=!0}),document.body.addEventListener("touchend",function(e){i=!1}),window.onscroll=function(t){if(!i){var s=r-document.body.scrollTop/4;n.css("opacity",(1-s/r).toString());var o=document.body.scrollTop+document.body.offsetHeight-document.body.scrollHeight;o=Math.abs(o),o==0&&!e.listCollection.isLoading&&e.toLoadMore()}},this.$(".table-view").css({overflow:"hidden"})},toLoadMore:function(){setTimeout(this.getNextPage.bind(this),200)},getNextPage:function(){if(this.listCollection.ajaxOptions.data.index>=5){this.listCollection.allDataLoaded=!0,this.findComponent("HomePushView").refresh();return}this.listCollection.getNextPage()},onResume:function(){var t=this,n=e("../models/BaseModel"),r=new n,i={url:window.app.api+"/getSuitHomeImages",type:"post",needReset:!0,data:{},success:function(e){if(e.data.length>0){var n=t.findComponent("packagecarousel").collection,r=[];for(var i=0;i<e.data.length;i++)r.push({src:e.data[i].url});n.reset(r)}},error:function(){}};r.loadData(i);var n=e("../models/BaseModel"),s=window.location.href.split("?"),o=s[1],u={};if(o){var a=o.split("&");for(var f=0,l=a.length;f<l;f++){var c=a[f].split("=");u[c[0]]=c[1]}}var h=u.wxopenid;h&&sessionStorage.setItem("userOpenid",h);var p=u.phone;if(p){var d=u.code;this.userModel=new n;var i={url:window.app.api+"/getPhoneUserInfo",type:"POST",needReset:!0,data:{phone:p,ncMember:d},success:function(e){application.setLocalStorage("userinfo",e.data)},error:function(){}};this.userModel.loadData(i)}this.toggleBar&&this.toggleBar("show");var v=window.application.getLocalStorage("apptheme"),m=$("link");_.map(m,function(e){var t=$(e).attr("href");t=="css/style-orange.css"?$(e).removeAttr("disabled"):(t=="css/style-red.css"||t=="css/style-blue.css")&&$(e).attr("disabled","disabled")})},model:null,checkVersionInfo:function(){var t=e("../models/BaseModel"),n=window.application.getLocalStorage("versioncode");n||(n=0),window.application.setLocalStorage("versioncode",n),this.versioncodeModel=new t;var r={url:window.app.api+"/app/checkUpdate",type:"GET",needReset:!0,data:{versionCode:n},success:function(e){this.versioncodeModel.get("needUpdate")==1&&this.updateAPP(this.versioncodeModel.get("downloadUrl"))}.bind(this),error:function(){}};this.versioncodeModel.loadData(r)},updateAPP:function(e){try{dynamicupdate&&dynamicupdate.download(function(){dynamicupdate.deploy(function(){console.log("deploy error")}),window.application.setLocalStorage("versioncode",this.versioncodeModel.get("versionCode"))}.bind(this),function(e){},e)}catch(t){console.log(t)}},goToBrand:function(){Backbone.history.navigate("#home-navigate/branddetail",{trigger:!0})},scanCode:function(e){return}})}),define("text!pages/home.json",[],function(){return'{\n  "template": "home.html",\n  "type":"home",\n  "components": [\n  {\n    "id":"SearchMidPageView",\n    "type":"SearchMidPageView"\n  },\n  {\n      "id": "carousel",\n      "type": "AdCardView",\n      "slickOptions": {\n        "lazyLoad": "progressive",\n        "dots": true,\n        "autoplay": true,\n        "swipeToSlide": true,\n        "speed": 300,\n        "arrows":false,\n        "adaptiveHeight":true\n      },\n      "collection":"SlickViewCollection"\n    },\n    {\n            "id": "packagecarousel",\n            "type": "CarouselView",\n            "slickOptions": {\n                "lazyLoad": "progressive",\n                "dots": true,\n                "autoplay": true,\n                "swipeToSlide": true,\n                "speed": 300,\n                "arrows": false\n            },\n            "collection": "packageDetailCollection"\n    },\n    {\n      "type":"AreaLoading",\n      "id":"HomeTopicViewLoading"\n    },\n    {\n      "type": "HomePushView",\n      "id" : "HomePushView",\n      "template": "homepush.html",\n      "autoload":false,\n      "collection": "HomeRecommendModel",\n      "paging":true,\n      "isAutoLoadMore":true\n    },\n    {\n      "type":"AreaLoading",\n      "id":"HomePushViewLoading"\n    }\n  ]\n}\n'}),define("text!pages/index.json",[],function(){return'{\n  "header": {\n    "title": "微商城"\n  },\n  "type": "TabBarView",\n  "items": [\n    {"label": "首页", "href": "#home-navigate", "icon": "icon icomoon-home"},\n    {"label": "分类", "href": "#category-navigate", "icon": "icon icomoon-class"},\n    {"label": "购物车", "href": "#shopingcart-navigate", "icon": "icon icomoon-cart"},\n    {"label": "我的", "href": "#my-navigate", "icon": "icon icomoon-mine"}\n  ],\n  "iconsSelected":[\n    "icomoon-home_click","icomoon-class_click","icomoon-cart_click","icomoon-mine_click"\n  ],\n  "iconsDefault":[\n    "icomoon-home","icomoon-class","icomoon-cart","icomoon-mine"\n  ]\n\n}\n'}),define("text!pages/invoice-information.html",[],function(){return'<div class="order-list">\r\n     <div class="invoice-title">发票信息</div>\r\n     <div class="invoice-bg">\r\n     <div class="payway-wrapper"><div data-payid="ee1906c9a2ac448888b9d92d818025f1" class="pay-way-item pay-way-item-selected">不需要</div><div data-payid="96fb47398f6f4ff4a56c76a6e01cf994" class="pay-way-item">需要</div></div>\r\n     </div>\r\n     <div class="invoice-title">发票信息</div>\r\n     <div class="invoice-bg2">\r\n     <ul class="select_mode invoice-fpxx">\r\n         <li><i class=" no_select "></i>普通发票</li>\r\n     </ul>\r\n     <ul class="select_mode invoice-fpxx">\r\n         <li><i class=" no_select "></i>增值税发票发票</li>\r\n     </ul>\r\n     </div>\r\n     <div class="invoice-title">发票抬头</div>\r\n     <div class="invoice-bg">\r\n     <div class="payway-wrapper"><div data-payid="ee1906c9a2ac448888b9d92d818025f1" class="pay-way-item pay-way-item-selected">个人</div><div data-payid="96fb47398f6f4ff4a56c76a6e01cf994" class="pay-way-item">公司</div></div>\r\n     </div>\r\n     <div class="invoice-title">发票内容</div>\r\n     <div class="invoice-bg">\r\n     <div class="payway-wrapper"><div data-payid="ee1906c9a2ac448888b9d92d818025f1" class="pay-way-item pay-way-item-selected">大米</div></div>\r\n     </div>\r\n     <div class="invoice-title">增值税发票</div>\r\n     <div class="invoice-information">\r\n          <div class="invoice-topjc"></div>\r\n          <div class="invoice-count">\r\n               <div class="invoice-line">\r\n                    <p>单位名称：用友网络科技股份有限公司</p>\r\n                    <p>纳税人识别码：3333333333</p>\r\n                    <p>注册地址：上地北清路</p>\r\n                    <p>注册电话：3333333333</p>\r\n                    <p>开户银行：建设</p>\r\n                    <p>开户行地址：北京市海淀区上地支行</p>\r\n                    <p>银行账户：北京市海淀区上地支行</p>\r\n               </div> \r\n          </div>\r\n          <div class="invoice-bottomjc"></div>\r\n     </div>\r\n     \r\n     <div class=" theme-backgorund-color btn-sure">保存</div>\r\n</div>'}),define("pages/invoice-information",["./PageView","require"],function(e,t){return e.extend({})}),define("text!pages/invoice-information.json",[],function(){return'{\r\n  "template": "invoice-information",\r\n  "type":"invoice-information"\r\n}'}),define("text!pages/invoice.html",[],function(){return'<div class="invoice-information">\n<div class="invoice-info-select">\n	<div class="invoice-info">发票信息</div>\n	<div class="mode-selector">\n		<span class="span-left" id="invoice-need">需要</span>\n		<span id="invoice-unneed">不需要</span>\n	</div>\n</div>\n<div class="invoice-input">\n	<span>发票抬头</span>\n	<input class="invoice-head-input" placeholder="点我输入发票抬头" />\n</div>\n<div class="invoice-input">\n	<span>发票内容</span>\n	<input class="invoice-content-input" placeholder="点我输入发票内容" />\n</div>\n<div class=" theme-backgorund-color btn-sure">保存</div>\n</div>\n<div>\n  <component id=\'SearchMidPageView\'/>\n  <component id="PopupMenu"/>\n</div>\n'}),define("pages/invoice",["./PageView","require"],function(e,t){return e.extend({type:"invoice",events:{"click .header-icon-back":"onBack","click .btn-sure":"onSave","click #invoice-need":"invoiceSelect","click #invoice-unneed":"invoiceSelect","click .icomoon-moremore":"menuMore"},invoice:"不需要",initialize:function(){this.listenTo(this.findComponent("PopupMenu"),"toSearch",this.toSearch.bind(this))},menuMore:function(e){this.findComponent("PopupMenu").show()},toSearch:function(e){this.findComponent("SearchMidPageView").show()},onRender:function(){this.$("#invoice-unneed").addClass("theme-color").addClass("theme-border-color"),window.app.invoice_head&&window.app.invoice_content&&(this.$(".invoice-head-input").val(window.app.invoice_head),this.$(".invoice-content-input").val(window.app.invoice_content))},onResume:function(){this.toggleBar&&this.toggleBar("hide"),this.$(".bar").show(),window.app.invoice&&(window.app.invoice=="需要"?(this.$("#invoice-need").addClass("theme-color").addClass("theme-border-color"),this.$("#invoice-unneed").removeClass("theme-color").removeClass("theme-border-color")):(this.$("#invoice-unneed").addClass("theme-color").addClass("theme-border-color"),this.$("#invoice-need").removeClass("theme-color").removeClass("theme-border-color")))},onBack:function(){window.history.back()},onSave:function(){if(this.$(".invoice-head-input").val()&&this.$(".invoice-content-input").val()){var e={};e.title=this.$(".invoice-head-input").val(),e.content=this.$(".invoice-content-input").val(),window.app.invoice=e,window.history.back()}else library.Toast("请确认发票抬头和内容填写完整",2e3)},invoiceSelect:function(e){var t=$(e.currentTarget).attr("id");this.$(e.currentTarget).addClass("theme-color").addClass("theme-border-color"),t=="invoice-need"?this.$("#invoice-unneed").removeClass("theme-color").removeClass("theme-border-color"):(this.$("#invoice-need").removeClass("theme-color").removeClass("theme-border-color"),window.app.invoice=null,window.history.back())}})}),define("text!pages/invoice.json",[],function(){return'{\n  "template":"invoice.html",\n  "type": "invoice",\n  "header": {\n    "title": "发票信息",\n    "items": [{\n      "type": "link",\n      "icon": "header-icon-back icomoon-back",\n      "pull": "left",\n      "event": "back"\n    },{\n      "type": "link",\n      "icon": "header-icon-menu icomoon-moremore",\n      "pull": "right",\n      "event": "menuMore"\n      }]\n  },\n  "components":[\n    {\n      "id": "SearchMidPageView",\n      "type": "SearchMidPageView"\n    },\n    {\n      "id": "PopupMenu",\n      "type": "PopupMenu"\n    }\n  ]\n}\n'}),define("text!pages/itemdetail.html",[],function(){return'<div id="goods-page">\n  <header class="headerbox goods-label-return-nav">\n    <div class="left-right nav-left goback">\n      <span class="icomoon icomoon-back"></span>\n    </div>\n    <div class=\'mid\'>\n      <span class="common-title">商品详情</span>\n    </div>\n    <div class="left-right nav-right header-menu">\n      <span class="icomoon icomoon-moremore"></span>\n    </div>\n  </header>\n  <div class="goods-label-return" >\n    <div class="icomoon-back goods-label-back"></div>\n  </div>\n  <div class="goods-label-menu" >\n    <div class="icomoon icomoon-moremore goods-label-menu-menu"></div>\n  </div>\n  <div style=\'position:relative\'>\n  <div class=\'itemdetial-top\'>\n  <component id="carousel"/>\n  </div>\n  <div class="tips-without-cover"></div>\n  <div class="goods-label" style=" overflow: hidden;">\n    <div class="goods-label-title">\n      <div class="goods-title-name">\n      </div>\n      <!-- <div class="goods-title-share">\n        <div class="icomoon-share goods-share">\n        </div>\n        <div class="goods-title-collection-name">\n          分享\n        </div>\n      </div> -->\n      <div class="goods-title-money">\n        <div class="goods-title-rmb">¥</div>\n        <div class="goods-title-num"></div>\n        <div class="goods-title-box theme-backgorund-color"></div>\n      </div>\n      <div class="goods-sale-infomation">\n        <!-- <div class="express-fee"><span>快递 </span><span>6元</span></div> -->\n        <div class="month-sale"><span>月销 </span><span class=\'month-sale-val\'>6件</span></div>\n      </div>\n    </div>\n    <div class="goods-label-spec">\n      <div class="goods-spec-box">\n        <div class="goods-spec-name">\n          选择 商品规格\n        </div>\n        <div class="goods-spec-selected"></div>\n      </div>\n      <div class="goods-spec-select icomoon-details">\n      </div>\n    </div>\n    <div class="goods-label-coupon">\n      <div class="goods-coupon-title">\n          <span>优惠&nbsp;&nbsp;可享受以下优惠</span>\n          <span class="icomoon icomoon-highpull launch-ico coupon-launch-ico"></span>\n      </div>\n      <div class="goods-coupon-detail coupon-detail-show">\n          <div class="coupon-row" style="display:none"><span class="coupon-tag">满减</span><span class="itemdetail-discount">无</span></div>\n          <div class="coupon-row" style="display:none"><span class="coupon-tag">送积分</span><span class="itemdetail-points">无</span></div>\n          <div class="coupon-row-last coupon-packages">\n              <span class="coupon-tag">优惠套餐</span>\n              <span class=\'coupon-desc\'></span>\n              <span class="icomoon icomoon-details launch-ico"></span>\n          </div>\n          <div class="packages-details">\n              <div class="flex-layout packages-details-row">\n              </div>\n          </div>\n      </div>\n      <!-- <div class="goods-service"><span>服务</span><span class="goods-service-info">7天无理由退货</span></div> -->\n    </div>\n\n    <div class="goods-label-evaluate">\n      <div class="goods-evaluate-title">\n        <div class="goods-evaluate-number">\n          商品评价(<span class="goods-comments-number"></span>)\n        </div>\n      </div>\n      <div class="goods-evaluate-filter">\n        <div id="all-evaluate" data-index="0" class="evaluate-tab evaluate-tab-active">全部(<span id="allComNum"></span>)</div>\n        <div id="good-evaluate" data-index="1" class="evaluate-tab">很好(<span id="goodComNum"></span>)</div>\n        <div id="normal-evaluate" data-index="2" class="evaluate-tab">一般(<span id="comComNum"></span>)</div>\n        <div id="bad-evaluate" data-index="3" class="evaluate-tab">较差(<span id="badComNum"></span>)</div>\n      </div>\n      <div class="goods-evaluate-list">\n        <ul class="goods-evaluate-ul">\n        </ul>\n        <div class="no-comment" style="text-align: center;margin-top: 20px;width: inherit;height: 50px;color: #b1b1b1;">暂无评价</div>\n      </div>\n      <div class="more-comment"><span style="vertical-align: middle;">查看更多评论</span><span class="icomoon icomoon-details comment-ico"></span></div>\n    </div>\n    <div class="goods-label-collection">\n      <span class="goods-collection-words">点击查看图文详情</span><span class="goods-collection-icon icomoon-spread"></span>\n    </div>\n    <component id="ProductBottomBarView"/>\n  </div>\n</div>\n</div>\n\n<div class="add-shop-cart yyfixed">\n  <div class="shop-cart-info">\n    <div class="shopcart-info-title">\n      <img class="info-title-img" src="//img.alicdn.com/bao/uploaded/i3/TB1sIZ1JFXXXXcfXXXXXXXXXXXX_!!0-item_pic.jpg_480x480q50.jpg" alt="" />\n      <div class="info-title-words">\n        <div class="info-title-words-collection">\n        </div>\n        <span class="info-title-words-rmb">\n          ¥\n        </span>\n        <span class="info-title-words-num">\n        </span>\n      </div>\n      <div class="info-title-svg icomoon-close"></div>\n    </div>\n    <div class="shopcart-info-spec">\n\n    </div>\n    <div class="shopcart-info-number">\n      <div class="info-number-title">\n        数量 \n      </div>\n      <div class="info-number-tips">\n      </div>\n      <div class="mui-number">\n        <button type="button" class="mui-numbox-btn-minus icomoon icomoon-minus"></button>\n        <input class="mui-numbox-input" type="tel" value="1" min="1" max="10000"/>\n        <button type="button" class="mui-numbox-btn-plus icomoon icomoon-plus"></button>\n      </div>\n    </div>\n    <div class="shopcart-info-btn theme-backgorund-color">\n      确定\n    </div>\n  </div>\n</div>\n\n<div >\n  <component id="ShareView" />\n</div>\n\n<div class="business-category-view-more">\n  <component id="business-category" />\n</div>\n\n<div class="goods-collection-info">\n    <div class="backToGoods">\n        <span class="icomoon-back"></span>\n    </div>\n    <div id="topBlank"></div>\n    <component id="MySegmentedView"/>\n</div>\n\n<div class="bigImg-view yyfixed">\n    <component id="carousel1" class="carouselImg"/>\n</div>\n<div>\n    <component id="PopupMenu"/>\n    <component id="SearchMidPageView"/>\n</div>\n'}),define("pages/itemdetail",["./PageView","../models/GoodDetailModel","../models/CommentCollection","require"],function(e,t,n,r){return e.extend({events:{"click .goods-label-collection":"toMoreDetail","click .item-buy":"createOrder","click .item-shopcart":"gotoshopcart","click .item-cart":"selecteditem","click .shopcart-info-btn":"checkbtn","click .goods-label-spec":"openshoppingcart","change .mui-numbox-input":"inputchange","click .goods-title-selected":"goodstitleselected","click .mui-numbox-btn-plus":"muinumboxbtnplus","click .mui-numbox-btn-minus":"muinumboxbtnminus","click .goods-label-return":"goodslabelreturn","click .info-title-svg":"infotitlesvg","click .common-message-cover-no":"infotitlesvg","click .goods-button-check":"goodsbuttoncheck","click .backToGoods":"hideMoreDetail","click .CarouselView":"showBigImg","click .bigImg-view-show":"BigImgHide","click .goods-coupon-title":"showCoupon","click .evaluate-tab":"filterComment","click .more-comment":"goToCommentPage","click .goods-title-share":"shareWindow","click .coupon-packages":"goDiscountPackage","click .cancel-share":"shareCancel","click .header-menu":"menuMore","click .goods-label-menu":"menuMore","blur .mui-numbox-input":"numberboxBlur"},pageScrollTop:0,numberboxBlur:function(){document.body.scrollTop=this.pageScrollTop},min:null,max:null,num:0,buyState:0,shoppingCart:0,specStack:0,specSelect:null,shopcart:null,addshop:null,productStatus:0,commentData:null,commentCollection:new n,initialize:function(){this.commentData=this.commentCollection.toJSON(),this.listenTo(this.findComponent("PopupMenu"),"toSearch",this.toSearch.bind(this)),$(this.findComponent("carousel1")).find(".slick-dots").css({position:"relative",top:"300px"})},menuMore:function(e){this.findComponent("PopupMenu").show()},toSearch:function(e){this.findComponent("SearchMidPageView").show()},toMoreDetail:function(){var e=this.findComponent("MySegmentedView");console.log(this.productInfoObj.salesService),this.productInfoObj.salesService==undefined&&(this.productInfoObj.salesService="<div style='background:#f5f5f5;border-bottom:none' class = 'icomoon-without add-blank-leaving-icon'></div><div class = 'add-blank-leaving-words' style='background:#f5f5f5;border-bottom:none'>还没有相关售后哟~</div>"),e.paramInfo=[{detailInfo:this.productInfoObj.detailMore},{detailInfo:this.productInfoObj.detailParamSpec},{detailInfo:this.productInfoObj.salesService}],e.setActive(0),$("#goods-page").hide(),$(".goods-collection-info").show(),$(document.body).scrollTop(0)},hideMoreDetail:function(){$(".goods-collection-info").hide(),$("#goods-page").show(),$(document.body).scrollTop(0)},selecteditem:function(){var e=window.application.getUserInfo();if(!e){library.Toast("请先登录",2e3),Backbone.history.navigate("#my-navigate/login/login",{trigger:!0});return}var t=this.mods.attributes,n={};if(!this.addshop){var i=r("../models/AddShoppingCart");this.addshop=new i}if(!this.selectedFirstLevelSpec){library.Toast("没有查询到该规格的商品，请选择其他规格的商品！");return}var s=this.selectedFirstLevelSpec.attr("data-specId");if(!s){library.Toast("请选择规格！");return}if(this.selectedSecondLevelSpec){var o=this.selectedSecondLevelSpec.attr("data-specId");o&&(s=s+","+o)}if(this.productStatus==1){console.log(this.productStatus),library.Toast("该商品已下架！");return}if(this.specStack<=0){library.Toast("无货无法加入购物车！");return}var u={userId:e.userid,number:this.$(".mui-numbox-input").val(),productId:this.productInfoObj.id,specId:s},a={path:"/addCart",data:u,type:"POST",success:function(e){e&&e.status=="ok"?(library.Toast(e.message||"成功加入购物车"),this.setCartInfo(!0)):library.Toast(e?e.message:"添加失败，网络不给力")}.bind(this),error:function(e){library.Toast(e?e.message:"添加失败")}.bind(this)};this.addshop.loadData(a)},createOrderItem:function(){var e=this.productInfoObj,t={};return t.itemNumber=parseInt($(".mui-numbox-input").val()),t.tradePrice=this.productInfoObj.price,t.name=e.name,t.good=e.id,t.goodsId=e.id,t.totalPrice=t.itemNumber*t.tradePrice,t.imgurl=e.images[0]||"",t},createOrder:function(){var e=window.application.getUserInfo();if(!e){Backbone.history.navigate("#my-navigate/login/login",{trigger:!0});return}var t=this.productInfoObj;if(t.isSoldOut==1){library.Toast("该商品已下架！");return}var n={},r={},i=$(".mui-numbox-input").val();console.log(i+"======"+this.specStack);if(i>this.specStack){library.Toast("库存量不足！");return}var s=this.createOrderItem();t.delivery&&isNaN(t.delivery)?r.postage=parseInt(t.price):r.postage=t.delivery||0,r.items=[],r.items.push(s);var o=[];o.push(r),window.app.shopsOrder=o,window.app.createOrderType=0,Backbone.history.navigate("#home-navigate/create-order",{trigger:!0});return},gotoshopcart:function(){Backbone.history.navigate("#shopingcart-navigate?back=true&isAnime=true",{trigger:!0})},checkbtn:function(){$(".add-shop-cart").removeClass("add-shop-cart-show"),$(".common-message-cover-no").hide(),document.body.scrollTop=this.pageScrollTop,this.selectedGoodId!=this.productInfoObj.id&&(this.setAjaxOptions(this.selectedGoodId),this.mods.loadData());return;var e,t,n},openshoppingcart:function(){this.pageScrollTop=document.body.scrollTop,document.body.scrollTop=document.body.scrollHeight,$(".add-shop-cart").addClass("add-shop-cart-show"),$(".common-message-cover-no").show();if(this.wareSpec){var e=this.wareSpec.minWholesale;$(".mui-numbox-input").val(e)}this.shopcart={},this.shopcart.sku=this.wareSpec,this.shopcart.quantity=$(".mui-numbox-input").val()},getProductNumber:function(){return $(".mui-numbox-input").val()},goodstitleselected:function(e){var t=$(e.currentTarget);t.hasClass("collection-shop")?t.hasClass("collected")?this.favGoods(!1,!0):this.favGoods(!0,!0):t.hasClass("collected")?this.favGoods(!1,!1):this.favGoods(!0,!1)},favModel:null,favGoods:function(e,t){var n;e?n=t?"/addFav":"/addFav":n=t?"/cancelFav":"/cancelFav";if(!this.favModel){var i=r("../models/BaseModel");this.favModel=new i}var s=window.application.getUserInfo();s||library.MessageBox("提示信息","请先登录",[{leftText:"确定",callback:function(){Backbone.history.navigate("#my-navigate/login/login",{trigger:!0})}},{rightText:"取消",callback:function(){}}]);if(t)var o={shopid:this.productInfoObj.shopid,userid:s.userid};else var o={productIds:this.mods.goodsid,userId:s.userid};var u={path:n,data:o,success:function(n){n&&n.status=="0"?e?(this.showTips("收藏成功"),t?($(".collection-shop").find(".icomoon-starunclick").removeClass("goods-title-collection").addClass("goods-title-collection-selected"),$(".collection-shop").addClass("collected")):($(".collection-goods").find(".icomoon-starunclick").removeClass("goods-title-collection").addClass("goods-title-collection-selected"),$(".collection-goods").addClass("collected"))):(this.showTips("取消收藏"),t?($(".collection-shop").removeClass("collected"),$(".collection-shop").find(".icomoon-starunclick").removeClass("goods-title-collection-selected").addClass("goods-title-collection")):($(".collection-goods").removeClass("collected"),$(".collection-goods").find(".icomoon-starunclick").removeClass("goods-title-collection-selected").addClass("goods-title-collection"))):library.Toast("操作失败")}.bind(this),error:function(e){window.application.getUserInfo()&&library.Toast("操作失败，貌似网络不给力")}.bind(this)};this.favModel.loadData(u)},muinumboxbtnplus:function(){var e=$(".mui-numbox-input").val();e=parseInt(e),e+=1,$(".mui-numbox-input").val(e)},muinumboxbtnminus:function(){var e=$(".mui-numbox-input").val();e=parseInt(e),e=e<=1?1:e-1,$(".mui-numbox-input").val(e)},goodslabelreturn:function(){window.history.back()},infotitlesvg:function(){$(".add-shop-cart").removeClass("add-shop-cart-show"),$(".share-popup-view").removeClass("share-popup-view-show"),$(".common-message-cover-no").hide(),this.buyState=0,this.shoppingCart=0},mods:null,onResume:function(){this.shopcart=null,this.selectedFirstLevelSpec=null,this.selectedSecondLevelSpec=null,this.toggleBar&&this.toggleBar("hide"),this.$(".goods-label-return-nav").show(),this.$(".product-bottom-bar").show(),this.mods||(this.mods=new t),this.setAjaxOptions(window.application.getQueryString("goodsid"));var e=this;window.setTimeout(function(){e.mods.loadData()},520),$(".add-shop-cart").removeClass("add-shop-cart-show")},onRender:function(){this.selectedFirstLevelSpec=null,this.selectedSecondLevelSpec=null,this.initLayout();if(this.commentView==null){var e=r("../components/CommentListView");this.commentView=new e}},setAjaxOptions:function(e){var t=this;this.mods.goodsid=e,console.log(e);var n=window.application.getUserInfo(),r=n?n.userid:"";this.mods.ajaxOptions={path:"/getProductDetail",showLoading:!0,data:{productId:this.mods.goodsid,userId:r},success:function(e){if(e&&e.status=="0"){var n=e.data.productSpec.specValues;console.log(n),n==undefined&&$(".goods-label-spec").hide();if(!t.specSelect&&n!=undefined)t.specStack=e.data.productSpec.specValues[0].specParamValues[0].specStack;else{if(t.selectedSecondLevelSpec)var r=t.selectedFirstLevelSpec.attr("firstIndex");else var r=0;if(t.selectedSecondLevelSpec)var i=t.selectedSecondLevelSpec.attr("secondIndex");else var i=0}this.updateUI(e.data)}else library.Toast(e.message||"该产品可能已下架",2e3),window.history.back()}.bind(this),error:function(e){library.Toast("数据出错",2e3),window.history.back()}.bind(this)}},productInfoObj:null,selectedFirstLevelSpec:null,selectedSecondLevelSpec:null,secondLevelSpecItemClick:function(e,t){this.selectedSecondLevelSpec&&this.selectedSecondLevelSpec.removeClass("spec-item-selected"),this.selectedSecondLevelSpec=e,this.selectedGoodId=t.goodsId,this.selectedSecondLevelSpec.addClass("spec-item-selected"),this.setSelectedSpecLabel(!0)},setSelectedSpecLabel:function(e){this.selectedFirstLevelSpec&&(this.specStack<=0?$(".goods-spec-name").html("已选："+this.selectedFirstLevelSpec.text()+" "+(e?this.selectedSecondLevelSpec.text():"")+"<span style='color:red'>(无货)</span>"):(console.log(this.specStack),$(".goods-spec-name").html("已选："+this.selectedFirstLevelSpec.text()+" "+(e?this.selectedSecondLevelSpec.text():""))))},selectedGoodId:null,firstLevelSpecItemClick:function(e,t,n,r){this.selectedFirstLevelSpec&&this.selectedFirstLevelSpec.removeClass("spec-item-selected"),this.selectedFirstLevelSpec=n,this.selectedFirstLevelSpec&&this.selectedFirstLevelSpec.addClass("spec-item-selected"),this.setSelectedSpecLabel(!1);if(e&&e!=""){r.html("");var i=$("<div></div>");r.append("<div class='spec-title'>"+e+"</div>").append(i);var s,o,u,a;for(var f=0,l=t.length;f<l;f++){var c=t[f],h=c.specValue,p=$("<span secondIndex='"+f+"' data-specId='"+c.specId+"' class='spec-item'>"+h+"</span>");f==0&&(u=p,a=c),c.goodsId==this.productInfoObj.id&&(s=p,o=c),function(e,t,n){e.bind("click",function(){$(".goods-evaluate-ul").empty(),t.secondLevelSpecItemClick(e,n)})}(p,this,c),r.append(p)}this.secondLevelSpecItemClick(s||u,o||a)}else this.selectedGoodId=t[0].goodsId,this.selectedGoodId!=this.productInfoObj.id&&(this.setAjaxOptions(this.selectedGoodId),this.mods.loadData())},updateUI:function(e){this.productInfoObj=e,this.selectedGoodId=e.id,this.setCarouselInfo(e.images),this.productStatus=e.isSoldOut;if(this.productStatus==1){var t="<span>"+e.name+"<span class='theme-color'>(该商品已下架)</span></span>";this.$(".goods-title-name").append(t)}else this.$(".goods-title-name").html(e.name);this.$(".goods-title-num").html(e.price),this.$(".goods-title-box").hide(),e.isFav==1?this.$(".collection-goods").addClass("collected"):this.$(".collection-goods").removeClass("collected"),this.$(".month-sale-val").html(e.salesNumber);var n=e.discountInfo||{};this.setDiscountInfo(n);var r=e.productSpec||{};this.setSpecInfo(r,e.id);var i=e.comments;this.setCommentInfo(i)},setDiscountInfo:function(e){var t=e.points||0;t=t==0?"无":t,this.$(".itemdetail-points").html(t);var n=e.discount||"无";this.$(".itemdetail-points").html(n);var r=e.package||[];r.length==0?($(".packages-details").hide(),this.$(".coupon-desc").html("无"),this.$(".launch-ico").hide(),this.$(".coupon-row-last").removeClass("coupon-packages")):($(".coupon-desc").html("共"+r.length+"款"),this.$(".coupon-row-last").addClass("coupon-packages"),this.setPackageInfo(r))},setPackageInfo:function(e){this.package=e;var t=library.getTemplate("package-product-item.html"),n="";for(var r=0;r<e.length;r++){var i=e[r];i.index=r,n+=t(i)}this.$(".packages-details-row").html($(n))},setSpecInfo:function(e,t){this.$(".shopcart-info-spec").html("");var n=e.specName,r=this,i,s,o;if(n){var u=$("<div class='first-spec'></div>"),a=$("<div class='second-spec'></div>");this.$(".shopcart-info-spec").append("<div class='spec-title'>"+n+"</div>").append(u).append(a);var f=e.specValues;for(var l=0,c=f.length;l<c;l++){var h=f[l],p=h.specParamId,d=h.specParamName,v=$("<span firstIndex='"+l+"'data-specId='"+p+"' class='spec-item'>"+d+"</span>"),m=h.specParamValues;for(var g=0,y=m.length;g<y;g++)m[g]["goodsId"]==t&&(i=h.specParamValueName,s=m,o=v,r.$(".info-title-words-num").text(m[g].specPrice),r.$(".info-title-img").attr("src",m[g].specImage));(function(e,t,n,r){e.bind("click",function(){$(".goods-evaluate-ul").empty(),t.specStack=n.specParamValues[0].specStack,t.specSelect=1,t.firstLevelSpecItemClick(n.specParamValueName,n.specParamValues,e,r)})})(v,this,h,a),u.append(v)}this.firstLevelSpecItemClick(i,s,o,a)}},setCarouselInfo:function(e){var t=this.findComponent("carousel").collection,n=[];for(var r=0;r<e.length;r++)n.push({src:e[r]});t.reset(n)},initLayout:function(){function o(e){}function u(o){var u=n-document.body.scrollTop/4;e.css("opacity",(u/n-.5).toString()),t.css("opacity",(u/n-.5).toString());var a=i-document.body.scrollTop/4,f=(1-a/i).toString();r.css("opacity",f),s=!0}function a(e){s=!1}var e=this.$el.find(".goods-label-return"),t=this.$el.find(".goods-label-menu"),n=70,r=this.$el.find(".goods-label-return-nav"),i=88,s=!1;document.body.addEventListener("touchstart",o,!1),document.body.addEventListener("touchmove",u,!1),document.body.addEventListener("touchend",a,!1),$(window).scroll(function(s){var o=n-document.body.scrollTop/4;e.css("opacity",(o/n-.5).toString()),t.css("opacity",(o/n-.5).toString());var u=i-document.body.scrollTop/4,a=(1-u/i).toString();r.css("opacity",a)})},productSpec:null,setProductSpec:function(e){this.productSpec=e,this.$(".info-spec-title").text(e.specName),e.specValues.forEach(function(e,t){}.bind(this))},wareSpace:null,setWarespec:function(e){this.initSwareSpecBtn(e);var t=this;e.smallwarespec&&e.smallwarespec.length>0?(e.smallwarespec.forEach(function(e,t){if(parseInt(e.stock)<parseInt(e.minWholesale))var n=$("<li class='info-spec-selected-stockout ' data-index = '"+t+"'>");else{var n=$("<li class='info-spec-box ' data-index = '"+t+"'>");n.addClass("info-spec-selected-no")}n.text(e.name),this.$(".info-spec-ul").append(n)}.bind(this)),this.$el.find(".info-spec-box").click(function(n){var r=$(n.target).attr("data-index");t.$(".info-spec-box").addClass("info-spec-selected-no").removeClass("info-spec-selected").removeClass("info-spec-selected").removeClass("theme-color").removeClass("theme-backgorund-color-gray").removeClass("theme-border-color"),t.$(".info-spec-box[data-index='"+r+"']").addClass("info-spec-selected").removeClass("info-spec-selected-no").addClass("theme-color").addClass("theme-backgorund-color-gray").addClass("theme-border-color"),t.wareSpec=e.smallwarespec[r],t.$(".mui-numbox-input").val(t.wareSpec.minWholesale),t.setCurrentSpecInfo(t.wareSpec,e)})):$(".shopcart-info-spec").hide()},commentInfo:null,setCommentInfo:function(e){this.$(".goods-label-evaluate").show();var t=[],n=[],r=[];if(e.data!=undefined)for(var i=0;i<e.data.length;i++)e.data[i].grade<=1?t.push(e.data[i]):e.data[i].grade>=2&&e.data[i].grade<=3?n.push(e.data[i]):r.push(e.data[i]);this.commentInfo={badComment:t,commonComment:n,goodComment:r,comments:e};if(e.data==undefined){this.$(".goods-comments-number").text("0"),this.$("#allComNum").text("0"),this.$("#goodComNum").text("0"),this.$("#comComNum").text("0"),this.$("#badComNum").text("0"),$(".no-comment").show(),$(".more-comment").hide();return}$(".goods-comments-number").text(e.data.length),$("#allComNum").text(e.data.length),$("#goodComNum").text(r.length),$("#comComNum").text(n.length),$("#badComNum").text(t.length),$(".no-comment").hide(),e.data.length>3?$(".more-comment").show():$(".more-comment").hide(),this.setCommentList(e.data)},setCommentList:function(e){$(".goods-evaluate-ul").empty();for(var t=0;t<e.length&&t<3;t++)if(typeof e[t].userName!="undefined"){var n=$("<li class='goods-evaluate-list-li'>"),r=$("<div class='goods-evaluate-clear'>"),i=$("<div class='goods-evaluate-li-toggle'>"),s=$("<div class='goods-evaluate-li-collection'>"),o=$("<img class='goods-evaluate-li-head'>"),u=$("<span class='goods-evaluate-li-name'>"),a=$("<div class='goods-evaluate-li-said'>");s.append(o),r.append(s),r.append(u),r.append(i),n.append(r),n.append(a),$(".goods-evaluate-ul").append(n),o.attr("src",e[t].userHead),u.text(e[t].userName),console.log(e[t].userName),a.text(e[t].comment);for(var f=0;f<e[t].grade;f++){var l=$("<div class='goods-evaluate-li-star icomoon-star'>");i.append(l)}for(var f=0;f<5-e[t].grade;f++){var l=$("<div class='goods-evaluate-li-star-no icomoon-starunclick'><div>");i.append(l)}}else{var n=$("<li class='goods-evaluate-list-li'>"),r=$("<div class='goods-evaluate-clear'>"),i=$("<div class='goods-evaluate-li-toggle'>"),s=$("<div class='goods-evaluate-li-collection'>"),o=$("<img class='goods-evaluate-li-head'>"),u=$("<span class='goods-evaluate-li-name'>"),a=$("<div class='goods-evaluate-li-said'>");s.append(o),r.append(s),r.append(u),r.append(i),n.append(r),n.append(a),$(".goods-evaluate-ul").append(n),o.attr("src",e[t].userHead),u.text("未知用户"),a.text(e[t].comment);for(var f=0;f<e[t].grade;f++){var l=$("<div class='goods-evaluate-li-star icomoon-star'>");i.append(l)}for(var f=0;f<5-e[t].grade;f++){var l=$("<div class='goods-evaluate-li-star-no icomoon-starunclick'><div>");i.append(l)}}},setCartInfo:function(e){var t=window.application.getUserInfo();if(!t){$(".goods-shoppingcart-tips").hide();return}var n=t.cartNumber;if(n)var r=parseInt(n);r=r||0;if(!e&&r==0){$(".goods-shoppingcart-tips").hide();return}this.shopcart&&e&&(r+=parseInt(this.shopcart.quantity)),r>0?($(".goods-shoppingcart-tips").show(),$(".goods-shoppingcart-tips").text(r>99?"99":r)):$(".goods-shoppingcart-tips").hide(),t.cartNumber=r,window.application.setLocalStorage("userinfo",t)},showBigImg:function(){$(".bigImg-view").addClass("bigImg-view-show")},BigImgHide:function(){$(".bigImg-view").removeClass("bigImg-view-show")},showCoupon:function(){$(".goods-coupon-detail").hasClass("coupon-detail-show")?($(".goods-coupon-detail").removeClass("coupon-detail-show"),$(".coupon-launch-ico").removeClass("icomoon-highpull"),$(".coupon-launch-ico").addClass("icomoon-details")):($(".goods-coupon-detail").addClass("coupon-detail-show"),$(".coupon-launch-ico").removeClass("icomoon-details"),$(".coupon-launch-ico").addClass("icomoon-highpull"))},filterComment:function(e){$(".evaluate-tab").removeClass("evaluate-tab-active"),$(e.currentTarget).addClass("evaluate-tab-active");var t=this.$(e.currentTarget).attr("data-index");t==0?this.commentInfo.comments.data!=undefined&&this.setCommentList(this.commentInfo.comments.data):t==1?this.setCommentList(this.commentInfo.goodComment):t==2?this.setCommentList(this.commentInfo.commonComment):t==3&&this.setCommentList(this.commentInfo.badComment)},goToCommentPage:function(){window.app.commentInfo=this.commentInfo,$(".goods-evaluate-ul").empty(),Backbone.history.navigate("#home-navigate/goodsComments?goodsid="+window.application.getQueryString("goodsid"),{trigger:!0})},shareWindow:function(){this.findComponent("ShareView").show()},goDiscountPackage:function(){window.app.packageList=this.package,Backbone.history.navigate("#home-navigate/discountPackage",{trigger:!0})},shareCancel:function(){$(".share-popup-view").removeClass("share-popup-view-show"),setTimeout(function(){$(".share-popup-view").hide()},300),$(".common-message-cover-no").hide()},showTips:function(e){$(".tips-without-cover").text(e),$(".tips-without-cover").show(),setTimeout(function(){$(".tips-without-cover").hide()},1e3)},updatePackagesDetails:function(e){for(var t=1;t<=e.length;t++){var n="<div class='coupon-packages-table'>";n+="<div class='coupon-packages-num'>套餐"+t+"</div></div>",n=$(n);var r=$("<div class='goods-group'></div>"),i="";for(var s=0;s<e[t].products.length;s++)i="",s==e[t].products.length-1?i+="<div class='goods-group-img'><img src='"+e[t].products[s].productImage+"'></div>":(i+="<div class='goods-group-img'><img src='"+e[t].products[s].productImage+"'></div>",i+="<div class='goods-plus'>+</div>"),r.append($(i));n.append(r),$(".packages-details-row").append(n)}}})}),define("text!pages/itemdetail.json",[],function(){return'{\n  "template": "itemdetail.html",\n  "type": "itemdetail",\n  "components": [{\n      "id": "carousel",\n      "type": "CarouselView",\n      "slickOptions": {\n        "lazyLoad": "progressive",\n        "dots": true,\n        "autoplay": true,\n        "swipeToSlide": true,\n        "speed": 300,\n        "arrows": false\n      },\n      "collection": "itemDetailCollection"\n    },  {\n      "type": "ProductBottomBarView",\n      "id": "ProductBottomBarView",\n      "collection": "ShoppingcartnumCollection"\n    }, {\n      "type": "MySegmentedView",\n      "id": "MySegmentedView",\n      "items": [{\n        "id": "ProductDetailInfoView",\n        "name": "商品详情",\n        "type": "ProductDetailInfoView"\n      }, {\n        "name": "规格参数",\n        "type": "ProductListView",\n        "id": "ProductListView",\n        "template": "product-parameter.html",\n        "collection": "ProductParameterCollection",\n        "autoload": "false"\n      }, {\n        "id": "ProductCommentView",\n        "name": "售后服务",\n        "type": "ProductDetailInfoView"\n      }]\n    }, {\n      "id": "carousel1",\n      "type": "CarouselView",\n      "slickOptions": {\n        "lazyLoad": "progressive",\n        "dots": true,\n        "autoplay": false,\n        "swipeToSlide": true,\n        "speed": 300,\n        "arrows": false\n      },\n      "collection": "itemDetailCollection"\n    }, {\n      "id": "PopupMenu",\n      "type": "PopupMenu"\n    }, {\n      "id": "SearchMidPageView",\n      "type": "SearchMidPageView"\n    },\n    {\n      "id": "ShareView",\n      "type": "ShareView"\n    }\n  ]\n}\n'}),define("text!pages/login.html",[],function(){return'<div class="login-page-view">\n  <div class="login-view-normal">\n    <div class="login-image">\n      <img class="login-logo-image" src="images/login/newLogo.jpg" />\n    </div>\n    <div class="input-background">\n      <div class="input-accountdiv">\n        <label class="input-label-account">账号</label>\n        <input id="login-input-account" class="input-account" type="text" placeholder="用户名/邮箱/手机号码" />\n      </div>\n    </div>\n    <div class="input-pwddiv">\n      <label class="input-label-pwd">密码</label>\n      <input class="input-pwd" id="login-input-pwd" type="password" placeholder="请输入密码" />\n      <div class="eyeView" >\n        <div class="icomoon-conceal eyeview-box ">\n        </div>\n      </div>\n    </div>\n  </div>\n  <div>\n    <button class="btnLogin theme-backgorund-color-contrast theme-border-color-contrast" disabled >登录</button>\n  </div>\n  <div class="label-remmber" >\n   <a class="login-phone-register theme-color">快速注册</a>\n    <a class="login-forgetpwd">忘记密码?</a>\n  </div>\n  <div class="wechat-button" style="display: none">\n    <img class="wechat-img" src="images/login/wechat.png">\n    <span>&nbsp微信登录</span>\n  </div>\n  <div class="login-toast">\n     <p class="login-toast-p">账号或密码不正确</p>\n  </div>\n\n</div>\n'}),define("pages/login",["require","./PageView"],function(e,t){return t.extend({defaults:{toastTime:null},paramData:null,route:function(e){t.prototype.route.apply(this,arguments)},events:{"click .btnforget":"btnforgetClick","click .header-icon-back":"onBack","click .login-phone-register":"onRemmberClick","click .login-forgetpwd":"onForgetpwdClick","click .eyeView":"pwdConceal","input .input-account":"nameChange","input .input-pwd":"pwdChange","click .btnLogin":"btnLoginClick","click .wechat-button":"weixinLogin"},userid:null,initialize:function(e){t.prototype.initialize.apply(this,arguments),this.listenTo(this.findComponent("switchView"),"switchClick",this.switchClick),this.getLogo()},onSuccess:function(){},onFail:function(){},getLogo:function(){var t=e("../models/BaseModel"),n=new t,r={},i={type:"POST",path:"/getWXShopLogo",data:r,showLoading:!0,datatype:"json",success:function(e){e.status==0&&$("this").attr("src",e.data.logoUrl)},error:function(){}};n.loadData(i)},onResume:function(){this.toggleBar&&this.toggleBar("hide"),this.$(".bar").show(),console.log(this.paramData),this.paramData&&this.paramData.data.status=="0"&&this.paramData.data.sessionId&&this.bindPhone(this.paramData)},pwdChange:function(){this.valueChange()},nameChange:function(){this.valueChange()},valueChange:function(){var e=this.$el.find(".btnLogin"),t=this.$el.find("#login-input-pwd"),n=this.$el.find("#login-input-account");t.val().trim().length>0&&n.val().trim().length>0?(e.removeAttr("disabled"),e.addClass("active").removeClass("theme-backgorund-color-contrast").removeClass("theme-border-color-contrast").addClass("theme-backgorund-color").addClass(".theme-border-color")):(e.attr("disabled","disabled"),e.removeClass("active").addClass("theme-backgorund-color-contrast").addClass("theme-border-color-contrast").removeClass("theme-backgorund-color").removeClass(".theme-border-color"))},pwdConceal:function(){this.$el.find(".eyeview-box").hasClass("icomoon-conceal")?(this.$el.find("#login-input-pwd").attr("type","text"),this.$el.find(".eyeview-box").removeClass("icomoon-conceal").addClass("icomoon-display")):(this.$el.find("#login-input-pwd").attr("type","password"),this.$el.find(".eyeview-box").removeClass("icomoon-display").addClass("icomoon-conceal"))},switchClick:function(){this.$el.find(".switchview-switch").hasClass("active")?this.$el.find("#login-input-pwd").attr("type","text"):this.$el.find("#login-input-pwd").attr("type","password")},baseModel:null,btnLoginClick:function(){var t=this,n=this.$el.find("#login-input-account").val().trim(),r=this.$el.find("#login-input-pwd").val();if(n.length<1)alert("账号不能为空");else if(r.length<1)alert("密码不能为空");else{if(!this.baseModel){var i=e("../models/BaseModel");this.baseModel=new i}var s={path:"/userlogin",type:"POST",showLoading:!0,data:{userName:n,password:r},success:this.loginSuccess.bind(this),error:function(){library.Toast("请求出错")}};this.baseModel.loadData(s)}},loginSuccess:function(e){if(!e.data){library.Toast(e.message);return}this.userId=e.data.userId;if(e.status=="0"){var t={path:"/getUserInfo",type:"POST",data:{userId:e.data.userId},success:this.getUserInfoSuccess.bind(this),error:function(e){}};this.baseModel.loadData(t)}else library.Toast(e.message)},getUserInfoSuccess:function(e){if(e.status=="0"){var t=e.data;t.userid=this.userId,window.localStorage.clear(),window.localStorage.setItem("userinfo",JSON.stringify(t));var n="#home-navigate";Backbone.history.navigate(n,{trigger:!0}),Backbone.trigger("my-reload")}else library.Toast("登录失败")},onBack:function(){window.history.back()},onRemmberClick:function(){var e="#my-navigate/register";Backbone.history.navigate(e,{trigger:!0})},weixinLogin:function(){var t=e("../models/BaseModel");this.weixinModel=new t;var n={path:"/bandWeiXin",type:"POST",needReset:!0,data:{wxHeadUrl:"http://wx.qlogo.cn/mmopen/PiajxSqBRaEKTJpCphMjVT77UOGY83Sfscd0zsaOnyCUpJuXKGTQLvb8AJZFWRBkqxK84pOhHXvEoL3icSFbhXdg/0",wxNickName:"Droid",wxTokenId:"o18IvRs3yvXm2XkHCGj79wU05D4T0"},success:function(e){this.paramData=e,console.log(this.paramData);if(e&&e.data.status=="0"&&!!e.data.sessionId){var t="#my-navigate/weixinlogin";Backbone.history.navigate(t,{trigger:!0})}}.bind(this),error:function(){}};this.weixinModel.loadData(n)},bindPhone:function(t){console.log(window.app.bandPhoneNum);var n=e("../models/BaseModel");this.bindModel=new n;var r={path:"/wxBandPhone",type:"POST",needReset:!0,data:{sessionId:t.data.sessionId,userPhone:window.app.bandPhoneNum},success:function(e){e&&e.status=="0"&&e.data.sessionId},error:function(){}};this.bindModel.loadData(r)},onForgetpwdClick:function(){var e="#my-navigate/forgetpasswd";Backbone.history.navigate(e,{trigger:!0})}})}),define("text!pages/login.json",[],function(){return'{\n  "template": "login.html",\n  "type":"login",\n  "header": {\n    "title": "登录",\n    "items": [{\n      "type": "link",\n      "icon": "header-icon-back icomoon-back",\n      "pull": "left",\n      "event": "back"\n    }]\n  },\n  "components": [\n  {\n      "id": "switchView",\n      "type": "SwitchView",\n      "IsOpen":false\n    }\n  ]\n}\n'}),define("text!pages/logistic-list.html",[],function(){return'<div class="position-top-blank">\n<header class="headerbox my-history-head">\n      <div class=" nav-left header-icon-back address-title-icon">\n          <span class="icomoon icomoon-back"></span>\n      </div>\n      <div class=\'mid\'>\n        <span class="common-title">我的物流</span>\n      </div>\n      <div class="left-right nav-right history-clear">\n      </div>\n</header>\n\n</div>\n<div class="my-history-view">\n	<component id="LogisticListView"/>\n	<div id="show_nodata_div" style="display:none;">\n</div>\n'}),define("pages/logistic-list",["./PageView","require"],function(e,t){return e.extend({events:{"click .header-icon-back":"goback","click .filters-item":"select","click .history-clear":"clear","click .goods-collector-li":"toDetail","click li":"toLogiDetail"},collection:null,onRender:function(){this.userInfo=window.application.getUserInfo(),this.$(".default-item").addClass("theme-color"),this.collection=this.findComponent("LogisticListView").collection},goback:function(e){window.history.back()},clear:function(e){},onResume:function(){this.toggleBar&&this.toggleBar("hide"),this.initData()},toLogiDetail:function(e){var t=$(e.currentTarget).attr("data-id"),n="12345",r=this.collection.find({logisId:t});localStorage.setItem("logisId",t),localStorage.setItem("sendId",n),app.logisInfo=r.get("logis"),Backbone.history.navigate("#my-navigate/logiticsDetail",{trigger:!0})},initData:function(){var e=application.getUserInfo();if(!e)return;var t={path:"/getLogisticList",type:"POST",data:{userId:e.userid},showLoading:!0,needReset:!0,success:this.onSuccess.bind(this)};this.collection.loadData(t)},toDetail:function(e){},onSuccess:function(e){if(e.data.length>0)this.collection.reset(e.data);else{var t=$("<div class = 'icomoon-without add-blank-leaving-icon'></div><div class = 'add-blank-leaving-words'>还没有相关的物流信息~</div>");$("#show_nodata_div").html(t).show()}}})}),define("text!pages/logistic-list.json",[],function(){return'{\n  "type":"logistic-list",\n  "template": "logistic-list.html",\n  "components":[\n    {\n      "type": "ListView",\n      "id": "LogisticListView",\n      "template": "logistic-item.html",\n      "autoload": false,\n      "collection": "AjaxCollection"\n    }\n\n  ]\n}\n'}),define("text!pages/logiticsDetail.html",[],function(){return'<div class="logiticsDetail-page">\n	<div class="logiticsDetail-head">\n		<div class="logiticsDetail-head-logo">\n			<img src="images/login/pic_logo.png" class="logiticsDetail-head-pic">\n		</div>	\n		<div class="logiticsDetail-head-text">\n		    <div class="logsender-office">快递公司</div>\n			<ul class="logiticsItem">\n			   <li class="logiticsIdItem">运单号 ：</li>\n				<li class="logiticsStateItem">状态 ：</li>			\n			</ul>\n\n			<ul class="logiticsDes">	\n			    <li class="logiticsIdDes"></li>	    \n				<li class="logiticsStateDes"></li>\n				\n			</ul>\n		</div>\n		\n	</div>\n	<div class="logiticsDetail-context">\n	<div class="logitics-follow">物流详情</div>		\n	</div>\n	<div class="component-left">\n		<!-- <div class="logitics-circle">\n			\n		</div> -->\n	</div>\n	<div>\n		<component id="LogiticListView"/>\n	</div>\n  <component id=\'SearchMidPageView\'/>\n  <component id="PopupMenu"/>\n</div>'}),define("pages/logiticsDetail",["./PageView","require"],function(e,t){return e.extend({type:"logiticsDetail",events:{"click .header-icon-back":"onBack","click .icomoon-moremore":"menuMore"},collection:null,initialize:function(){this.listenTo(this.findComponent("PopupMenu"),"toSearch",this.toSearch.bind(this))},onRender:function(){this.collection=this.findComponent("LogiticListView").collection},onResume:function(){this.toggleBar&&this.toggleBar("hide"),this.$(".bar").show(),this.initData()},onBack:function(){window.history.back()},menuMore:function(e){this.findComponent("PopupMenu").show()},toSearch:function(e){this.findComponent("SearchMidPageView").show()},setInfo:function(){var e=t("../models/logiticsModel"),n=new e;this.$(".logiticsStateDes").append(n.get("state")),this.$(".logiticsIdDes").append(n.get("id")),this.$(".logsender-office").text(n.get("company"));var r=this.$("#LogiticListView").height()-115;this.$(".component-left").css({height:r})},initData:function(){var e=application.getUserInfo();if(!e)return;var t=localStorage.getItem("logisId"),n={path:"/logisDetail",type:"POST",data:{userId:e.userid,logisId:t},showLoading:!0,needReset:!0,success:this.onSuccess.bind(this),error:this.onSuccess.bind(this)};this.collection.loadData(n)},onSuccess:function(e){e.data!=undefined&&($(".logsender-office").text("快递公司 ："+e.data.sendUnitInfo.unitName),$(".logiticsIdItem").text("运单号 ："+e.data.logisInfo.code),$(".logiticsStateItem").text("状态 ："+e.data.logisInfo.status),this.collection.reset(e.data.nodeList))}})}),define("text!pages/logiticsDetail.json",[],function(){return'{\n  "template":"logiticsDetail.html",\n	"type": "logiticsDetail",\n    "header": {\n      "title": "物流中心",\n      "items": [{\n      "type": "link",\n      "icon": "header-icon-back icomoon-back",\n      "pull": "left",\n      "event": "back"\n      },{\n      "type": "link",\n      "icon": "header-icon-menu icomoon-moremore",\n      "pull": "right",\n      "event": "menuMore"\n      }]\n    },\n    "components" : [\n    {\n      "type": "LogiticListView",\n      "id" : "LogiticListView",\n      "template": "logiticsdetail.html",\n      "collection": "logiticsCollection"\n    },\n    {\n      "id": "SearchMidPageView",\n      "type": "SearchMidPageView"\n    },\n    {\n      "id": "PopupMenu",\n      "type": "PopupMenu"\n    }]\n}\n'}),define("text!pages/message-detail.html",[],function(){return'<div class=\'mc-page\'>\n  <header class="headerbox">\n    <div class="left-right nav-left goback">\n      <span class="icomoon icomoon-back"></span>\n    </div>\n    <div class=\'mid\'>\n      <span class="common-title">消息详情</span>\n    </div>\n    <div class="left-right nav-right header-menu">\n      <span class="icomoon icomoon-moremore"></span>\n    </div>\n  </header>\n  <div class="padding-top-view"></div>\n  <div class=\'mc-detail-body\'>\n    <div class="mc-detail-title">\n      <div class=\'mc-name\'></div>\n      <div class=\'mc-time\'></div>\n    </div>\n    <div class=\'mc-desc-detail\'></div>\n  </div>\n\n</div>\n<div>\n  <component id="PopupMenu"/>\n  <component id="SearchMidPageView"/>\n</div>\n'}),define("pages/message-detail",["./PageView"],function(e){return e.extend({type:"message-detail",events:{"click .icomoon-back":"onBack","click .icomoon-moremore":"menuMore"},data:null,initialize:function(){this.listenTo(this.findComponent("PopupMenu"),"toSearch",this.toSearch.bind(this))},onResume:function(){e.prototype.onResume.apply(this,arguments),this.data=window.app.msgData.attributes,this.updateUI()},updateUI:function(){this.data&&(this.$(".mc-name").text(this.data.messageTitle),this.$(".mc-time").text(this.data.messageTime),this.$(".mc-desc-detail").text(this.data.messageContent))},menuMore:function(e){this.findComponent("PopupMenu").show()},toSearch:function(e){this.findComponent("SearchMidPageView").show()},onBack:function(){window.history.back()}})}),define("text!pages/message-detail.json",[],function(){return'{\n  "type":"message-detail",\n  "template":"message-detail.html",\n  "components":[\n    {\n      "id": "PopupMenu",\n      "type": "PopupMenu"\n    },\n    {\n      "id": "SearchMidPageView",\n      "type": "SearchMidPageView"\n    }\n  ]\n}\n'}),define("text!pages/message-setting.html",[],function(){return"<div class='meset-item meset-jhxxtz'>\n  <div>接收消息通知</div>\n  <div class='meset-toggle meset-toggle-selected'></div>\n</div>\n<div id='msset-wltz' data-check='true' class='meset-item meset-item-type msset-wltz meset-item-checked'><div class='msset-checkbox'></div><span>物流通知</span>\n</div>\n<div id='msset-spdd' data-check='true' class='meset-item meset-item-type meset-item-checked'><div class='msset-checkbox'></div>商品订单消息</div>\n<div id='msset-hytz' data-check='true' class='meset-item meset-item-type meset-item-checked'><div class='msset-checkbox'></div>会员通知</div>\n<div id='msset-cxtz' data-check='true' class='meset-item meset-item-type meset-item-checked'><div class='msset-checkbox'></div>促销通知</div>\n<div>\n  <component id=\"PopupMenu\"/>\n</div>\n"}),define("pages/message-setting",["./PageView"],function(e){return e.extend({events:{"click .header-icon-back":"onBack","click .icomoon-moremore":"menuMore","click .meset-toggle":"isReceiveMessage","click #msset-hytz":"hytzClick","click #msset-cxtz":"cxtzClick","click #msset-spdd":"spddClick","click #msset-wltz":"wlClick"},initialize:function(){this.listenTo(this.findComponent("PopupMenu"),"toSearch",this.toSearch.bind(this))},hytzClick:function(e){var t=e.target;if(!t.getAttribute("data-check")){t=t.parentNode;if(!t.getAttribute("data-check"))return}t.classList.contains("meset-item-checked")?t.classList.remove("meset-item-checked"):t.classList.add("meset-item-checked")},cxtzClick:function(e){var t=e.target;if(!t.getAttribute("data-check")){t=t.parentNode;if(!t.getAttribute("data-check"))return}t.classList.contains("meset-item-checked")?t.classList.remove("meset-item-checked"):t.classList.add("meset-item-checked")},spddClick:function(e){var t=e.target;if(!t.getAttribute("data-check")){t=t.parentNode;if(!t.getAttribute("data-check"))return}t.classList.contains("meset-item-checked")?t.classList.remove("meset-item-checked"):t.classList.add("meset-item-checked")},wlClick:function(e){var t=e.target;if(!t.getAttribute("data-check")){t=t.parentNode;if(!t.getAttribute("data-check"))return}t.classList.contains("meset-item-checked")?t.classList.remove("meset-item-checked"):t.classList.add("meset-item-checked")},isReceiveMessage:function(e){e.target.classList.contains("meset-toggle-selected")?(e.target.classList.remove("meset-toggle-selected"),$(".meset-item-type").hide()):(e.target.classList.add("meset-toggle-selected"),$(".meset-item-type").show())},menuMore:function(e){this.findComponent("PopupMenu").show()},toSearch:function(e){this.findComponent("SearchMidPageView").show()},render:function(){return e.prototype.render.apply(this,arguments),this},onBack:function(){window.history.back()},onResume:function(){this.toggleBar&&this.toggleBar("hide"),this.$(".bar").show()}})}),define("text!pages/message-setting.json",[],function(){return'{\n  "template":"message-setting",\n  "type": "message-setting",\n  "header": {\n    "title": "消息设置",\n    "items": [{\n      "type": "link",\n      "icon": "header-icon-back icomoon-back",\n      "pull": "left",\n      "event": "back"\n    },{\n      "type": "link",\n      "icon": "header-icon-menu icomoon-moremore",\n      "pull": "right",\n      "event": "menuMore"\n      }]\n  },\n  "components": [\n    {\n      "id": "PopupMenu",\n      "type": "PopupMenu"\n    }\n\n  ]\n}\n'}),define("text!pages/messageCenter.html",[],function(){return'<div class=\'mc-page\'>\n  <header class="headerbox">\n    <div class="left-right nav-left goback">\n      <span class="icomoon icomoon-back"></span>\n    </div>\n    <div class=\'mid\'>\n      <span class="common-title">消息中心</span>\n    </div>\n    <div class="left-right nav-right header-menu">\n      <span class="icomoon icomoon-moremore"></span>\n    </div>\n  </header>\n  <div class="padding-top-view"></div>\n  <div class=\'mc-body\'>\n    <component id="mc-list"/>\n  </div>\n  <div class=\'mc-footer\'>\n    <!-- <button class=\'mc-setting\'>设 置</button> -->\n    <button class=\'mc-clear\'>清 除</button>\n  </div>\n</div>\n<div>\n  <component id="PopupMenu"/>\n  <component id="SearchMidPageView"/>\n</div>\n'}),define("pages/messageCenter",["./PageView","require"],function(e,t){return e.extend({events:{"click .icomoon-back":"onBack","click .icomoon-moremore":"menuMore","click .mc-setting":"goSetting","click .mc-clear":"clear","click .mc-row":"itemClick"},listView:null,clearModel:null,initialize:function(){this.listenTo(this.findComponent("PopupMenu"),"toSearch",this.toSearch.bind(this)),this.listView=this.findComponent("mc-list")},clear:function(){var e=this;if(this.$el.find(".mc-row").length==0){library.Toast("没有消息可删除！");return}if(!this.clearModel){var n=t("../models/BaseModel");this.clearModel=new n}var r=window.application.getUserInfo();library.MessageBox("提示信息","确认清空所有消息吗？",[{leftText:"确定",callback:function(){e.clearModel.loadData({path:"/clearMessage",type:"POST",needReset:!1,data:{userId:r.userid},success:e.clearSuccess.bind(e),error:e.clearError.bind(e)})}},{rightText:"取消",callback:function(){}}])},clearSuccess:function(){$(".mc-row").remove(),library.Toast("成功清空所有消息！")},clearError:function(){},goSetting:function(){var e="#my-navigate/usersetting";Backbone.history.navigate(e,{trigger:!0})},onListViewRowClick:function(e){},itemClick:function(e){var t=$(e.currentTarget).index(),n=this.listView.collection.models[t];window.app.msgData=n,Backbone.history.navigate("#my-navigate/message-detail",{trigger:!0})},menuMore:function(e){this.findComponent("PopupMenu").show()},toSearch:function(e){this.findComponent("SearchMidPageView").show()},render:function(){return e.prototype.render.apply(this,arguments),this},onBack:function(){window.history.back()},onResume:function(){this.toggleBar&&this.toggleBar("hide");var e=window.application.getUserInfo();this.findComponent("mc-list").collection.loadData({path:"/getMessageList",type:"POST",needReset:!1,data:{userId:e.userid,index:1,size:10},success:this.loadSuccess.bind(this),error:this.loadError.bind(this)})},loadSuccess:function(e){$(".mc-row").remove(),this.findComponent("mc-list").collection.set(e.data)},loadError:function(){}})}),define("text!pages/messageCenter.json",[],function(){return'{\n  "template":"messageCenter.html",\n  "type": "messageCenter",\n  \n  "components": [\n    {\n      "id": "PopupMenu",\n      "type": "PopupMenu"\n    },\n    {\n      "id": "SearchMidPageView",\n      "type": "SearchMidPageView"\n    },\n    {\n      "type": "ListView",\n      "id":"mc-list",\n      "collection": "MessageCenterCollection",\n      "template": "messagecenterlistview.html"\n    }\n  ]\n}\n'}),define("text!pages/modify-pwd.html",[],function(){return'<div class="login-page-view pwd-change">\n    <header class="headerbox" style="position: relative">\n        <div class="left-right nav-left goback">\n            <span class="icomoon icomoon-back"></span>\n        </div>\n        <div class=\'mid\'>\n            <span class="common-title">修改密码</span>\n        </div>\n        <div class="left-right nav-right">\n\n        </div>\n    </header>\n    <div class="login-view-normal">\n        <div class="input-pwddiv" id="first-pwddiv">\n            <input class="input-pwd pwd-old" type="password" placeholder="请输入您的原密码" oninput="self.newpwdChange()"/>\n            <span class="pwd-old-switch" onclick="self.pwdTypeChange(1)"><span id="eye1" class="icomoon-conceal"></span></span>\n        </div>\n        <div style="clear: both"></div>\n    </div>\n    <div class="login-view-normal">\n        <div class="input-pwddiv">\n            <input class="input-pwd pwd-new" type="password" placeholder="请输入您的新密码" oninput="self.oldpwdChange()"/>\n            <span class="pwd-old-switch" onclick="self.pwdTypeChange(2)"><span id="eye2" class="icomoon-conceal"></span></span>\n        </div>\n    </div>\n    <div>\n        <button class="btnNext theme-border-color-contrast theme-backgorund-color-contrast" disabled onclick="self.btnNext()">下一步</button>\n    </div>\n\n</div>\n'}),define("pages/modify-pwd",["require","./PageView"],function(e,t){return t.extend({defaults:{toastTime:null},route:function(e){t.prototype.route.apply(this,arguments)},events:{"click .goback":"onBack","click #switchView":"switchClick","click #switchView2":"switch2Click","click .psw-get-code":"getCode","click .modifyPsw":"modifyPsw"},initialize:function(e){t.prototype.initialize.apply(this,arguments)},sessionID:null,checkCode:null,getCode:function(){var t=e("../models/BaseModel"),n=new t,r=this,i={path:"/getModifyCheckCode",type:"POST",data:{userPhone:JSON.parse(localStorage.getItem("userinfo")).phoneNumber},showLoading:!0,success:function(e){e.status=="0"?(r.sessionID=e.data.sessionId,r.checkCode=e.data.checkCode):(r.sessionID=null,alert("获取失败"))},error:function(){r.sessionID=null,alert("获取失败")}};n.loadData(i)},modifyPsw:function(){var t=this;if(!this.sessionID){alert("请输入验证码");return}var n=e("../models/BaseModel"),r=new n,i={path:"/resetPassword",type:"POST",data:{userPhone:JSON.parse(localStorage.getItem("userinfo")).phoneNumber,sessionId:this.sessionID,password:"222222"},showLoading:!0,success:function(e){t.sessionID=null,console.log(e)},error:function(){alert("获取失败")}};r.loadData(i)},onResume:function(){this.toggleBar&&this.toggleBar("hide"),this.$(".bar").show()},valueChange:function(){var e=this.$el.find(".btnNext"),t=this.$el.find(".pwd-old"),n=this.$el.find(".pwd-new");t.val().trim().length>0&&n.val().trim().length>0?(e.removeAttr("disabled"),e.addClass("active").removeClass("theme-backgorund-color-contrast").removeClass("theme-border-color-contrast").addClass("theme-border-color").addClass("theme-backgorund-color")):(e.attr("disabled","disabled"),e.removeClass("active").addClass("theme-backgorund-color-contrast").addClass("theme-border-color-contrast").removeClass("theme-border-color").removeClass("theme-backgorund-color"))},newpwdChange:function(){this.valueChange()},oldpwdChange:function(){this.valueChange()},pwdTypeChange:function(e){if(e==1)if($(".pwd-old").attr("type")=="password"){$(".pwd-old").attr("type","text");var t=this.$el.find("#eye1");t.removeClass("icomoon-conceal"),t.addClass("icomoon-display")}else{$(".pwd-old").attr("type","password");var t=this.$el.find("#eye1");t.removeClass("icomoon-display"),t.addClass("icomoon-conceal")}else if($(".pwd-new").attr("type")=="password"){$(".pwd-new").attr("type","text");var t=this.$el.find("#eye2");t.removeClass("icomoon-conceal"),t.addClass("icomoon-display")}else{$(".pwd-new").attr("type","password");var t=this.$el.find("#eye2");t.removeClass("icomoon-display"),t.addClass("icomoon-conceal")}},onBack:function(){window.history.back()},btnNext:function(){var t=this.$el.find(".pwd-old").val().trim(),n=this.$el.find(".pwd-new").val().trim();if(!t||!n){library.Toast("必须输入密码");return}if(n.length>4&&n.length<20)if(t!=n){var r={url:window.app.api+"/modifyPassword",type:"POST",needReset:!0,data:{userId:JSON.parse(localStorage.getItem("userinfo")).userid,newPassword:n,oldPassword:t},datatype:"json",success:function(e){console.log(e);if(e.status=="0"){var t="#my-navigate/modify-success";Backbone.history.navigate(t,{trigger:!0})}else library.Toast(e.message)},error:function(){library.Toast("网络错误")}};if(!this.baseModel){var i=e("../models/BaseModel");this.baseModel=new i}this.baseModel.loadData(r)}else library.Toast("相同密码不可以修改");else library.Toast("密码长度必须是大于4位小于20位")}})}),define("text!pages/modify-pwd.json",[],function(){return'{\n  "template":"modify-pwd.html",\n  "type":"modify-pwd"\n  }\n\n\n\n'}),define("text!pages/modify-success.html",[],function(){return'<div class="success-tips">\n<div class="icomoon-choice  theme-color success-img theme-color"></div>\n<div>恭喜您！密码修改成功！</div>\n<div id="countdown">3秒钟后自动跳转>></div>\n</div>\n'}),define("pages/modify-success",["require","./PageView"],function(e,t){return t.extend({defaults:{toastTime:null},initialize:function(e){var n=3;t.prototype.initialize.apply(this,arguments);var r=window.setInterval(function(){n==0?(n=3,window.clearInterval(r),this.goBack()):(n--,this.$el.find("#countdown").html(n+"秒钟后自动跳转>>"))}.bind(this),1e3)},onResume:function(){this.toggleBar&&this.toggleBar("hide"),this.$(".bar").show()},onBack:function(){window.history.back()},goBack:function(){window.localStorage.setItem("userinfo","");var e="#my-navigate/my";Backbone.history.navigate(e,{trigger:!0})}})}),define("text!pages/modify-success.json",[],function(){return'{\n  "template":"modify-success.html",\n  "type":"modify-success",\n  "header":{\n    "title":"修改成功",\n    "items": [{\n      "type": "link",\n      "icon": "header-icon-back icomoon-back",\n      "pull": "left",\n      "event": "back"\n    }]\n  }\n}'}),define("text!pages/my-account.html",[],function(){return'<div class="my-account-view">\n  <header class="headerbox">\n      <div class="left-right nav-left goback">\n          <span class="icomoon icomoon-back"></span>\n      </div>\n      <div class=\'mid\'>\n        <span class="common-title">个人资料</span>\n      </div>\n      <div class="left-right nav-right">\n\n      </div>\n  </header>\n\n  <div class="my-page-view">\n    <div class="my-account-content">\n      <div class="my-head">\n        <div class="item-cell-left account-cell-left">\n          <div class="cell-left-name">\n            头像\n          </div>\n        </div>\n        <div class="item-cell-right head-right-icon item-right-icon icomoon-details"></div>\n        <div class="item-cell-right">\n          <img id="head-image-user-head" class="head-image user-head" src="<%= headurl ? headurl : \'./images/login/person_head.png\' %>" />\n        </div>\n\n      </div>\n      <div class="my-item-cell notify-name">\n            <div class="item-cell-left account-cell-left">\n                <div class="cell-left-name">\n                    昵称\n                </div>\n            </div>\n            <div class="item-cell-right">\n                <div class="item-right-name account-user-name">\n                    <%if(name)%><%=name%>\n                    <%else{ var tips="设置昵称"%><%=tips%><%}%>\n                </div>\n                <div class="item-right-icon icomoon-details"></div>\n            </div>\n      </div>\n\n        <div class="my-item-cell user-account" style="display: none">\n        <div class="item-cell-left account-cell-left">\n          <div class="cell-left-name">\n            昵称\n          </div>\n        </div>\n        <div class="item-cell-right">\n          <div class="item-right-name"><%=account%></div>\n          <div class="item-right-icon icomoon-details"></div>\n        </div>\n      </div>\n\n    </div>\n    <div class="second-row-group">\n\n      <div class="my-item-cell notify-sex">\n        <div class="item-cell-left account-cell-left">\n          <div class="cell-left-name">\n            性别\n          </div>\n        </div>\n        <div class="item-cell-right">\n          <div class="item-right-name account-user-sex">\n              <%if(sex)%><%=sex%>\n              <%else{ var tips="保密"%><%=tips%><%}%>\n          </div>\n          <div class="item-right-icon icomoon-details"></div>\n        </div>\n      </div>\n\n      <div class="my-item-cell item-birthday" style="display:none">\n        <div class="item-cell-left account-cell-left">\n          <div class="cell-left-name">\n            出生日期\n          </div>\n        </div>\n        <div class="item-cell-right">\n          <div class="item-right-name birthday-content">\n              <%if(birthday)%><%=birthday%>\n              <%else{ var tips="设置出生日期"%><%=tips%><%}%>\n          </div>\n          <div class="item-right-icon icomoon-details"></div>\n        </div>\n      </div>\n\n      <div class="my-item-cell item-address">\n          <div class="item-cell-left account-cell-left">\n              <div class="cell-left-name">\n                    我的收货地址\n              </div>\n          </div>\n          <div class="item-cell-right">\n              <div class="item-right-name address-content">\n                    设置收货地址\n              </div>\n              <div class="item-right-icon icomoon-details"></div>\n          </div>\n      </div>\n\n    </div>\n\n    <div class="my-item-cell item-security">\n        <div class="item-cell-left account-cell-left">\n            <div class="cell-left-name">\n                账户安全\n            </div>\n        </div>\n        <div class="item-cell-right">\n            <div class="item-right-icon icomoon-details"></div>\n        </div>\n    </div>\n\n    <div class="bottom-cell-line"></div>\n\n    <input type="date" class="trigger-calendar">\n  </div>\n\n</div>\n'}),define("pages/my-account",["./PageView","require","../libs/canlendar","../libs/wechat"],function(e,t,n,r){return e.extend({events:{"click .my-head":"notifyHead","click .item-birthday":"notifyBirthday","click .item-address":"goSetAddress","click .notify-name":"notifyUserName","click .notify-sex":"notifyUserSex","click .item-security":"goSecurityView","change .trigger-calendar":"changeBirthday","click .goback":"goback"},model:null,canlendarInstance:null,isDialogShow:!1,notifyName:null,notifySex:null,_this:null,initialize:function(){this.toggleBar&&this.toggleBar("hide"),$(".bar").hide();var e=JSON.parse(localStorage.getItem("userinfo"));e.sex==0?e.sex="男":e.sex==1?e.sex="女":e.sex="保密";var n=t("../models/MyAccountModel");this.model=new n({account:e.nickName,name:e.nickName,sex:e.sex,birthday:e.birthday,headurl:e.headImage,phoneNum:e.phoneNumber}),_this=this,this.isWeiXin()&&this.initWechat()},initWechat:function(){var e=t("../models/BaseModel"),n=new e,i={url:window.app.api+"/getSignUrl",type:"POST",needReset:!0,data:{url:document.location.origin+document.location.pathname},success:function(e){e.status=="0"?r.init(e.data):library.Toast("JS-SDK签名失败")},error:function(){library.Toast("JS-SDK签名失败")}};n.loadData(i)},render:function(){return this.$el.empty(),loader.getPageTemplate(this.options.template).then(function(e){var t=this.model?this.model.toJSON():{},n=$(e(t));this.$el.append(n),this.onRender()}.bind(this)),this},notifyNameResult:function(e){var n=t("../models/BaseModel"),r=new n,i=JSON.parse(localStorage.getItem("userinfo")),s={url:window.app.api+"/modifyUserInfo",type:"POST",needReset:!0,data:{userid:i.userid,key:"nickname",value:e},success:function(t){t.status=="0"?(_this.model.set({name:e}),_this.$el.find(".account-user-name").empty().append(e),library.Toast("保存成功")):library.Toast("保存失败")},error:function(){library.Toast("保存失败")}};r.loadData(s),_this.notifyName=null},notifySexResult:function(e){var n=e=="男"?0:1,r=t("../models/BaseModel"),i=new r,s=JSON.parse(localStorage.getItem("userinfo")),o={url:window.app.api+"/modifyUserInfo",type:"POST",needReset:!0,data:{userid:s.userid,key:"gender",value:n},success:function(t){t.status=="0"?(_this.model.set({sex:e}),_this.$el.find(".account-user-sex").empty().append(e)):library.Toast("保存失败")},error:function(){library.Toast("保存失败")}};i.loadData(o),_this.notifySex=null},notifyUserName:function(e){this.notifyName!=null&&this.notifyName.remove();var n=t("../components/NotifyUserInfoView");this.notifyName=new n({name:this.model.get("name"),callback:this.notifyNameResult}),this.$el.append(this.notifyName.render().el),setTimeout(function(){$(".nofity-name-info").addClass("nofity-name-info-show")},100)},notifyUserSex:function(e){this.notifySex!=null&&this.notifySex.remove();var n=t("../components/NotifyUserSexView");this.notifySex=new n({sex:this.model.get("sex"),callback:this.notifySexResult}),this.$el.append(this.notifySex.render().el),setTimeout(function(){$(".nofity-sex-info").addClass("nofity-sex-info-show")},100)},notifyBirthday:function(e){if(this.canlendarInstance==null){var t="年月日",r=this;this.canlendarInstance=(new n.Calendar({container:r.el})).bind("ok",function(e){var t=e.split("-"),n=t[0]+"-"+t[1]+"-"+t[2]+"";r.model.set({birthday:n}),r.$el.find(".birthday-content").empty().append(n)}).setModal(t)}this.canlendarInstance.show(this.model.get("birthday"))},changeBirthday:function(){var e=$(".trigger-calendar").val(),t=this;t.$el.find(".birthday-content").empty().append(e)},isWeiXin:function(){var e=window.navigator.userAgent.toLowerCase();return e.match(/MicroMessenger/i)=="micromessenger"?!0:!1},notifyHead:function(e){if(this.isDialogShow)return;this.uploadDoc="fileToUpload";var t=this;if(typeof cordova!="undefined")param1=[{text:"拍照",type:"button",callback:function(){t.getPhotoFromCamera(),t.isDialogShow=!1}},{text:"从手机相册选择",type:"button",callback:function(){t.getPhotoFromMediaLib(),t.isDialogShow=!1}}];else if(this.isWeiXin())param1=[{text:"从微信相册选择",type:"button",callback:function(){t.getPhotoFromMediaLib(),t.isDialogShow=!1}}];else{param1=[{text:"从文件浏览器选择",type:"button",callback:function(){t.getPhotoFromMediaLib(),t.isDialogShow=!1}}];var n=JSON.parse(localStorage.getItem("userinfo"));$.ajaxSelectFile({url:window.app.api+"/uploadImage?userId="+n.userid,secureuri:!1,fileElementId:this.uploadDoc,dataType:"json",name:"image",onSubmit:function(e,t){if(!t||!/^(jpg|JPG|png|PNG|gif|GIF|jpeg|JPEG)$/.test(t))return library.Toast("您上传的图片格式不对，请重新选择！"),!1},success:function(e,t){library.Toast("上传成功"),$(".actions-modal-button").click()},error:function(e,t,n){library.Toast("上传失败"),$(".actions-modal-button").click()}})}param2=[{text:"取消",type:"button",callback:function(){$("#"+t.uploadDoc).remove(),t.isDialogShow=!1}}],this.isWeiXin()?(t.getPhotoFromMediaLib(),t.isDialogShow=!1):library.ActionSheet(param1,param2)},getPhotoFromCamera:function(){typeof cordova!="undefined"&&navigator&&navigator.camera?navigator.camera.getPicture(this.onSuccess,this.onFail,{quality:100,sourceType:Camera.PictureSourceType.CAMERA,destinationType:Camera.DestinationType.FILE_URI,allowEdit:"YES"}):library.Toast("不支持拍照上传")},getPhotoFromMediaLib:function(){if(typeof cordova!="undefined"&&navigator&&navigator.camera)navigator.camera.getPicture(this.onSuccess,this.onFail,{quality:100,sourceType:Camera.PictureSourceType.PHOTOLIBRARY,destinationType:Camera.DestinationType.FILE_URI,allowEdit:"YES"});else if(this.isWeiXin()){var e=t("../models/BaseModel"),n=new e,i=JSON.parse(localStorage.getItem("userinfo"));r.chooseImage(function(e){library.LoadingBar("正在上传"),r.uploadImage(e.toString(),0,function(e){var t={url:window.app.api+"/uploadImageWfx",type:"POST",needReset:!0,data:{mediaId:e,userId:i.userid},success:function(e){library.DismissLoadingBar();if(e.status=="0"){var t=_this.$el.find("#head-image-user-head");$(t).attr("src",e.data.imageurl)}else library.Toast(e&&e.message?e.message:"上传失败")},error:function(){library.DismissLoadingBar(),library.Toast("网络错误")}};n.loadData(t)})})}},onSuccess:function(e){var t=_this.$el.find(".head-image");$(t).attr("src",e)},onFail:function(e){alert("Failed because: "+e)},goback:function(e){window.history.back()},goSetAddress:function(){var e=JSON.parse(localStorage.getItem("userinfo"));Backbone.history.navigate("#my-navigate/my-address?userid="+e.userid,{trigger:!0})},goSecurityView:function(){Backbone.history.navigate("#my-navigate/mySecurity",{trigger:!0})},onResume:function(){this.toggleBar&&this.toggleBar("hide")}})}),define("text!pages/my-account.json",[],function(){return'{\n  "type": "my-account",\n  "template":"my-account.html"\n}\n'}),define("text!pages/my-address.html",[],function(){return'<div class="my-address-title">\n  <header class="headerbox">\n      <div class=" nav-left header-icon-back address-title-icon">\n          <span class="icomoon icomoon-back"></span>\n      </div>\n      <div class=\'mid\'>\n        <span class="common-title">收货地址</span>\n      </div>\n      <div class="left-right nav-right">\n          <a class="header-icon-menu icomoon icomoon-moremore"></a>\n      </div>\n\n  </header>\n</div>\n\n  <div class="component_container">\n    <component id=\'AddressListView\'/>\n    <div class="blank_block"></div>\n  </div>\n\n  <div class="blank_tips" style="display: none;overflow-x: hidden">\n      <div class="icomoon-withoutaddress blank_tips_ico"></div>\n      <span class="blank_tips_label"> 您还没有收货地址哦 !</span>\n  </div>\n\n  <div class="address-actionBtn-div">\n    <div class="address-actionBtn theme-backgorund-color">新增地址</div>\n  </div>\n<div>\n   <component id=\'SearchMidPageView\'/>\n   <component id="PopupMenu"/>\n </div>\n'}),define("pages/my-address",["./PageView","require"],function(e,t){return e.extend({events:{"click .header-icon-back":"goback","click .address-view-li":"cellClickChange","click .address-actionBtn":"addClick","click .icomoon-moremore":"menuMore"},notifyEdit:null,_this:null,isDefault:null,defaultTarget:null,defaultCurrentTarget:null,addresscollection:null,initialize:function(){this.listenTo(this.findComponent("PopupMenu"),"toSearch",this.toSearch.bind(this)),this.addresscollection=this.findComponent("AddressListView").getCollection()},menuMore:function(e){this.findComponent("PopupMenu").show()},toSearch:function(e){this.findComponent("SearchMidPageView").show()},cellClickChange:function(e){var n=$(e.currentTarget).index(),r=this.findComponent("AddressListView").getCollection(),i=r.models[n],s=i.get("addressId"),o=this;if(e.target.dataset.name==="delete")$(e.currentTarget).attr("default")!="true1"?library.MessageBox("提示信息","删除地址后，将不可恢复，确认删除？",[{leftText:"确定",callback:function(){var e=t("../models/BaseModel"),n=new e,i={url:window.app.api+"/my-address/delete",type:"POST",needReset:!0,data:{addressId:s},datatype:"json",success:function(e){e.status=="0"?(library.Toast("删除成功"),r.loadData()):library.Toast("删除失败，请稍后再试！")},error:function(){}};n.loadData(i)}},{rightText:"取消",callback:function(){}}]):library.Toast("默认地址不能删除");else if(e.target.dataset.name==="edit"){this.notifyEdit!=null&&this.notifyEdit.remove();var u=t("../components/EditAddressView");this.notifyEdit=new u({addressInfo:i.toJSON(),pageStatus:"edit",callback:this.notifySaveResult.bind(this)}),this.$el.append(this.notifyEdit.render().el),this.notifyEdit.$el.addClass("addressEdit-view");var o=this;setTimeout(function(){o.notifyEdit.$el.addClass("addressEdit-view-show")},50)}else if(e.target.dataset.name==="defaultSet"){if($(e.currentTarget).attr("default")=="true")return;var a={url:window.app.api+"/my-address/setDefault",type:"POST",needReset:!0,data:{userId:JSON.parse(localStorage.getItem("userinfo")).userid,addressId:s},datatype:"json",success:function(e){console.log(e),e.status=="0"?(library.Toast("设置默认地址成功",1e3),o.addresscollection.loadData({path:"/my-address/list",type:"POST",needReset:!0,showLoading:!0,data:{userId:application.getUserInfo().userid,index:1,size:100}})):library.Toast(e.message,1e3)},error:function(){}};r.loadData(a)}},addClick:function(e){if(this.addresscollection.length>9){library.Toast("最多建立10个收获地址哦");return}var t=this;this.notifyEdit.$el.addClass("addressEdit-view-show"),this.$(".aName").val(""),this.$(".aLink").val(""),this.$(".aDetail").val(""),$(".province > option:first").attr("selected",!0),$(".city > option:first").attr("selected",!0),$(".area > option:first").attr("selected",!0)},goback:function(e){window.history.back()},onRender:function(){this.findComponent("AddressListView").itemRenderFinished=this.itemRenderFinished.bind(this),this.$el.css("background-color","whitesmoke");if(this.notifyEdit==null){var e=t("../components/EditAddressView");this.notifyEdit=new e({userid:JSON.parse(localStorage.getItem("userinfo")).userid,pageStatus:"add",callback:this.notifySaveResult.bind(this)}),this.$el.append(this.notifyEdit.render().el),this.notifyEdit.$el.addClass("addressEdit-view")}},itemRenderFinished:function(){this.findComponent("AddressListView").getCollection().models.length==0?($(".component_container").hide(),$(".blank_tips").show()):($(".blank_tips").hide(),$(".component_container").show())},onResume:function(){e.prototype.onResume.apply(this,arguments),this.addresscollection.loadData({path:"/my-address/list",type:"POST",needReset:!0,showLoading:!0,data:{userId:application.getUserInfo().userid,index:1,size:100}})},notifySaveResult:function(e){this.addresscollection.loadData(),library.Toast("保存成功",1e3)}})}),define("text!pages/my-address.json",[],function(){return'{\n  "template": "my-address.html",\n  "type":"my-address",\n  "components" : [\n    {\n      "type": "AddressListView",\n      "id" : "AddressListView",\n      "template": "addressListView.html",\n      "collection": "AddressListCollection"\n    },\n    {\n      "id": "SearchMidPageView",\n      "type": "SearchMidPageView"\n    },\n    {\n      "id": "PopupMenu",\n      "type": "PopupMenu"\n    }\n    ]\n}\n'}),define("text!pages/my-customer-detail.html",[],function(){return'\n<div class=" nav-left header-icon-back address-title-icon" style="background: #fff;width: 100%;">\n          <span class="icomoon icomoon-back"></span>\n           <span>售后详情</span>\n      </div>\n\n<div class="customerservice-goods-details" style="background: #fff;height: auto;margin-top: 0.1rem">\n      <div class="goods-details-aid">订单号：<span id="saleDetail" class="sale"></span></div>\n        <div class="goods-details-img">\n            <img src="" alt="">\n        </div>\n        <div class="goods-details-content">\n            <div class="goods-details-title"></div>                           \n            <div class="goods-detail-mid">\n                <div class="goods-details-spec" style="color: red;"></div>                                                    \n                <!-- <span class="goods-details-num" style="margin-left: 3rem;"></span> -->\n                <!-- <span class="goods-details-state" ></span> -->\n            </div>                        \n        </div>\n        <div style="font-size: 0.4rem;">             \n             <div>\n                  <span>申请原因</span>\n                  <span class="reason"></span>\n              </div>\n              <div style="margin-top: 0.4rem;">\n                  <span>申请售后</span>\n                  <span class="applyService"></span>\n                  <span class="dealTime" style="margin-left: 3rem;"></span> \n              </div>\n              <div style="margin-top: 0.4rem;">\n                  <span>申请说明</span>\n                  <span class="applyReason"></span>\n              </div>\n       \n        </div>\n        <div style="font-size: 0.4rem;margin-top: 0.4rem;">\n           <span>处理状态</span>\n        </div>\n        \n	        <div class="status-block" style="display: flex;">\n	                <div style="flex: 1;">\n	                 	<div class="status-point pointzero"></div>\n	                    <div class="status-describe pointzerotext">提出申请</div>\n	                 </div>	\n	                 <div style="flex: 1;">\n	                 	<div class="status-point pointtwo"></div>\n	                    <div class="status-describe  pointtwotext">申请处理中</div>\n	                 </div>\n	        	<!-- 	<div style="flex: 1;">\n	        			 <div class="status-point pointthree"></div>\n	                    <div class="status-describe pointthreetext">驳回</div>\n	        		</div> -->\n	        		<div style="flex: 1;">\n	        			<div class="status-point pointfour" ></div>\n	                    <div class="status-describe pointfourtext">已完成</div>\n	        		</div>                  \n	         </div>\n         <div class="status-cross-line" style="margin-top: -1rem;"></div>\n         <div class="status-description">\n           <div class="status-description-str status-active" style="padding-top: 1rem;padding-bottom: 1rem;font-size: 0.4rem;"></div>\n          </div>\n         \n    </div>\n\n\n\n\n\n\n\n\n\n'}),define("pages/my-customer-detail",["./PageView","require"],function(e,t){return e.extend({events:{"click .nav-left":"goback"},initialize:function(){this.listenTo(this.findComponent("PopupMenu"),"toSearch",this.toSearch.bind(this))},toSearch:function(e){this.findComponent("SearchMidPageView").show()},menuMore:function(e){this.findComponent("PopupMenu").show()},goback:function(){window.history.back()},onResume:function(){var e=this,n=window.application.getQueryString("aid"),r=window.application.getQueryString("imgDetail"),i=t("../models/BaseModel"),s=new i,o={path:"/aftersalesinfo",type:"POST",data:{aid:n},showLoading:!0,needReset:!0,success:function(e){console.log(r);if(e.status==0){$(".dealTime").html(e.data.dealTime),$(".reason").html(e.data.reason),$(".applyReason").html(e.data.applyReason),$(".sale").html(e.data.orderSn),$(".goods-details-img img").attr("src",r),$(".goods-details-title").text(e.data.goodsName),$(".goods-details-spec").text("￥"+e.data.price),$(".goods-details-num").text(e.data.goodsNumber),e.data.afterSaleType=="01"?$(".applyService").text("退货"):e.data.afterSaleType=="02"?$(".applyService").text("换货"):e.data.afterSaleType=="03"&&$(".applyService").text("维修"),$(".pointzero").addClass("now-status"),$(".pointzerotext").css("color","red"),$(".status-description-str").text("正在审核您的申请，请耐心等候");if(e.data.auditstate=="2"||e.data.auditstate=="0")$(".pointzero").addClass("now-status"),$(".pointone").addClass("now-status"),$(".pointtwo").addClass("now-status"),$(".pointzerotext").css("color","red"),$(".pointonetext").css("color","red"),$(".pointtwotext").css("color","red"),$(".status-description-str").text("申请处理中，请耐心等候处理");else if(e.data.auditstate=="4"||e.data.auditstate=="3")$(".pointzero").addClass("now-status"),$(".pointone").addClass("now-status"),$(".pointtwo").addClass("now-status"),$(".pointhree").addClass("now-status"),$(".pointfour").addClass("now-status"),$(".pointzerotext").css("color","red"),$(".pointonetext").css("color","red"),$(".pointtwotext").css("color","red"),$(".pointhreetext").css("color","red"),$(".pointfourtext").css("color","red"),$(".status-description-str").text("您的售后申请已完成");return}library.Toast(e.message)},error:function(){}};s.loadData(o)}})}),define("text!pages/my-customer-detail.json",[],function(){return'{\r\n  "template": "my-customer-detail.html",\r\n  "type":"my-customer-detail"\r\n}'}),define("text!pages/my-customerservice.html",[],function(){return'<div class="my-customerservice-title">\n  <header class="headerbox with-filter">\n      <div class=" nav-left header-icon-back address-title-icon">\n          <span class="icomoon icomoon-back"></span>\n      </div>\n      <div class=\'mid\'>\n        <span class="common-title">我的售后</span>\n      </div>\n      <div class="left-right nav-right">\n          <a class="header-icon-menu icomoon icomoon-moremore"></a>\n      </div>\n  </header>\n<div>\n    <component id=\'SearchMidPageView\'/>\n    <component id="PopupMenu"/>\n</div>\n<div class="my-customerservice-control-view">\n    <div class="segmented-control">\n        <a class=\'control-item segmented-item segmented-item-active theme-color theme-border-color\' data-index=\'0\'>全部</a>\n        <a class=\'control-item segmented-item\' data-index=\'1\'>初始态</a>\n        <a class=\'control-item segmented-item\' data-index=\'3\'>审核通过</a>\n        <a class=\'control-item segmented-item\' data-index=\'4\'>被驳回</a>\n        <a class=\'control-item segmented-item\' data-index=\'5\'>已完成</a>\n    </div>\n</div>\n</div>\n<div class="blank_block_top">\n</div>\n<div class="customerServiceView">\n    <component id="AllCustomerService"/>\n</div>\n<div class="blank_block_top" style="height: 1.3rem;">\n</div>\n'}),define("pages/my-customerservice",["./PageView","require"],function(e,t){return e.extend({events:{"click .header-icon-back":"goback","click .icomoon-moremore":"menuMore","click .segmented-item":"onActive","change .testfile":"fileChange","click .customerservice-goods-details":"customerservice"},initialize:function(){this.listenTo(this.findComponent("PopupMenu"),"toSearch",this.toSearch.bind(this))},toSearch:function(e){this.findComponent("SearchMidPageView").show()},menuMore:function(e){this.findComponent("PopupMenu").show()},goback:function(e){window.history.back()},onResume:function(){e.prototype.onResume.apply(this,arguments);var t=application.getQueryString("list_type");t?this.indexTab=t:this.indexTab=0,this.$(".order-list-title").text("全部订单"),this.initData()},initData:function(){this.listCollection=this.findComponent("AllCustomerService").collection,this.userInfo=window.application.getUserInfo(),this.userInfo||(library.Toast("您尚未登录，请前往登录",2e3),window.history.back()),this.listCollection.queryData={memberId:this.userInfo.userid,resultType:this.indexTab+"",datetype:0,index:1,size:10},$(".add-blank-leaving-icon").removeClass("icomoon-without").removeClass("add-blank-leaving-icon"),$(".add-blank-leaving-words").text("").removeClass("add-blank-leaving-words"),$("#AllOrderListView").show(),this.listCollection.loadData({url:this.listCollection.allServiceUrl,data:this.listCollection.queryData,index:1,size:10,needReset:!0,showLoading:!0,success:this.onSuccess.bind(this),error:this.onError.bind(this)})},onSuccess:function(e){e&&e.status!="0"&&library.Toast("网络错误，请稍后再试",2e3),this.setPageStatus(e)},onError:function(){library.Toast("抱歉，网络错误",2e3),this.setPageStatus(data)},setPageStatus:function(e){if(e.data.list.length==0){this.$el.find(".add-blank-leaving-icon").remove(),this.$el.find(".add-blank-leaving-words").remove(),$("#AllCustomerService").hide();var t=$("<div class = 'icomoon-without add-blank-leaving-icon'></div><div class = 'add-blank-leaving-words'>您还没有相关售后服务哟~</div>");this.$el.find(".customerServiceView").append(t)}else $("#AllCustomerService").show(),$(".icomoon-without").remove(),$(".add-blank-leaving-words").remove();this.setActive(this.indexTab)},setActive:function(e){this.$("a").removeClass("segmented-item-active").removeClass("theme-color").removeClass("theme-border-color"),this.$("a[data-index='"+e+"']").addClass("segmented-item-active").addClass("theme-color").addClass("theme-border-color");var t="#my-navigate/my-customerservice?list_type="+e},customerservice:function(e){var n=t("../models/BaseModel"),r=new n,i=$(e.currentTarget).find("#saleDetail").text(),s=$(e.currentTarget).find("#imgDetail").text();Backbone.history.navigate("#my-navigate/my-customer-detail?aid="+i+"&imgDetail="+s,{trigger:!0})},onActive:function(e){this.$(".control-item").removeClass("segmented-item-active").removeClass("theme-color").removeClass("theme-border-color");var t=$(e.currentTarget);t.addClass("segmented-item-active").addClass("theme-color").addClass("theme-border-color");var n=$(e.currentTarget).attr("data-index");this.indexTab=n,this.listCollection.filterData(n)}})}),define("text!pages/my-customerservice.json",[],function(){return'{\n    "template": "my-customerservice.html",\n    "type": "my-customerservice",\n    "components": [\n        {\n            "type": "AllCustomerService",\n            "id": "AllCustomerService",\n            "collection": "AllServiceListCollection",\n            "template": "all-service-list-item.html",\n            "paging": true,\n            "autoload": false\n        },\n        {\n            "id": "SearchMidPageView",\n            "type": "SearchMidPageView"\n        },\n        {\n            "id": "PopupMenu",\n            "type": "PopupMenu"\n        }\n    ]\n}\n'}),define("text!pages/my-navigate.json",[],function(){return'{\n  "type": "NavigationView",\n  "rootPage" : "my"\n}\n'}),define("text!pages/my-webview.html",[],function(){return'<div class="group-buy-list">\n  <header class="headerbox">\n    <div class="left-right nav-left goback">\n      <span class="icomoon icomoon-back"></span>\n    </div>\n    <div class=\'mid\'>\n      <span class="common-title ad-title"></span>\n    </div>\n  </header>\n\n  <div class="group-buy-list-content">\n    <iframe class="iframe-web" />\n  </div>\n\n</div>\n'}),define("pages/my-webview",["./PageView"],function(e){return e.extend({type:"my-webview",events:{"click .goback":"goback"},onResume:function(){e.prototype.onResume.apply(this,arguments);var t=application.getQueryString("weburl"),n=application.getQueryString("webname");this.$(".iframe-web").attr("src",t),this.$(".ad-title").text(n)},goback:function(){window.history.back()}})}),define("text!pages/my-webview.json",[],function(){return'{\n  "type":"my-webview",\n  "template":"my-webview.html"\n\n}\n'}),define("text!pages/my.html",[],function(){return'<header class="headerbox">\n  <div class="left-right nav-left my-header-left">\n    <span class="icomoon icomoon-setting"></span>\n  </div>\n  <div class=\'mid\'>\n    <span class="common-title">我的</span>\n  </div>\n  <div class="left-right nav-right my-header-right">\n    <span class="icomoon icomoon-talk "></span>\n  </div>\n</header>\n<div class="my-page-view">\n  <div class="person-panel">\n    <div id=\'my-wdl\'>\n      <div class="person-header">\n          <img class="head-image" src="./images/login/person_head.png" />\n      </div>\n      <div class="person-name">\n          <label class="person-name-l">点击登录</label>\n      </div>\n    </div>\n    <div id=\'my-ydl\' class=\'ydl-hide\'>\n        <img id=\'my-tx\' class="head-image" src="./images/login/person_head.png" />\n        <div class=\'my-ydl-detail\'>\n          <div id=\'my-name\'></div>\n          <div class=\'my-huiyuan\'>会员</div>\n        </div>\n        <div class="my-address-manager">管理收货地址</div>\n        <span class="icomoon-details my-address-detail"></span>\n    </div>\n    <div class="table-panel my-collection">\n        <div class="person-ps-left">\n          <a >\n            <div class="person-number">0</div>\n            <div class="person-p">收藏的商品</div>\n          </a>\n        </div>\n        <div class="person-ps-right">\n            <a >\n            <div class="person-number history-num">0</div>\n            <div class="person-p">我的物流</div>\n          </a>\n        </div>\n    </div>\n  </div>\n  <div class="my-item-cell all-order">\n    <div class="item-cell-left">\n      <div class="cell-left-icon icomoon-indent"><span class="path1"></span><span class="path2"></span></div>\n      <div class="cell-left-name">\n        我的订单\n      </div>\n    </div>\n    <div class="item-cell-right">\n      <div class="item-right-name">查看所有订单</div>\n      <div class="item-right-icon icomoon-details"></div>\n    </div>\n  </div>\n  <div class="table-panel wait-table">\n      <div class="wait-ps" id="wait-pay">\n        <a >  \n              <div class="circle-count circle-pay">\n                <span class="wait-pay-count">0</span>\n              </div>\n              <div class="wait-icon icomoon-arrearage"></div>\n              <div class="wait-p">待付款</div>\n          </a>\n      </div>\n\n      <div class="wait-ps" id="wait-send">\n        <a >\n          <div class="circle-count circle-send">\n                <span class="wait-send-count">0</span>\n          </div>\n          <div class="wait-icon icomoon-wait"></div>\n          <div class="wait-p">待发货</div>\n        </a>\n      </div>\n      <div class="wait-ps" id="wait-accept">\n        <a >\n          <div class="circle-count circle-accept">\n                <span class="wait-accept-count">0</span>\n          </div>\n          <div class="wait-icon icomoon-receipt"></div>\n          <div class="wait-p">待收货</div>\n        </a>\n      </div>\n      <div class="wait-ps" id="wait-comment">\n        <a >\n          <div class="circle-count circle-finish">\n                <span class="finish-count">0</span>\n          </div>\n          <div class="wait-icon icomoon-comment"></div>\n          <div class="wait-p">已完成</div>\n        </a>\n      </div>\n  </div>\n\n\n  <div class="my-item-cell block-margin my-memberorders">\n    <div class="item-cell-left">\n      <div class="cell-left-icon icomoon-balance"><span class="path1"></span><span class="path2"></span></div>\n      <div class="cell-left-name">\n        会员订单\n      </div>\n    </div>\n    <div class="item-cell-right">\n      <div class="item-right-name"></div>\n      <div class="item-right-icon icomoon-details"></div>\n    </div>\n    <span class=\'item-cell-value\' id=\'lb_memberorders\'></span>\n  </div>\n     <div class="my-item-cell my-credit-list">\n    <div class="item-cell-left">\n      <div class="cell-left-icon icomoon-balance"><span class="path1"></span><span class="path2"></span></div>\n      <div class="cell-left-name">\n       积分兑换记录\n      </div>\n    </div>\n    <div class="item-cell-right">\n      <div class="item-right-name"></div>\n      <div class="item-right-icon icomoon-details"></div>\n    </div>\n  </div>\n       <div class="my-item-cell my-package-list">\n    <div class="item-cell-left">\n      <div class="cell-left-icon icomoon-balance"><span class="path1"></span><span class="path2"></span></div>\n      <div class="cell-left-name">\n      套餐订单\n      </div>\n    </div>\n    <div class="item-cell-right">\n      <div class="item-right-name"></div>\n      <div class="item-right-icon icomoon-details"></div>\n    </div>\n  </div>\n  <div class="my-item-cell my-credit">\n    <div class="item-cell-left">\n      <div class="cell-left-icon icomoon-integral"><span class="path1"></span><span class="path2"></span></div>\n      <div class="cell-left-name">\n        积分商城\n      </div>\n    </div>\n    <div class="item-cell-right">\n      <div class="item-right-name"></div>\n      <div class="item-right-icon icomoon-details"></div>\n    </div>\n    <span class=\'item-cell-value\' id=\'lb_credit\'></span>\n  </div>\n  <!-- <div class="my-item-cell my-balance">\n    <div class="item-cell-left">\n      <div class="cell-left-icon icomoon-balance"><span class="path1"></span><span class="path2"></span></div>\n      <div class="cell-left-name">\n        余额\n      </div>\n    </div>\n    <div class="item-cell-right">\n      <div class="item-right-name"></div>\n      <div class="item-right-icon icomoon-details"></div>\n    </div>\n    <span class=\'item-cell-value\' id=\'lb_balance\'></span>\n  </div> -->\n \n  \n  <div class="my-item-cell my-coupon my-border-bottom">\n    <div class="item-cell-left">\n      <div class="cell-left-icon icomoon-couple"><span class="path1"></span><span class="path2"></span></div>\n      <div class="cell-left-name">\n        优惠券\n      </div>\n    </div>\n    <div class="item-cell-right">\n      <div class="item-right-name"></div>\n      <div class="item-right-icon icomoon-details"></div>\n    </div>\n    <span class=\'item-cell-value\' id=\'lb_couple\'></span>\n  </div>\n \n  \n  <div class="service-comment my-item-cell block-margin">\n    <div class="item-cell-left">\n      <div class="cell-left-icon icomoon-service">\n       <span class="path1"></span><span class="path2"></span>\n      </div>\n      <div class="cell-left-name">\n        服务评价\n      </div>\n    </div>\n    <div class="item-cell-right">\n      <div class="item-right-name"></div>\n      <div class="item-right-icon icomoon-details"></div>\n    </div>\n  </div>\n\n  <div class="my-item-cell my-customerservice my-border-bottom">\n    <div class="item-cell-left">\n      <div class="cell-left-icon icomoon-aftersale"><span class="path1"></span><span class="path2"></span></div>\n      <div class="cell-left-name">\n        我的售后\n      </div>\n    </div>\n    <div class="item-cell-right">\n      <div class="item-right-name"></div>\n      <div class="item-right-icon icomoon-details"></div>\n    </div>\n  </div>\n  <div style=\'height:2rem\'></div>\n</div>'}),define("pages/my",["./PageView","require"],function(e,t){var n=Backbone.Model.extend({});return e.extend({events:{"click .head-image":"onLoginClick","click .my-account":"onAccount","click .user-security":"onSecurity","click .my-address":"onAddressClick","click .all-order":"onAllOrder","click #wait-pay":"onWaitPay","click #wait-send":"onWaitSend","click #wait-comment":"onWaitComment","click #wait-accept":"onWaitAccept","click .person-ps-left ":"onLeftClick","click .person-ps-right ":"onRightClick","click .my-header-left":"goSetting","click .my-credit":"goCredit","click .my-balance":"goBalance","click .my-coupon":"goCoupon","click .my-memberorders":"goMemberOrders","click .my-header-right":"goMessageCenter","click .my-address-manager":"toAddress","click .my-customerservice":"toMyService","click .my-credit-list":"goCreditlist","click .my-package-list":"goPackagelist"},userinfo:null,userid:null,initialize:function(){},goCreditlist:function(){this.userinfo.get("userid")?Backbone.history.navigate("#my-navigate/credit-list",{trigger:!0}):this.toLogin()},goMessageCenter:function(){this.userinfo.get("userid")?Backbone.history.navigate("#my-navigate/messageCenter",{trigger:!0}):this.toLogin()},goMemberOrders:function(){this.userinfo.get("userid")?Backbone.history.navigate("#my-navigate/myMembersOrders",{trigger:!0}):this.toLogin()},goCoupon:function(){this.userinfo.get("userid")?Backbone.history.navigate("#my-navigate/myCoupon",{trigger:!0}):this.toLogin()},goBalance:function(){this.userinfo.get("userid")?Backbone.history.navigate("#my-navigate/myBalance",{trigger:!0}):this.toLogin()},goSetting:function(){Backbone.history.navigate("#my-navigate/usersetting",{trigger:!0})},goCredit:function(){this.userinfo.get("userid")?Backbone.history.navigate("#my-navigate/credit",{trigger:!0}):this.toLogin()},onLeftClick:function(){this.userinfo.get("userid")?(window.app.collector="goods",Backbone.history.navigate("#my-navigate/goodCollected",{trigger:!0})):this.toLogin()},onRightClick:function(){this.userinfo.get("userid")?(window.app.collector="shop",Backbone.history.navigate("#my-navigate/logistic-list",{trigger:!0})):this.toLogin()},onWaitPay:function(){this.userinfo.get("userid")?Backbone.history.navigate("#my-navigate/order-list?list_type=1",{trigger:!0}):this.toLogin()},onWaitComment:function(){this.userinfo.get("userid")?Backbone.history.navigate("#my-navigate/order-list?list_type=4",{trigger:!0}):this.toLogin()},onWaitSend:function(){this.userinfo.get("userid")?Backbone.history.navigate("#my-navigate/order-list?list_type=2",{trigger:!0}):this.toLogin()},onWaitAccept:function(){this.userinfo.get("userid")?Backbone.history.navigate("#my-navigate/order-list?list_type=3",{trigger:!0}):this.toLogin()},updateUI:function(){var e=this.userinfo.get("myPoints"),t=Math.floor(Number(e)),n=t.toString();this.$("#my-name").text(this.userinfo.get("nickName")||this.userinfo.get("phoneNumber")),this.$(".person-ps-left .person-number").text(this.userinfo.get("myFavCount")),this.$(".person-ps-right .person-number").text(this.userinfo.get("myFootCount")),this.$(".my-huiyuan").text(this.userinfo.get("level")),this.userinfo.get("headImage")&&this.$("#my-tx").attr("src",this.userinfo.get("headImage")),this.$("#lb_credit").text(n||""),this.$("#lb_balance").text(this.userinfo.get("myBalance")||""),this.$("#lb_couple").text(this.userinfo.get("myCoupon")||"")},onLoginClick:function(e){this.userinfo.get("userid")?Backbone.history.navigate("#my-navigate/my-account",{trigger:!0}):this.toLogin()},toLogin:function(){Backbone.history.navigate("#my-navigate/login/login",{trigger:!0})},onAccount:function(e){this.userinfo.get("userid")?Backbone.history.navigate("#my-navigate/my-account",{trigger:!0}):this.toLogin()},onAddressClick:function(e){this.userinfo.get("userid")?Backbone.history.navigate("#my-navigate/my-address?userid="+this.userinfo.get("userid"),{trigger:!0}):this.toLogin()},onSecurity:function(e){this.userinfo.get("userid")?Backbone.history.navigate("#my-navigate/security",{trigger:!0}):this.toLogin()},onAllOrder:function(e){this.userinfo.get("userid")?Backbone.history.navigate("#my-navigate/order-list?list_type=0",{trigger:!0}):this.toLogin()},onRender:function(){this.$(".service-comment").bind("click",this.toEvaluation.bind(this))},onResume:function(){var e=window.location.href.split("?"),t=e[1],r={};if(t){var i=t.split("&");for(var s=0,o=i.length;s<o;s++){var u=i[s].split("=");r[u[0]]=u[1]}}var a=r.wxopenid;this.toggleBar&&this.toggleBar("show"),this.userinfo=new n;var f=application.getUserInfo()||{};this.userinfo.set(f);var l=this;(window.app.temp||window.app.temp==0)&&this.$(".history-num").text(window.app.temp);var l=this;if(this.userinfo.get("userid")||a){var c=a?"/getWxUserInfo":"/getUserInfo",h={userId:l.userinfo.get("userid")};a&&(sessionStorage.setItem("userOpenid",a),h={openId:a}),l.$("#my-ydl").removeClass("ydl-hide").addClass("ydl-show"),l.$("#my-wdl").css({display:"none"}),l.updateUI(l.userinfo),console.log();var p=function(e){if(e.status=="0"){l.$("#my-ydl").removeClass("ydl-hide").addClass("ydl-show"),l.$("#my-wdl").css({display:"none"});var t=e.data;t.userid=t.userid||l.userinfo.get("userid"),application.setLocalStorage("userinfo",e.data),l.userinfo.set(t),l.updateUI()}else l.$("#my-ydl").addClass("ydl-hide").removeClass("ydl-show"),l.$("#my-wdl").css({display:"block"})};this.getData(c,h,p)}else this.$("#my-ydl").addClass("ydl-hide").removeClass("ydl-show"),this.$("#my-wdl").css({display:"block"}),this.$(".wait-pay-count").text("0"),this.$(".wait-accept-count").text("0"),this.$(".wait-send-count").text("0"),this.$(".finish-count").text("0"),this.$(".person-ps-left .person-number").text("0"),this.$(".person-ps-right .person-number").text("0"),this.$("#lb_credit").text("0"),this.$("#lb_balance").text("0"),this.$("#lb_couple").text("0")},getData:function(e,n,r){_this=this;var i={path:e,type:"POST",needReset:!0,data:n,datatype:"json",success:function(e){console.log("获取成功"+e),e.data.waitPay?_this.$(".wait-pay-count").text(e.data.waitPay):_this.$(".wait-pay-count").text("0"),e.data.waitSend?_this.$(".wait-send-count").text(e.data.waitSend):_this.$(".wait-accept-count").text("0"),e.data.waitAccept?_this.$(".wait-accept-count").text(e.data.waitAccept):_this.$(".wait-accept-count").text("0"),e.data.waitComment?_this.$(".finish-count").text(e.data.waitComment):_this.$(".finish-count").text("0"),r(e)},error:function(){console.log("获取失败")}};if(!this.baseModel){var s=t("../models/BaseModel");this.baseModel=new s}this.baseModel.loadData(i)},toAddress:function(){this.userinfo.get("userid")?Backbone.history.navigate("#my-navigate/my-address?userid="+this.userinfo.get("userid"),{trigger:!0}):this.toLogin()},toMyService:function(){this.userinfo.get("userid")?Backbone.history.navigate("#my-navigate/my-customerservice?list_type=0",{trigger:!0}):this.toLogin()},toEvaluation:function(){this.userinfo.get("userid")?Backbone.history.navigate("#my-navigate/service-evalution?userid="+this.userinfo.get("userid"),{trigger:!0}):this.toLogin()},goPackagelist:function(){Backbone.history.navigate("#my-navigate/package-order-list?list_type=1",{trigger:!0})}})}),define("text!pages/my.json",[],function(){return'{\n  "template": "my.html",\n  "type":"my"\n\n}\n'}),define("text!pages/myBalance.html",[],function(){return"<header class='my-bacou-header'>\n  <div class='icomoon-back'></div>\n  <span class=\"myBalance-title\">余额</span>\n  <div class='my-bacou-header-right'>\n  <button class=\"gotodetail\">明细</button>\n  <div class='icomoon-moremore'></div>\n</div>\n</header>\n<div class='my-bacou-body'>\n  <img src='./images/balance/yue_zhuanshi.png'/>\n  <div class='my-bacou-price'>\n    <span>&yen;</span>\n    <span class=\"my-balance-num\">0</span>\n  </div>\n  <button id='goHome'>立即去消费</button>\n</div>\n<div>\n  <component id=\"PopupMenu\"/>\n</div>\n"}),define("pages/myBalance",["./PageView"],function(e){return e.extend({events:{"click .icomoon-back":"onBack","click .icomoon-moremore":"menuMore","click .gotodetail":"gotoDetail","click #goHome":"goHome"},initialize:function(){},goHome:function(){Backbone.history.navigate("#home-navigate",{trigger:!0})},gotoDetail:function(){Backbone.history.navigate("#my-navigate/myBalanceDetail",{trigger:!0})},menuMore:function(e){this.findComponent("PopupMenu").show()},toSearch:function(e){this.findComponent("SearchMidPageView").show()},render:function(){return e.prototype.render.apply(this,arguments),this},onBack:function(){window.history.back()},onResume:function(){this.toggleBar&&this.toggleBar("hide"),this.$(".my-balance-num").text(application.getUserInfo().myBalance)}})}),define("text!pages/myBalance.json",[],function(){return'{\n  "template":"myBalance.html",\n  "type": "myBalance",\n  "components": [\n    {\n      "id": "PopupMenu",\n      "type": "PopupMenu"\n    }\n  ]\n}\n'}),define("text!pages/myBalanceDetail.html",[],function(){return"<header class='my-bacou-header'>\n  <div class='icomoon-back'></div>\n  <span>余额明细</span>\n  <div class='icomoon-moremore'></div>\n</header>\n<div class='my-bacou-list-wrapper'>\n  <component id='mybalancedetail'/>\n</div>\n<div>\n  <component id=\"PopupMenu\"/>\n</div>\n"}),define("pages/myBalanceDetail",["./PageView"],function(e){return e.extend({events:{"click .icomoon-back":"onBack","click .icomoon-moremore":"menuMore"},initialize:function(){},menuMore:function(e){this.findComponent("PopupMenu").show()},toSearch:function(e){this.findComponent("SearchMidPageView").show()},render:function(){return e.prototype.render.apply(this,arguments),this},onBack:function(){window.history.back()},onResume:function(){this.toggleBar&&this.toggleBar("hide"),this.findComponent("mybalancedetail").collection.loadData({path:"/getBalanceDetail",type:"POST",needReset:!1,data:{userId:"010081K073B616AFV1SU",index:1,size:10},success:this.loadSuccess.bind(this),error:this.loadError.bind(this)})},loadSuccess:function(e){this.findComponent("mybalancedetail").collection.set(e.data.balanceList)},loadError:function(){}})}),define("text!pages/myBalanceDetail.json",[],function(){return'{\n  "template":"myBalanceDetail.html",\n  "type": "myBalanceDetail",\n  "components": [\n    {\n      "id": "PopupMenu",\n      "type": "PopupMenu"\n    },\n    {\n      "type": "ListView",\n      "id":"mybalancedetail",\n      "collection": "BalanceDetailCollection",\n      "template": "balancedetaillistview.html"\n    }\n  ]\n}\n'}),define("text!pages/myCoupon.html",[],function(){return'<header class="headerbox">\n    <div class="left-right nav-left goback">\n        <span class="icomoon icomoon-back"></span>\n    </div>\n    <div class=\'mid order-type-selector-btn\'>\n      <span class="common-title title-mid">优惠券</span>\n    </div>\n    <div class="left-right nav-right header-menu">\n      <span class="icomoon icomoon-moremore"></span>\n    </div>\n</header>\n\n<div class=\'my-cou-tabs\'><div data-index=2 class=\'my-cou-tabs-item my-cou-tabs-selected\'>可使用</div><div data-index=1 class=\'my-cou-tabs-item\'>全部</div></div>\n<div class="padding-header-coupon"></div>\n<div class=\'my-cou-list-wrapper\'>\n  <div class="mycoupon-listview">\n    <div class=\'cou-shuoming\'><span>?</span>使用说明</div>\n    <component id=\'mycouponlistview\'/>\n  </div>\n  <div class="unusecoupon-listview">\n    <div class=\'cou-shuoming\'><span>?</span>使用说明</div>\n    <component id=\'unusecouponlistview\'/>\n    <div class="checkout-voercoupon">\n      <div class="overdue-button">\n        <span>查看过期优惠券</span>\n        <span class="icomoon icomoon-details"></span>\n      </div>\n    </div>\n  </div>\n</div>\n<div>\n  <component id="PopupMenu"/>\n  <component id="SearchMidPageView"/>\n</div>\n'}),define("pages/myCoupon",["./PageView","require"],function(e,t){return e.extend({events:{"click .goback":"onBack","click .header-menu":"menuMore","click .my-cou-tabs-item":"tabClick","click .overdue-button":"overdue","click .cou-shuoming":"toDescription","click .getCoupon":"getCoupon"},initialize:function(){this.listenTo(this.findComponent("PopupMenu"),"toSearch",this.toSearch.bind(this))},getCoupon:function(e){var n=t("../models/BaseModel");this.getCouponModel=new n,this.getCouponModel.loadData({path:"/getCoupon",data:{userId:application.getUserInfo().userid,couponid:e.target.getAttribute("data-id")},type:"POST",success:this.getSuccess.bind(this),error:this.getError.bind(this)})},getSuccess:function(){},getError:function(){},overdue:function(){Backbone.history.navigate("#my-navigate/overdueCoupon",{trigger:!0})},tabClick:function(e){var t=e.target.getAttribute("data-index");t&&t!=this.curSelected&&($(".my-cou-tabs-selected").removeClass("my-cou-tabs-selected"),$(e.target).addClass("my-cou-tabs-selected"),this.curSelected=t),this.onActive(this.curSelected)},onActive:function(e){e==1?(this.$(".mycoupon-listview").show(),this.$(".unusecoupon-listview").hide(),this.loadAllcoupon()):(this.$(".mycoupon-listview").hide(),this.$(".unusecoupon-listview").show(),this.loadUnusecoupon())},toDescription:function(){Backbone.history.navigate("/my-navigate/coupdes",{trigger:!0})},loadUnusecoupon:function(){console.log("aaaaa"+application.getUserInfo().userid),this.findComponent("unusecouponlistview").collection.loadData({path:"/getCouponList",type:"POST",needReset:!1,data:{userId:application.getUserInfo().userid,type:"2",index:1,size:100},success:this.loadUnUseSuccess.bind(this),error:this.loadUnUseError.bind(this)})},loadUnUseSuccess:function(e){e.data.couponList.length>0&&this.findComponent("unusecouponlistview").collection.set(e.data.couponList)},loadUnUseError:function(){},curSelected:2,menuMore:function(e){this.findComponent("PopupMenu").show()},toSearch:function(e){this.findComponent("SearchMidPageView").show()},onBack:function(){window.history.back()},onResume:function(){this.toggleBar&&this.toggleBar("hide"),this.onActive(this.curSelected),this.findComponent("mycouponlistview").collection.loadData({path:"/getCouponList",type:"POST",needReset:!1,data:{userId:application.getUserInfo().userid,type:"0",index:1,size:10},success:this.loadSuccess.bind(this),error:this.loadError.bind(this)})},loadAllcoupon:function(){this.findComponent("mycouponlistview").collection.loadData({path:"/getCouponList",type:"POST",needReset:!1,data:{userId:application.getUserInfo().userid,type:"0",index:1,size:10},success:this.loadSuccess.bind(this),error:this.loadError.bind(this)})},loadSuccess:function(e){this.findComponent("mycouponlistview").collection.add(e.data.couponList)},loadError:function(){}})}),define("text!pages/myCoupon.json",[],function(){return'{\n  "type": "myCoupon",\n  "template": "myCoupon.html",\n  "components": [\n    {\n      "id": "PopupMenu",\n      "type": "PopupMenu"\n    },\n    {\n      "id": "SearchMidPageView",\n      "type": "SearchMidPageView"\n    },\n    {\n      "type": "ListView",\n      "id":"mycouponlistview",\n      "collection": "CouponCollection",\n      "template": "couponlistview.html",\n      "paging":true,\n      "allDataLoaded":false\n    },\n    {\n      "type": "ListView",\n      "id":"unusecouponlistview",\n      "collection": "CouponCollection1",\n      "template": "unusecouponlistview.html"\n    }\n  ]\n}\n'}),define("text!pages/myHistory.html",[],function(){return'<div class="position-top-blank">\n<header class="headerbox my-history-head">\n      <div class=" nav-left header-icon-back address-title-icon">\n          <span class="icomoon icomoon-back"></span>\n      </div>\n      <div class=\'mid\'>\n        <span class="common-title">我的物流</span>\n      </div>\n      <div class="left-right nav-right history-clear">\n      </div>\n</header>\n\n</div>\n<div class="my-history-view">\n	<component id="HistoryView"/>\n</div>\n'}),define("pages/myHistory",["./PageView","require"],function(e,t){return e.extend({events:{"click .header-icon-back":"goback","click .filters-item":"select","click .history-clear":"clear","click .goods-collector-li":"toDetail"},collection:null,onRender:function(){this.userInfo=window.application.getUserInfo(),this.$(".default-item").addClass("theme-color"),this.collection=this.findComponent("HistoryView").collection},goback:function(e){window.history.back()},clear:function(e){this.$("#HistoryView").remove(),window.app.temp=0},onResume:function(){window.app.temp=3,this.toggleBar&&this.toggleBar("hide"),this.initData();var e=t("../models/BaseModel"),n=new e,r={path:"/getScanRecord",type:"POST",data:{userId:"010091K0W3GX13W9DBHJ",index:1,size:10},showLoading:!0,needReset:!0,success:function(e){console.log(e)},error:function(){}};n.loadData(r)},initData:function(){var e=application.getUserInfo();if(!e)return;var t={path:"/getLogisticList",type:"POST",data:{userId:e.userid},showLoading:!0,needReset:!0};this.collection.loadData(t)},toDetail:function(e){}})}),define("text!pages/myHistory.json",[],function(){return'{\n    "template": "myHistory.html",\n    "type": "myHistory",\n    "components": [{\n        "type": "HistoryView",\n        "id": "HistoryView",\n        "template": "history-collection.html",\n        "autoload": false,\n        "collection": "HistoryCollection"\n    }]\n}\n'}),define("text!pages/myMembersOrders.html",[],function(){return'<header class="headerbox">\n    <div class="left-right nav-left goback">\n        <span class="icomoon icomoon-back"></span>\n    </div>\n    <div class=\'mid\'>\n        <span class="common-title">会员订单</span>\n    </div>\n    <div class="left-right nav-right header-menu">\n        <span class="icomoon icomoon-moremore"></span>\n    </div>\n</header>\n<div class="myMemberOrderbody">\n    <div class="segmented-control">\n        <a class=\'control-item segmented-item\' data-index=\'1\'>近一个月</a>\n        <a class=\'control-item segmented-item\' data-index=\'2\'>近三个月</a>\n        <a class=\'control-item segmented-item\' data-index=\'3\'>近一年</a>\n        <a class=\'control-item segmented-item more-item\' data-index=\'4\'>更多<span class="icomoon icomoon-pulldown" data-index=\'4\'></span></a>\n    </div>\n</div>\n<div>\n  <component id="PopupMenu"/>\n</div>\n\n<div class="full-mask"></div>\n<div style="margin-top: 1.4rem;">\n    <component id="myMembersOrderList" />\n</div>\n'}),define("pages/myMembersOrders",["./PageView","require","../libs/canlendar"],function(e,t,n){return e.extend({events:{"click .goback":"onBack","click .icomoon-moremore":"menuMore","click .member-order-start":"startTimeSelect","click .member-order-end":"endTimeSelect","click .time-filter-btn":"timeFilterList","click a":"setActive"},orderSelect:null,model:null,calendarInstance0:null,calendarInstance1:null,startFlag:0,endFlag:0,initialize:function(){},menuMore:function(e){this.findComponent("PopupMenu").show()},setActive:function(e){var t=$(e.target),n=t.attr("data-index");if(n==4)this.showMore();else{this.$(".control-item").removeClass("theme-color"),t.addClass("theme-color");var r=new Date,i=this.zeroAdd(r.getMonth()+1),s=r.getFullYear()+"-"+i+"-"+this.zeroAdd(r.getDate());console.log(n);var o={};switch(n){case"1":var u=this.addDate(r,-30);o={userId:application.getUserInfo().userid,startTime:u,endTime:s};break;case"2":var u=this.addDate(r,-90);o={userId:application.getUserInfo().userid,startTime:u,endTime:s};break;case"3":var u=this.addDate(r,-365);o={userId:application.getUserInfo().userid,startTime:u,endTime:s}}this.listCollection.filterData(o)}},showMore:function(){this.orderSelect!=null&&this.orderSelect.remove();var e=t("../components/MembersOrderSelectView");this.orderSelect=new e,this.$el.append(this.orderSelect.render().el),setTimeout(function(){$(".full-mask").show(),$(".member-order-view").addClass("member-order-view-show")},100)},toSearch:function(e){this.findComponent("SearchMidPageView").show()},startTimeSelect:function(e){var t=$(e.target);if(this.canlendarInstance0==null){var r="年月日",i=this;this.canlendarInstance0=(new n.Calendar({container:i.el})).bind("ok",function(e){var n=e.split("-"),r=n[0]+"-"+n[1]+"-"+n[2]+"";t.text(r),t.empty().append(r),i.startFlag=1}).setModal(r)}this.canlendarInstance0.show(t.innerHTML)},endTimeSelect:function(e){var t=$(e.target);if(this.canlendarInstance1==null){var r="年月日",i=this;this.canlendarInstance1=(new n.Calendar({container:i.el})).bind("ok",function(e){var n=e.split("-"),r=n[0]+"-"+n[1]+"-"+n[2]+"";t.text(r),t.empty().append(r),i.endFlag=1}).setModal(r)}this.canlendarInstance1.show(t.innerHTML)},timeFilterList:function(){console.log("end="+this.endFlag),console.log("start="+this.startFlag);if(this.endFlag==1&&this.startFlag==1){var e=$(".member-order-start").text(),t=$(".member-order-end").text(),n=Date.parse(new Date(e)),r=Date.parse(new Date(t));if(n>r){library.Toast("开始时间必须早于结束时间！");return}var i={};i={userId:application.getUserInfo().userid,startTime:e,endTime:t},this.listCollection.filterData(i),$(".member-order-view").removeClass("member-order-view-show"),setTimeout(function(){$(".member-order-view").remove()},300),$(".full-mask").hide(),this.canlendarInstance1=null,this.canlendarInstance0=null,this.endFlag=0,this.startFlag=0}else library.Toast("请选择开始日期和结束日期！")},render:function(){return e.prototype.render.apply(this,arguments),this},onBack:function(){window.history.back()},onResume:function(){e.prototype.onResume.apply(this,arguments),this.toggleBar&&this.toggleBar("hide"),this.initData()},addDate:function(e,t){var n=new Date(e);n.setDate(n.getDate()+t);var r=n.getMonth()+1;return n.getFullYear()+"-"+this.zeroAdd(r)+"-"+this.zeroAdd(n.getDate())},zeroAdd:function(e){return e<10?"0"+e:e},initData:function(){this.listCollection=this.findComponent("myMembersOrderList").collection,this.userInfo=window.application.getUserInfo(),this.userInfo||(library.Toast("您尚未登录，请前往登录",2e3),window.history.back());var e=new Date,t=this.zeroAdd(e.getMonth()+1),n=e.getFullYear()+"-"+t+"-"+this.zeroAdd(e.getDate()),r=this.addDate(e,-30);this.listCollection.queryData={userId:application.getUserInfo().userid,startTime:r,endTime:n},$("#myMembersOrderList").show(),this.listCollection.loadData({url:this.listCollection.allServiceUrl,data:this.listCollection.queryData,needReset:!0,showLoading:!0,success:this.onSuccess.bind(this),error:this.onError.bind(this)})},onSuccess:function(e){e&&e.status!="0"&&library.Toast("网络错误，请稍后再试",2e3),this.setPageStatus()},onError:function(){library.Toast("抱歉，网络错误",2e3),this.setPageStatus()},setPageStatus:function(){if(!this.listCollection.length||this.listCollection.length==0){$("#myMembersOrderList").hide();var e=$("<div class = 'icomoon-without add-blank-leaving-icon'></div><div class = 'add-blank-leaving-words'>您还没有相关售后服务哟~</div>");$(".table-view").append(e)}else $("#myMembersOrderList").show(),$(".icomoon-without").remove(),$(".add-blank-leaving-words").remove()}})}),define("text!pages/myMembersOrders.json",[],function(){return'{\n    "template": "myMembersOrders.html",\n    "type": "myMembersOrders",\n    "components": [\n        {\n            "type": "myMembersOrderList",\n            "id": "myMembersOrderList",\n            "collection": "myOrderListCollection",\n            "template": "my-members-list-item.html",\n            "paging": true,\n            "autoload": false\n        },\n        {\n            "id": "PopupMenu",\n            "type": "PopupMenu"\n        }\n    ]\n}\n'}),define("text!pages/mySecurity.html",[],function(){return'<div class="security-select-view">\n    <header class="headerbox">\n        <div class="left-right nav-left goback">\n            <span class="icomoon icomoon-back"></span>\n        </div>\n        <div class=\'mid\'>\n            <span class="common-title">账户安全</span>\n        </div>\n        <div class="left-right nav-right">\n\n        </div>\n    </header>\n    <div class="blank-top"></div>\n    <div class="security-select-group">\n        <div class="security-select-row pwd-security">\n            <div class="row-left">修改登录密码</div>\n            <div class="row-right"><span class="icomoon-details"></span></div>\n        </div>\n        <div class="security-select-row phone-security">\n            <div class="row-left">修改绑定手机</div>\n            <div class="row-right"><span class="icomoon-details"></span></div>\n        </div>\n    </div>\n</div>'}),define("pages/mySecurity",["require","./PageView"],function(e,t){return t.extend({events:{"click .goback":"goBack","click .pwd-security":"goModifyPwd","click .phone-security":"goBindPhone"},onRender:function(){this.userinfo=application.getUserInfo(),this.userinfo.phoneNumber="123"},goModifyPwd:function(){Backbone.history.navigate("#my-navigate/modify-pwd",{trigger:!0})},goBindPhone:function(){this.userinfo.phoneNumber?Backbone.history.navigate("#my-navigate/bind-mobile",{trigger:!0}):Backbone.history.navigate("#my-navigate/bind-new",{trigger:!0})},goBack:function(){window.history.back()}})}),define("text!pages/mySecurity.json",[],function(){return'{\n  "type": "mySecurity",\n  "template": "mySecurity.html"\n}'}),define("text!pages/myback.html",[],function(){return'<header class="headerbox headerOnTop">\n    <div class="left-right nav-left goback">\n        <span class="icomoon icomoon-back"></span>\n    </div>\n    <div class=\'mid\'>\n        <span class="common-title">支付成功</span>\n    </div>\n    <div class="left-right nav-right">\n\n    </div>\n</header>\n<ul class="order-completion-ul">\n    <li><img src="images/order/order-success.png"></li>\n    <li>支付成功，请您耐心等待订单后续通知</li>\n</ul>\n<div class="order-button-count">\n     <a href="javascript:void(0)" class="order-button-detail">订单详情</a>\n     <a href="javascript:void(0)" class="order-button-share">继续购买</a>\n</div>'}),define("pages/myback",["./PageView","require"],function(e,t){return e.extend({events:{"click .order-button-detail":"onBack","click .order-button-share":"onSave"},onBack:function(){var e=window.application.getQueryString("orderId");console.log(e.indexOf("#")),e=e.substring(0,e.indexOf("#")),window.location.href="index.html#my-navigate/order-detail?orderId="+e},onSave:function(){window.location.href="index.html"}})}),define("text!pages/myback.json",[],function(){return'{\n  "template": "myback.html",\n  "type":"myback"\n\n}\n'}),define("text!pages/order-detail.html",[],function(){return'<header class="headerbox" >\n  <div class="left-right nav-left goback">\n      <span class="icomoon icomoon-back"></span>\n  </div>\n  <div class=\'mid\'>\n    <span class="common-title">订单详情</span>\n  </div>\n  <div class="left-right nav-right header-menu">\n    <span class="icomoon icomoon-moremore"></span>\n  </div>\n</header>\n<div class="order-detail" style="display: block;">\n <div class="order-detail-success-time"></div>\n <!-- 团购众筹订单的提示 -->\n <div style=\'display:none\' class="order-detail-success-group-cf"> 交易成功！</div>\n <component id="LogisticInfoView" />\n <component id="AddressInOrderView" />\n <div class="shop-info">\n   <component id="OrderDetailListView"/>\n   <div class="order-fee">\n     <div class="order-delivery-fee">\n       <span class="order-delivery-fee-des">运费</span>\n       <span class="order-delivery-fee-fee"><span class="fee-unit">¥</span><span class="order-delivery-fee-number">0</span>\n     </div>\n     <div class="order-delivery-fee">\n       <span class="order-delivery-fee-des">积分抵款</span>\n       <span class="order-delivery-fee-fee"><span class="fee-unit">¥</span><span class="order-points-fee-number">0</span>\n     </div>\n     <div class="order-product-fee">\n       <span class="order-product-fee-des">合计</span>\n       <span class="order-product-fee-fee"><span class="fee-unit">¥</span><span class="order-product-fee-number">0</span>\n     </div>\n   </div>\n </div>\n\n\n <div class="pay-send-selector">\n   <div class="pay-method psb-selector">\n     <span class="pay-method-des psb-selector-des">支付方式</span>\n     <span class="detail-pay-method-value psb-selector-value-order-detail"></span>\n   </div>\n   <div class="send-method psb-selector">\n     <span class="send-method-des psb-selector-des">配送方式</span>\n     <span class="detail-send-method-value psb-selector-value-order-detail"></span>\n   </div>\n   <div class="bill-order-info psb-selector">\n     <span class="bill-method-des psb-selector-des">发票信息</span>\n     <div class="bill-method-value psb-selector-value"></div>\n   </div>\n </div>\n\n <div class="order-detail-info">\n   <div class="order-info-info">\n     <span class="order-info-des">订单编号：</span>\n     <span class="order-code-value"></span>\n   </div>\n   <div class="order-info-info order-create-time-sub">\n     <span class="order-info-des">创建时间：</span>\n     <span class="create-order-time"></span>\n   </div>\n   <div class="order-info-info order-pay-time-sub">\n     <span class="order-info-des">付款时间：</span>\n     <span class="order-pay-time"></span>\n   </div>\n   <div class="order-info-info order-send-time-sub">\n     <span class="order-info-des">发货时间：</span>\n     <span class="order-send-time"></span>\n   </div>\n   <div class="order-info-info order-success-time-sub">\n     <span class="order-info-des">成交时间：</span>\n     <span class="order-success-time"></span>\n   </div>\n </div>\n\n</div>\n\n<div class="order-bottom-bar" style="display: block;">\n  <a class="order-btm-bar-cell order-operation1 theme-color">去评价</a>\n  <a class="order-btm-bar-cell order-operation2 theme-color">去支付</a>\n  <a class="order-btm-bar-cell order-operation3 theme-color">查看物流</a>\n</div>\n<div >\n<div class="order-detail-nothing"style="margin-top: 8rem; margin-left: 4rem;font-size: 0.6rem;display:none;">\n    <div class="tips-ico"><span style="margin-left: 0.4rem;"class="icomoon-time"></span></div>\n    <div class="tips-label" style="margin-left: -1rem;margin-top: 0.4rem;">网络请求超时</div>\n</div>\n  <component id="PopupMenu"/>\n  <component id="SearchMidPageView"/>\n</div>\n'}),define("pages/order-detail",["./PageView","require"],function(e,t){return e.extend({type:"order-detail",events:{"click .goback":"goback","click .order-link-seller":"telClick","click .logistics":"toLogiDetail","click .order-btm-bar-cell":"orderOperation","click .header-menu":"menuMore","click .customer-service-button":"toSaleService","click .goods-details-listitem":"togoods","click #goods-id":"gogoods"},addressModel:null,logisModel:null,orderInfoModel:null,orderType:null,initialize:function(){this.listenTo(this.findComponent("PopupMenu"),"toSearch",this.toSearch.bind(this))},menuMore:function(e){this.findComponent("PopupMenu").show()},toSearch:function(e){this.findComponent("SearchMidPageView").show()},onResume:function(){e.prototype.onResume.apply(this,arguments),this.$(".address-in-order").hide();var n=t("../models/OrderInfoModel");this.orderInfoModel=new n;var r=application.getQueryString("orderId"),i=application.getQueryString("type");this.orderType=i;var s=application.getUserInfo().userid,o={};i=="1"?o={url:window.app.api+"/getWfxOrderDetail",data:{orderSn:r},showLoading:!0,needReset:!0,success:this.onSuccess.bind(this),error:this.onError.bind(this)}:i=="2"?o={url:window.app.api+"/getPointOrderDetail",data:{orderId:r},showLoading:!0,needReset:!0,success:this.onSuccess.bind(this),error:this.onError.bind(this)}:o={url:this.orderInfoModel.orderInfoUrl,data:{orderId:r,userId:s},showLoading:!0,needReset:!0,success:this.onSuccess.bind(this),error:this.onError.bind(this)},this.orderInfoModel.orderId=r,this.orderInfoModel.loadData(o)},onSuccess:function(e){this.$(".order-detail-success-time").text(e.data.describe),this.setAddressInfo(),this.setOrderType(),this.$(".order-address-icon-right").hide(),this.$(".address-in-order").show(),this.setOrderStatus(),this.setProductInfo(),this.setOrderInfo(),this.$(".send-method-order").hide(),this.setOrderLogistModel(this.orderInfoModel.get("logisticInfo")),$(".order-detail").show(),$(".order-bottom-bar").show(),$(".order-detail-nothing").hide()},setAddressInfo:function(){var e=t("../models/OrderAddressModel"),n=this.orderInfoModel.get("receiveInfo");if(!n)return;this.addressModel=new e(n),this.setAddressModel(this.addressModel)},setOrderLogistModel:function(e){if(e){var n=t("../models/LogisticsModel"),r=new n(e);this.setLogisModel(r)}else this.setLogisModel()},onError:function(e){library.Toast(e.message?e.message:"网络错误！"),$(".order-detail-nothing").show(),setTimeout(function(){window.history.back()},2e3)},initHeaderAnime:function(){var e=this,t=this.$el.find("#order_detail_header"),n=this.$el.find("#order_detail_header_bk");if(!t||!t[0])return;var r=t[0].offsetHeight,i=!1;document.body.addEventListener("touchmove",function(e){var t=r-document.body.scrollTop/4;n.css("opacity",(1-t/r).toString()),i=!0}),document.body.addEventListener("touchend",function(e){i=!1}),window.onscroll=function(e){if(!i){var t=r-document.body.scrollTop/4;n.css("opacity",(1-t/r).toString())}}},setAddressModel:function(e){this.findComponent("AddressInOrderView").setModel(e)},setLogisModel:function(e){this.findComponent("LogisticInfoView").setModel(e)},goback:function(e){window.history.back()},cancelOrder:function(){param=[],leftInfo={leftText:"取消",callback:function(){}},rightInfo={rightText:"确定",callback:this.cancelOrderOk.bind(this)},param.push(leftInfo),param.push(rightInfo),library.MessageBox("取消订单","您确定取消订单吗？",param)},cancelOrderOk:function(){this.updateOrder("cancel")},preparePay:function(){var e=this.orderInfoModel.toJSON();window.app.createOrderResult=e,Backbone.history.navigate("#my-navigate/payMode",{trigger:!0,replace:!0})},payHandle:function(e){e?e.code==0?(library.Toast("支付成功"),this.orderInfoModel.loadData()):library.Toast(e?e.msg:"支付失败"):library.Toast("支付失败")},logisticDetail:function(){var e=application.getUserInfo(),t=application.getQueryString("orderId"),n=application.getQueryString("logisId");Backbone.history.navigate("#my-navigate/logiticsDetail?orderId="+t+"&logisId="+n,{trigger:!0});return},orderOperation:function(e){var t=this.orderInfoModel.get("orderStatus"),n="1",r=this.orderInfoModel.get("productList");r.forEach(function(e){e.isComment=="0"&&(n="0")});var i="",s=$(e.target);t=="2"?s.hasClass("order-operation1")?this.preparePay():s.hasClass("order-operation2")&&this.cancelOrder():t=="3"?s.hasClass("order-operation1")&&this.tuikuan():t=="4"?s.hasClass("order-operation1")?this.logisticDetail():s.hasClass("order-operation2")?this.ensureOrder():s.hasClass("order-operation3")&&library.Toast("功能开发中"):t=="5"?s.hasClass("order-operation1")?n==0?library.Toast("您已经评价过"):this.toComment():s.hasClass("order-operation2")?library.Toast("功能开发中"):s.hasClass("order-operation3")&&this.logisticDetail():t=="6"&&s.hasClass("order-operation1")&&this.buyAgain()},tuikuan:function(){var e=application.getQueryString("orderId");Backbone.history.navigate("#my-navigate/cancel-back-money?orderId="+e,{trigger:!0})},toComment:function(){window.app.waitCommentOrder=this.orderInfoModel,Backbone.history.navigate("#my-navigate/create-comment",{trigger:!0})},setOrderType:function(){var e=this.orderInfoModel.get("orderType"),t=this.orderInfoModel.get("orderStatus");if(e==4)this.$(".order-detail-success-time").hide(),this.$(".order-detail-success-group-cf").show(),t==9?(this.findComponent("PushForYouView").$el.show(),this.$(".order-fee").hide(),this.$("#AddressInOrderView").hide(),this.$("#LogisticInfoView").hide(),this.$(".order-detail-success-group-cf").css({"text-align":"left","padding-left":"15px","padding-top":"18px","line-height":"normal"}),this.$(".order-detail-success-group-cf").html("人数不足，无法成团<div style='font-size:0.3rem;margin-top:0.2rem'>订单已取消，该订单货款会于x天之后退回到您的账户，请您 耐心等待</div>")):this.$(".order-detail-success-group-cf").text("参团成功！"),this.$(".pay-send-selector").hide(),this.$(".order-detail-info").hide();else if(e==5){this.$(".order-detail-success-time").hide(),this.$(".order-detail-success-group-cf").show();var n="无法达到预期目标,无法众筹";this.$(".order-detail-success-group-cf").text("众筹成功！"),this.$(".pay-send-selector").hide(),this.$(".order-detail-info").hide(),this.$(".order-bottom-bar").hide()}else this.$(".order-detail-success-time").show(),this.$(".order-detail-success-group-cf").hide()},setOrderStatus:function(){var e=this.orderInfoModel.get("productList"),t="0";e.forEach(function(e){e.isComment=="1"&&(t="1")});var n=this.orderInfoModel.get("orderStatus"),r="",i=$(".order-operation1"),s=$(".order-operation2"),o=$(".order-operation3");i.show(),s.show(),o.show(),$(".pay-send-selector").show(),this.$(".order-detail").removeClass("wait-send-bottom"),n=="2"?(i.text("立即支付"),s.text("取消订单"),o.hide(),$(".pay-send-selector").hide(),this.$(".order-detail-success-time").text("订单待付款")):n=="1"?(i.hide(),s.hide(),o.hide(),this.$(".order-detail-success-time").text("订单已取消"),this.$(".order-bottom-bar").hide(),this.$(".order-detail").css({bottom:0}),$(".pay-send-selector").hide()):n=="3"?(i.text("申请退款"),s.hide(),o.hide(),this.$(".order-detail-success-time").text("订单待发货")):n=="4"?(o.hide(),i.text("查看物流"),s.text("确认收货"),this.$(".order-detail-success-time").text("订单待收货")):n=="5"?(s.hide(),t=="1"&&(i.text("去评价"),o.hide()),this.$(".order-detail-success-time").text("订单交易成功")):n=="6"?(i.text("再次购买"),s.hide(),o.hide()):(this.$(".order-bottom-bar").hide(),this.$(".order-detail").css({bottom:0}));if(this.orderType=="1"||this.orderType=="2")o.hide(),i.hide(),s.hide()},setProductInfo:function(){var e=this.orderInfoModel.get("productList");for(var t=0;t<e.length;t++)e[t].ogid||(e[t].ogid=""),e[t].specInfo||(e[t].specInfo="");var n=this.orderInfoModel.get("orderStatus");this.$(".order-delivery-fee-number").text(this.orderInfoModel.get("deliveryFee")),this.$(".order-points-fee-number").text(this.orderInfoModel.get("pointFee")),this.orderInfoModel.get("deliveryFee")?this.$(".order-product-fee-number").text((this.orderInfoModel.get("orderFee")+this.orderInfoModel.get("deliveryFee")).toFixed(2)):this.$(".order-product-fee-number").text(this.orderInfoModel.get("orderFee").toFixed(2));var r=this.orderInfoModel.get("items");console.log(e),console.log(this.findComponent("OrderDetailListView").options),this.findComponent("OrderDetailListView").collection.reset(e);var i=e[0].isSupport;i==0&&$(".customer-service-button").removeClass("customer-service-button").addClass("customer-service-button-gray"),n!=5&&this.$(".customer-service").hide()},setOrderInfo:function(){var e=this.orderInfoModel.attributes;this.$(".order-code-value").text(e.orderCode),e.createTime?this.$(".create-order-time").text(e.createTime):this.$(".order-create-time-sub").hide(),e.payTime?this.$(".order-pay-time").text(e.payTime):this.$(".order-pay-time-sub").hide(),e.sendTime?this.$(".order-send-time").text(e.sendTime):this.$(".order-send-time-sub").hide(),e.successTime?this.$(".order-success-time").text(e.successTime):this.$(".order-success-time-sub").hide(),e.payWayInfo&&this.$(".detail-pay-method-value").text(e.payWayInfo.payWayName),e.sendWayInfo&&this.$(".detail-send-method-value").text(e.sendWayInfo?e.sendWayInfo.sendWayName:""),this.setBillInfo(e.billInfo)},setBillInfo:function(e){$(".bill-method-value").empty();if(e&&e.billTitle){var t=$("<div class='bill-result-title'></div>"),n=$("<div class='bill-result-content'></div>"),r=e.billTitle,i=e.billContent;t.append(r),n.append(i),$(".bill-method-value").append(t).append(n)}else $(".bill-method-value").text("无")},goback:function(){window.history.back()},toLogiDetail:function(){var e=application.getUserInfo(),t=application.getQueryString("orderId"),n=application.getQueryString("logisId");Backbone.history.navigate("#my-navigate/logiticsDetail?orderId="+t+"&logisId="+n,{trigger:!0});return},ensureOrder:function(){param=[],leftInfo={leftText:"取消",callback:this.ensureOrderCancel.bind(this)},rightInfo={rightText:"确定",callback:this.ensureOrderOK.bind(this)},param.push(leftInfo),param.push(rightInfo),library.MessageBox("确认收货","您确定已收到货？",param)},ensureOrderOK:function(){this.updateOrder("receive")},ensureOrderCancel:function(){},toSaleService:function(e){var t=this.orderInfoModel.get("orderStatus"),n=this.orderInfoModel.orderId,r=this.$(e.currentTarget).parent().parent().find(".goods-details-ogid").text(),i=this.$(e.currentTarget).parent().parent().find(".goods-details-id").text(),s=this.$(e.currentTarget).parent().parent().find(".goods-details-number").text();s=s.substring(1);var o=this.orderInfoModel.get("productList"),u=o[0].isSupport;console.log(u),u==1&&Backbone.history.navigate("#my-navigate/applyAfterSale?orderId="+n+"&ogid="+r+"&productId="+i+"&number="+s,{trigger:!0})},updateOrder:function(e){var n,r=t("../models/OrderInfoModel"),i=new r,s=window.application.getUserInfo();s||(library.Toast("您尚未登录，请前往登录",2e3),window.history.back());var o;e=="cancel"?(o={userId:s.userid,orderId:this.orderInfoModel.get("orderId")},n=i.cancelOrderUrl):e=="receive"&&(o={orderId:this.orderInfoModel.get("orderId")},n=i.receiveOrderUrl);var u={url:e?n:i.orderInfoUrl,data:o,success:this.updateOrderSuccess.bind(this),error:this.updateOrderCancel.bind(this),showLoading:!0};i.loadData(u)},updateOrderSuccess:function(e){e?(library.Toast(e.message||"操作成功",2e3),this.orderInfoModel.loadData()):library.Toast("操作失败",2e3)},gogoods:function(e){var t=this.$(e.currentTarget).attr("data-goodid");Backbone.history.navigate("#home-navigate/itemdetail?goodsid="+t,{trigger:!0})},togoods:function(e){var t=this.$(e.currentTarget).find(".goods-details-id").text();Backbone.history.navigate("#home-navigate/itemdetail?goodsid="+t,{trigger:!0})},updateOrderCancel:function(){library.Toast("网络出错",2e3)},buyAgain:function(){var e=this.orderInfoModel.get("productList");Backbone.history.navigate("#my-navigate/itemdetail?goodsid="+e[0].productId,{trigger:!0})}})}),define("text!pages/order-detail.json",[],function(){return'{\n  "type": "order-detail",\n  "template": "order-detail.html",\n  "components":[\n    {\n      "type":"LogisticInfoView",\n      "id":"LogisticInfoView"\n    },\n    {\n      "type":"AddressInOrderView",\n      "id":"AddressInOrderView"\n    },\n    {\n      "type": "ListView",\n      "id": "OrderDetailListView",\n      "collection":"AjaxCollection",\n      "template":"order-detail-product-list-item.html"\n    },\n    {\n      "id": "PopupMenu",\n      "type": "PopupMenu"\n    }, {\n      "id": "SearchMidPageView",\n      "type": "SearchMidPageView"\n    }\n  ]\n}\n'}),define("text!pages/order-list.html",[],function(){return'<header class="headerbox">\n    <div class="left-right nav-left goback">\n        <span class="icomoon icomoon-back"></span>\n    </div>\n    <div class=\'mid order-type-selector-btn\'>\n      <span class="common-title title-mid order-list-title">全部订单</span>\n      <span class="order-type-selector-icon icomoon icomoon-pulldown title-mid"></span>\n    </div>\n    <div class="left-right nav-right header-menu">\n      <span class="icomoon icomoon-moremore"></span>\n    </div>\n</header>\n<div class="order-type-selector order-type-selector-hide">\n  <div class="order-type-selector-menu">\n    <div class="order-type-selector-menu-item"><span data-name="allDay" data-index="5" class="selector-item selector-item-selected item-all-day">全部订单</span></div>\n    <div class="order-type-selector-menu-item"><span data-name="sameDay" data-index="0" class="selector-item item-order-day">当天</span></div>\n    <div class="order-type-selector-menu-item"><span data-name="sameWeek" data-index="1" class="selector-item item-order-week">一周内</span></div>\n    <div class="order-type-selector-menu-item"><span data-name="sameMonth" data-index="2" class="selector-item item-order-month">一个月内</span></div>\n    <div class="order-type-selector-menu-item"><span data-name="sameMonthAgo" data-index="3" class="selector-item item-order-monthago">一个月前</span></div>\n  </div>\n  <div class="order-type-selector-cover"></div>\n</div>\n<div class="order-list">\n  <div class="order-list-control-view">\n    <div class="segmented-control order-list-segmented">\n      <a class=\'control-item segmented-item segmented-item-active theme-color theme-border-color\' data-index=\'0\'>全部</a>\n      <a class=\'control-item segmented-item\' data-index=\'1\'>待付款</a>\n      <a class=\'control-item segmented-item\' data-index=\'2\'>待发货</a>\n      <a class=\'control-item segmented-item\' data-index=\'3\'>待收货</a>\n      <a class=\'control-item segmented-item\' data-index=\'4\'>已完成</a>\n      <!-- <a class=\'control-item segmented-item\' data-index=\'5\'>进行中</a>\n      <a class=\'control-item segmented-item\' data-index=\'6\'>流团</a> -->\n    </div>\n  </div>\n  <div class="order-filter-blank-top"></div>\n  \n    <component id="AllOrderListView" />\n  \n\n</div>\n<div >\n  <component id="PopupMenu"/>\n  <component id="SearchMidPageView"/>\n</div>\n'}),define("pages/order-list",["./PageView","require"],function(e,t){return e.extend({type:"order-list",events:{"click .goback":"goback","click a":"onSelect","click li":"onRowSelect","click .order-type-selector-btn":"typeSelector","click .header-menu":"menuMore","click .order-type-selector":"closeTypeSelector","click .order-type-selector-cover":"closeTypeSelector","click .order-type-selector-menu":"typeItemSelected"},orderTypeList:[0,2,3,4,5],listCollection:null,list_type:null,indexTab:0,userInfo:null,initialize:function(){this.listenTo(this.findComponent("PopupMenu"),"toSearch",this.toSearch.bind(this))},addDate:function(e,t){var n=new Date(e);n.setDate(n.getDate()+t);var r=n.getMonth()+1;return n.getFullYear()+"-"+this.zeroAdd(r)+"-"+this.zeroAdd(n.getDate())},zeroAdd:function(e){return e<10?"0"+e:e},menuMore:function(e){this.findComponent("PopupMenu").show()},toSearch:function(e){this.findComponent("SearchMidPageView").show()},typeSelector:function(e){$(".order-type-selector").removeClass("order-type-selector-hide"),$(".order-type-selector-icon").removeClass("icomoon-pulldown").addClass("icomoon-pullup")},closeTypeSelector:function(){$(".order-type-selector").addClass("order-type-selector-hide"),$(".order-type-selector-icon").removeClass("icomoon-pullup").addClass("icomoon-pulldown")},typeItemSelected:function(e){var t=$(e.target),n=t.attr("data-name");if(!n)return;this.$(".common-title").text(t.text()),this.setOrderType(n),this.closeTypeSelector(),this.listCollection.filterType(t.attr("data-index"))},setOrderType:function(e){$(".selector-item").removeClass("selector-item-selected"),e=="allDay"?$(".item-all-day").addClass("selector-item-selected"):e=="sameDay"?$(".item-order-day").addClass("selector-item-selected"):e=="sameWeek"?$(".item-order-week").addClass("selector-item-selected"):e=="sameMonth"?$(".item-order-month").addClass("selector-item-selected"):e=="sameMonthAgo"&&$(".item-order-monthago").addClass("selector-item-selected")},onResume:function(){this.toggleBar&&this.toggleBar("hide");var e=t("../models/BaseModel"),n=application.getQueryString("list_type");this.userModel=new e;var r=window.location.href.split("?"),i=r[1].split("=");window.location.href.indexOf("?")>0&&i[0]!="list_type"&&(library.wechatLoad(r,this.userModel),window.history.pushState({},0,r[0].toString())),n?this.indexTab=n:this.indexTab=0,this.$(".order-list-title").text("全部订单"),this.initData()},setActive:function(e){this.$("a").removeClass("segmented-item-active").removeClass("theme-color").removeClass("theme-border-color"),this.$("a[data-index='"+e+"']").addClass("segmented-item-active").addClass("theme-color").addClass("theme-border-color");var t="#my-navigate/order-list?list_type="+e;Backbone.history.navigate(t,{trigger:!0})},onRender:function(){$(".add-blank-leaving-icon").removeClass("icomoon-without").removeClass("add-blank-leaving-icon"),$(".add-blank-leaving-words").text("").removeClass("add-blank-leaving-words"),$("#AllOrderListView").show()},initData:function(){this.listCollection=this.findComponent("AllOrderListView").collection,this.userInfo=window.application.getUserInfo(),this.userInfo||(library.Toast("您尚未登录，请前往登录",2e3),window.history.back()),this.listCollection.queryData={userId:this.userInfo.userid,status:this.orderTypeList[this.indexTab]+"",type:"",index:1,size:10},$(".add-blank-leaving-icon").removeClass("icomoon-without").removeClass("add-blank-leaving-icon"),$(".add-blank-leaving-words").text("").removeClass("add-blank-leaving-words"),$("#AllOrderListView").show(),this.listCollection.loadData({url:this.listCollection.allOrderUrl,data:this.listCollection.queryData,needReset:!0,showLoading:!0,success:this.onSuccess.bind(this),error:this.onError.bind(this)})},onSuccess:function(e){e&&e.status!="0"&&library.Toast("网络错误，请稍后再试",2e3),console.log(e.data),this.setPageStatus()},onError:function(){library.Toast("抱歉，网络错误",2e3),this.setPageStatus()},setPageStatus:function(){if(!this.listCollection.length||this.listCollection.length==0){$("#AllOrderListView").hide();var e=$("<div class = 'icomoon-without add-blank-leaving-icon'></div><div class = 'add-blank-leaving-words'>您还没有相关订单哟~</div>");$(".add-blank-leaving-icon").removeClass("icomoon-without").removeClass("add-blank-leaving-icon"),$(".add-blank-leaving-words").text("").removeClass("add-blank-leaving-words"),$(".order-list").append(e)}else $("#AllOrderListView").show(),$(".icomoon-without").remove(),$(".add-blank-leaving-words").remove();this.setActive(this.indexTab)},onSelect:function(e){$(".add-blank-leaving-icon").removeClass("icomoon-without").removeClass("add-blank-leaving-icon"),$(".add-blank-leaving-words").text("").removeClass("add-blank-leaving-words"),$("#AllOrderListView").show();var t=$(e.target).attr("data-index");this.indexTab=t,this.listCollection.filterData(this.orderTypeList[t])},onRowSelect:function(e){var t=$(e.currentTarget).index();this.orderInfo=this.listCollection.models[t];var n=this.orderInfo.get("orderId"),r=this.orderInfo.get("productList"),i=this.orderInfo.get("orderStatus");if($(e.target).data("name")=="ensureOrder"){this.ensureOrder();return}if($(e.target).data("name")=="cancelOrder"){this.cancelOrder();return}if($(e.target).data("name")=="payOrder"){this.preparePay();return}if($(e.target).data("name")=="addComment"){this.addComment();return}if($(e.target).data("name")=="shouhou"){this.goApplyAfterSale(n);return}if($(e.target).data("name")=="checkLog"){var s=this.orderInfo.get("logisticId");Backbone.history.navigate("#my-navigate/logiticsDetail?orderId="+n+"&logisId="+s,{trigger:!0});return}if($(e.target).data("name")=="tuihuo"){if(i==6){library.Toast("退款处理中，请耐心等待",2e3);return}Backbone.history.navigate("#my-navigate/cancel-back-money?orderId="+n,{trigger:!0});return}if($(e.target).data("name")=="buyAgain"){Backbone.history.navigate("#my-navigate/itemdetail?goodsid="+r[0].productId,{trigger:!0});return}var s=this.orderInfo.get("logisticId");Backbone.history.navigate("#my-navigate/order-detail?orderId="+n+"&logisId="+s,{trigger:!0})},goApplyAfterSale:function(e){Backbone.history.navigate("#my-navigate/applyAfterSale?orderId="+e,{trigger:!0})},preparePay:function(){var e=this.orderInfo.toJSON();window.app.createOrderResult=e,window.app.createOrderResult.parentOrderCode=e.orderCode,Backbone.history.navigate("#my-navigate/payMode?fee="+(e.orderFee||900),{trigger:!0,replace:!0})},payHandle:function(e){e?e.code==0?(library.Toast("支付成功"),this.listCollection.reloadData()):library.Toast(e?e.msg:"支付失败"):library.Toast("支付失败")},cancelOrder:function(){param=[],leftInfo={leftText:"取消",callback:function(){}},rightInfo={rightText:"确定",callback:this.cancelOrderOk.bind(this)},param.push(leftInfo),param.push(rightInfo),library.MessageBox("取消订单","您确定取消订单吗？",param)},cancelOrderOk:function(){if(!this.orderInfo)return;this.updateOrder("cancel")},addComment:function(){window.app.waitCommentOrder=this.orderInfo,Backbone.history.navigate("#my-navigate/create-comment",{trigger:!0})},updateOrderFinished:function(){this.findComponent("AllOrderListView").collection.reset()},orderInfo:null,ensureOrder:function(){param=[],leftInfo={leftText:"取消",callback:function(){}},rightInfo={rightText:"确定",callback:this.updateOrderOK.bind(this)},param.push(leftInfo),param.push(rightInfo),library.MessageBox("确认收货","您确定已收到货？",param)},updateOrderOK:function(){if(!this.orderInfo)return;this.updateOrder("update")},updateOrder:function(e){var n=t("../models/OrderInfoModel"),r=new n,i={orderId:this.orderInfo.get("orderId"),parentSn:this.orderInfo.get("parentSn"),userId:application.getUserInfo().userid},s=this,o={data:i,success:function(t){t?e=="cancel"?library.Toast(t.message||"取消成功",2e3):library.Toast(t.message||"确认收货成功",2e3):library.Toast("取消订单失败，网络错误",2e3),$(".add-blank-leaving-icon").removeClass("icomoon-without").removeClass("add-blank-leaving-icon"),$(".add-blank-leaving-words").text("").removeClass("add-blank-leaving-words"),$("#AllOrderListView").show(),s.listCollection.reloadData()},error:function(){library.Toast("网络出错",2e3)},showLoading:!0};e=="cancel"?o.url=r.cancelOrderUrl:o.url=r.receiveOrderUrl,r.loadData(o)},goback:function(){window.location.href="#my-navigate"}})}),define("text!pages/order-list.json",[],function(){return'{\n  "type": "order-list",\n  "template": "order-list.html",\n  "components": [\n    {\n      "type": "AllOrderListView",\n      "id": "AllOrderListView",\n      "collection":"AllOrderListCollection",\n      "template":"all-order-list-item.html",\n      "paging":true,\n      "autoload":false\n    },\n    {\n      "id": "PopupMenu",\n      "type": "PopupMenu"\n    }, {\n      "id": "SearchMidPageView",\n      "type": "SearchMidPageView"\n    }\n  ]\n}\n'}),define("text!pages/orderCompletion.html",[],function(){return'<ul class="order-completion-ul">\n    <li><img src="images/order/order-success.png"></li>\n    <li>参团成功，请您耐心等待订单后续通知</li>\n</ul>\n<div class="order-button-count">\n     <a href="javascript:;" class="order-button-detail">订单详情</a>\n     <a href="#" class="order-button-share">分享</a>\n</div>'}),define("pages/orderCompletion",["./PageView","require"],function(e,t){return e.extend({events:{"click .order-button-detail":"gotoorder"},gotoorder:function(){var e=window.application.getQueryString("orderid");Backbone.history.navigate("#my-navigate/buySuccessDetail?orderid="+e,{trigger:!0})}})}),define("text!pages/orderCompletion.json",[],function(){return'{\n  "template": "orderCompletion.html",\n  "type":"orderCompletion"\n}'}),define("text!pages/overdueCoupon.html",[],function(){return'<div class="overdue-coupon">\n    <!-- <header class=\'overdue-coupon-header\'>\n      <div class=\'icomoon-back\'></div>\n      <span>优惠券</span>\n      <div class=\'icomoon-moremore\'></div>\n    </header> -->\n    <div class="overdue-coupon-main">\n    	<component id=\'OverdueCouponView\'/>\n		<div class="clear-overcoupon">\n	      <div class="clear-button">\n	        <span class="icomoon icomoon-delete"></span>\n	        <span>清除</span>\n	      </div>\n	    </div>\n    </div>\n</div>\n<div>\n  <component id="SearchMidPageView"/>\n  <component id="PopupMenu"/>\n</div>'}),define("pages/overdueCoupon",["./PageView","require"],function(e,t){return e.extend({events:{"click .icomoon-back":"onBack","click .icomoon-moremore":"menuMore","click .sender-selector":"toSender","click .clear-button":"clear"},initialize:function(){this.listenTo(this.findComponent("PopupMenu"),"toSearch",this.toSearch.bind(this))},toSearch:function(e){this.findComponent("SearchMidPageView").show()},menuMore:function(e){this.findComponent("PopupMenu").show()},clear:function(){var e=this;library.MessageBox("温馨提示","确定清除所有吗？",[{leftText:"确定",callback:function(){e.clearAll()}.bind(this)},{rightText:"取消",callback:function(){}}])},clearAll:function(){var e=t("../models/BaseModel");this._clearModel=new e,this._clearModel.loadData({path:"/clearCoupon",data:{userId:application.getUserInfo().userid},type:"POST",success:this.clearSuccess.bind(this),error:this.clearError.bind(this)})},clearSuccess:function(){this.findComponent("OverdueCouponView").collection.set([])},clearError:function(){},render:function(){return e.prototype.render.apply(this,arguments),this},onBack:function(){window.history.back()},onResume:function(){this.toggleBar&&this.toggleBar("hide"),this.$(".bar").show(),this.findComponent("OverdueCouponView").collection.loadData({path:"/getCouponList",type:"POST",needReset:!1,data:{userId:application.getUserInfo().userid,type:"3",index:1,size:100},success:this.loadSuccess.bind(this),error:this.loadError.bind(this)})},loadSuccess:function(e){this.findComponent("OverdueCouponView").collection.set(e.data.couponList)},loadError:function(){}})}),define("text!pages/overdueCoupon.json",[],function(){return'{\n  "type": "overdueCoupon",\n  "template": "overdueCoupon.html",\n  "header": {\n    "title": "优惠券",\n    "items": [{\n      "type": "link",\n      "icon": "header-icon-back icomoon-back",\n      "pull": "left",\n      "event": "back"\n    },\n    {\n      "type": "link",\n      "icon": "header-icon-menu icomoon-moremore",\n      "pull": "right",\n      "event": "menuMore"\n      }]\n  },\n  "components": [\n    {\n      "id": "PopupMenu",\n      "type": "PopupMenu"\n    },\n    {\n      "id": "SearchMidPageView",\n      "type": "SearchMidPageView"\n    },\n    {\n      "type": "ListView",\n      "id":"OverdueCouponView",\n      "autoload":false,\n      "collection": "OverdueCouponCollection",\n      "template": "overdue-coupon-view.html"\n    }\n\n  ]\n}\n'}),define("text!pages/package-commodity.html",[],function(){return'<header class="headerbox">\n  <div class="left-right nav-left goback">\n    <span class="icomoon icomoon-back"></span>\n  </div>\n  <div class=\'mid\'>\n    <span class="common-title">套餐列表</span>\n  </div>\n  <div class="left-right nav-right header-menu">\n    <span class="icomoon icomoon-moremore"></span>\n  </div>\n</header>\n<div class="scroller">\n	   <component id="GroupBuyListView" />\n	 <div id="show_nodata_div" style="display:none;"></div>\n</div>\n <div>\n    <component id="PopupMenu" />\n    <component id="SearchMidPageView" />\n</div>\n'}),define("pages/package-commodity",["./PageView","require"],function(e,t){return e.extend({type:"GroupBuyListView",events:{"click .goback":"goback","click .header-menu":"menuMore","click .list-content":"toDetail"},initialize:function(){this.listenTo(this.findComponent("PopupMenu"),"toSearch",this.toSearch.bind(this))},menuMore:function(e){this.findComponent("PopupMenu").show()},toSearch:function(e){this.findComponent("SearchMidPageView").show()},goback:function(e){window.history.back()},onResume:function(){this.toggleBar&&this.toggleBar("hide"),_this=this;var e=this.findComponent("GroupBuyListView").collection,t={path:"/getGoodsSetList",type:"POST",needReset:!0,data:{size:10,index:1,sortStyle:"",sortOrder:""},success:function(e){if(e.data.suitList.length>0)$("#show_nodata_div").hide();else{$(".loadmore").hide();var t=$("<div class = 'icomoon-without add-blank-leaving-icon'></div><div class = 'add-blank-leaving-words'>还没有相关的众筹，请耐心等待，惊喜马上到来~</div>");$("#show_nodata_div").html(t).show()}},error:function(){}};e.loadData(t)},toDetail:function(e){var t=this.$(e.currentTarget).find(".package-list-id").text();console.log(t),Backbone.history.navigate("#my-navigate/packagedetail?packageId="+t,{trigger:!0})}})}),define("text!pages/package-commodity.json",[],function(){return'{\n  "template": "package-commodity.html",\n  "type":"package-commodity",\n  "components":[\n    {\n      "id":"GroupBuyListView",\n      "type":"GroupBuyListView",\n      "template":"package-commodity-item.html",\n      "collection":"packageCollection",\n       "paging": true,\n      "autoload": false\n    },\n    {\n      "id": "PopupMenu",\n      "type": "PopupMenu"\n    }\n  ]\n}'}),define("text!pages/package-order-list.html",[],function(){return'<header class="headerbox">\n    <div class="left-right nav-left goback">\n        <span class="icomoon icomoon-back"></span>\n    </div>\n    <div class=\'mid order-type-selector-btn\'>\n      <span class="common-title title-mid order-list-title">全部订单</span>\n      <span class="order-type-selector-icon icomoon icomoon-pulldown title-mid"></span>\n    </div>\n    <div class="left-right nav-right header-menu">\n      <span class="icomoon icomoon-moremore"></span>\n    </div>\n</header>\n<div class="order-type-selector order-type-selector-hide">\n  <div class="order-type-selector-menu">\n    <div class="order-type-selector-menu-item"><span data-name="allDay" data-index="5" class="selector-item selector-item-selected item-all-day">全部订单</span></div>\n    <div class="order-type-selector-menu-item"><span data-name="sameDay" data-index="0" class="selector-item item-order-day">当天</span></div>\n    <div class="order-type-selector-menu-item"><span data-name="sameWeek" data-index="1" class="selector-item item-order-week">一周内</span></div>\n    <div class="order-type-selector-menu-item"><span data-name="sameMonth" data-index="2" class="selector-item item-order-month">一个月内</span></div>\n    <div class="order-type-selector-menu-item"><span data-name="sameMonthAgo" data-index="3" class="selector-item item-order-monthago">一个月前</span></div>\n  </div>\n  <div class="order-type-selector-cover"></div>\n</div>\n<div class="order-list">\n  <div class="order-list-control-view">\n    <div class="segmented-control order-list-segmented">\n      <a class=\'control-item segmented-item segmented-item-active theme-color theme-border-color\' data-index=\'0\'>全部</a>\n      <a class=\'control-item segmented-item\' data-index=\'1\'>待付款</a>\n      <a class=\'control-item segmented-item\' data-index=\'2\'>待发货</a>\n      <a class=\'control-item segmented-item\' data-index=\'3\'>待收货</a>\n      <a class=\'control-item segmented-item\' data-index=\'4\'>已完成</a>\n      <!-- <a class=\'control-item segmented-item\' data-index=\'5\'>进行中</a>\n      <a class=\'control-item segmented-item\' data-index=\'6\'>流团</a> -->\n    </div>\n  </div>\n  <div class="order-filter-blank-top"></div>\n  \n    <component id="AllOrderListView" />\n  \n\n</div>\n<div >\n  <component id="PopupMenu"/>\n  <component id="SearchMidPageView"/>\n</div>\n'}),define("pages/package-order-list",["./PageView","require"],function(e,t){return e.extend({type:"order-list",events:{"click .goback":"goback","click a":"onSelect","click li":"onRowSelect","click .order-type-selector-btn":"typeSelector","click .header-menu":"menuMore","click .order-type-selector":"closeTypeSelector","click .order-type-selector-cover":"closeTypeSelector","click .order-type-selector-menu":"typeItemSelected"},orderTypeList:[0,2,3,4,5],listCollection:null,list_type:null,indexTab:0,userInfo:null,initialize:function(){this.listenTo(this.findComponent("PopupMenu"),"toSearch",this.toSearch.bind(this))},addDate:function(e,t){var n=new Date(e);n.setDate(n.getDate()+t);var r=n.getMonth()+1;return n.getFullYear()+"-"+this.zeroAdd(r)+"-"+this.zeroAdd(n.getDate())},zeroAdd:function(e){return e<10?"0"+e:e},menuMore:function(e){this.findComponent("PopupMenu").show()},toSearch:function(e){this.findComponent("SearchMidPageView").show()},typeSelector:function(e){$(".order-type-selector").removeClass("order-type-selector-hide"),$(".order-type-selector-icon").removeClass("icomoon-pulldown").addClass("icomoon-pullup")},closeTypeSelector:function(){$(".order-type-selector").addClass("order-type-selector-hide"),$(".order-type-selector-icon").removeClass("icomoon-pullup").addClass("icomoon-pulldown")},typeItemSelected:function(e){var t=$(e.target),n=t.attr("data-name");if(!n)return;this.$(".common-title").text(t.text()),this.setOrderType(n),this.closeTypeSelector(),this.listCollection.filterType(t.attr("data-index"))},setOrderType:function(e){$(".selector-item").removeClass("selector-item-selected"),e=="allDay"?$(".item-all-day").addClass("selector-item-selected"):e=="sameDay"?$(".item-order-day").addClass("selector-item-selected"):e=="sameWeek"?$(".item-order-week").addClass("selector-item-selected"):e=="sameMonth"?$(".item-order-month").addClass("selector-item-selected"):e=="sameMonthAgo"&&$(".item-order-monthago").addClass("selector-item-selected")},onResume:function(){this.toggleBar&&this.toggleBar("hide");var e=t("../models/BaseModel"),n=application.getQueryString("list_type");this.userModel=new e;var r=window.location.href.split("?"),i=r[1].split("=");window.location.href.indexOf("?")>0&&i[0]!="list_type"&&(library.wechatLoad(r,this.userModel),window.history.pushState({},0,r[0].toString())),n?this.indexTab=n:this.indexTab=0,this.$(".order-list-title").text("全部订单"),this.initData()},setActive:function(e){this.$("a").removeClass("segmented-item-active").removeClass("theme-color").removeClass("theme-border-color"),this.$("a[data-index='"+e+"']").addClass("segmented-item-active").addClass("theme-color").addClass("theme-border-color");var t="#my-navigate/package-order-list?list_type="+e;Backbone.history.navigate(t,{trigger:!0})},onRender:function(){$(".add-blank-leaving-icon").removeClass("icomoon-without").removeClass("add-blank-leaving-icon"),$(".add-blank-leaving-words").text("").removeClass("add-blank-leaving-words"),$("#AllOrderListView").show()},initData:function(){this.listCollection=this.findComponent("AllOrderListView").collection,this.userInfo=window.application.getUserInfo();if(!this.userInfo){Backbone.history.navigate("#my-navigate/login/login",{trigger:!0});return}this.listCollection.queryData={userId:this.userInfo.userid,status:this.orderTypeList[this.indexTab]+"",type:"",index:1,size:10},$(".add-blank-leaving-icon").removeClass("icomoon-without").removeClass("add-blank-leaving-icon"),$(".add-blank-leaving-words").text("").removeClass("add-blank-leaving-words"),$("#AllOrderListView").show(),this.listCollection.loadData({url:this.listCollection.allOrderUrl,data:this.listCollection.queryData,needReset:!0,showLoading:!0,success:this.onSuccess.bind(this),error:this.onError.bind(this)})},onSuccess:function(e){e&&e.status!="0"&&library.Toast("网络错误，请稍后再试",2e3),console.log(e.data),this.setPageStatus()},onError:function(){library.Toast("抱歉，网络错误",2e3),this.setPageStatus()},setPageStatus:function(){if(!this.listCollection.length||this.listCollection.length==0){$("#AllOrderListView").hide();var e=$("<div class = 'icomoon-without add-blank-leaving-icon'></div><div class = 'add-blank-leaving-words'>您还没有相关订单哟~</div>");$(".add-blank-leaving-icon").removeClass("icomoon-without").removeClass("add-blank-leaving-icon"),$(".add-blank-leaving-words").text("").removeClass("add-blank-leaving-words"),$(".order-list").append(e)}else $("#AllOrderListView").show(),$(".icomoon-without").remove(),$(".add-blank-leaving-words").remove();this.setActive(this.indexTab)},onSelect:function(e){$(".add-blank-leaving-icon").removeClass("icomoon-without").removeClass("add-blank-leaving-icon"),$(".add-blank-leaving-words").text("").removeClass("add-blank-leaving-words"),$("#AllOrderListView").show();var t=$(e.target).attr("data-index");this.indexTab=t,this.listCollection.filterData(this.orderTypeList[t])},onRowSelect:function(e){var t=$(e.currentTarget).index();this.orderInfo=this.listCollection.models[t];var n=this.orderInfo.get("orderId"),r=this.orderInfo.get("suitId"),i=this.orderInfo.get("orderStatus");if($(e.target).data("name")=="ensureOrder"){this.ensureOrder();return}if($(e.target).data("name")=="cancelOrder"){Backbone.history.navigate("#my-navigate/cancel-order-reason?orderId="+n,{trigger:!0});return}if($(e.target).data("name")=="payOrder"){this.preparePay();return}if($(e.target).data("name")=="addComment"){this.addComment();return}if($(e.target).data("name")=="shouhou"){this.goApplyAfterSale(n);return}if($(e.target).data("name")=="checkLog"){var s=this.orderInfo.get("logisticId");Backbone.history.navigate("#my-navigate/logiticsDetail?orderId="+n+"&logisId="+s,{trigger:!0});return}if($(e.target).data("name")=="getPackage"){Backbone.history.navigate("#my-navigate/bill-lading?orderId="+n,{trigger:!0});return}if($(e.target).data("name")=="cancelPayMoney"){if(i==6){library.Toast("退款处理中，请耐心等待",2e3);return}Backbone.history.navigate("#my-navigate/cancel-back-money?orderId="+n+"&suitId="+r,{trigger:!0});return}if($(e.target).data("name")=="showList"){Backbone.history.navigate("#my-navigate/confirm-order-set?orderId="+n,{trigger:!0});return}if($(e.target).data("name")=="buyAgain"){Backbone.history.navigate("#my-navigate/packagedetail?packageId="+r,{trigger:!0});return}var s=this.orderInfo.get("logisticId");Backbone.history.navigate("#my-navigate/confirm-order-completion?orderId="+n+"&suitId="+r,{trigger:!0})},goApplyAfterSale:function(e){Backbone.history.navigate("#my-navigate/applyAfterSale?orderId="+e,{trigger:!0})},preparePay:function(){var e=this.orderInfo.toJSON();window.app.createOrderResult=e,window.app.createOrderResult.parentOrderCode=e.orderCode,Backbone.history.navigate("#my-navigate/payMode?fee="+(e.orderFee||900),{trigger:!0,replace:!0})},payHandle:function(e){e?e.code==0?(library.Toast("支付成功"),this.listCollection.reloadData()):library.Toast(e?e.msg:"支付失败"):library.Toast("支付失败")},cancelOrder:function(){param=[],leftInfo={leftText:"取消",callback:function(){}},rightInfo={rightText:"确定",callback:this.cancelOrderOk.bind(this)},param.push(leftInfo),param.push(rightInfo),library.MessageBox("取消订单","您确定取消订单吗？",param)},cancelOrderOk:function(){if(!this.orderInfo)return;this.updateOrder("cancel")},addComment:function(){window.app.waitCommentOrder=this.orderInfo,Backbone.history.navigate("#my-navigate/create-comment",{trigger:!0})},updateOrderFinished:function(){this.findComponent("AllOrderListView").collection.reset()},orderInfo:null,ensureOrder:function(){param=[],leftInfo={leftText:"取消",callback:function(){}},rightInfo={rightText:"确定",callback:this.updateOrderOK.bind(this)},param.push(leftInfo),param.push(rightInfo),library.MessageBox("确认收货","您确定已收到货？",param)},updateOrderOK:function(){if(!this.orderInfo)return;this.updateOrder("update")},updateOrder:function(e){var n=t("../models/OrderInfoModel"),r=new n,i={orderId:this.orderInfo.get("orderId"),parentSn:this.orderInfo.get("parentSn"),userId:application.getUserInfo().userid},s=this,o={data:i,success:function(t){t?e=="cancel"?library.Toast(t.message||"取消成功",2e3):library.Toast("确认收货成功",2e3):library.Toast("取消订单失败，网络错误",2e3),$(".add-blank-leaving-icon").removeClass("icomoon-without").removeClass("add-blank-leaving-icon"),$(".add-blank-leaving-words").text("").removeClass("add-blank-leaving-words"),$("#AllOrderListView").show(),s.listCollection.reloadData()},error:function(){library.Toast("网络出错",2e3)},showLoading:!0};e=="cancel"?o.url=r.cancelOrderUrl:o.url=r.receiveOrderUrl,r.loadData(o)},goback:function(){window.location.href="#my-navigate"}})}),define("text!pages/package-order-list.json",[],function(){return'{\n  "type": "package-order-list",\n  "template": "package-order-list.html",\n  "components": [\n    {\n      "type": "AllOrderListView",\n      "id": "AllOrderListView",\n      "collection":"PackageAllOrderListCollection",\n      "template":"package-all-order-list-item.html",\n      "paging":true,\n      "autoload":false\n    },\n    {\n      "id": "PopupMenu",\n      "type": "PopupMenu"\n    }, {\n      "id": "SearchMidPageView",\n      "type": "SearchMidPageView"\n    }\n  ]\n}\n'}),define("text!pages/packagedetail.html",[],function(){return'<div id="goods-page">\n    <div class="goods-label-return" style="opacity: 0.5;">\n        <div class="icomoon-back goods-label-back"></div>\n    </div>\n    <div class="goods-label-menu" style="opacity: 0.5;">\n        <div class="icomoon icomoon-moremore goods-label-menu-menu"></div>\n    </div>\n    <div style="position:relative">\n        <div class="itemdetial-top">\n           \n        </div>\n        <div class="tips-without-cover"></div>\n        <div class="goods-label" style=" overflow: hidden;">\n            <component id="carousel" />\n            <div class="goods-label-title">\n                <div class="package-list-title">\n                    <!-- 101020套餐商品 大米+红桃+甘露 -->\n                </div>\n                <div class="package-list-Selling"><span class="package-list-desc"><!-- 超值好礼 促销优惠 --></span><i>热销</i></div>\n                <div class="package-list-money"><!-- ￥12202 --><span class="package-list-price-marketmoney"></span> <span class="package-list-marketmoney"><!-- 22500 --></span></div>\n                <div class="package-list-shopping">\n                    <div class="package-list-shoppingnum"></div>\n                    <div class="text-right"></div>\n                </div>\n            </div>\n            <div class="packagedetaillist">\n                <p class="packagedetailtitle">套餐内商品</p>\n                <div class="scroller">\n                     \n                </div>\n            </div>\n            <div class="goods-label-collection">\n                <span class="goods-collection-words">点击查看图文详情</span><span class="goods-collection-icon icomoon-spread"></span>\n            </div>\n\n        </div>\n    </div>\n</div>\n<div>\n    <component id="PopupMenu" />\n    <component id="SearchMidPageView" />\n</div>\n<div class="packagedetail-footer">\n    <div class="packagedetail-add">\n        <div class="detail-reduce"></div>\n        <div class="center-div">1</div>\n        <div class="detail-add"></div>\n    </div>\n    <div class="packagedetail-footer-btn">立即购买</div>\n</div>'}),define("pages/packagedetail",["./PageView","require"],function(e,t){return e.extend({events:{"click .goback":"goback","click .goods-label-return":"goback","click .header-menu":"menuMore","click .goods-label-menu":"menuMore","click .detail-reduce":"reduceClick","click .detail-add":"plusClick","click .packagedetail-footer-btn":"toCreateOrder","click .goods-label-collection":"toShowView"},gcfNum:1,productInfoObj:null,initialize:function(){this.listenTo(this.findComponent("PopupMenu"),"toSearch",this.toSearch.bind(this))},menuMore:function(e){this.findComponent("PopupMenu").show()},toSearch:function(e){this.findComponent("SearchMidPageView").show()},goback:function(e){window.history.back()},onResume:function(){this.gcfNum=1,this.$(".center-div").text(this.gcfNum),e.prototype.onResume.apply(this,arguments),$(".product-bottom-bar").show();if(!this.gbDetailModel){var n=t("../models/GoodDetailModel");this.gbDetailModel=new n}this.setAjaxOptions();var r=this;window.setTimeout(function(){r.gbDetailModel.loadData()},520)},setAjaxOptions:function(){this.goodsid=window.application.getQueryString("packageId");var e=window.application.getUserInfo(),t=e?e.userid:"";this.gbDetailModel.ajaxOptions={url:window.app.api+"/viewSuit",showLoading:!0,data:{suitId:this.goodsid},success:function(e){e?e.status=="error"?(library.Toast(e.message||"该产品可能已下架",2e3),window.history.back()):this.updateUI(e):(library.Toast("数据出错",2e3),window.history.back())}.bind(this),error:function(e){console.log(e||"数据出错")}.bind(this)}},updateUI:function(e){this.productInfoObj=e;if(e.data.IMG_URL.length>0){var t=this.findComponent("carousel").collection,n=[];for(var r=0;r<e.data.IMG_URL.length;r++)console.log(e.data.IMG_URL[r].suitImage),n.push({src:e.data.IMG_URL[r].suitImage});t.reset(n)}this.$(".package-list-title").text(e.data.SUIT_TITLE),this.$(".package-list-desc").text(e.data.REMARK),this.$(".package-list-price-marketmoney").text("￥"+e.data.SALE_PRICE),this.$(".package-list-marketmoney").text("￥"+e.data.MARKET_PRICE),this.setSupportInfo(e.data.SUIT_GOODS)},setSupportInfo:function(e){var t=this.$(".scroller");t.html("");for(var n=0;n<e.length;n++)t.append(this.getLevelItem(e[n]))},getLevelItem:function(e){var t=library.getTemplate("package-detail-buy-item.html");return t(e)},plusClick:function(){this.gcfNum++,this.gcfChange()},reduceClick:function(){this.gcfNum>1&&this.gcfNum--,this.gcfChange()},gcfChange:function(){this.$(".center-div").text(this.gcfNum)},toCreateOrder:function(){var e=window.application.getUserInfo();if(!e){Backbone.history.navigate("#my-navigate/login/login",{trigger:!0});return}var t={};t.packageId=this.productInfoObj.data.SUIT_ID,t.packageNumber=this.gcfNum,t.IMG_URL=this.productInfoObj.data.IMG_URL[0].suitImage,t.MARKET_PRICE=this.productInfoObj.data.MARKET_PRICE,t.REMARK=this.productInfoObj.data.REMARK,t.SALE_PRICE=this.productInfoObj.data.SALE_PRICE,t.SUIT_TITLE=this.productInfoObj.data.SUIT_TITLE;var n=[];n.push(t),window.app.shopsOrder=n,window.app.createOrderType="10200",Backbone.history.navigate("#home-navigate/create-order",{trigger:!0})},toShowView:function(){this.productInfoObj.data.SUIT_DESC?(window.app.showView=this.productInfoObj.data.SUIT_DESC,Backbone.history.navigate("#home-navigate/show-view",{trigger:!0})):library.Toast("暂无图文详情",2e3)}})}),define("text!pages/packagedetail.json",[],function(){return'{\n    "template": "packagedetail",\n    "type": "packagedetail",\n    "components": [\n        {\n            "id": "carousel",\n            "type": "CarouselView",\n            "slickOptions": {\n                "lazyLoad": "progressive",\n                "dots": true,\n                "autoplay": true,\n                "swipeToSlide": true,\n                "speed": 300,\n                "arrows": false\n            },\n            "collection": "packageDetailCollection"\n  }, {\n            "id": "PopupMenu",\n            "type": "PopupMenu"\n  }, {\n            "type": "MySegmentedView",\n            "id": "MySegmentedView",\n            "items": [{\n                "id": "ProductDetailInfoView",\n                "name": "商品详情",\n                "type": "ProductDetailInfoView"\n      }]\n    },\n        {\n            "id": "SearchMidPageView",\n            "type": "SearchMidPageView"\n  }]\n}'}),define("text!pages/payMode.html",[],function(){return'<div class="pay-mode-page" style="background-color:#fff;height:100%">\n	<div class="pay-information">\n		<span>请支付：</span>\n		<span class="total-pay-num theme-color" style="padding-right: 0.26666667rem; float:right;"></span>\n	</div>\n	<div class="send-mode-zf">支付方式:</div>\n\n	<form id="payId" action="/testDoPay" method="post">\n	    <input type="text" hidden="true" id="orderId" name="orderId"/>\n	    <input type="text" hidden="true" id="payWayId" name="payWayId"/>\n	    <input type="text" hidden="true" id="sendWayId" name="sendWayId"/>\n	</form>\n	 <!-- <div class="pay-mode-des">支付方式</div>\n    <div class="pay-mode-select unionpay-select">\n    	<img src="images/order/card.png" class="pay-mode-img">\n    	<span>网银支付</span>\n    	<span class="icomoon-more"></span>\n    </div>\n    \n   \n		<div class="pay-mode-select point-select">\n    	<img src="images/order/yue.png" class="pay-mode-img">\n    	<span>积分对付</span>\n    	<div class="balance-box">\n	    	<span calss="point-num">0</span>\n    	</div>\n    </div>\n    <div class="pay-mode-select wxpay-select">\n    	<img src="images/order/wechat.png" class="pay-mode-img">\n    	<span>微信支付</span>\n    	<span class="icomoon-more"></span>\n    </div>\n    <div class="pay-mode-select alipay-select">\n    	<img src="images/order/zhifu.png" class="pay-mode-img">\n    	<span>支付宝</span>\n    	<span class="icomoon-more zhifu-balance-more"></span>\n    </div>\n    <div class="pay-mode-select balance-select">\n    	<img src="images/order/yue.png" class="pay-mode-img">\n    	<span>余额支付</span>\n    	<div class="balance-box">\n	    	<span class="balance-num">¥0</span>\n	    	<span class="icomoon-more balance-icomoon-more"></span>\n    	</div>\n    </div> -->\n		<div class=\'payway-wrapper\'></div>\n		<!--<div class=\'sendway-wrapper\'></div>-->\n		<div><button class=\'btn-pay\' disabled="disabled">去支付</button></div>\n\n    <component id=\'balancePayment\'/>\n\n</div>\n'}),define("pages/payMode",["./PageView","require","../libs/wechat"],function(e,t,n){return e.extend({type:"payMode",events:{"click .header-icon-back":"onBack","click .balance-select":"balanceSelect","click .balance-cancel":"balanceCancel","click .balance-sure":"balanceSure","click .unionpay-select":"unionPay","click .wxpay-select":"wxPay","click .alipay-select":"aliPay","click .point-select":"pointPay","click .btn-pay":"toPay"},initialize:function(){var e=t("../models/PayModel");this.payModel=new e,this.initWechat()},onResume:function(){this.toggleBar&&this.toggleBar("hide"),this.$(".bar").show(),this.orderMap=window.app.createOrderResult,console.log(this.orderMap),console.log(this.orderMap.orderFee),this.orderMap.orderFee=="0.00"&&($(".send-mode-zf").hide(),$(".payway-wrapper").hide());if(!this.orderMap){library.Toast("数据出错"),window.history.back();return}this.orderMap.orderFee&&this.orderMap.orderFee<0?this.$(".total-pay-num").text("¥0"):this.orderMap.orderFee?this.$(".total-pay-num").text("¥"+this.orderMap.orderFee+""):this.$(".total-pay-num").text("¥"+this.orderMap.parentAmont+""),this.initPayWay(),window.app.createOrderResult=null},initWechat:function(){var e=t("../models/BaseModel"),r=new e,i={url:window.app.api+"/getSignUrl",type:"POST",needReset:!0,data:{url:document.location.origin+document.location.pathname},success:function(e){e.status=="0"?n.init(e.data):library.Toast("JS-SDK签名失败")},error:function(){library.Toast("JS-SDK签名失败")}};r.loadData(i)},payWechat:function(e,r){var i=t("../models/BaseModel"),s=new i,o={url:window.app.api+"/getPrePayId",type:"POST",needReset:!0,data:e,showLoading:!0,success:function(e){if(e.status=="0"){var t={config:e.data,success:function(e){Backbone.history.navigate("#my-navigate/order-detail?orderId="+r,{trigger:!0,replace:!0})},error:function(e){library.Toast("支付失败")}};n.chooseWXPay(t)}else library.Toast("支付签名失败")},error:function(){library.Toast("网络错误")}};s.loadData(o)},initPayWay:function(){var e=this;this.$(".wxpay-select").hide(),this.$(".alipay-select").hide(),this.$(".balance-select").hide(),this.$(".point-select").hide();var n=t("../models/BaseModel"),r=new n;r.loadData({path:"/getPayWay",type:"POST",success:function(t){t.status=="0"?(payList=t.data,e.createPayWayItems(payList)):library.Toast("数据出错")}.bind(this),error:function(){library.Toast("数据出错")}})},createPayWayItems:function(e){this.$(".payway-wrapper").html("");var t;for(var n=0,r=e.length;n<r;n++){var i=e[n];if(e[n].payWayName=="支付宝")continue;var s=$("<div data-payid='"+e[n].payWayId+"' class='pay-way-item'>"+e[n].payWayName+"</div>");n==0&&(t=s),function(e,t,n){e.bind("click",function(){t.initSendWayData(n,e)})}(s,this,i),this.$(".payway-wrapper").append(s)}this.initSendWayData(e[0],t)},payWayInfo:{},sendWayInfo:{},selectedPayWayItem:null,initSendWayData:function(e,n){var r=this;this.payWayInfo={},this.sendWayInfo={},this.selectedPayWayItem&&this.selectedPayWayItem.removeClass("pay-way-item-selected"),this.selectedPayWayItem=n,this.selectedPayWayItem.addClass("pay-way-item-selected"),this.$(".btn-pay").attr("disabled","disabled"),this.$(".btn-pay").removeClass("btn-pay-active");var i=t("../models/BaseModel"),s=new i;s.loadData({path:"/getSendWay",type:"POST",data:{payWayId:e.payWayId},success:function(t){if(t.status=="0"){console.log(t);var n=t.data;this.payWayInfo=e,r.createSendWayItems(n)}}.bind(this),error:function(){}})},createSendWayItems:function(e){$(".sendway-wrapper").html(""),this.$(".btn-pay").removeAttr("disabled");var t,n;for(var r=0,i=e.length;r<i;r++){var s=e[r],o=$("<div data-sendid='"+s.sendWayId+"' class='pay-way-item'>"+s.sendWayName+"</div>");r==0&&(t=s,n=o),function(e,t,n){e.bind("click",function(){t.sendWayInfo=n,t.$(".btn-pay").addClass("btn-pay-active"),t.sendWaySelectedClick(n,e)})}(o,this,s),$(".sendway-wrapper").append(o)}this.sendWaySelectedClick(t,n)},selectedSendWayItem:null,sendWaySelectedClick:function(e,t){this.sendWayInfo=e,this.selectedSendWayItem&&this.selectedSendWayItem.removeClass("pay-way-item-selected"),this.selectedSendWayItem=t,this.selectedSendWayItem.addClass("pay-way-item-selected"),this.$(".btn-pay").addClass("btn-pay-active")},userInfo:null,getUserInfo:function(){var e=application.getUserInfo().userid,n=t("../models/BaseModel"),r=new n,i=this,s={path:"/getUserInfo",type:"POST",data:{userId:e},success:function(t){if(t.status!="0"){library.Toast("支付方式初始化错误"),window.history.back();return}this.userInfo=t.data,this.userInfo.userid=e,this.$(".balance-num").text("￥"+this.userInfo.myBalance),this.$(".point-num").text(this.userInfo.myPoints)}.bind(this),error:function(e){library.Toast("支付方式初始化错误"),window.history.back();return}};r.loadData(s)},onBack:function(){window.history.back()},balanceSelect:function(e){var t=this.findComponent("balancePayment");t.$el.show()},balanceCancel:function(){this.findComponent("balancePayment").$el.hide()},balanceSure:function(){var e=this.$(".balance-password-text").val();if(!e){library.Toast("请输入密码");return}this.toBalancePay(e),this.balanceCancel()},toBalancePay:function(e){var t={userId:this.userInfo.userid,payWayId:this.orderMap.paymode.payWayId,orderId:this.orderMap.orderInfo.parentSn,password:e};this.payModel.startBalancePay(t,this.balancePayHandle.bind(this),"/payByBalance")},balancePayHandle:function(e){console.log(e),e&&e.status=="0"?(library.Toast("支付成功"),this.paySuccess()):library.Toast("支付失败，"+(e?e.message:""))},paySuccess:function(){window.app.createOrderResult=this.orderMap,navigateTo("#home-navigate/afterPayment",{trigger:!0})},paySuccess2:function(){window.app.createOrderResult=this.orderMap,Backbone.history.navigate("#home-navigate/afterPayment",{trigger:!0})},unionPay:function(e){this.preparePay()},pointPay:function(e){},wxPay:function(){},aliPay:function(){},payModel:null,preparePay:function(){this.payModel.startPay(this.orderMap.orderInfo.orderId,this.payHandle.bind(this),"/getPrePayId")},isWeiXin:function(){var e=window.navigator.userAgent.toLowerCase();return e.match(/MicroMessenger/i)=="micromessenger"?!0:!1},toPay:function(){if(this.orderMap.orderFee=="0.00"){library.Toast("支付成功"),this.paySuccess2();return}console.log(">>>M<<<"),console.log(this.orderMap);var e=window.application.getUserInfo(),t=e?e.userid:"",n=this.orderMap.billInfo?this.orderMap.billInfo.parentSn:this.orderMap.orderInfo.parentSn,r;console.log(n),this.orderMap.orderInfo?r=this.orderMap.orderInfo.orderId?this.orderMap.orderInfo.orderId:this.orderMap.orderInfo.parentSn:r=this.orderMap.orderId?this.orderMap.orderId:this.orderMap.parentSn;var i;this.orderMap.suitName?i=this.orderMap.suitName:this.orderMap.productList?i=this.orderMap.productList[0].productName:this.orderMap.orderInfo&&(i=this.orderMap.orderInfo.productInfo.goodsList[0].goodName),console.log(i);if(this.payWayInfo.payWayName=="微信"){var s=sessionStorage.getItem("userOpenid"),o={userId:t,bodytext:i,payWayId:this.payWayInfo.payWayId,orderId:n,sendWayId:this.sendWayInfo.sendWayId,openId:s};s?this.payWechat(o,r):library.Toast("请在公众号打开微商城下单支付")}else{$("#orderId").val(n),console.log(n),$("#payWayId").val(this.payWayInfo.payWayId),$("#sendWayId").val(this.sendWayInfo.sendWayId);var u=window.app.api+"/testDoPay";$("#payId").attr("action","http://szlapi.gootese.com/testDoPay"),$("#payId").submit()}},payHandle:function(e){if(e){if(e.code==0){library.Toast("支付成功"),this.paySuccess();return}library.Toast(e?e.msg:"支付失败")}else library.Toast("支付失败，请稍后再试")}})}),define("text!pages/payMode.json",[],function(){return'{\n  "template":"payMode.html",\n  "type": "payMode",\n  "header": {\n    "title": "支付订单",\n    "items": [{\n      "type": "link",\n      "icon": "header-icon-back icomoon-back",\n      "pull": "left",\n      "event": "back"\n    }]\n  },\n  "components":[\n    {\n      "type": "balancePayment",\n      "id": "balancePayment",\n      "autoload": false,\n      "style":{"display":"none"}\n    }\n  ]\n}\n'}),define("text!pages/paySelector.html",[],function(){return'<div class="payment-selector">\n<div class="sender-sellect-container">\n	<component id="SenderSelect"/>\n</div>\n<div class="main-payment">\n<div class="payment-mode-select ps-mode-select">\n	<div class="payment-mode ps-mode">支付方式</div>\n	<div class="mode-selector pay-select">\n	</div>\n</div>\n<div class="send-mode-select ps-mode-select">\n	<div class="send-mode ps-mode">配送方式</div>\n	<div class="mode-selector send-select">\n		<!--<span class="span-left points-only" id="mall-sendness">商城配送</span>\n		<span class="span-five-words points-only" id="other-sendness">渠道机构配送</span>-->\n	</div>\n</div>\n<!--<div class="sender-selector">\n	<span class="sender-choose">选择配送机构</span>\n	<span class="icomoon-details"></span>\n</div>-->\n<div class="send-information">送货时间，将在订单提交24小时内为您发货</div>\n<div class=" theme-backgorund-color btn-sure">保存</div>\n</div>\n<component id="SearchMidPageView"/>\n<component id="PopupMenu"/>\n\n</div>\n'}),define("pages/paySelector",["./PageView","require"],function(e,t){return e.extend({type:"paySelector",events:{"click .header-icon-back":"onBack","click .btn-sure":"onSave","click .icomoon-moremore":"menuMore","click .h-span-left":"goBack"},paymode:{},sendmode:{},sender:null,initialize:function(){this.listenTo(this.findComponent("PopupMenu"),"toSearch",this.toSearch.bind(this))},onRender:function(){var e=location.href,t=e.substr(e.indexOf("=")+1,e.length-e.indexOf("="));t=="points"?(this.$(".payment-mode-select").hide(),this.$(".title").text("选择配送方式")):(this.$(".payment-mode-select").show(),this.$(".title").text("选择支付及配送方式"),this.$(".points-only").hide())},onResume:function(){this.$(".main-payment").show(),this.$("#SenderSelect").hide(),this.toggleBar&&this.toggleBar("hide"),this.$(".bar").show(),this.sender&&this.$(".sender-choose").text(this.sender),window.app.paymode&&window.app.sendmode&&(window.app.paymode=="线上支付"?(this.$("#online-payment").addClass("theme-color").addClass("theme-border-color"),this.$("#offline-payment").removeClass("theme-color").removeClass("theme-border-color")):(this.$("#offline-payment").addClass("theme-color").addClass("theme-border-color"),this.$("#online-payment").removeClass("theme-color").removeClass("theme-border-color")),window.app.sendmode=="商城配送"?(this.$("#mall-sendness").addClass("theme-color").addClass("theme-border-color"),this.$("#other-sendness").removeClass("theme-color").removeClass("theme-border-color")):(this.$("#other-sendness").addClass("theme-color").addClass("theme-border-color"),this.$("#mall-sendness").removeClass("theme-color").removeClass("theme-border-color"))),this.initData()},initData:function(){this.initSendWayData()},initSendWayData:function(){var e=t("../models/BaseModel"),n=new e;n.loadData({path:"/getAgency",type:"POST",data:{},success:function(e){if(e.status=="0"){var t=this.$(".send-select");t.empty();var n=e.data;for(var r=0;r<n.length;r++){var i=$("<div></div>");i.addClass("send-way-selector"),r==0&&(i.addClass("span-left"),i.addClass("theme-color"),i.addClass("theme-border-color")),i.text(n[r].sendWayName),i.attr("data-id",n[r].sendWayId),t.append(i),t.bind("click",function(e){var t=$(e.target),n=t.attr("data-id");n!=this.sendmode.sendWayId&&(this.sendmode.sendWayName=t.text(),this.sendmode.sendWayId=n,this.$(".send-way-selector").removeClass("theme-color").removeClass("theme-border-color"),t.addClass("theme-color").addClass("theme-border-color"))}.bind(this))}this.sendmode=n[0]}}.bind(this),error:function(){library.Toast("网络请求出错，请重试！")}})},menuMore:function(e){console.log(this.findComponent("PopupMenu")),this.findComponent("PopupMenu").show()},toSearch:function(e){this.findComponent("SearchMidPageView").show()},onBack:function(){window.history.back()},onSave:function(){window.app.paymode=this.paymode,window.app.sendmode=this.sendmode,window.history.back()}})}),define("text!pages/paySelector.json",[],function(){return'{\n  "type": "paySelector",\n  "template":"paySelector.html",\n  "header": {\n    "title": "选择支付及配送方式",\n    "items": [{\n      "type": "link",\n      "icon": "header-icon-back icomoon-back",\n      "pull": "left",\n      "event": "back"\n    },\n    {\n      "type": "link",\n      "icon": "header-icon-menu icomoon-moremore",\n      "pull": "right",\n      "event": "menuMore"\n      }]\n  },\n  "components":[\n  {\n      "id": "SearchMidPageView",\n      "type": "SearchMidPageView"\n  },\n  {\n      "id": "PopupMenu",\n      "type": "PopupMenu"\n  },\n  {\n      "id": "SenderSelect",\n      "type": "SenderSelect",\n      "collection": "senderCollection",\n      "template": "senderSelect.html"\n  }\n  ]\n}\n'}),define("text!pages/pointitemdetail.html",[],function(){return'<div id="goods-page">\n  <header class="headerbox goods-label-return-nav">\n    <div class="left-right nav-left goback">\n      <span class="icomoon icomoon-back"></span>\n    </div>\n    <div class=\'mid\'>\n      <span class="common-title">商品详情</span>\n    </div>\n    <div class="left-right nav-right header-menu">\n      <span class="icomoon icomoon-moremore"></span>\n    </div>\n  </header>\n  <div class="goods-label-return" >\n    <div class="icomoon-back goods-label-back"></div>\n  </div>\n  <div class="goods-label-menu" >\n    <div class="icomoon icomoon-moremore goods-label-menu-menu"></div>\n  </div>\n  <div style=\'position:relative\'>\n  <div class=\'itemdetial-top\'>\n  <component id="carousel"/>\n  </div>\n  <div class="tips-without-cover"></div>\n  <div class="goods-label" style=" overflow: hidden;">\n    <div class="goods-label-title">\n      <div class="goods-title-name">\n      </div>\n      <!-- <div class="goods-title-share">\n        <div class="icomoon-share goods-share">\n        </div>\n        <div class="goods-title-collection-name">\n          分享\n        </div>\n      </div> -->\n      <div class="goods-title-money">\n        <!--<div class="goods-title-rmb">¥</div>-->\n        <div class="goods-title-num"></div>\n        <div class="goods-title-piontNum"></div>\n        <div class="goods-title-point">积分</div>\n        <div class="goods-title-box theme-backgorund-color"></div>\n      </div>\n      <div class="goods-sale-infomation">\n        <!-- <div class="express-fee"><span>快递 </span><span>6元</span></div> -->\n        <div class="month-sale"><span>月销 </span><span class=\'month-sale-val\'>6件</span></div>\n      </div>\n    </div>\n\n    <!--<div class="goods-label-spec">\n      <div class="goods-spec-box">\n        <div class="goods-spec-name">\n          选择 商品规格\n        </div>\n        <div class="goods-spec-selected"></div>\n      </div>\n      <div class="goods-spec-select icomoon-details">\n      </div>\n    </div>\n    <div class="goods-label-coupon">\n      <div class="goods-coupon-title">\n          <span>优惠&nbsp;&nbsp;可享受以下优惠</span>\n          <span class="icomoon icomoon-highpull launch-ico coupon-launch-ico"></span>\n      </div>\n      <div class="goods-coupon-detail coupon-detail-show">\n          <div class="coupon-row" style="display:none"><span class="coupon-tag">满减</span><span class="itemdetail-discount">无</span></div>\n          <div class="coupon-row" style="display:none"><span class="coupon-tag">送积分</span><span class="itemdetail-points">无</span></div>\n          <div class="coupon-row-last coupon-packages">\n              <span class="coupon-tag">优惠套餐</span>\n              <span class=\'coupon-desc\'></span>\n              <span class="icomoon icomoon-details launch-ico"></span>\n          </div>\n          <div class="packages-details">\n              <div class="flex-layout packages-details-row">\n              </div>\n          </div>\n      </div>\n      &lt;!&ndash; <div class="goods-service"><span>服务</span><span class="goods-service-info">7天无理由退货</span></div> &ndash;&gt;\n    </div>\n\n    <div class="goods-label-evaluate">\n      <div class="goods-evaluate-title">\n        <div class="goods-evaluate-number">\n          商品评价(<span class="goods-comments-number"></span>)\n        </div>\n      </div>\n      <div class="goods-evaluate-filter">\n        <div id="all-evaluate" data-index="0" class="evaluate-tab evaluate-tab-active">全部(<span id="allComNum"></span>)</div>\n        <div id="good-evaluate" data-index="1" class="evaluate-tab">很好(<span id="goodComNum"></span>)</div>\n        <div id="normal-evaluate" data-index="2" class="evaluate-tab">一般(<span id="comComNum"></span>)</div>\n        <div id="bad-evaluate" data-index="3" class="evaluate-tab">较差(<span id="badComNum"></span>)</div>\n      </div>\n      <div class="goods-evaluate-list">\n        <ul class="goods-evaluate-ul">\n        </ul>\n        <div class="no-comment" style="text-align: center;margin-top: 20px;width: inherit;height: 50px;color: #b1b1b1;display: none">暂无评价</div>\n      </div>\n      <div class="more-comment"><span style="vertical-align: middle;">查看更多评论</span><span class="icomoon icomoon-details comment-ico"></span></div>\n    </div>\n    <div class="goods-label-collection">\n      <span class="goods-collection-words">点击查看图文详情</span><span class="goods-collection-icon icomoon-spread"></span>\n    </div>-->\n    <component id="ProductBottomBarView"/>\n  </div>\n</div>\n</div>\n\n<div>\n    <component id=\'SearchMidPageView\'/>\n    <component id="PopupMenu"/>\n</div>\n\n\n<div class="point-buy-btn theme-backgorund-color">\n    立即兑换\n</div>'}),define("pages/pointitemdetail",["./PageView","../models/GoodDetailModel","../models/CommentCollection","require"],function(e,t,n,r){return e.extend({events:{"click .point-buy-btn":"createOrder","click .goods-label-spec":"openshoppingcart","change .mui-numbox-input":"inputchange","click .goods-title-selected":"goodstitleselected","click .mui-numbox-btn-plus":"muinumboxbtnplus","click .mui-numbox-btn-minus":"muinumboxbtnminus","click .goods-label-return":"goodslabelreturn","click .info-title-svg":"infotitlesvg","click .common-message-cover-no":"infotitlesvg","click .goods-button-check":"goodsbuttoncheck","click .backToGoods":"hideMoreDetail","click .CarouselView":"showBigImg","click .bigImg-view-show":"BigImgHide","click .goods-coupon-title":"showCoupon","click .evaluate-tab":"filterComment","click .more-comment":"goToCommentPage","click .goods-title-share":"shareWindow","click .coupon-packages":"goDiscountPackage","click .cancel-share":"shareCancel","click .header-menu":"menuMore","click .goods-label-menu":"menuMore","blur .mui-numbox-input":"numberboxBlur"},pageScrollTop:0,min:null,max:null,num:0,buyState:0,shoppingCart:0,shopcart:null,addshop:null,commentData:null,productStock:0,commentCollection:new n,initialize:function(){this.listenTo(this.findComponent("PopupMenu"),"toSearch",this.toSearch.bind(this)),this.commentData=this.commentCollection.toJSON(),$(this.findComponent("carousel1")).find(".slick-dots").css({position:"relative",top:"300px"})},menuMore:function(e){this.findComponent("PopupMenu").show()},toSearch:function(e){this.findComponent("SearchMidPageView").show()},goodslabelreturn:function(){window.history.back()},infotitlesvg:function(){$(".add-shop-cart").removeClass("add-shop-cart-show"),$(".share-popup-view").removeClass("share-popup-view-show"),$(".common-message-cover-no").hide(),this.buyState=0,this.shoppingCart=0},mods:null,onResume:function(){this.toggleBar&&this.toggleBar("hide"),this.mods||(this.mods=new t),this.setAjaxOptions(window.application.getQueryString("goodsid"));var e=this;window.setTimeout(function(){e.mods.loadData()},520)},CreateOrder:null,onRender:function(){},setAjaxOptions:function(e){this.mods.goodsid=e;var t=window.application.getUserInfo(),n=t?t.userid:"";this.mods.ajaxOptions={path:"/getPointProductDetail",type:"POST",showLoading:!0,data:{productId:this.mods.goodsid},success:function(e){e&&e.status=="0"?this.updateUI(e.data):library.Toast(e.message||"该产品可能已下架",2e3)}.bind(this),error:function(e){library.Toast("数据出错",2e3)}.bind(this)}},updateUI:function(e){this.productInfoObj=e,this.selectedGoodId=e.id,this.productStock=e.stock,this.setCarouselInfo(e.images);if(this.productStock==0){var t="<span class='theme-color'>(该商品暂时无货)</span>";this.$(".goods-title-name").html(e.name+t)}else this.$(".goods-title-name").html(e.name);this.$(".goods-title-num").html(e.point),this.$(".goods-title-box").hide(),e.isFav==1?this.$(".collection-goods").addClass("collected"):this.$(".collection-goods").removeClass("collected"),this.$(".month-sale-val").html(e.salesNumber)},setCarouselInfo:function(e){var t=this.findComponent("carousel").collection,n=[];for(var r=0;r<e.length;r++)n.push({src:e[r]});t.reset(n)},createOrderItem:function(){var e=this.productInfoObj,t={};return t.itemNumber=parseInt(1),t.tradePrice=this.productInfoObj.price,t.point=this.productInfoObj.point,t.name=e.name,t.good=e.id,t.goodsId=e.id,t.totalPrice=t.itemNumber*t.tradePrice,t.imgurl=e.images[0]||"",console.log(t),t},createOrder:function(){var e=window.application.getUserInfo();if(!e){Backbone.history.navigate("#my-navigate/login/login",{trigger:!0});return}var t={},n={},r=this.productInfoObj;if(this.productStock==0){library.Toast("无货不能兑换！");return}var i=this.createOrderItem();n.items=[],n.items.push(i);var s=[];s.push(n),window.app.shopsOrder=s,Backbone.history.navigate("#my-navigate/create-order-for-point",{trigger:!0});return}})}),define("text!pages/pointitemdetail.json",[],function(){return'{\n  "template": "pointitemdetail.html",\n  "type": "pointitemdetail",\n  "components": [{\n      "id": "carousel1",\n      "type": "CarouselView",\n      "slickOptions": {\n        "lazyLoad": "progressive",\n        "dots": true,\n        "autoplay": false,\n        "swipeToSlide": true,\n        "speed": 300,\n        "arrows": false\n      },\n      "collection": "itemDetailCollection"\n    },{\n      "id": "carousel",\n      "type": "CarouselView",\n      "slickOptions": {\n        "lazyLoad": "progressive",\n        "dots": true,\n        "autoplay": true,\n        "swipeToSlide": true,\n        "speed": 300,\n        "arrows": false\n      },\n      "collection": "itemDetailCollection"\n    }, {\n       "type": "ProductBottomBarView",\n       "id": "ProductBottomBarView",\n       "collection": "ShoppingcartnumCollection"\n    },{\n        "id": "SearchMidPageView",\n        "type": "SearchMidPageView"\n    },{\n        "id": "PopupMenu",\n        "type": "PopupMenu"\n      }\n  ]\n}\n'}),define("pages/product-detail-info",["./PageView"],function(e){return e.extend({render:function(){return e.prototype.render.apply(this,arguments),this.$(".MySegmentedView").addClass("detail-page-segmented"),this},onRender:function(){this.$el.find(".goods-label-collection-link").click(function(){window.history.back()})}})}),define("text!pages/product-detail-info.json",[],function(){return'{\n  "type": "product-detail-info",\n  "components": [\n    {\n      "type": "ProductDetailInfoHeadView"\n    },\n    {\n      "type": "MySegmentedView",\n      "items": [\n        {\n          "name": "商品详情",\n          "type": "ProductDetailInfoView"\n        },\n        {\n          "name": "规格参数",\n          "type" : "ProductListView",\n          "id": "ProductListView",\n          "template": "product-parameter.html",\n          "collection": "ProductParameterCollection"\n        },\n        {\n          "name": "商品评价",\n          "type": "ProductCommentView"\n        }\n      ]\n    },\n    {\n      "type": "ProductBottomBarView"\n    }\n  ]\n}\n'}),define("pages/product-list",["./PageView","require"],function(e,t){function n(e,t){var n=this;this.selected_categoryids=[],this.categoryId=t,this.R="filter_"+parseInt(Math.random()*1e3),this.ctl_bk=$("<div class='xm-filter-wrapper-bk'></div>"),this.ctl_wrapper=$("<div class='xm-filter-wrapper'></div>");var r=$("<div class='xm-filter-header'></div>");this.OkBtn=$("<button class='xm-filter-ok-btn'>确定</button>");var i=$("<span class='xm-filter-title'>筛选</span>"),s=$("<div class='xm-filter-back-wrapper'></div>"),o=$("<span class='xm-filter-back'></span>");this.ctl_body=$("<div class='xm-filter-body'></div>"),s.append(o),r.append(s).append(i).append(this.OkBtn),this.ctl_wrapper.append(r).append(this.ctl_body),e.append(this.ctl_wrapper),e.append(this.ctl_bk),this.ctl_bk.bind("click",function(){n.hide()}),this.OkBtn.bind("click",function(){n.hide()}),s.bind("click",function(){n.hide()})}return n.prototype={initLayout:function(e){var t=this;this.ctl_body.empty();var n=$("<div class='xm-filter-item xm-filter-item-all xm-filter-item-selected'>全部</div>");n.bind("click",function(e){t.selected_categoryids=[],e.target.className="xm-filter-item xm-filter-item-all xm-filter-item-selected";var n=$(".xm-filter-sl-item");for(var r=0,i=n.length;r<i;r++)$(n[r]).removeClass("xm-filter-item-selected")}),this.ctl_body.append(n);var r=$("<div class='xm-filter-item-wrapper'></div>");for(var i=0,s=e.length;i<s;i++){var o=e[i],u=this.R+i,a=$("<div data-second-ref='"+u+"' class='xm-filter-item'><span>"+o.categoryName+"</span><div class='xm-filter-filter-icon'></div></div>");r.append(a),a.bind("click",function(e){var n=e.target,r=n.getAttribute("data-second-ref");if(!r){n=e.target.parentNode,r=n.getAttribute("data-second-ref");if(!r)return}t.selectgdid&&(document.getElementById(t.selectgdid).style.display="none"),t.filter_item_select&&t.filter_item_select.removeClass("xm-filter-group-selected");if(t.selectgdid==r){t.filter_item_select=null,t.selectgdid=null;return}document.getElementById(r).style.display="block",$(n).addClass("xm-filter-group-selected"),t.selectgdid=r,t.filter_item_select=$(n)});var f=$("<div id='"+u+"' class='xm-filter-sedlv-wrapper'></div>"),l=o.categories;for(var c=0,h=l.length;c<h;c++){var p=l[c],d=$("<div data-categoryid='"+p.brandId+"' class='xm-filter-item xm-filter-sl-item'><span>"+p.brandName+"</span></div>");d.bind("click",function(e){var r=e.target,i=r.getAttribute("data-categoryid");if(!i){r=e.target.parentNode,i=r.getAttribute("data-categoryid");if(!i)return}var s=t.selected_categoryids.indexOf(i);s<0?($(r).addClass("xm-filter-item-selected"),t.selected_categoryids.push(i)):($(r).removeClass("xm-filter-item-selected"),t.selected_categoryids.splice(s,1)),t.selected_categoryids.length>0?n.removeClass("xm-filter-item-selected"):n.addClass("xm-filter-item-selected")}),f.append(d)}r.append(f)}this.ctl_body.append(r)},hide:function(){this.ctl_wrapper.removeClass("xm-filter-show"),this.ctl_bk.css({display:"none"})},show:function(){var e=this;window.setTimeout(function(){e.ctl_wrapper.addClass("xm-filter-show"),e.ctl_bk.css({display:"block"})},2);var n=t("../models/ProductParameterCollection"),r=new n,i={path:"/getFilterParam",data:{categoryId:this.categoryId},type:"POST",needReset:!0,showLoading:!0,success:this.onSuccess.bind(this),error:this.onError.bind(this)};r.loadData(i)},onSuccess:function(e){e.data&&this.initLayout(e.data)},onError:function(){}},e.extend({$pagename:"productlist",oncategoryColletionReset:function(e,t){var n=this,r=[];for(var i=0;i<e.models.length;){var s=i+3;s<e.models.length?r.push(e.models.slice(i,i+3)):r.push(e.models.slice(i,e.models.length)),i=s}var o="";r.forEach(function(e,t){var n="";e.forEach(function(e,t){n+='<div category-id="'+e.get("id")+'" class="filtercondition-category-item" > <div>'+e.get("text")+"</div> </div>"}),o+='<div class="filtercondition-category-row " >'+n+"</div>"}),this.$(".filtercondition-category").empty(),this.$(".filtercondition-category").append(o)},listType:"simple",isFirstLoad:!0,events:{"click .header-box-mid-inner":"toSearch","click .nav-left":"toBack","click .nav-right":"onListTypeChange","click .filter-filter":"onFilter","click .order-all":"orderAll","click .order-sales":"orderSales","click .order-price":"orderPrice"},listview:null,initialize:function(){this.listview=this.findComponent("ProductListView"),this.categoryColletion=this.listview.getCollection(),this.listview.setCallBack(this.clickRowListener.bind(this))},clickRowListener:function(e){var t=this.categoryColletion.models[e.index];t&&t.get("id")?Backbone.history.navigate("#category-navigate/itemdetail?goodsid="+t.get("id"),{trigger:!0}):library.Toast("该产品可能已下架")},render:function(){return e.prototype.render.apply(this,arguments),this.$el.css({"background-color":"#f5f5f5"}),this.blankwords=$("<div class ='icomoon-withoutsearch add-blank-leaving-icon' style='position:absolute;top: 150px;display:none;'>  <div class = 'add-blank-leaving-words' > 搜索结果不存在~ </div></div>"),this.$el.append(this.blankwords),this},categoryId:null,keyword:null,onResume:function(){this.isFirstLoad=!0,e.prototype.onResume.apply(this,arguments),this.categoryId=window.application.getQueryString("id"),this.keyword=window.app.searchKey,this.initData(),window.app.searchKey=null},initData:function(){this.categoryId?this.$(".filter-filter").removeClass("filter-filter-none"):this.$(".filter-filter").addClass("filter-filter-none");var e=this.keyword||this.categoryId?5:1,t={size:10,index:1,sortType:21,brand:""};this.categoryId&&(t.category=this.categoryId),this.keyword&&(t.searchKey=this.keyword),console.log(t),this.categoryColletion.ajaxOptions={path:"/getProductList",data:t,type:"POST",needReset:!0,showLoading:!0,success:this.onSuccess.bind(this),error:this.onError.bind(this)},this.categoryColletion.loadData(this.categoryColletion.ajaxOptions)},onSuccess:function(e){e.data.length==0?$(".add-blank-leaving-icon").show():(this.categoryColletion.add(e.data),$(".add-blank-leaving-icon").hide()),this.$(".common-search-holder").text(this.keyword||"请输入商品"),this.notifyListType(),this.isFirstLoad&&(this.clearAllSelectStyle(),this.$(".order-all").addClass("theme-color"),this.isFirstLoad=!1)},onError:function(){library.Toast("请求出错啦")},filterResult:function(e){this.categoryColletion.onFilter(e.data),this.resetFilterUI()},toSearch:function(e){this.findComponent("SearchMidPageView").callback=this.startSearch.bind(this),this.findComponent("SearchMidPageView").show()},startSearch:function(){this.onResume()},toBack:function(e){window.app.searchKey=null,window.history.back()},onListTypeChange:function(e){this.listType=this.listType=="simple"?"double":"simple",console.log(this.listType),this.resetFilterUI()},notifyListType:function(){var e=this.$el.find(".menu-list-type"),t=this.$el.find("li"),n=this.$el.find(".media-object"),r=this.$el.find(".media-body");this.listType=="double"?($("#ProductListView").css({padding:"0px 15px","padding-top":"2.5rem"}),e.removeClass("icomoon-list").addClass("icomoon-class_click"),t.css({"border-bottom":"0px solid #ddd"}),$(".table-view").css({"border-top":"0px solid #ddd","border-bottom":"0px solid #ddd","margin-bottom":"0px","background-color":"#f5f5f5"}),t.addClass("list-row-control"),$(".list-item").addClass("item-double-inline"),n.removeClass("pull-left"),n.removeClass("item-media-object-single-line"),r.addClass("list-row-media-body-control"),$(".item-media-des").css({display:"none"}),$(".item-media-title").addClass("single-line-control")):($("#ProductListView").css({padding:"0px","padding-top":"2.4rem"}),t.css({"border-bottom":"1px solid #ddd"}),$(".table-view").css({"border-top":"1px solid #ddd","border-bottom":"1px solid #ddd","margin-bottom":"5px","background-color":"#fff"}),e.removeClass("icomoon-class_click").addClass("icomoon-list"),t.removeClass("list-row-control"),$(".list-item").removeClass("item-double-inline"),n.addClass("pull-left"),n.addClass("item-media-object-single-line"),r.removeClass("list-row-media-body-control"),$(".item-media-des").css({display:"block"}),$(".item-media-title").removeClass("single-line-control"))},orderType:"down",filterStatus:0,orderAll:function(){this.onOrder({sortType:21,pageindex:1}),this.resetFilterUI("all")},orderSales:function(){this.onOrder({sortType:20,pageindex:1}),this.resetFilterUI("sales")},orderPrice:function(){this.orderType=this.orderType=="up"?"down":"up",this.orderType=="up"?this.onOrder({sortType:31,pageindex:1}):this.onOrder({sortType:30,pageindex:1}),this.resetFilterUI("price")},filterView:null,onFilter:function(e){this.filterView?this.filterView.categoryId=this.categoryId:this.filterView=new n(this.$el,this.categoryId),this.filterView.show(),this.$(".goodsfilter .typeselected").removeClass("typeselected"),this.$(e.currentTarget).addClass("typeselected"),this.resetFilterUI("filter")},onOrder:function(e){if(e)for(key in e)this.categoryColletion.ajaxOptions.data[key]=e[key];this.categoryColletion.loadData()},onChangeFilter:function(){this.filterStatus==1?($("#ProductListView").css({display:"none"}),$(".filtercondition ").css({display:"block"})):($("#ProductListView").css({display:"block"}),$(".filtercondition ").css({display:"none"}))},clearAllSelectStyle:function(){$(".order-all").removeClass("theme-color"),$(".order-sales").removeClass("theme-color"),$(".order-price").removeClass("theme-color"),$(".filter-filter").removeClass("theme-color"),$(".filter-icon-down").removeClass("theme-color"),$(".filter-icon-up").removeClass("theme-color"),$(".icomoon-screen").removeClass("theme-color")},resetFilterUI:function(e){e!="filter"&&(this.filterStatus=0),e&&this.clearAllSelectStyle(),e=="all"?$(".order-all").addClass("theme-color"):e=="sales"?$(".order-sales").addClass("theme-color"):e=="price"?($(".order-price").addClass("theme-color"),this.orderType=="down"?$(".filter-icon-down").addClass("theme-color"):$(".filter-icon-up").addClass("theme-color")):e=="filter"&&($(".filter-filter").addClass("theme-color"),$(".icomoon-screen").addClass("theme-color"),this.filterStatus=this.filterStatus==1?0:1),this.notifyListType()},comfirm:function(){alert(JSON.stringify(this.data))},categorySelect:function(e){e.preventDefault();var t=this,n=this.data.category.find(function(t){if(this.$(e.currentTarget).attr("category-id")==t)return t});return n?(this.data.category.find(function(n,r,i){this.$(e.currentTarget).attr("category-id")==n&&t.data.category.splice(r,1)}),this.$(e.currentTarget).find("div").removeClass("filtercondition-category-selected")):(this.$(e.currentTarget).find("div").addClass("filtercondition-category-selected"),this.data.category.push(this.$(e.currentTarget).attr("category-id"))),!1},inputPrice:function(e){this.$(e.currentTarget).attr("inputprice")=="min"?this.data.price.min=this.$(e.currentTarget).val():this.data.price.max=this.$(e.currentTarget).val()}})}),define("text!pages/product-list.json",[],function(){return'{\n  "type" : "product-list",\n  "components" : [\n    {\n      "id":"SearchMidPageView",\n      "type":"SearchMidPageView"\n    },\n    {\n      "type": "ProductListHeader"\n    },\n    {\n      "type": "ProductListFilter"\n    },\n    {\n      "style":"padding-top:2.4rem",\n      "type": "ProductListView",\n      "id" : "ProductListView",\n      "template": "product-list.html",\n      "paging": true,\n      "autoload": false,\n      "collection": "ProductListCollection"\n    }\n  ]\n}\n'}),define("text!pages/refund-method.html",[],function(){return'<div class="cancel-order-number">\n     您正在取消订单：<span>12387549681</span>\n</div>\n<div class="cancel-reason">\n     <div class="refund-method-title">如果取消成功，您所支付的金额将通过以下方式返还到您的账户中</div>\n     <div class="refund-table">\n     <table width="100%" border="0" cellpadding="0" cellspacing="0">\n		  <tr>\n		    <td width="28%">支付方式</td>\n		    <td width="28%">支付金额</td>\n		    <td width="44%">返还方式</td>\n		  </tr>\n		  <tr>\n		    <td>银行卡</td>\n		    <td>188.00元</td>\n		    <td>原路返还到银行账户</td>\n		  </tr>\n		  <tr>\n		    <td>其他</td>\n		    <td>20.00元</td>\n		    <td>已使用的优惠券、礼品卡将不再返还，\n已使用的积分将返还至您的账户中</td>\n		  </tr>\n		</table>\n		</div>\n</div>\n<div class="refund-button-count">\n     <div class="refund-button-detail">确定取消</div>\n     <div class="refund-button-share">暂不取消</div>\n</div>'}),define("pages/refund-method",["./PageView","require"],function(e,t){return e.extend({})}),define("text!pages/refund-method.json",[],function(){return'{\n  "template": "refund-method.html",\n  "type":"refund-method"\n}'}),define("text!pages/register-pwd.html",[],function(){return'<div class="login-page-view pwd-change">\n    <div class="login-view-normal">\n        <div class="input-pwddiv" id="first-pwddiv">\n            <input class="input-pwd pwd-old" type="password" placeholder="请输入您的密码" />\n            <span class="pwd-old-switch pwdtype-eyeone"><span id="eye1" class="icomoon-conceal"></span></span>\n        </div>\n        <div style="clear: both"></div>\n    </div>\n    <div class="login-view-normal" style="display: none">\n        <div class="input-pwddiv">\n            <input class="input-pwd pwd-new" type="password" placeholder="请输入您的新密码" />\n            <span class="pwd-old-switch pwdtype-eyetwo"><span id="eye2" class="icomoon-conceal"></span></span>\n        </div>\n    </div>\n    <div>\n        <button class="btnNext theme-backgorund-color-contrast theme-border-color-contrast" disabled onclick="self.btnNext()">下一步</button>\n    </div>\n\n</div>\n'}),define("pages/register-pwd",["require","./PageView"],function(e,t){return t.extend({defaults:{toastTime:null},route:function(e){t.prototype.route.apply(this,arguments)},events:{"click .header-icon-back":"onBack","click .pwdtype-eyeone":"pwdOldChange","click .pwdtype-eyetwo":"pwdNewChange","input .pwd-old":"newpwdChange","input .pwd-new":"oldpwdChange"},initialize:function(e){t.prototype.initialize.apply(this,arguments)},onResume:function(){this.toggleBar&&this.toggleBar("hide"),this.$(".bar").show()},valueChange:function(){var e=this.$el.find(".btnNext"),t=this.$el.find(".pwd-old"),n=this.$el.find(".pwd-new");t.val().trim().length>0?(e.removeAttr("disabled"),e.addClass("active").removeClass("theme-backgorund-color-contrast").removeClass("theme-border-color-contrast").addClass("theme-backgorund-color").addClass(".theme-border-color")):(e.attr("disabled","disabled"),e.removeClass("active").addClass("theme-backgorund-color-contrast").addClass("theme-border-color-contrast").removeClass("theme-backgorund-color").removeClass(".theme-border-color"))},newpwdChange:function(){this.valueChange()},oldpwdChange:function(){this.valueChange()},pwdTypeChange:function(e){if(e==1)if($(".pwd-old").attr("type")=="password"){$(".pwd-old").attr("type","text");var t=this.$el.find("#eye1");t.removeClass("icomoon-conceal"),t.addClass("icomoon-display")}else{$(".pwd-old").attr("type","password");var t=this.$el.find("#eye1");t.removeClass("icomoon-display"),t.addClass("icomoon-conceal")}else if($(".pwd-new").attr("type")=="password"){$(".pwd-new").attr("type","text");var t=this.$el.find("#eye2");t.removeClass("icomoon-conceal"),t.addClass("icomoon-display")}else{$(".pwd-new").attr("type","password");var t=this.$el.find("#eye2");t.removeClass("icomoon-display"),t.addClass("icomoon-conceal")}},onBack:function(){window.history.back()},pwdOldChange:function(){if($(".pwd-old").attr("type")=="password"){$(".pwd-old").attr("type","text");var e=this.$el.find("#eye1");e.removeClass("icomoon-conceal"),e.addClass("icomoon-display")}else{$(".pwd-old").attr("type","password");var e=this.$el.find("#eye1");e.removeClass("icomoon-display"),e.addClass("icomoon-conceal")}},pwdNewChange:function(){if($(".pwd-new").attr("type")=="password"){$(".pwd-new").attr("type","text");var e=this.$el.find("#eye2");e.removeClass("icomoon-conceal"),e.addClass("icomoon-display")}else{$(".pwd-new").attr("type","password");var e=this.$el.find("#eye2");e.removeClass("icomoon-display"),e.addClass("icomoon-conceal")}},onBack:function(){window.history.back()},btnNext:function(){var e=this.$el.find(".pwd-old").val(),t=this.$el.find(".pwd-new").val();if(e.trim().length==0)library.Toast("密码不能为空",1e3);else{library.LoadingBar("注册中..."),this.params.password=e,window.app.referPhone&&(this.params.referencePhone=window.app.referPhone),window.app.referNum&&(this.params.referenceNumber=window.app.referNum);var n=this;this.sendData(window.app.api+"/userRegister",this.params,function(e){e.status=="0"?n.sendData(window.app.api+"/getUserInfo",{userId:e.data.userId},function(t){if(t.status=="0"){window.localStorage.clear();var n=t.data;n.userid=e.data.userId,window.localStorage.setItem("userinfo",JSON.stringify(n)),Backbone.trigger("my-reload"),Backbone.history.navigate("#my-navigate/register-success",{trigger:!0})}else library.Toast("注册失败")}):library.Toast("注册失败,请联系管理员")})}},sendData:function(t,n,r){var i={url:t,showLoading:!0,type:"POST",needReset:!0,data:n,datatype:"json",success:function(e){r(e)},error:function(){}};if(!this.baseModel){var s=e("../models/BaseModel");this.baseModel=new s}this.baseModel.loadData(i)}})}),define("text!pages/register-pwd.json",[],function(){return'{\n  "template":"register-pwd.html",\n  "type":"register-pwd",\n  "header":{\n    "title":"填写密码",\n    "items": [{\n      "type": "link",\n      "icon": "header-icon-back icomoon-back",\n      "pull": "left",\n      "event": "back"\n    }]\n  }\n  }\n\n\n\n'}),define("text!pages/register-success.html",[],function(){return'<div class="success-tips">\n<div class="icomoon-choice theme-color success-img theme-color"></div>\n<div>恭喜您！用户注册成功！</div>\n<div id="countdown">3秒钟后自动跳转>></div>\n</div>\n'}),define("pages/register-success",["require","./PageView"],function(e,t){return t.extend({defaults:{toastTime:null},events:{"click .header-icon-back":"goBack"},initialize:function(e){var n=3;t.prototype.initialize.apply(this,arguments);var r=window.setInterval(function(){n==0?(n=3,window.clearInterval(r),this.goBack()):(n--,this.$el.find("#countdown").html(n+"秒钟后自动跳转>>"))}.bind(this),1e3)},onBack:function(){window.history.back(-3)},goBack:function(){this.onBack()}})}),define("text!pages/register-success.json",[],function(){return'{\n  "template":"modify-success.html",\n  "type":"modify-success",\n  "header":{\n    "title":"注册成功",\n    "items": [{\n      "type": "link",\n      "icon": "header-icon-back icomoon-back",\n      "pull": "left",\n      "event": "back"\n    }]\n  }\n}\n'}),define("text!pages/register.html",[],function(){return'<div class="register-page-view">\n  <div class="register-view-normal">\n    <div class="input-background">\n      <div class="input-accountdiv">\n        <input class="reg-input-account" id="phone" type="text" placeholder="请输入手机号码" />\n      </div>\n    </div>\n    <div class="input-pwddiv">\n      <input class="reg-input-pwd" id="register_input" type="text" placeholder="请输入验证码" />\n      <a href="javascript:;" class="btn-retransmit btn-retransmit-disabled"  >获取验证码</a>\n    </div>\n  </div>\n  <div class="bd-agree"><b class="bd-st"></b>同意商城用户注册协议</div>\n  <div>\n    <button class="btnRegister theme-backgorund-color-contrast theme-border-color-contrast" disabled >下一步</button>\n  </div>\n  <div class="register-tologin-text">\n    <span>已有帐号？请</span><span class="register-to-login theme-color">登录</span>\n  </div>\n  <div class="register-toast">\n     <p class="register-toast-p">对不起,验证码输入错误,请重新输入</p>\n  </div>\n\n</div>\n'}),define("pages/register",["require","./PageView"],function(e,t){return t.extend({defaults:{toastTime:null},referPhone:null,referNum:null,serverRes:null,route:function(e){t.prototype.route.apply(this,arguments)},events:{"click .btnforget":"btnforgetClick","click .header-icon-back":"onBack","click .bd-agree":"onAgreeClick","click .btnRegister":"btnRegisterClick","click .btn-retransmit":"checkRetransmit","click .register-to-login":"toLogin","input .reg-input-pwd":"pwdChange","input .reg-input-account":"numberChange","blur #phone":"blurReg"},initialize:function(e){t.prototype.initialize.apply(this,arguments)},render:function(){return t.prototype.render.apply(this,arguments),this},onResume:function(){window.application.getQueryString("referencePhone")&&(this.referPhone=window.application.getQueryString("referencePhone"),window.app.referPhone=this.referPhone),window.application.getQueryString("referenceNumber")&&(this.referNum=window.application.getQueryString("referenceNumber"),window.app.referNum=this.referNum),this.toggleBar&&this.toggleBar("hide"),this.$(".bar").show()},blurReg:function(){var e=$("#phone").val(),t=/^1[3,4,5,8]\d{9}$/;e.trim().length==0?library.Toast("手机号不能为空",1e3):t.test(e)||library.Toast("请输入正确的手机号",1500)},pwdChange:function(){this.valueChange()},numberChange:function(){var e=$(".btn-retransmit");!e.hasClass("is-restransit")&&$(".reg-input-account").val().trim().length>0?e.removeClass("btn-retransmit-disabled").addClass("theme-color").addClass("theme-border-color"):e.addClass("btn-retransmit-disabled").removeClass("theme-color").removeClass("theme-border-color"),this.valueChange()},valueChange:function(){var e=this.$el.find(".reg-input-pwd"),t=this.$el.find(".reg-input-account"),n=this.$el.find(".btnRegister");e.val().trim().length>0&&t.val().trim().length>0&&$(".bd-st").hasClass("theme-backgorund-color")?(n.removeAttr("disabled"),n.removeClass("theme-backgorund-color-contrast").removeClass("theme-border-color-contrast").addClass("theme-border-color").addClass("theme-backgorund-color")):(n.attr("disabled","disabled"),n.addClass("theme-backgorund-color-contrast").addClass("theme-border-color-contrast").removeClass("theme-border-color").removeClass("theme-backgorund-color"))},btnRegisterClick:function(){if($(".reg-input-account").val().trim().length<1)library.Toast("手机号码不能为空");else if(this.$("#register_input").val().length<1)library.Toast("验证码不能为空");else if($(".theme-backgorund-color").length<1)library.Toast("请同意商城协议");else{var e=0,t=this,n=$(".reg-input-account").val().trim();library.LoadingBar("验证中..."),this.sendData("/verifyCheckCode",{userPhone:n,checkCode:$("#register_input").val(),sessionId:this.sessionid},function(e){e.status=="0"?(library.DismissLoadingBar(),Backbone.history.navigate("#my-navigate/register-pwd?userPhone="+n+"&sessionId="+e.data.sessionId,{trigger:!0})):(library.DismissLoadingBar(),library.Toast(e.message))},function(e){library.DismissLoadingBar(),library.Toast("请输入正确的手机号码或者验证码")})}},checkRetransmit:function(){var e=this;if($(".btn-retransmit").hasClass("btn-retransmit-disabled"))return;var t=$(".btn-retransmit");t.html("重新发送（60s）").addClass("btn-retransmit-disabled").addClass("is-restransit").removeClass("theme-color");var n=60,r=setInterval(function(){--n,n==0?(t.html("获取验证码").removeClass("btn-retransmit-disabled").removeClass("is-restransit").addClass("theme-color"),clearInterval(r)):t.html("重新发送（"+n+"s）")},1e3);this.checkPhone($(".reg-input-account").val().trim())?this.sendData("/getCheckCode",{userPhone:$(".reg-input-account").val().trim()},function(t){t.status=="0"?e.sessionid=t.data.sessionId:library.Toast(t.message)}.bind(this),function(){library.Toast("网络错误")}):library.Toast("手机号格式错误")},callback:function(){},sendData:function(t,n,r,i){var s=e("../models/BaseModel"),o=new s,u={type:"POST",path:t,data:n,datatype:"json",success:r,error:i};o.loadData(u)},checkPhone:function(e){var t=/^1[0-9]{10}$/;return t.test(e)},onBack:function(){window.history.back()},onAgreeClick:function(){$(".bd-st").hasClass("theme-backgorund-color")?$(".bd-st").removeClass("theme-backgorund-color"):$(".bd-st").addClass("theme-backgorund-color"),this.valueChange()},toLogin:function(){var e="#my-navigate/login/login";Backbone.history.navigate(e,{trigger:!0})}})}),define("text!pages/register.json",[],function(){return'{\n  "template": "register.html",\n  "type":"register",\n  "header": {\n    "title": "注册",\n    "items": [{\n      "type": "link",\n      "icon": "header-icon-back icomoon-back",\n      "pull": "left",\n      "event": "back"\n    }]\n  },\n  "components": [\n  {\n      "id": "switchView",\n      "type": "SwitchView",\n      "IsOpen":false\n    }\n  ]\n}\n'}),define("text!pages/security.html",[],function(){return'<div class="div-security" id="modify-pwd">\n    <div class="security-item-left">\n        <div class="security-type">密码更改</div>\n        <div class="security-tips">*建议您定期更改密码以保护账户安全</div>\n    </div>\n    <div class="security-item-right">\n        <span class="item-right-icon icomoon-details"></span>\n    </div>\n</div>\n<div class="div-security" id="modify-mobile">\n    <div class="security-item-left">\n        <div class="security-type">修改手机认证</div>\n        <div class="security-tips">*用于修改验证的手机号</div>\n    </div>\n    <div class="security-item-right">\n        <span class="security-phone theme-color-contrast">\n            <%=phoneNum.replace(/(\\d{3})(\\d{4})(\\d{4})/,"$1****$3")%></span>\n        <span class="item-right-icon icomoon-details"></span>\n    </div>\n</div>\n'}),define("pages/security",["require","./PageView"],function(e,t){return t.extend({events:{"click #modify-pwd":"onPwdClick","click #modify-mobile":"onMobile","click .header-icon-back":"onBack"},model:null,type:"security",initialize:function(){var t=JSON.parse(localStorage.getItem("userinfo"));t.sex==0?t.sex="男":t.sex==1?t.sex="女":t.sex="保密";var n=e("../models/MyAccountModel");this.model=new n({account:t.nickname,name:t.username,sex:t.sex,birthday:t.birthday,headurl:t.usericon,phoneNum:t.mobile})},render:function(){this.$el.empty();if(this.options.header){this.$el.addClass("page-with-header");var e=this.getHeaderView(this.options.header);this.$el.append(e)}return loader.getPageTemplate("security.html").then(function(e){var t=this.model?this.model.toJSON():{},n=$(e(t));this.$el.append(n)}.bind(this)),this},onPwdClick:function(e){Backbone.history.navigate("#my-navigate/modify-pwd",{trigger:!0})},onMobile:function(e){Backbone.history.navigate("#my-navigate/bind-mobile",{trigger:!0})},onResume:function(){this.toggleBar&&this.toggleBar("hide"),this.$(".bar").show()},onBack:function(){window.history.back()}})}),define("text!pages/security.json",[],function(){return'{\n  "template":"security.html",\n  "type":"security",\n  "header":{\n    "title":"账户安全",\n    "items": [{\n      "type": "link",\n      "icon": "header-icon-back icomoon-back",\n      "pull": "left",\n      "event": "back"\n    }]\n  }\n}\n'}),define("text!pages/service-evalution.html",[],function(){return'<div class="service-evalution-view">\n<div class="service-evalution-title">\n    <header class="headerbox">\n        <div class=" nav-left header-icon-back address-title-icon">\n            <span class="icomoon icomoon-back"></span>\n        </div>\n        <div class=\'mid\'>\n            <span class="common-title">服务评价</span>\n        </div>\n        <div class="left-right nav-right">\n            <a class="header-icon-menu icomoon icomoon-moremore"></a>\n        </div>\n\n    </header>\n\n    <div class="blank-top"></div>\n    <div>\n        <component id=\'SearchMidPageView\'/>\n        <component id="PopupMenu"/>\n    </div>\n</div>\n\n<div class="select-comment-type">\n    <div class="service-comment-type-group first-group" data-index="1">\n        <span class="type-choice-ico first-ico icomoon-choice theme-color" data-index="1"></span>\n        <span class="service-comment-type" data-index="1">评价上级</span>\n    </div>\n    <div class="service-comment-type-group" style=\'display:none\' data-index="2" >\n        <span class="type-choice-ico second-ico icomoon-choicebox" data-index="2"></span>\n        <span class="service-comment-type" data-index="2">评价渠道机构</span>\n    </div>\n</div>\n<div class="select-comment-type select-organization">\n    <div class="row-left">\n        <span class="organization-select-title">选择渠道机构</span>\n        <span class="select-tips">(为您配送的其他机构)</span>\n    </div>\n    <div class="row-right select-right"><span class="sender-choose"></span><span class="icomoon-details"></span></div>\n</div>\n\n<div class="service-comment-content">\n    <div class="service-comment-level">\n        <div class="comment-target">\n            <span>您的上级是: </span>\n            <span class="comment-target-name"></span>\n            <span class="comment-target-contact"></span>\n        </div>\n        <div class="level-group">\n            <div class="comment-level-block evaluate-tab-active" data-index="5">非常好</div>\n            <div class="comment-level-block comment-level-block4" data-index="4">满意</div>\n            <div class="comment-level-block comment-level-block3" data-index="3">一般</div>\n            <div class="comment-level-block comment-level-block2" data-index="2">不满意</div>\n            <div class="comment-level-block comment-level-block1" data-index="1">再也不来</div>\n        </div>\n    </div>\n    <div class="service-comment-input-box">\n        <textarea class="input-area" id ="input-areaOfService" placeholder="写点什么吧,以便为其他小伙伴提供参考,字数在10-200个字"></textarea>\n    </div>\n</div>\n<div class="comment-submit-btn">提交评价</div>\n</div>\n\n<div class="sender-sellect-container">\n    <component id="SenderSelect"/>\n</div>\n'}),define("pages/service-evalution",["./PageView","require"],function(e,t){return e.extend({events:{"click .header-icon-back":"goback","click .icomoon-moremore":"menuMore","click .menu-search":"toSearch","click .service-comment-type-group":"typeSelector","click .comment-level-block":"levelSelector","click .select-organization":"toSender","click .sender-select-item":"itemChoose","click .h-span-left":"goBack","click .comment-submit-btn":"submit"},type:0,targetId:null,commentContent:null,commentLevel:"5",leaderId:null,methodId:null,initialize:function(){this.listenTo(this.findComponent("PopupMenu"),"toSearch",this.toSearch.bind(this))},typeSelector:function(e){var t;$(e.target).attr("data-index")==1?(t=0,this.type=0,$(".type-choice-ico").removeClass("theme-color").removeClass("icomoon-choice").removeClass("icomoon-choicebox"),$(".first-ico").addClass("theme-color").addClass("icomoon-choice"),$(".second-ico").addClass("icomoon-choicebox"),$(".select-organization").hide(),$(".comment-target").show()):(t=1,this.type=1,$(".type-choice-ico").removeClass("theme-color").removeClass("icomoon-choice").removeClass("icomoon-choicebox"),$(".second-ico").addClass("theme-color").addClass("icomoon-choice"),$(".first-ico").addClass("icomoon-choicebox"),$(".select-organization").show(),$(".comment-target").hide())},levelSelector:function(e){$(".comment-level-block").removeClass("evaluate-tab-active"),$(e.target).addClass("evaluate-tab-active"),this.commentLevel=$(e.target).attr("data-index"),console.log(this.commentLevel)},toSearch:function(e){this.findComponent("SearchMidPageView").show()},menuMore:function(e){this.findComponent("PopupMenu").show()},toSender:function(){var e=this,t=$("<div class='sender-select-header'/>"),n=$("<span class='icomoon-back h-span-left'/>"),r=$("<h1 class='h-span-middle'/>");r.text("选择渠道机构"),t.append(n),t.append(r),this.$(".sender-sellect-container").append(t),setTimeout(function(){e.$(".sender-sellect-container").addClass("sender-transform")},50),this.$("#SenderSelect").show(),this.$(".service-evalution-view").hide()},itemChoose:function(e){var t=this.$(e.currentTarget).text();this.methodId=this.$(e.currentTarget).attr("data-id"),this.$(".service-evalution-view").show(),this.$(".sender-select-header").remove(),this.sender=t,this.$(".sender-choose").text(t),this.$(".select-tips").hide(),this.$(".sender-sellect-container").removeClass("sender-transform")},goBack:function(){this.$(".select-tips").show(),this.$(".sender-choose").text(""),this.$(".service-evalution-view").show(),this.$(".sender-select-header").remove(),this.$(".sender-sellect-container").removeClass("sender-transform")},goback:function(e){window.history.back()},onRender:function(){var e=window.application.getUserInfo();this.getData("/getServiceInfo",{userId:e.userid})},getData:function(e,n){var r=t("../models/AjaxCollection"),i=new r;_this=this;var s={path:e,type:"POST",needReset:!0,data:n,datatype:"json",success:function(e){console.log(e.data),e.data.superInfo.superId&&(_this.leaderId=e.data.superInfo.superId),_this.findComponent("SenderSelect").collection.reset(e.data.channelInfo),e.data.superInfo.superName?_this.$(".comment-target-name").text(e.data.superInfo.superName+" ("+e.data.superInfo.superPhone+")"):_this.$(".comment-target-name").text("您还没有上级"),_this.$("#input-areaOfService").val(e.data.superInfo.APPRAISE_CONTENT),$(".comment-level-block").removeClass("evaluate-tab-active");var t=e.data.superInfo.APPRAISE_LEVEL;switch(t){case"5":$(".comment-level-block").first().addClass("evaluate-tab-active");break;case"4":$(".comment-level-block4").addClass("evaluate-tab-active");break;case"3":$(".comment-level-block3").addClass("evaluate-tab-active");break;case"2":$(".comment-level-block2").addClass("evaluate-tab-active");break;case"1":$(".comment-level-block1").addClass("evaluate-tab-active");break;default:$(".comment-level-block").first().addClass("evaluate-tab-active")}},error:function(){}};i.loadData(s)},sendData:function(e,n){var r=t("../models/AjaxCollection"),i=new r;_this=this;var s={path:e,type:"POST",needReset:!0,data:n,datatype:"json",success:function(e){library.Toast("评价成功"),setTimeout(function(){typeSelected=0,this.type=0,$(".type-choice-ico").removeClass("theme-color").removeClass("icomoon-choice").removeClass("icomoon-choicebox"),$(".first-ico").addClass("theme-color").addClass("icomoon-choice"),$(".second-ico").addClass("icomoon-choicebox"),$(".select-organization").hide(),$(".comment-level-block").removeClass("evaluate-tab-active"),$(".comment-level-block").first().addClass("evaluate-tab-active")},2e3)},error:function(){library.Toast("评价失败")}};i.loadData(s)},submit:function(){_this=this;var e=window.application.getUserInfo();if(this.type==0){this.targetId=this.leaderId;if(!this.targetId){library.Toast("您还没有上级");return}}else if(this.type==1){this.targetId=this.methodId;if(!this.targetId){library.Toast("渠道机构不能为空");return}}if(!this.commentLevel){library.Toast("评分等级不能为空");return}this.commentContent=this.$(".input-area").val(),this.sendData("/addServiceComment",{userId:e.userid,type:_this.type,targetId:_this.targetId,commentContent:_this.commentContent,commentLevel:_this.commentLevel})}})}),define("text!pages/service-evalution.json",[],function(){return'{\n  "template": "service-evalution.html",\n  "type":"service-evalution",\n  "components" : [\n    {\n      "id": "SearchMidPageView",\n      "type": "SearchMidPageView"\n    },\n    {\n      "id": "PopupMenu",\n      "type": "PopupMenu"\n    },\n    {\n      "id": "SenderSelect",\n      "type": "SenderSelect",\n      "collection": "senderCollection",\n      "template": "senderSelect.html"\n    }\n  ]\n}'}),define("text!pages/shopcollecor.html",[],function(){return""}),define("pages/shopcollector",["./PageView","require"],function(e,t){return e.extend({events:{"click .goods-collector-li":"delete","click .shop-collector-li":"delete"},initStatus:function(){var e=window.app.collector;e=="shop"?(this.$(".add-blank-leaving-icon").removeClass("icomoon-withoutcollect").removeClass("add-blank-leaving-icon"),this.$(".add-blank-leaving-words").text("").removeClass("add-blank-leaving-words"),this.$(".collector-shop").addClass("collector-shop-selected").addClass("theme-backgorund-color").removeClass("collector-shop").removeClass("theme-color"),this.$(".collector-goods-selected").addClass("collector-goods").removeClass("collector-goods-selected").removeClass("theme-backgorund-color").addClass("theme-color"),this.$("#ShopCollectorView").show(),this.$("#GoodsCollectorView").hide(),this.getShopInfo()):(this.$(".add-blank-leaving-icon").removeClass("icomoon-withoutcollect").removeClass("add-blank-leaving-icon"),this.$(".add-blank-leaving-words").text("").removeClass("add-blank-leaving-words"),this.$(".collector-shop-selected").addClass("collector-shop").addClass("theme-color").removeClass("theme-backgorund-color").removeClass("collector-shop-selected"),this.$(".collector-goods").addClass("collector-goods-selected").addClass("theme-backgorund-color").removeClass("collector-goods").removeClass("theme-color"),this.$("#GoodsCollectorView").show(),this.$("#ShopCollectorView").hide(),this.getGoodsInfo())},shopCollection:null,goodsCollection:null,userInfo:null,onResume:function(){var t=this;this.initData(),this.initStatus(t),e.prototype.onResume.apply(this,arguments)},onRender:function(){this.initView()},initData:function(){this.shopCollection=this.findComponent("ShopCollectorView").collection,this.goodsCollection=this.findComponent("GoodsCollectorView").collection,this.userInfo=window.application.getUserInfo();if(!this.userInfo){library.Toast("您尚未登录"),window.history.back();return}},getShopInfo:function(){var e="/shopcollected";this.shopCollection.loadData(this.getAjaxOptions(e,this.userInfo.userid,this.onShopSuccess.bind(this),this.onShopError.bind(this)))},getGoodsInfo:function(){var e="/productcollected";this.goodsCollection.loadData(this.getAjaxOptions(e,this.userInfo.userid,this.onGoodsSuccess.bind(this),this.onGoodsError.bind(this)))},onGoodsSuccess:function(e){if(e&&e.data&&e.data.length==0){var t=$("<div class = 'icomoon-withoutcollect add-blank-leaving-icon'></div><div class = 'add-blank-leaving-words'>您还未收藏什么商品哟~</div>");this.$el.append(t)}},onGoodsError:function(e){library.Toast("网络出错")},onShopSuccess:function(e){if(e&&e.data&&e.data.length==0){var t=$("<div class = 'icomoon-withoutcollect add-blank-leaving-icon'></div><div class = 'add-blank-leaving-words'>您还未收藏什么店铺哟~</div>");this.$el.append(t)}},onShopError:function(e){library.Toast("网络出错")},getAjaxOptions:function(e,t,n,r){var i={path:e,showLoading:!0,type:"GET",needReset:!0,data:{userid:t},success:n,error:r};return i},initView:function(){_this=this,this.$el.css({"background-color":"white"}),this.$(".table-view").css("border-top","0px"),this.$(".table-view").css("padding-top","1.17333333rem"),this.$("#ShopCollectorView").css("display","none");var e=$("<div class = 'collector-title'>"),t=$("<div class = 'icomoon-back collector-icon'>"),n=$("<div class = 'collector-toggle'>"),r=$("<div class = 'collector-goods-selected theme-backgorund-color theme-border-color ' id = 'goods'>"),i=$("<div class = 'collector-shop theme-border-color theme-color' id = 'shop'>"),s=$("<div class = 'collector-tips'> "),o=$("<p class = 'collector-tips-said'>");o.text("取消成功"),i.text("商铺"),r.text("商品"),s.append(o),n.append(s),n.append(r),n.append(i),n.append(s),e.append(t),e.append(n),this.$el.prepend(e),this.$el.find(".icomoon-back").click(function(){window.history.back()}),this.$el.find("#shop").click(function(){$(".collector-shop").addClass("collector-shop-selected").addClass("theme-backgorund-color").removeClass("collector-shop").removeClass("theme-color"),$(".collector-goods-selected").addClass("collector-goods").removeClass("collector-goods-selected").removeClass("theme-backgorund-color"),$(".collector-goods").addClass("theme-color"),$("#ShopCollectorView").show(),$("#GoodsCollectorView").hide(),$(".add-blank-leaving-icon").removeClass("icomoon-withoutcollect").removeClass("add-blank-leaving-icon"),$(".add-blank-leaving-words").text("").removeClass("add-blank-leaving-words"),_this.getShopInfo()}),this.$el.find("#goods").click(function(){$(".collector-shop-selected").addClass("collector-shop").removeClass("collector-shop-selected").removeClass("theme-backgorund-color"),$(".collector-goods").addClass("collector-goods-selected").addClass("theme-backgorund-color").removeClass("collector-goods").removeClass("theme-color"),$(".collector-shop").addClass("theme-color"),$("#GoodsCollectorView").show(),$("#ShopCollectorView").hide(),$(".add-blank-leaving-icon").removeClass("icomoon-withoutcollect").removeClass("add-blank-leaving-icon"),$(".add-blank-leaving-words").text("").removeClass("add-blank-leaving-words"),_this.getGoodsInfo()})},"delete":function(e){var t=e.currentTarget.dataset.cid,n=e.currentTarget.className;if(e.target.dataset.name=="goods"||e.target.dataset.name=="shop")this.deleteInfo(e.target.dataset.name,t);else if(n=="shop-collector-li"){var r="#my-navigate/business?shopid="+t;Backbone.history.navigate(r,{trigger:!0})}else if(n=="goods-collector-li"){var r="#my-navigate/itemdetail?goodsid="+t;Backbone.history.navigate(r,{trigger:!0})}},baseModel:null,deleteInfo:function(e,n){if(!this.baseModel){var r=t("../models/BaseModel");this.baseModel=new r}var i={};i.userid=this.userInfo.userid;if(e=="shop"){i.shopid=n;var s="/shopcollected"}else{i.productid=n;var s="/productcollected"}var o={path:s,data:i,success:function(t){t&&t.status=="ok"?(library.Toast("操作成功"),e=="shop"?this.getShopInfo():this.getGoodsInfo()):library.Toast("操作失败，请重试")}.bind(this),error:function(){library.Toast("操作失败，请重试")}.bind(this)};this.baseModel.loadData(o)}})}),define("text!pages/shopcollector.json",[],function(){return'{\n  "type" : "shopcollector",\n  "template" : "shopcollector.html",\n  "components" : [\n    {\n      "type": "ShopCollectorView",\n      "id" : "ShopCollectorView",\n      "template": "shopcollectorlist.html",\n      "autoload":false,\n      "collection": "ShopCollector",\n      "paging":false\n    },\n    {\n      "type": "GoodsCollectorView",\n      "id" : "GoodsCollectorView",\n      "template": "goodscollectorlist.html",\n      "autoload":false,\n      "collection": "GoodsCollector",\n      "paging":false\n\n    }\n  ]\n}\n'}),define("text!pages/shopingcart-navigate.json",[],function(){return'{\n  "type": "NavigationView",\n  "rootPage" : "shopingcart"\n}\n'}),define("text!pages/shopingcart.html",[],function(){return'<header>\n  <div class="headerbox">\n    <div  class="shopingcart-back left-right nav-left" display="padding-left:10px">\n      <span  id="shopingcart-back" class="icomoon icomoon-back goback"></span>\n    </div>\n    <div class=\'mid\' >\n      购物车\n    </div>\n    <div class="left-right nav-left shoping-cart-menu">\n      <span  id="shopingcart-ed" class="shopingcart-ed common-menu-btn">\n       编辑\n      </span>\n      <!-- <span class="icomoon icomoon-moremore common-menu-btn shopping-car-icomoon"></span>  -->\n    </div>\n  </div>\n\n</header>\n<div class="shopingcart-content">\n  <component id="shopingcartlistview" />\n  <div class="shopingcartlist_empty">\n      <div class="icomoon-empty shopcart_empty_ico"></div>\n      <span class="cart_empty_label">购物车空空哒~</span>\n      <div><button class="goToShopping theme-backgorund-color theme-border-color">去逛逛</button></div>\n  </div>\n\n  <div class="unlogin_tips">\n      <div class="unlogin_tips_label">您还未登录</div>\n      <div><button class="unlogin_tips_btn theme-backgorund-color theme-border-color">去登录</button></div>\n  </div>\n\n  <component id="PushForYouView" />\n</div>\n<div class="shopingcart-footer">\n  <span class="icomoon icomoon-choicebox shopingcart-choicebox-all"></span>\n  <span class="shopingcart-info-all">全选</span>\n  <span class="shopingcart-info-total">合计：<span class="shopingcart-info-total-price">0</span></span>\n  <span class="shopingcart-settlement theme-backgorund-color">去结算</span>\n</div>\n<div class="shopingcart-manage">\n  <span class="icomoon icomoon-choicebox shopingcart-choicebox-manage">\n    <span class="shopingcart-manage-allchoic">全选</span>\n  </span>\n  <span class="shopingcart-manage-delete theme-color theme-border-color">删除</span>\n  <!-- <span class="shopingcart-manage-collection">移入收藏</span> -->\n</div>\n<div>\n  <component id="CartEditorView" />\n  <component id="PopupMenu" />\n</div>\n'}),define("pages/shopingcart",["./PageView","require"],function(e,t){return e.extend({type:"shopingcart",events:{"click .goback":"goBack","click .goToShopping":"goHome","click .unlogin_tips_btn":"goLogin","click .shopingcart-settlement":"onClickBuy","click .shopingcart-choicebox-all":"onSelectedAll","click .shopingcart-goods-edit-spec":"editCartItem","click .shopingcart-goods-delete":"deleteItem","click .icomoon-moremore":"menuMore","click .shopingcart-goods-listitem":"cartItemClick"},shopListView:null,userid:null,listViewType:0,orderconfirmeflag:0,initialize:function(){this.userid=window.application.getLocalStorage("userid"),this.shopListView=this.findComponent("shopingcartlistview"),this.listenTo(this.findComponent("PopupMenu"),"toSearch",this.toSearch.bind(this))},toSearch:function(e){this.findComponent("SearchMidPageView").show()},render:function(){return e.prototype.render.apply(this,arguments),this},menuMore:function(e){this.findComponent("PopupMenu").show()},cartItemClick:function(e){if(this.listViewType==1)return;var t=$(e.target);if(t.hasClass("shopingcart-choicebox-goods"))return;if(t.hasClass("shopingcart-goods-edit-btn-plus"))return;if(t.hasClass("shopingcart-goods-edit-btn-minus"))return;if(t.hasClass("shopingcart-goods-edit-spec"))return;if(t.hasClass("shopingcart-goods-delete"))return;if(t.hasClass("shopingcart-goods-edit-input"))return;if(t.hasClass("icomoon-spread"))return;var n=$(e.currentTarget),r=n.attr("data-pid");r&&Backbone.history.navigate("#shopingcart-navigate/itemdetail?goodsid="+r,{trigger:!0})},onResume:function(){$("#shopingcart-ed").removeClass("active").text("编辑"),$(".shopingcart-footer").show(),$(".shopingcart-manage").hide();var e=application.getQueryString("back");e=="true"?(this.toggleBar&&this.toggleBar("hide"),$("#shopingcart-back").css("display","table-cell")):(this.toggleBar&&this.toggleBar("show"),$("#shopingcart-back").css("display","none")),this.shopListView.initData($(".shopingcart-ed").text()=="完成"),this.updateBottom()},updateBottom:function(){window.location.href.indexOf("back=true")>0?($(".shopingcart-manage").css("bottom","0"),$(".shopingcart-footer").css("bottom","0"),this.$(".push-for-you").css("padding-bottom","2.2rem")):($(".shopingcart-manage").css("bottom","1.2rem"),$(".shopingcart-footer").css("bottom","1.2rem"),this.$(".push-for-you").css("padding-bottom","2.2rem")),this.setTotal()},onRender:function(){this.isRender=!0,this.updateBottom(),this.initDataFinished();var e=this;e.$el.find(".shopingcart-ed").click(function(){$(this).hasClass("active")?(orderconfirmeflag=0,e.updateCart(),$(this).removeClass("active"),$(this).text("编辑"),e.listViewType=0,$(".shopingcart-goods-edit").hide(),$(".shopingcart-goods-details-info-show").show(),$(".shopingcart-manage").hide(),$(".ShopingcartListView").html()?$(".shopingcart-footer").show():$(".shopingcart-footer").hide(),$(".shopingcart-goods-details-title").css({"-webkit-line-clamp":"2",right:"0rem"}),e.updateBottom(),e.updateShoppingCartNum(),e.findComponent("PushForYouView").$el.show(),$("#shopingcartlistview").css({"margin-bottom":"0"})):(orderconfirmeflag=1,$(this).addClass("active"),$(this).text("完成"),e.listViewType=1,$(".shopingcart-goods-edit").show(),$(".shopingcart-goods-details-info-show").show(),$(".shopingcart-manage").show(),$(".shopingcart-footer").hide(),$(".shopingcart-goods-details-title").css({"-webkit-line-clamp":"1",right:"1.2rem"}),e.updateBottom(),e.findComponent("PushForYouView").$el.hide(),$("#shopingcartlistview").css({"margin-bottom":"2.7rem"}))})},updateShoppingCartNum:function(){var e=this.shopListView.collection.toJSON(),t=this.shopListView.cartListData,n=window.application.getUserInfo();for(var r=0;r<e.length;r++)if(t&&t[r].number&&t[r].number!=e[r].number){var i={path:"/modifyCart",type:"POST",data:{userId:n.userid,cartId:e[r].cartId,productId:e[r].productId,number:e[r].number},showLoading:!1,success:this.updateNumSuccess.bind(this),error:this.updateNumError.bind(this)};this.updateData(i)}},updateNumSuccess:function(){},updateNumError:function(){},editCartItem:function(e){var t=$(e.target).parents(".shopingcart-goods-listitem"),n=t.attr("data-index"),r=this.shopListView.collection.find({cartId:n});this.findComponent("CartEditorView").show(r,this.editItemResult.bind(this)),$(e.target).addClass("icomoon-spread-close")},getSpecEditData:function(e){return console.log(e.productSpec),data={spec1:[],spec2:[]},data.image=e.imgurl,data.price=e.price,data.spec1.push({id:123,name:"白色"}),data.spec1.push({id:143,name:"黑色"}),data.spec1.push({id:133,name:"驼色"}),data.spec2.push({id:123,name:"35"}),data.spec2.push({id:143,name:"36"}),data.spec2.push({id:133,name:"37"}),data.spec2.push({id:136,name:"38"}),data},editItemResult:function(){$(".icomoon-spread").removeClass("icomoon-spread-close")},initDataFinished:function(){this.initView()},initView:function(){var e=this;e.$el.find(".shopingcart-choicebox-manage").click(function(){$(this).hasClass("icomoon-choice")?($(this).removeClass("icomoon-choice").removeClass("theme-color"),e.$el.find(".shopingcart-choicebox-store").removeClass("icomoon-choice").removeClass("theme-color"),e.$el.find(".shopingcart-choicebox-goods").removeClass("icomoon-choice").removeClass("theme-color")):($(this).addClass("icomoon-choice").addClass("theme-color"),e.$el.find(".shopingcart-choicebox-store").addClass("icomoon-choice").addClass("theme-color"),e.$el.find(".shopingcart-choicebox-goods").addClass("icomoon-choice").addClass("theme-color"))}),e.$el.find(".shopingcart-manage-delete").click(function(){var t=$(".shopingcart-choicebox-goods.icomoon-choice.theme-color").length;t==0?library.Toast("您还没有选择商品哦！",1e3):library.MessageBox("提示信息","确定要删除这"+t+"种商品吗？",[{leftText:"确定",callback:function(){var t=[];$(".shopingcart-choicebox-goods").each(function(){if($(this).hasClass("icomoon-choice")){var e=$(this).parents(".shopingcart-goods-listitem").attr("data-index");t.push(e)}}),e.deleteCart(t)}},{rightText:"取消",callback:function(){}}])}),e.$el.find(".shopingcart-manage-collection").click(function(){var t=$(".shopingcart-choicebox-goods.icomoon-choice.theme-color").length;t==0?library.Toast("您还没有选择商品哦！",1e3):library.MessageBox("提示信息","确定要将这"+t+"种移入我的收藏？",[{leftText:"确定",callback:function(){var t=[];$(".shopingcart-choicebox-goods").each(function(){if($(this).hasClass("icomoon-choice")){var e=$(this).parents(".shopingcart-goods-listitem").attr("data-index");t.push(e)}}),e.moveCollection(t),e.deleteCart(t)}},{rightText:"取消",callback:function(){}}])})},deleteItem:function(e){var t=this;library.MessageBox("提示信息","确定要删除吗？",[{leftText:"确定",callback:function(){var n=$(e.target).parents(".shopingcart-goods-listitem").attr("data-index"),r=[];r.push(n),t.deleteCart(r)}},{rightText:"取消",callback:function(){}}])},baseModel:null,deleteCart:function(e){if(!e||e.length<=0){library.Toast("请选择要删除的物品");return}e=e.join(",");var t=this,n=window.application.getUserInfo(),r={path:"/deleteCart",type:"POST",data:{userId:n.userid,cartIds:e},showLoading:!0,success:this.deleteSuccess.bind(this),error:this.deleteError.bind(this)};this.updateData(r)},deleteSuccess:function(e){e&&e.status==0&&(library.Toast(e.message||"删除成功"),this.shopListView.initData(!0),this.updateshoppingcart())},deleteError:function(e){library.Toast(e?e.message:"操作失败，请重试")},moveCollection:function(e){if(!e||e.length<=0){library.Toast("请选择要收藏的物品");return}var t=window.application.getUserInfo();e=e.join(",");var n={path:"/collect-products",type:"POST",data:{productid:e,userid:t.userid},showLoading:!0,success:this.moveSuccess.bind(this),error:this.moveError.bind(this)};this.updateData(n)},moveSuccess:function(e){e&&e.status=="ok"&&(library.Toast("收藏成功"),this.shopListView.cartListData.length||(this.shopListView.initData(),$(".shopingcart-manage").hide(),$("#shopingcart-ed").removeClass("active").text("编辑")))},moveError:function(e){library.Toast(e?e.message:"操作失败，请重试")},updateData:function(e){if(!this.baseModel){var n=t("../models/BaseModel");this.baseModel=new n}this.baseModel.loadData(e)},updateCart:function(){this.completeUpdate()},updateCartSuccess:function(e){e&&e.status=="ok"&&(library.Toast(e.message||"操作成功"),this.shopListView.initData(!0),this.updateshoppingcart()),this.completeUpdate()},updateCartError:function(e){library.Toast(e.message||"操作失败，请重试"),this.completeUpdate()},completeUpdate:function(){$(".shopingcart-ed").removeClass("active").text("编辑"),$(".shopingcart-goods-edit").hide(),$(".shopingcart-goods-details-info-show").show(),$(".shopingcart-manage").hide(),$(".shopingcart-footer").show(),this.shopListView.cartInfo={}},goBack:function(e){window.history.back()},goHome:function(){window.location.href="#home-navigate"},goLogin:function(){var e="#shopingcart-navigate/login";Backbone.history.navigate(e,{trigger:!0})},createOrderItem:function(e){var t={};return t.itemNumber=e.number,t.type=e.type,t.spec=e.spec,t.name=e.name,t.cartId=e.cartId,t.goodsId=e.productId,t.itemId=e.itemid||"",t.tradePrice=e.price,t.totalPrice=t.tradePrice,t.imgurl=e.image,t},onSelectedAll:function(){var e=$(".icomoon-choicebox").length;$(".icomoon-choice").length<e?this.$(".icomoon-choicebox").addClass("icomoon-choice").addClass("theme-color"):this.$(".icomoon-choicebox").removeClass("icomoon-choice").removeClass("theme-color"),this.updateBottom()},onClickBuy:function(e){var t=this,n=[],r=[],i=0;$(".shopingcart-item").each(function(e){var r=$(".shopingcart-choicebox-goods.icomoon-choice.theme-color");i=r.length;if(i==0)library.Toast("您还没有选择商品哦！",1e3);else{var s=t.shopListView.collection.toJSON(),o=s[e],u={};u.shopName=o.shopname,u.postage="065201",u.items=[];var a=o.cartId;$('.shopingcart-goods-listitem[data-index="'+a+'"]').find(".shopingcart-choicebox-goods").hasClass("icomoon-choice")&&u.items.push(t.createOrderItem(o)),u.items.length>0&&n.push(u)}}),i&&(window.app.shopsOrder=n,console.log("====>>>"),console.log(n),Backbone.history.navigate("#shopingcart-navigate/create-order",{trigger:!0}))},updateshoppingcart:function(){var e=t("../models/BaseModel"),n=window.application.getUserInfo(),n=n.userid,r=new e,i={url:window.app.api+"/shoppingcart",type:"GET",needReset:!0,data:{userid:n},success:function(e){var t=e.data,n=0;_.map(t,function(e){_.map(e.productList,function(e){n+=e.number})});var r=window.application.getUserInfo();r.cartNumber=n,window.application.setLocalStorage("userinfo",r)},error:function(){}}},setTotal:function(){var e=0;$(".shopingcart-choicebox-goods.icomoon-choice.theme-color").each(function(){var t=parseFloat($(this).parent().find(".shopingcart-goods-details-unit-price").attr("data-price")),n=parseInt($(this).parent().find(".shopingcart-goods-edit-input").val());e+=t*100*n}),e/=100,$(".shopingcart-info-total-price").text("¥"+e)}})}),define("text!pages/shopingcart.json",[],function(){return'{\n  "template": "shopingcart.html",\n  "type": "shopingcart",\n  "components":[\n    {\n      "id":"SearchMidPageView",\n      "type":"SearchMidPageView"\n    },\n    {\n      "id":"shopingcartlistview",\n      "type":"ShopingcartListView"\n    },\n    {\n      "id":"PushForYouView",\n      "type":"PushForYouView"\n    },\n    {\n      "id":"CartEditorView",\n      "type":"CartEditorView"\n    },\n    {\n      "id":"PopupMenu",\n      "type":"PopupMenu"\n    }\n  ]\n\n}\n'}),define("text!pages/show-view.html",[],function(){return'<header class="headerbox headerOnTop">\n    <div class="left-right nav-left goback">\n        <span class="icomoon icomoon-back"></span>\n    </div>\n    <div class=\'mid\'>\n        <span class="common-title">图文详情</span>\n    </div>\n    <div class="left-right nav-right">\n\n    </div>\n</header>\n<div class="show-view" style="width:100%">\n     \n</div>'}),define("pages/show-view",["./PageView","require"],function(e,t){return e.extend({events:{"click .icomoon-back":"onBack"},onBack:function(){window.history.back()},onResume:function(){var e=window.app.showView;this.$(".show-view").html(e)}})}),define("text!pages/show-view.json",[],function(){return'{\n  "template": "show-view.html",\n  "type":"show-view"\n\n}\n'}),define("text!pages/transferPoint.html",[],function(){return'<header class="headerbox headerOnTop">\n    <div class="left-right nav-left goback">\n        <span class="icomoon icomoon-back"></span>\n    </div>\n    <div class=\'mid\'>\n        <span class="common-title">积分转移</span>\n    </div>\n    <div class="left-right nav-right">\n\n    </div>\n\n</header>\n<div class="pointTrans">\n    <div class="row-left">转出积分</div>\n    <div class="row-right">\n        <span>分</span>\n    </div>\n    <div class="row-right">\n        <input type="text" id="transPointsInput" placeholder="最多可转出">\n    </div>\n</div>\n<div class="searchReceiver">\n    <div class="row-left">接收人</div>\n    <div class="row-right">\n        <span class="row-right-describe">搜索</span>\n        <span class="icomoon icomoon-details"></span>\n    </div>\n</div>\n<div style="text-align: center">\n    <button class="transfer-btn">转移积分</button>\n</div>\n'}),define("pages/transferPoint",["./PageView","require"],function(e,t){return e.extend({type:"transferPoint",events:{"click .searchReceiver":"searchTransfer","click .hide-search":"hideSearchview","click .goback":"goBack","click .pointTrans":"InputTransPoints","blur  #transPointsInput":"changeTrans","focus #transPointsInput":"clearInputHolder","keydown #searchTransfer":"searchUser","click .search-right":"tosearchUser","click .transfer-btn":"transferSubmit"},searchPhone:null,transferId:null,onRender:function(){this.toggleBar&&this.toggleBar("hide");var e=library.getTemplate("searchReceiverView.html"),t=$(e());this.$el.append(t)},onResume:function(){var e=window.application.getUserInfo(),t=e.myPoints,n=Math.floor(Number(t)),r=n.toString();this.$el.find("#transPointsInput").attr("placeholder","最多可转出"+r),console.log(e)},searchTransfer:function(){$(".search-transfer-view").addClass("search-transfer-view-show")},hideSearchview:function(){$(".search-transfer-view").removeClass("search-transfer-view-show"),$("#searchTransfer").val("")},InputTransPoints:function(){$("#transPointsInput").focus()},clearInputHolder:function(){$("#transPointsInput").attr("placeholder","")},tosearchUser:function(e){var n=$("#searchTransfer").val().trim();this.searchPhone=n;if(!this.checkPhone(n)){library.Toast("请输入正确的手机号码格式");return}var r=t("../models/BaseModel"),i=new r,s={searchKey:n},o={type:"POST",path:"/getReceiverList",data:s,showLoading:!0,datatype:"json",success:this.searchSuccess.bind(this),error:function(){library.Toast("网络错误")}};i.loadData(o)},searchUser:function(e){e.keyCode==13&&this.tosearchUser(e)},searchSuccess:function(e){console.log(e.data),e.status==0?(library.Toast("查找用户成功"),this.transferId=e.data.userId,e.data.name?this.$el.find(".row-right-describe").text(e.data.name+" "+"("+this.searchPhone+")"):(this.$el.find(".row-right-describe").text(this.searchPhone),this.searchPhone=null),this.hideSearchview()):e.message?library.Toast(e.message):e.message||library.Toast("用户不是会员，无法转移")},checkPhone:function(e){var t=/^1[0-9]{10}$/;return t.test(e)},changeTrans:function(){var e=window.application.getUserInfo(),t=e.myPoints,n=Math.floor(Number(t)),r=n.toString(),i=/^[0-9]*$/,s=$("#transPointsInput").val();s||($("#transPointsInput").val(""),$("#transPointsInput").attr("placeholder","最多可转出"+r))},transferSubmit:function(){var e=$("#transPointsInput").val(),n=window.application.getUserInfo(),r=parseFloat(this.$el.find("#transPointsInput").val());if(!r||!this.transferId){library.Toast("请选择接收人和转移积分！");return}if(r>parseFloat(n.myPoints)){library.Toast("超过可转移积分上限，请重新输入！");return}this.cutPoints=r;var i=t("../models/BaseModel"),s=new i,o={fromUserId:n.userid,userId:this.transferId,point:r},u={type:"POST",path:"/transferPoint",data:o,showLoading:!0,datatype:"json",success:this.transferSuccess.bind(this),error:function(){library.Toast("网络错误")}};s.loadData(u)},transferSuccess:function(e){if(e.status==0){var t=application.getUserInfo();t.myPoints=t.myPoints-$("#transPointsInput").val(),application.setLocalStorage("userinfo",t),library.Toast("积分转出成功！"),Backbone.history.navigate("#my-navigate/credit",{trigger:!0})}else e.data.isSame?library.Toast("积分不能转移给自己"):e.data.notFound&&library.Toast("请在【会员中心-账户信息】完善身份证信息后使用积分!")},goBack:function(){var e=window.application.getUserInfo(),t=parseInt(e.myPoints);$("#transPointsInput").val(""),$("#transPointsInput").attr("placeholder","最多可转出"+t),$(".row-right-describe").text("搜索"),this.searchPhone=null,this.transferId=null,window.history.back()}})}),define("text!pages/transferPoint.json",[],function(){return'{\n  "template" : "transferPoint.html",\n  "type" : "transferPoint"\n}\n'}),define("text!pages/usersetting.html",[],function(){return'\n<div class="login-page-view usersetting-page">\n  <header class="headerbox">\n    <div class="left-right nav-left goback">\n      <span class="icomoon icomoon-back"></span>\n    </div>\n    <div class=\'mid\'>\n      <span class="common-title">设置</span>\n    </div>\n    <div class="left-right nav-right header-menu">\n      <span class="icomoon icomoon-moremore"></span>\n    </div>\n  </header>\n  <div class="padding-top-view"></div>\n  <!-- <div class=\'us-item us-messetting\'>\n    消息设置\n  </div> -->\n  <div class=\'us-item us-yjfk\'>\n    意见反馈\n  </div>\n  <div class=\'us-item us-about\'>\n    关于\n  </div>\n\n  <div>\n    <button class=" theme-backgorund-color btnLogin user-logout" onclick="">退出登录</button>\n  </div>\n  </div>\n  <div>\n    <component id="PopupMenu" />\n    <component id="SearchMidPageView" />\n  </div>\n</div>\n'}),define("pages/usersetting",["./PageView"],function(e){return e.extend({type:"usersetting",events:{"click .goback":"onBack","click .us-yjfk":"feedBack","click .us-about":"goAbout","click .us-messetting":"goMessageSetting","click #usersetting-update":"update","click #usersetting-changetheme":"changetheme","click .user-logout":"loginPage","click .header-menu":"menuMore"},theme_flag:1,initialize:function(){this.listenTo(this.findComponent("PopupMenu"),"toSearch",this.toSearch.bind(this))},menuMore:function(e){this.findComponent("PopupMenu").show()},toSearch:function(e){this.findComponent("SearchMidPageView").show()},render:function(){return e.prototype.render.apply(this,arguments),this},onRender:function(){var e=window.localStorage.getItem("userinfo");e||$(".btnLogin").css({display:"none"})},onResume:function(){window.application.getLocalStorage("apptheme")&&(window.application.getLocalStorage("apptheme")=="red"?$(".style-name").text("红色"):window.application.getLocalStorage("apptheme")=="blue"&&$(".style-name").text("蓝色")),this.toggleBar&&this.toggleBar("hide"),this.$(".bar").show();var e=window.localStorage.getItem("userinfo");e?$(".btnLogin").css({display:"block"}):$(".btnLogin").css({display:"none"})},onBack:function(){window.history.back()},goMessageSetting:function(){Backbone.history.navigate("#my-navigate/message-setting",{trigger:!0})},goAbout:function(){Backbone.history.navigate("#my-navigate/about",{trigger:!0})},feedBack:function(){Backbone.history.navigate("#my-navigate/feedback",{trigger:!0})},update:function(){library.Toast("当前是最新版本",1200)},changetheme:function(){_this=this;var e=$("link");_this.theme_flag>2&&(_this.theme_flag=0),_.map(e,function(e){var t=$(e).attr("href");switch(_this.theme_flag){case 0:t=="css/style-orange.css"||t=="css/style-blue.css"?($(e).attr("disabled","disabled"),$(".style-name").text("红色"),window.application.setLocalStorage("apptheme","red")):$(e).removeAttr("disabled");break;case 1:t=="css/style-red.css"||t=="css/style-blue.css"?($(e).attr("disabled","disabled"),$(".style-name").text("橘色"),window.application.setLocalStorage("apptheme","orange")):$(e).removeAttr("disabled");break;case 2:t=="css/style-orange.css"||t=="css/style-red.css"?($(e).attr("disabled","disabled"),$(".style-name").text("蓝色"),window.application.setLocalStorage("apptheme","blue")):$(e).removeAttr("disabled")}}),_this.theme_flag++},loginPage:function(){library.MessageBox("提示信息","确认退出登录？",[{leftText:"确定",callback:function(){window.localStorage.setItem("userinfo",""),window.application.setLocalStorage("userid",""),Backbone.trigger("my-reload"),$(".btnLogin .user-logout").css({display:"none"}),Backbone.history.navigate("#my-navigate",{trigger:!0})}},{rightText:"取消",callback:function(){}}])}})}),define("text!pages/usersetting.json",[],function(){return'{\n  "template":"usersetting.html",\n  "type": "usersetting",\n  "components":[\n    {\n      "id": "PopupMenu",\n      "type": "PopupMenu"\n    }, {\n      "id": "SearchMidPageView",\n      "type": "SearchMidPageView"\n    }\n  ]\n}\n'}),define("text!pages/weixinlogin.html",[],function(){return'<div class="register-page-view">\n  <div class="register-view-normal">\n    <div class="input-background">\n      <div class="input-accountdiv">\n        <input class="reg-input-account" type="text" placeholder="请输入手机号码" />\n      </div>\n    </div>\n    <div class="input-pwddiv">\n      <input class="reg-input-pwd" type="text" placeholder="请输入验证码" />\n      <a href="javascript:;" class="btn-retransmit btn-retransmit-disabled"  >获取验证码</a>\n    </div>\n  </div>\n  <div>\n    <button class="btnRegister theme-backgorund-color-contrast theme-border-color-contrast"  >绑定</button>\n  </div>\n  <div class="register-tologin-text">\n    <span>已有帐号？请</span><span class="register-to-login theme-color">登录</span>\n  </div>\n  <div class="register-toast">\n     <p class="register-toast-p">对不起,验证码输入错误,请重新输入</p>\n  </div>\n\n</div>\n'}),define("pages/weixinlogin",["require","./PageView"],function(e,t){return t.extend({bandPhoneNum:null,baseModel:null,defaults:{toastTime:null},serverRes:null,route:function(e){t.prototype.route.apply(this,arguments)},events:{"click .btnforget":"btnforgetClick","click .header-icon-back":"onBack","click .bd-agree":"onAgreeClick","click .btnRegister":"btnRegisterClick","click .btn-retransmit":"checkRetransmit","click .register-to-login":"toLogin","input .reg-input-pwd":"pwdChange","input .reg-input-account":"numberChange"},initialize:function(e){t.prototype.initialize.apply(this,arguments)},render:function(){return t.prototype.render.apply(this,arguments),this},onResume:function(){this.toggleBar&&this.toggleBar("hide"),this.$(".bar").show()},pwdChange:function(){this.valueChange()},numberChange:function(){var e=$(".btn-retransmit");!e.hasClass("is-restransit")&&$(".reg-input-account").val().trim().length>0?e.removeClass("btn-retransmit-disabled").addClass("theme-color").addClass("theme-border-color"):e.addClass("btn-retransmit-disabled").removeClass("theme-color").removeClass("theme-border-color"),this.valueChange()},valueChange:function(){var e=this.$el.find(".reg-input-pwd"),t=this.$el.find(".reg-input-account"),n=this.$el.find(".btnRegister");e.val().trim().length>0&&t.val().trim().length>0?(n.removeAttr("disabled"),n.removeClass("theme-backgorund-color-contrast").removeClass("theme-border-color-contrast").addClass("theme-border-color").addClass("theme-backgorund-color")):(n.attr("disabled","disabled"),n.addClass("theme-backgorund-color-contrast").addClass("theme-border-color-contrast").removeClass("theme-border-color").removeClass("theme-backgorund-color"))},btnRegisterClick:function(){var t=e("../models/BaseModel");this.baseModel=new t;var n=this;if($(".reg-input-account").val().trim().length<1)library.Toast("手机号码不能为空");else if(this.$(".reg-input-pwd").val().length<1)library.Toast("验证码不能为空");else if($(".theme-backgorund-color").length<1)library.Toast("请同意商城协议");else{var r=0,n=this,i=$(".reg-input-account").val().trim();this.bandPhoneNum=i,library.LoadingBar("验证中..."),library.DismissLoadingBar(),window.app.bandPhoneNum=n.bandPhoneNum,window.history.back()}},loginSuccess:function(e){if(!e.data){library.Toast(e.message);return}this.userId=e.data.userId;if(e.status=="0"){var t={path:"/getUserInfo",type:"POST",data:{userId:e.data.userId},success:this.getUserInfoSuccess.bind(this),error:function(e){}};this.baseModel.loadData(t)}else library.Toast(e.message)},getUserInfoSuccess:function(e){if(e.status=="0"){var t=e.data;t.userid=this.userId,window.localStorage.clear(),window.localStorage.setItem("userinfo",JSON.stringify(t)),window.history.back()}else library.Toast("登录失败")},checkRetransmit:function(){var e=this;if($(".btn-retransmit").hasClass("btn-retransmit-disabled"))return;this.checkPhone($(".reg-input-account").val().trim())?this.sendData("/getVerifyCode",{userPhone:$(".reg-input-account").val().trim()},function(t){if(t.status=="0"){var n=$(".btn-retransmit");n.html("重新发送（60s）").addClass("btn-retransmit-disabled").addClass("is-restransit").removeClass("theme-color");var r=60,i=setInterval(function(){--r,r==0?(n.html("获取验证码").removeClass("btn-retransmit-disabled").removeClass("is-restransit").addClass("theme-color"),clearInterval(i)):n.html("重新发送（"+r+"s）")},1e3);e.sessionid=t.data.sessionId}else library.Toast(t.message)}.bind(this),function(){library.Toast("网络错误")}):library.Toast("手机号格式错误")},callback:function(){},sendData:function(t,n,r,i){var s=e("../models/BaseModel"),o=new s,u={type:"POST",path:t,data:n,datatype:"json",success:r,error:i};o.loadData(u)},checkPhone:function(e){var t=/^1[0-9]{10}$/;return t.test(e)},onBack:function(){window.history.back()},onAgreeClick:function(){$(".bd-st").hasClass("theme-backgorund-color")?$(".bd-st").removeClass("theme-backgorund-color"):$(".bd-st").addClass("theme-backgorund-color"),this.valueChange()},toLogin:function(){var e="#my-navigate/login/login";Backbone.history.navigate(e,{trigger:!0})}})}),define("text!pages/weixinlogin.json",[],function(){return'{\n  "template": "weixinlogin.html",\n  "type":"weixinlogin",\n  "header": {\n    "title": "微信绑定",\n    "items": [{\n      "type": "link",\n      "icon": "header-icon-back icomoon-back",\n      "pull": "left",\n      "event": "back"\n    }]\n  },\n  "components": [\n  ]\n}\n'}),define("text!templates/MembersOrderSelect.html",[],function(){return'<div class="member-order-view">\n    <header class="headerbox">\n        <div class="left-right nav-left drawBack">\n            <span class="icomoon icomoon-back"></span>\n        </div>\n        <div class=\'mid\'>\n            <span class="common-title">更多</span>\n        </div>\n        <div class="left-right nav-right">\n\n        </div>\n\n    </header>\n\n    <div class="member-order-main">\n        <div class="member-order-title">订单日期</div>\n        <div class="member-order-input">\n            <div class="member-order-start">开始日期</div>\n            <span>——</span>\n            <div class="member-order-end">结束日期</div>\n        </div>\n\n\n        <button class="btn btn-primary btn-save time-filter-btn">确定</button>\n    </div>\n</div>'}),define("text!templates/address-in-order-selector.html",[],function(){return'<div class="address-in-order">\n  <div class="order-address-add">\n    <div class="address-add-icon theme-color icomoon icomoon-plus"></div>\n    <div class="address-add-new theme-color">新增收货地址</div>\n    <div class="order-address-icon-right-add"><span class="icomoon icomoon-more"></span></div>\n  </div>\n</div>\n'}),define("text!templates/address-in-order.html",[],function(){return'<div class="address-in-order">\n  <div class="address-icon-map">\n    <div class="icomoon icomoon-location">\n    </div>\n  </div>\n  <div class="order-address">\n    <div class="order-address-user-info">\n      <div class="order-address-user-name">\n        <span class="address-user-name-des">收件人：</span><span><%=receiver%></span>\n      </div>\n      <div class="order-address-user-phone"><%=receiverPhone%></div>\n    </div>\n    <div class="order-address-address">\n      <span><%=receiverDetailAddress%></span>\n    </div>\n  </div>\n  <div class="order-address-icon-right"><span class="icomoon icomoon-more"></span></div>\n</div>\n'}),define("text!templates/address-in-order1.html",[],function(){return'<div class="address-in-order">\n  <div class="address-icon-map">\n    <div class="icomoon icomoon-location">\n    </div>\n  </div>\n  <div class="order-address">\n    <div class="order-address-user-info">\n      <div class="order-address-user-name">\n        <span class="address-user-name-des">收件人：</span><span><%=receiver%></span>\n      </div>\n      <div class="order-address-user-phone"><%=receiverPhone%></div>\n    </div>\n    <div class="order-address-address">\n      <span><%=receiverDetailAddress%></span>\n    </div>\n  </div>\n  <div class="order-address-icon-right"><span class="icomoon icomoon-more"></span></div>\n</div>\n'}),define("text!templates/addressEditView.html",[],function(){return'<div class="address-edit-info">\n  <header class="headerbox">\n      <div class="left-right nav-left goback">\n          <span class="icomoon icomoon-back"></span>\n      </div>\n      <div class=\'mid\'>\n        <span class="common-title">收货地址</span>\n      </div>\n      <div class="left-right nav-right">\n\n      </div>\n\n  </header>\n\n  <div class="address-name-content">\n\n\n    <div class="input-background">\n      <div class="input-addressdiv">\n        <div class=\'input-label-wrapper\'> <label class="input-label-name">收货人</label></div>\n        <div class=\'input-value-wrapper\'>\n        <input class="input-value aName" type="text" value="<%=receiver%>" /></div>\n      </div>\n    </div>\n    <div class="input-background">\n      <div class="input-addressdiv">\n        <div class=\'input-label-wrapper\'>\n        <label class="input-label-name">手机号码</label></div>\n        <div class=\'input-value-wrapper\'>  <input class="input-value aLink" type="text" value="<%=receiverPhone%>" />\n      </div>\n     </div>\n    </div>\n\n    <div id="city">\n      <div class="input-background zone-check">\n        <div class="input-addressdiv">\n          <div class=\'input-label-wrapper\'>\n          <label class="input-label-name">所在省份</label>\n        </div>\n        <div class=\'input-value-wrapper\'>\n            <select name="address.idP" class="province input-value-select aAddress" data-value="<%=receiverProvince%>">\n                <option value="-1">请选择</option>\n              <select/>\n          </div>\n        </div>\n      </div>\n\n\n      <div class="input-background zone-check">\n\n      <div class="input-addressdiv">\n        <div class=\'input-label-wrapper\'>\n            <label class="input-label-name">所在城市</label>\n        </div>\n\n        <div class=\'input-value-wrapper\'>\n          <select name="address.idCity" class="city input-value-select aAddress" data-value="<%=receiverCity%>">\n            <option value="-1">请选择</option>\n            <select/>\n        </div>\n        </div>\n      </div>\n\n      <div class="input-background zone-check">\n        <div class="input-addressdiv">\n            <div class=\'input-label-wrapper\'>\n          <label class="input-label-name">所在区县</label></div>\n\n                <div class=\'input-value-wrapper\'>\n          <select name="address.idArea" class="area input-value-select aAddress" data-value="<%=receiverRegion%>">\n            <option value="-1">请选择</option>\n            <select/>\n        </div>\n       </div>\n      </div>\n\n    </div>\n\n    <div class="input-background">\n      <div class="input-addressdiv" id="input-addressdiv">\n        <div class=\'input-label-wrapper\'><label class="input-label-name">详细地址</label></div>\n        <div class=\'input-value-wrapper\'>\n          <input class="input-value aDetail" value="<%=receiverAddr%>" type="text"/>\n        </div>\n      </div>\n    </div>\n\n\n\n\n  </div>\n\n\n\n\n\n  <div class="address-editBtn-div">\n    <button class="address-editBtn theme-backgorund-color theme-border-color">保存</button>\n  </div>\n\n</div>\n'}),define("text!templates/addressListView.html",[],function(){return'<% if( isdefault==\'true\') {%>\n<li class="address-view-li" default="true" >\n<% } else {%>\n<li class="address-view-li" default="false" >\n<% } %>\n  <div class="address-view-list">\n    <div class="address-view-top">\n      <div class="address-view-name"><%=receiver%> </div>\n      <div class="address-view-phone"><%=receiverPhone%> </div>\n      <div class="address-detail-div">\n        <div class="address-view-detail"><%=receiverProvince%><%=receiverCity%><%=receiverRegion%><%=receiverAddr%></div>\n      </div>\n    </div>\n    <div class="address-view-selected ">\n      <% if( isdefault==\'false\') {%>\n      <div class="address-selected-left"  data-name="defaultSet">\n          <span class="icomoon-choicebox icon-icomoon-address" data-name="defaultSet"></span>\n          <span class="address-view-cancelLabel defaultlabel"  data-name="defaultSet">设为默认</span>\n      </div>\n      <div class="address-selected-right">\n        <span class="icomoon-compile icon-icomoon-address" data-name="edit"></span>\n        <span  class="address-view-cancelLabel" data-name="edit">编辑</span>\n        <span  class="icomoon-delete icon-icomoon-address" data-name="delete"></span>\n        <span  class="address-view-cancelLabel" data-name="delete">删除</span>\n      </div>\n      <% } else {%>\n      <div class="address-selected-left"  data-name="defaultSet">\n        <span class="icomoon-choice active theme-color icon-icomoon-address" data-name="defaultSet"></span>\n        <span class="address-view-cancelLabel defaultlabel" data-name="defaultSet">默认地址</span>\n      </div>\n      <div class="address-selected-right">\n        <span class="icomoon-compile icon-icomoon-address"  data-name="edit"></span>\n        <span class="address-view-cancelLabel" data-name="edit">编辑</span>\n        <span class="icomoon-delete icon-icomoon-address" data-name="delete"></span>\n        <span class="address-view-cancelLabel"  data-name="delete">删除</span>\n      <% } %>\n    </div>\n  </div>\n  </div>\n</li>\n'}),define("text!templates/addressSelectView.html",[],function(){return'<li class="address-select-li" >\n  <div class="address-view-list">\n    <div class="address-select-right">\n      <div class="select-right-top">\n        <div class="address-select-name"><%=receiver%> </div>\n        <div class="address-select-phone"><%=receiverPhone%> </div>\n      </div>\n      <div class="address-detail-div">\n        <div class="address-select-detail"><%=receiverProvince%><%=receiverCity%><%=receiverRegion%><%=receiverAddr%></div>\n      </div>\n    </div>\n\n  </div>\n</li>\n'}),define("text!templates/after-payment-address.html",[],function(){return'<div class="address-in-order">\n  \n  <div class="order-address">\n    <div class="order-address-user-info">\n      <div class="order-address-user-name">\n        <span class="address-user-name-des">收件人：</span><span><%=receiver%></span>\n      </div>\n    <!--<div class="order-address-user-phone"><%=receiverPhone%></div> -->\n    </div>\n    <div class="order-address-address">\n    <span class="address-text">收件地址：</span>\n      <span><%=receiverAddr%></span>\n    </div>\n  </div>\n  \n</div>\n'}),define("text!templates/all-order-list-item.html",[],function(){return'<li class="all-order-list-item" data-index="<%=parentSn%>">\n    <div class="list-item-line"></div>\n    <div class="shop-info-order shop-item-header">\n        <span class="icomoon icomoon-store order-icomoon-store"></span>\n        <div class="shop-info-name-shopname">三主粮</div>\n        <% if(orderStatus == "4" || orderStatus == "5" || orderStatus == "6" || orderStatus == "7") {%>\n            <span class="shop-order-delete theme-color icomoon icomoon-delete" data-name="cancelOrder">\n            </span>\n        <% } %>\n    </div>\n    <%\n        var isComment = \'0\';\n        productList.forEach(function(item,index){\n            if(item.isComment == \'1\') isComment = \'1\';\n    %>\n    <div class="order-goods-details-listitem">\n        <div class="goods-details-img">\n            <img src="<%=item.productImage%>" alt="" />\n        </div>\n        <div class="order-goods-details-content">\n            <div class="order-goods-details-title">\n                <%=item.productName%>\n            </div>\n            <div class="order-goods-detail-mid">\n                <div class="order-goods-details-spec">\n                    <%=item.specInfo%>\n                </div>\n                <div class="order-goods-details-order-status theme-backgorund-color">\n                   \n                 <!--    <% if(orderStatus == \'2\') { %>\n                        <span>待付款</span>\n                    <% } else if(orderStatus == \'3\'){ %>\n                        <span>待发货</span>\n                    <% } else if(orderStatus == \'1\'){ %>\n                        <span>已取消</span>\n                    <% } else if(orderStatus == \'4\'){ %>\n                        <span>待收货</span>\n                    <% } else if(orderStatus == \'5\'){ %>\n                        <span>已完成</span>\n                    <% } else if(orderStatus == \'6\'){ %>\n                        <span>已申请取消</span>\n                    <% } %> -->\n                    \n                    <span><%= describe %></span>\n                </div>\n            </div>\n            <!-- <div class="order-goods-details-type theme-backgorund-color">\n            <% if(item.type == \'0\'){ %> 大宗交易 <% }else{ %>小额批发<% } %>\n            </div> -->\n            <div class="order-goods-details-price">\n                <div class="order-goods-details-unit-price theme-color">\n                 <% if(orderFee){ %>\n                    ¥<%=orderFee%>\n                 <% }else{ %>\n                    ¥<%=parentAmont%>\n                 <% } %>   \n                </div>\n                <div class="order-goods-details-number">\n                    x<%=item.number%>\n                </div>\n            </div>\n        </div>\n    </div>\n    <% }) %>\n    <% if(orderStatus == \'2\') { %>\n        <div class="shop-info-order fee-info shop-item-foot shop-item-foot-btn-cell">\n            <span class="btn-order order-pay theme-color theme-border-color pull-right" data-name="payOrder">立即支付</span>\n            <span class="btn-order order-cancel theme-color theme-border-color pull-right" data-name="cancelOrder">取消订单</span>\n        </div>\n    <% } else if(orderStatus == \'3\') { %>\n       \n        <div class="shop-info-order fee-info shop-item-foot shop-item-foot-btn-cell">\n            <span class="btn-order order-recieve theme-color theme-border-color pull-right" data-name="tuihuo">申请退款</span>\n        </div>\n        \n    <% } else if(orderStatus == \'4\') { %>\n        <div class="shop-info-order fee-info shop-item-foot shop-item-foot-btn-cell">\n            <span class="btn-order order-recieve theme-color theme-border-color pull-right" data-name="checkLog">查看物流</span>\n            <span class="btn-order order-recieve theme-color theme-border-color pull-right" data-name="ensureOrder">确认收货</span>\n            <!--\n            <span class="btn-order order-recieve theme-color theme-border-color pull-right" data-name="shouhou">申请售后</span>\n            -->\n        </div>\n    <% } else if(orderStatus == \'5\') { %>\n        <div class="shop-info-order fee-info shop-item-foot shop-item-foot-btn-cell">\n            <% if(isComment == \'1\') { %>\n                <span class="btn-order comment-add theme-color theme-border-color pull-right" data-name="addComment">评价</span>\n            <% } %>\n            <!--\n            <span class="btn-order order-recieve theme-color theme-border-color pull-right" data-name="shouhou">申请售后</span>\n        	-->\n        </div>\n    <% } else if(orderStatus == \'6\'){ %>\n         <div class="shop-info-order fee-info shop-item-foot shop-item-foot-btn-cell">\n            <span class="btn-order comment-add theme-color theme-border-color pull-right" data-name="buyAgain">再次购买</span>\n            <span class="btn-order order-recieve pull-right" style="border:#ccc 1px solid;" data-name="tuihuo">退款处理中</span>\n        </div>\n    <%}%>\n</li>\n'}),define("text!templates/all-service-list-item.html",[],function(){return'<div class="customerservice-item">\n    <div class="customerservice-goods-details">\n     <div class="goods-details-aid">订单号：<span ><%=ORDERSN %></span></span></div>\n     <div id="imgDetail" style="display:none"><%=goodsImage%></div>\n     <div style="display:none"><span id="saleDetail" ><%=AID %></span></span></div>\n     \n        <div class="goods-details-img">\n            <img src="<%=goodsImage%>" alt="" />\n        </div>\n        <div class="goods-details-content">\n            <div class="goods-details-title">\n                <%=GOODSNAME%>\n            </div>\n            <div class="goods-detail-mid">\n                <div class="goods-details-spec" style="color:red">\n                                                   ￥ <%=goodsSalePrice %>\n                </div>\n            </div>\n            \n             <div class="goods-details-price">\n                <div class="goods-details-unit-price theme-color">\n                     <% if(STATE == \'0\') { %>\n                        <span>初始态</span>\n                    <% } else if(STATE == \'3\'){ %>\n                        <span>驳回</span>\n                    <% } else if(STATE == \'1\'){ %>\n                        <span>审核未通过</span>\n                    <% } else if(STATE == \'2\'){ %>\n                        <span>审核通过</span>\n                    <% } else if(STATE == \'4\'){ %>\n                        <span>已完成</span>\n                    <% } else if(STATE == \'6\'){ %>\n                        <span>退换货处理中</span>\n                    <% } %>\n                </div>\n            </div>\n        </div>\n    </div>\n    \n  \n    \n</div>\n'}),define("text!templates/balancePayment.html",[],function(){return'<div class="background-cover"></div>\n<div class="balancePayment">\n	<div class="balance-pay">余额支付</div>\n	<div class="balance-num">¥32</div>\n	<div class="balance-password"><input type="password" class="balance-password-text" placeholder="请输入密码"/></div>\n	<div class="balance-selector">\n		<div class="balance-cancel">取消</div><div class="balance-sure">确定</div>\n	</div>\n</div>\n'}),define("text!templates/balancedetaillistview.html",[],function(){return"<li class=\"cdt-detail-cell\">\n  <div class='cdt-detail-desc'><%=desc%></div>\n  <div class='cdt-detail-time'><%=time%></div>\n  <% if(!isNaN(balance)){\n    var p = parseInt(balance);\n    if(p>0){\n      %>\n      <span class='cdt-detail-point' style='color:#FF6525'>+<%=balance%></span>\n      <%\n    }else{\n      %>\n       <span class='cdt-detail-point' style='color:#979797'><%=balance%></span>\n      <%\n    }\n  }else{\n    %>\n     <%=balance%>\n    <%\n  } %>\n</li>\n"}),define("text!templates/bill-edit.html",[],function(){return'<div class="nofity-sex-info">\n  <header class="headerbox">\n      <div class="left-right nav-left bill-info-back">\n          <span class="icomoon icomoon-back"></span>\n      </div>\n      <div class=\'mid\'>\n        <span class="common-title">设置发票信息</span>\n      </div>\n      <div class="left-right nav-right">\n      </div>\n\n  </header>\n  <div class="bill-enable">\n    <span class="bill-switch-des">需要发票</span><span class="bill-switch-view"></span>\n  </div>\n  <div class="bill">\n    <div class="bill-title-info bill-info">\n      <span class=" bill-des pull-left">发票抬头</span>\n      <span class="pull-left"><input type="text" class="bill-title bill-edit" /></span>\n    </div>\n    <div class="bill-content-info bill-info">\n      <span class="pull-left bill-des">发票内容</span>\n      <span class="pull-left"><input type="text" class="bill-content bill-edit" /></span>\n    </div>\n    <button class="btn btn-block btn-submit theme-backgorund-color bill-submit">确定</div>\n  </div>\n\n</div>\n'}),define("text!templates/bill-loding-item.html",[],function(){return'<%for(var i=0;i< selectGoods.length;i++){ %>\r\n  <% if(selectGoods[i].goodsRestNum != 0){ %>\r\n<li class="table-view-cell media favorite-item list-content"\r\n	style="border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgb(221, 221, 221);">\r\n	<div class="goodsListDataId" hidden="true"><%=selectGoods[i].goodsId%></div>\r\n	<div class="bill-ladtitle" style="font-size: 0.41rem;">预计发货时间 <%=selectGoods[i].startTime%></div>\r\n	<div class="list-item">\r\n		<img\r\n			class="item-media-object media-object pull-left item-media-object-single-line"\r\n			src="<%=selectGoods[i].selectGoodsImage%>">\r\n		<div class="media-body item-media-body">\r\n			<div class="bill-protuct-name" style="font-size: 0.34666667rem;">\r\n				<%=selectGoods[i].goodsName%></div>\r\n			<div class="bill-protuct-number" style="font-size: 0.34666667rem;">可提数量：<span class="numnum"><%=selectGoods[i].goodsRestNum%></span></div>\r\n			<!-- <div class="bill-delivery-goods" style="font-size: 0.34666667rem;">已提货：<%=selectGoods[i].usedNumber%></div> -->\r\n			<div class="ogids" style="display:none"><%=selectGoods[i].ogid%></div>\r\n		</div>\r\n		<div class="quantity-delivery" style="font-size: 0.34666667rem;">\r\n			本次提货数量   <input class="num" style="font-size: 0.34666667rem;" />\r\n		</div>\r\n	</div>\r\n</li>\r\n <%}%>\r\n<%}%>'}),define("text!templates/brand-list.html",[],function(){return'<li class="table-view-cell">\n  <div class=\'brand-list-cell\'>\n    <div><img src="<%=portrait%>"></div>\n    <div><p><%=name%></p></div>\n </div>\n</li>\n'}),define("text!templates/brand.html",[],function(){return'<li class="home-brand-box">\n<a href="#brand-navigate/branddetail?id=<%=id%>">\n    <div class="home-brand-icon">\n\n      <img class="home-brand-img" src="<%=brandimg%>" alt="" />\n    </div>\n    </a>\n</li>\n'}),define("text!templates/branddetail-head.html",[],function(){return'<div class="branddetail-page">\n  <!-- <header class="bar bar-nav branddetail-title">\n  <a class="header-icon-back icomoon-back item-0 pull-left" style="display:block"></a>\n  <h1 class="title"></h1>\n  </header> -->\n  <div class="branddetail-head">\n      <div class="branddetail-head-left">\n        <div class="branddetail-head-left-logo">\n          <img src="" class="branddetail-head-left-picture">\n        </div>\n        <div class="brnaddetail-left-name">\n          <div class="branddetail-name"></div>\n          <div class="branddetail-introduce"></div>\n        </div>\n      </div>\n  </div>\n</div>\n'}),define("text!templates/branddetail-list-filter.html",[],function(){return'<div class="goodsfilter">\n    <div class="order-all filter">\n        <span>综合排序</span>\n    </div>\n    <div class="order-sales filter"">\n        <span>销量优先</span>\n    </div>\n    <div class="order-price filter">\n        <span>价格</span>\n        <span class="filter-icon filter-price-icon">\n          <div class="icomoon icomoon-pullup filter-icon-up"></div>\n          <div class="icomoon icomoon-pulldown filter-icon-down"></div>\n        </span>\n    </div>\n\n</div>\n'}),define("text!templates/business-product.html",[],function(){return'<li class="home-goods-discount clearfix">\n  <a href="#home-navigate/itemdetail?goodsid=<%=id%>">\n  <div class="home-goods-box">\n    <img class="home-img" src="<%=imageurl%>" alt="" />\n    <div class="home-goods-words">\n      <div class="home-goods-character">\n        <%=name%>\n      </div>\n      <div class="home-goods-money">\n        <div class="home-goods-rmb">¥</div>\n        <div class="home-goods-num"><%=price%></div>\n        <div class="home-goods-cell"><%= sales %>人付款</div>\n      </div>\n    </div>\n  </div>\n    </a>\n</li>\n'}),define("text!templates/cancel-order-money-list.html",[],function(){return'<ul class="select_mode">\n         <div hidden="true" id="reasonsId"><%=reasonsId%></div>\n         <li><i class=" no_select "></i><%=reasName%></li>\n         <!-- <li> <i class="select"></i>送货时间太长</li> -->\n </ul>'}),define("text!templates/cancel-order-reasion-list.html",[],function(){return'<ul class="select_mode">\n         <div hidden="true" id="reasonsId"><%=reasonsId%></div>\n         <li><i class=" no_select "></i><%=reasName%></li>\n         <!-- <li> <i class="select"></i>送货时间太长</li> -->\n </ul>'}),define("text!templates/cart-editor-view.html",[],function(){return'<div class="cart-editor-view-corver"></div>\n<div class="cart-editor-view">\n  <div class="cart-editor-view-content">\n    <div class="goods-info-view cart-editor-content">\n        <img class="goods-img" src="" />\n        <div class="goods-info">\n          <div class="goods-price theme-color"></div>\n          <div class="goods-stack"></div>\n          <!-- <div class="goods-warespec">黑色，37</div> -->\n        </div>\n        <div class="cart-editor-view-close">\n          <span class="icomoon icomoon-close"></span>\n        </div>\n    </div>\n    <div class="goods-spec-part1 cart-editor-content">\n      <div class="spec-part1-content"></div>\n    </div>\n    <div class="goods-editor-btn theme-backgorund-color">确定</div>\n  </div>\n</div>\n'}),define("text!templates/common/covered.html",[],function(){return'<!-- 遮罩-->\n<div class="covered" style="display: none"></div>'}),define("text!templates/common/header.html",[],function(){return'<header >\n    <div class="headerbox">\n        <div class="left-right">\n            <img src="images/goodslist/u13.png">\n        </div>\n        <div >\n            <a href="#"><input id="search" type="text" /></a>\n        </div>\n        <div class="left-right">\n            <img src="images/goodslist/u71.png">\n        </div>\n    </div>\n</header>'}),define("text!templates/component-category-it.html",[],function(){return'<div id="business-category" style="display: none">\n    <div class="business-goods-filter">\n        <header>\n            <div class="headerbox">\n                <div  id="business-back" class="business-back left-right nav-left">\n                    <span class="icon icomoon-back"></span>\n                </div>\n                <div class=\'mid business-title\' >\n                    宝贝分类\n                </div>\n            </div>\n        </header>\n        <div class="business-contentwrap" >\n            <ul class="business-goods-wrap">\n                <li business-category-index=0 class="icomoon-more">\n                    <span>全部商品</span>\n                </li>\n                <li business-category-index=1 class="icomoon-more">\n                    <span>水果</span>\n                </li>\n                <li business-category-index=2 class="icomoon-more">\n                    <span>蔬菜</span>\n                </li>\n            </ul>\n        </div>\n    </div>\n</div>'}),define("text!templates/confirm-order-completion-item.html",[],function(){return'<ul class="table-view"\r\n	style="border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgb(221, 221, 221); margin-bottom: 5px; background-color: rgb(255, 255, 255);">\r\n	<li class="table-view-cell media favorite-item list-content"\r\n		style="border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgb(221, 221, 221);">\r\n		<div class=\'item-package-detail-id\' hidden="true"><%=productId%></div>\r\n		<div class="list-item">\r\n			<img class="item-package-detail-img"\r\n				src="<%=productImage%>">\r\n			<div class="media-body item-media-body">\r\n				<div class="item-package-detail-title">\r\n					<div class="item-package-detail-name"><%=productName%></div>\r\n					<div class="item-net-content"><%=specInfo%></div>\r\n				</div>\r\n				<div class="item-package-detail-price">\r\n					<div class="price-money">￥<%=productPrice%></div>\r\n					<div class="right-text">x<%=number%></div>\r\n				</div>\r\n			</div>\r\n		</div>\r\n		\r\n		 <div class="customer-service" hidden="true">\r\n		   <div hidden="true"><%=ogid%></div>\r\n		   <% if(suitType != 1) {%>\r\n			   <%if(isSupport==0){%>\r\n	              <a class="customer-service-button customer-service-sale">售后中</a>\r\n	           <% }else{ %>\r\n	              <a class="customer-service-button customer-service-sale">申请售后</a>\r\n	           <% } %>\r\n           <%}%>\r\n           <%if(isComment == 1){%>\r\n	            <a class="customer-service-button customer-comment">去评价</a>\r\n	            <div hidden="true"><%=ogid%></div>\r\n            <%}else{%>\r\n                <a class="customer-service-button customer-comment">去评价</a>\r\n	            <div hidden="true"><%=ogid%></div>\r\n	        <%}%>    \r\n         </div>\r\n         \r\n	</li>\r\n</ul>'}),define("text!templates/confirm-order-set-wait.html",[],function(){return'<%if(orderStatus == \'3\'){ %>\r\n	<div class="delivered-state-title">\r\n	         <div class="left-title">待发货</div>\r\n	         <div hidden="true"><%=billsId%></div>\r\n	         <div class="right-title order-cancel-bill">\r\n    	<%if(isCancel == 0){%>\r\n	             <span>取消发货</span>\r\n		<%}else if(isCancel == 1){%>\r\n	     		<span>售后申请中</span>\r\n		<%}%>\r\n	         </div>\r\n	         <div hidden="true"><%=isCancel%></div>\r\n	</div>\r\n	 \r\n<% }else if(orderStatus == "4"){%>\r\n    <div class="delivered-state-title">\r\n			<div class="left-title">已发货</div>\r\n			<div hidden="true"><%=billsId%></div>\r\n			<div class="right-title order-wait-bill">\r\n				<span>确认收货</span>			\r\n			</div>\r\n		</div>\r\n<%}else if(orderStatus == "5"){ %> \r\n     <div class="delivered-state-title">\r\n			<div class="left-title">完成</div>\r\n	 </div>\r\n<%}%>\r\n<ul class="table-view">\r\n  <% for(var i=0;i< orderGoodsList.length;i++){ %>\r\n	<li class="all-order-list-item" data-index="">\r\n	   <div class="bill-ladtitle" style="font-size: 0.41rem;">提货时间：<%=ctime%></div>\r\n		<div class="list-item-line"></div>\r\n		<div class="order-goods-details-listitem">\r\n			<div class="goods-details-img">\r\n				<img\r\n					src="<%=orderGoodsList[i].goodsImage%>" alt="" />\r\n			</div>\r\n			<div class="order-goods-details-content">\r\n				<div class="delivered-protuct-title">\r\n					<div class="delivered-protuct-name"><%=orderGoodsList[i].goodsName%></div>\r\n					<div class="delivered-protuct-number">X<%=orderGoodsList[i].goodsNumber%></div>\r\n				</div>\r\n				<%if(orderStatus == "5"){%>\r\n				   <%if(orderGoodsList[i].isSupport==1){%>\r\n						<div hidden="true"><%=billsId%></div>\r\n						<div class="delivered-protuct-button">\r\n							<span style="color:#ccc">换货</span>\r\n						</div>\r\n						<div hidden="true"><%=orderGoodsList[i].ogid%></div>\r\n					<%}else {%>	\r\n					     <div hidden="true"><%=billsId%></div>\r\n					     <div class="delivered-protuct-button">\r\n							<span style="color:#ccc">售后处理中</span>\r\n						</div>\r\n						<div hidden="true"><%=orderGoodsList[i].ogid%></div>\r\n					<%}%>\r\n				<% } %>\r\n			</div>\r\n		</div>\r\n	</li>\r\n	<% } %>\r\n</ul>'}),define("text!templates/coupon-view.html",[],function(){return'<li>\n    <div class="small-order-item coupon-selector">\n      <span class="icomoon-choicebox order-checkbox"></span>\n      <span class="sale-promotion"><%=name%>,</span>\n      <span class="order-money-num theme-color" data-index="<%=id%>" favor-num="<%=value%>">￥<%=value%></span>\n    </div>\n</li>\n'}),define("text!templates/couponlistview.html",[],function(){return"<li class='coupon-item'>\n  <div class='coupon-item-top'>\n    <div>\n      <div class='coupon-item-name'><%=name%></div>\n      <div class='coupon-item-deadline'>有效期至<%=time%></div>\n    </div>\n    <div class='coupon-item-value'><%=value%>元</div>\n  </div>\n  <div  class='coupon-item-bottom'>\n    <div class='coupon-item-desc'></div>\n    <div>\n      <!--<button data-id='<%=id%>' class='coupon-item-use-btn getCoupon'>立即领取</button>-->\n    </div>\n  </div>\n</li>\n"}),define("text!templates/create-comment-product-item.html",[],function(){return'<div class="create-comment-list-item">\n  <div class="order-goods-details-listitem">\n    <div class="goods-details-img">\n      <img src="<%=productImage%>" />\n    </div>\n    <div class="order-goods-details-content">\n      <div class="order-goods-details-title">\n        <%=productName%>\n      </div>\n      <div class="order-goods-detail-mid">\n          <div class="order-goods-details-spec">\n            <%=specInfo%>\n          </div>\n      </div>\n      <div class="order-goods-details-price">\n        <div class="order-goods-details-unit-price theme-color">\n          ¥\n          <%=productPrice%>\n        </div>\n        <div class="order-goods-details-number">\n          x\n          <%=number%>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class="comment-level">\n    <div class="comment-level-item">\n      <span class="level-item level-item-good">好评</span>\n    </div>\n    <div class="comment-level-item">\n      <span class="level-item level-item-good-better">较好</span>\n    </div>\n    <div class="comment-level-item">\n      <span class="level-item level-item-common">一般</span>\n    </div>\n    <div class="comment-level-item">\n      <span class="level-item level-item-bad-better">较差</span>\n    </div>\n    <div class="comment-level-item">\n      <span class="level-item level-item-bad">差评</span>\n    </div>\n  </div>\n  <div class="comment-content">\n    <textarea class="comment-content-text" placeholder="写点什么吧，以便其他小伙伴们提供参考，字数在10-200个字" />\n  </div>\n  <!-- <div class="image-upload-view">\n    <div class="image-upload-content">\n      <div class="image-preview"></div>\n      <div class="image-add">\n        <div class="image-upload"><span class="icomoon icomoon-camera"></span></div>\n        <input class="input-image-upload" type="file" id="Files" name="files[]" accept="image/*" multiple="">\n      </div>\n    </div>\n  </div> -->\n\n</div>\n'}),define("text!templates/credit-list-item.html",[],function(){return' <li class="table-view-cell media favorite-item list-content">\n  <div class="mallgj-logo">\n       <img src="./images/order/gjlogo.png" class="gj-logo"/>\n       <!-- <a href="" class="delect-red" ></a> -->\n  </div>\n  <div class="list-item">\n    <img class="item-media-object media-object pull-left item-media-object-single-line" src="<%=productList[0].productImage%>">\n    <div class="media-body item-media-body">\n      <div class="public-title"><%=productList[0].productName%></div>\n     <span class="publicstatus">\n          所需积分 <%=orderFee%>\n     </span>\n       <%if(orderStatus ==0){ %>\n          <a href="javascript:;" class="public-detail" data-id="" data-status="">待发货</a>\n      <% }else if(orderStatus ==1){%>\n          <a href="javascript:;" class="public-detail" data-id="" data-status="">已取消</a>\n      <% }else if(orderStatus ==2){%>\n          <a href="javascript:;" class="public-detail" data-id="" data-status="">完成</a>\n      <% }else if(orderStatus ==3){%>\n          <a href="javascript:;" class="public-detail" data-id="" data-status="">已发货</a>\n       <% } %>   \n      </div>\n    </div>    \n  <div class="shop-info-order">\n       <span style="display:none;"><%=orderStatus%></span>\n       <span style="display:none;"><%=orderId%></span>\n       \n       <span class="btn-order order-pay theme-color theme-border-color pull-right" data-name="payOrder">查看详情</span>\n\n       <span class="btn-order order-cancel theme-color theme-border-color pull-right" data-name="cancelOrder">再次兑换</span>\n     <!--   <%if(orderStatus ==3){ %>\n          <span class="btn-order order-ensure theme-color theme-border-color pull-right" data-name="ensureOrder">确认收货</span>\n       <% } %> -->\n </div>      \n</li>  '}),define("text!templates/credit-order-detail-product-list-item.html",[],function(){return'<li>\n  <div class="goods-details-listitem">\n    <div class="goods-details-img">\n      <img src="<%=productImage%>" alt="" />\n    </div>\n    <div class="goods-details-title">\n      <%=productName%>\n    </div>\n    <div class="goods-details-description">\n      \n    </div>\n    <div class="goods-details-price">\n      <div class="goods-details-unit-price">\n          ¥<%=productPrice%>\n      </div>\n      <div class="goods-details-number">\n        x1\n      </div>\n    </div>\n  </div>\n</li>\n'}),define("text!templates/creditcard-view.html",[],function(){return' <li>\n 	<div class="small-order-item credit-card">\n      <span class="icomoon-choicebox order-checkbox"></span>\n      <span class="credit-card-num"><%=cardId%>,</span>\n      <span class="order-money-num theme-color" card-value="<%=cardValue%>">￥<%=cardValue%></span>\n    </div> \n </li>\n    '}),define("text!templates/creditdetaillistview.html",[],function(){return"<li class=\"cdt-detail-cell\">\n  <div class='cdt-detail-desc'><%=desc%></div>\n  <div class='cdt-detail-time'><%=time%></div>\n  <% if(!isNaN(point)){\n    var p = parseInt(point);\n    if(p>0){\n      %>\n      <span class='cdt-detail-point' style='color:#FF6525'>+<%=point%></span>\n      <%\n    }else{\n      %>\n       <span class='cdt-detail-point' style='color:#979797'><%=point%></span>\n      <%\n    }\n  }else{\n    %>\n     <%=point%>\n    <%\n  } %>\n</li>\n"}),define("text!templates/creditlistview.html",[],function(){return"<li class=\"cdt-cell\" productid=\"<%=id%>\">\n  <div class='cellwrapper'>\n  <div><img class='cdt-lst-img' src=\"<%=image%>\"></div>\n  <div class='cdt-lst-desc'>\n    <div class='cdt-lst-name'> <%=name%></div>\n    <div class='cdt-lst-bottom'>\n      <div class='cdt-lst-bottom-left'>\n      <div class='cdt-lst-point'> <%=point%>积分</div>\n        <div class='cdt-lst-price'> &yen;<%=price%></div>\n      </div>\n      <div class='cdt-lst-limit'>限量<%=limit%></div>\n    </div>\n\n</div>\n</div>\n</li>\n"}),define("text!templates/crowdfunding-detail-buy-item.html",[],function(){return'<div class="cf-item">\n  <div class="cf-huibao-info">\n    <div class="cf-huibao-price theme-color">￥<%=price%></div>\n    <div class="cf-huibao-name"><%=name%></div>\n    <div class="cf-huibao-des"><%=description%></div>\n  </div>\n  <div class="cf-huibao-support">\n    <div class="cf-support-member">\n      <span class="cf-support-member-des">已支持人数</span>\n      <span class="cf-support-member-value"><%=supportMember%>人</span>\n    </div>\n    <div class="cf-support-btn">我要支持</div>\n  </div>\n</div>\n'}),define("text!templates/crowdfunding-detail.html",[],function(){return'<div class="group-buy-detail">\n  <header class="headerbox goods-label-return-nav">\n    <div class="left-right nav-left goback">\n      <span class="icomoon icomoon-back"></span>\n    </div>\n    <div class=\'mid\'>\n      <span class="common-title">众筹详情</span>\n    </div>\n    <div class="left-right nav-right header-menu">\n      <span class="icomoon icomoon-moremore"></span>\n    </div>\n  </header>\n  <div class="goods-label-return">\n    <div class="icomoon-back goods-label-back"></div>\n  </div>\n  <div class="goods-label-menu">\n    <div class="icomoon icomoon-moremore goods-label-menu-menu"></div>\n  </div>\n\n  <div class="cf-detail-content">\n    <component id="carousel" />\n    <div class="cf-status-info cf-info-cell">\n      <div class="cf-money">\n        <span class="cf-target-money-des">目标金额：</span>\n        <span class="cf-target-money-value">10000</span>\n        <span class="cf-target-money-already">/已达成：</span>\n        <span class="cf-target-money-already-value theme-color">￥6500</span>\n      </div>\n      <div class="cf-progress">\n        <span class="progress-default"></span>\n        <span class="progress-current"></span>\n      </div>\n      <div class="cf-people-time">\n        <div class="cf-people">\n          <span>支持人数 </span>\n          <span class="cf-people-member">40人</span>\n        </div>\n        <div class="cf-time">\n          <span class="cf-time-des"><span class="icomoon icomoon-time"></span>剩余时间</span>\n          <span class="cf-time-value">10天</span>\n        </div>\n\n      </div>\n    </div>\n\n    <div class="cf-product-info cf-info-cell">\n      <div class="product-name-info">\n        <span class="product-name">古井贡酒原浆特酿</span>\n        <span class="product-tag">众筹中</span>\n      </div>\n      <div class="product-des">感谢您的支持，您将用低于商品原价的价格购买。 商品原价的价格购买。</div>\n      <div class="icomoon icomoon-details"></div>\n    </div>\n\n    <div class="cf-buy-info">\n      <div class="cf-buy-title">回报</div>\n      <div class="cf-buy-content"></div>\n    </div>\n\n  </div>\n\n  <div>\n    <component id="PopupMenu" />\n    <component id="SearchMidPageView" />\n  </div>\n\n</div>\n'}),define("text!templates/crowdfunding-list-item.html",[],function(){return'<div class="group-list-item">\n  <img class="product-image" src="<%=image%>" />\n  <div class="product-info">\n\n    <div class="price-percent-number">\n      <div class="name-info" style=\'float: left;\'>\n        <%=name%>\n      </div>\n      <div class="percent-number">\n        <span class="buy-mumber theme-color"><%=buyMember%></span>\n        <span >/</span>\n        <span class="total-number"><%=totalMember%></span>\n      </div>\n    </div>\n    <div class="progress-info">\n\n      <div class="progress-des-cf">目标金额</div>\n      <div class="progress-bar-cf">\n        <span class="progress-default"></span>\n        <% var progress=buyMember*100/totalMember %>\n        <span class="progress-current" style="width:<%=progress%>%;"></span>\n      </div>\n      <% progress=parseInt(progress)%>\n      <div class="progress-percent"><%=progress%>%</div>\n    </div>\n    <div class="time-btn">\n      <div class="timer">\n        <span class="icomoon icomoon-time"></span>\n        <span class="timer-des">剩余时间</span>\n        <span class="timer-value"><%=overTime%><span>\n      </div>\n      <div class="btn-operation">去支持</div>\n    </div>\n  </div>\n</div>\n'}),define("text!templates/discount-package-list-item.html",[],function(){return'<div class="discount-list">\n  <div class="discount-list-title" data-index="0">\n      <span class="list-title-left">优惠套餐<%=(index+1)%></span>\n      <span class="discount-amount">共<span class="discount-amount-num"><%=products.length%></span>件</span>\n      <div class="list-title-right"><span class="right-icomoon icomoon-highpull"></span></div>\n  </div>\n  <div class="discount-img-group" style="display: <% if(index == 0) {%>none <% } else {%> block <%}%>">\n      <div style="display: flex;">\n        <% for(var i = 0 ; i < products.length; i++){ %>\n         <div class="goods-group-img"><img src="<%=products[i].productImage%>"></div>\n         <% if(i < products.length -1){ %>\n          <div class="goods-plus">+</div>\n        <%\n         }\n        }\n        %>\n      </div>\n  </div>\n  <div class="discount-group group-list-active">\n      <ul>\n        <% for(var i = 0 ; i < products.length; i++){ %>\n          <li class="discount-group-li">\n            <div class="discount-goods-img"><img src="<%=products[i].productImage%>"></div>\n            <div class="discount-goods-describe">\n                <div class="goods-describe-name"><%=products[i].goodsTitle%></div>\n                <div class="goods-describe-standard"><%=products[i].goodsSpec%></div>\n                <div class="goods-describe-price">¥<%=products[i].productPrice%></div>\n                <div class="goods-describe-num">x<%=products[i].goodsNum%></div>\n            </div>\n          </li>\n        <%\n        }\n        %>\n      </ul>\n      <div style="overflow: hidden;clear: both;">\n          <div class="original-price">原价:¥<%=originalPrice%></div>\n          <div class="priceInfo-right">\n              <div class="discount-price">套餐价:<span class="price-theme-color">¥<%=packagePrice%></span></div>\n              <div class="money-saving">立省:<span class="price-theme-color">¥<%=(originalPrice-packagePrice)%></span></div>\n          </div>\n      </div>\n      <div class="buy-submit-btn">\n          <div class="buy-now-btn" data-pid="<%=packageId%>">轻松购</div>\n      </div>\n  </div>\n</div>\n'}),define("text!templates/discount-package-list.html",[],function(){return'<div class="discount-list">\n    <div class="discount-list-title" data-index="0">\n        <span class="list-title-left">优惠套餐1</span>\n        <span class="discount-amount">共<span class="discount-amount-num">2</span>件</span>\n        <div class="list-title-right"><span class="right-icomoon icomoon-highpull"></span></div>\n    </div>\n    <div class="discount-img-group" style="display: none">\n        <div style="display: flex;">\n\n            <div class="coupon-packages-table">\n                <div class="goods-group">\n                    <div class="goods-group-img"><img src="http://bmall.yonyou.com/2016/03/02/0100U1K0C1QK10JXSIOY_thumbnail.jpg"></div>\n                    <div class="goods-plus">+</div>\n                    <div class="goods-group-img"><img src="http://bmall.yonyou.com/2016/03/02/0100U1K0C1QK10JXSIOY_thumbnail.jpg"></div>\n                </div>\n            </div>\n\n        </div>\n    </div>\n    <div class="discount-group group-list-active">\n        <ul data-index="0">\n            <li class="discount-group-li">\n                <div class="discount-goods-img"><img src="http://bmall.yonyou.com/2016/03/02/0100U1K0C1QK10JXSIOY_thumbnail.jpg"></div>\n                <div class="discount-goods-describe">\n                    <div class="goods-describe-name">三星galaxy8 32G 白色 全网通版</div>\n                    <div class="goods-describe-standard">颜色分类：红色; 尺码：37</div>\n                    <div class="goods-describe-price">¥25</div>\n                    <div class="goods-describe-num">x1</div>\n                </div>\n            </li>\n            <li class="discount-group-li">\n                <div class="discount-goods-img"><img src="http://bmall.yonyou.com/2016/03/02/0100U1K0C1QK10JXSIOY_thumbnail.jpg"></div>\n                <div class="discount-goods-describe">\n                    <div class="goods-describe-name">三星galaxy8 32G 白色 全网通版</div>\n                    <div class="goods-describe-standard">颜色分类：红色; 尺码：37</div>\n                    <div class="goods-describe-price">¥25</div>\n                    <div class="goods-describe-num">x1</div>\n                </div>\n            </li>\n        </ul>\n        <div style="overflow: hidden;clear: both;">\n            <div class="original-price">原价:¥50.0</div>\n            <div class="priceInfo-right">\n                <div class="discount-price">套餐价:<span class="price-theme-color">¥45.0</span></div>\n                <div class="money-saving">立省:<span class="price-theme-color">¥5.00</span></div>\n            </div>\n        </div>\n        <div class="buy-submit-btn">\n            <div class="buy-now-btn">轻松购</div>\n        </div>\n    </div>\n</div>'}),define("text!templates/ensure-order.html",[],function(){return'<!-- 确认订单页面模板  author Vicent-->\n<div class="nofity-sex-info">\n  <header class="headerbox">\n      <div class="left-right nav-left ensure-order-back">\n          <span class="icomoon icomoon-back"></span>\n      </div>\n      <div class=\'mid\'>\n        <span class="common-title">交易成功</span>\n      </div>\n      <div class="left-right nav-right">\n      </div>\n  </header>\n\n  <div class="ensure-order-info">\n    <div class="order-info">\n      <div class="order-ensure-des pull-left">交易成功<br/>卖家将收到您的货款</div>\n      <div class="order-product-img pull-right"><img id="order_product_pic" /></div>\n    </div>\n  </div>\n\n  <div class="bottom-button-table">\n    <span class="order-btm-bar-cell"><a class="ensure-order-back order-btm-bar-btn">返回订单列表</a></span>\n    <span class="order-btm-bar-cell"><a class="order-comment theme-color order-btm-bar-btn">立即评价</a></span>\n  </div>\n\n</div>\n'}),define("text!templates/evaluatepush.html",[],function(){return'<% items.forEach(function(item,index){ %>\n  <div class="evaluate-item" data-oid="<%=orderId%>" data-index="<%=index%>">\n    <div class="goods-details-listitem">\n      <div class="goods-details-img">\n        <img src="<%=item.imgurl%>" alt="" />\n      </div>\n      <div class="goods-details-title">\n        <%=item.name%>\n      </div>\n      <% if(item.type == \'1\'){ %>\n      <div class="goods-details-spec">\n        <%=item.spec%>\n      </div>\n      <% } %>\n      <div class="goods-details-price">\n        <div class="goods-details-unit-price">\n            ¥<%=item.tradePrice%>\n        </div>\n        <div class="goods-details-number">\n          <%=item.itemNumber%>\n        </div>\n      </div>\n    </div>\n    <div class="evaluate-goods-marking">\n      <div class="evaluate-goods-marking-left">\n        商品满意度\n      </div>\n      <div class="evaluate-goods-marking-star">\n        <i data-star=\'1\' class="evaluate-star unclick icomoon-starunclick"></i>\n        <i data-star=\'2\' class="evaluate-star unclick icomoon-starunclick"></i>\n        <i data-star=\'3\' class="evaluate-star unclick icomoon-starunclick"></i>\n        <i data-star=\'4\' class="evaluate-star unclick icomoon-starunclick"></i>\n        <i data-star=\'5\' class="evaluate-star unclick icomoon-starunclick"></i>\n      </div>\n      <div class="evaluate-goods-marking-right">\n        满意请赏5分哦\n      </div>\n    </div>\n    <div class="evaluate-goods-comment">\n      <div class="evaluate-goods-comment-title">\n        评论\n      </div>\n      <div class="evaluate-goods-comment-content">\n        <textarea class="evaluate-goods-comment-textarea" name="name" rows="8" cols="40">好评</textarea>\n        <div class="evaluate-goods-comment-button">\n          <span class="evaluate-goods-comment-button-share">分享</span>\n          <span class="evaluate-goods-comment-button-submit" data-id="<%=item.id%>" data-orderid="<%=orderId%>">发表评价</span>\n        </div>\n      </div>\n    </div>\n  </div>\n<%\n})\n%>\n'}),define("text!templates/goodsCommentsListView.html",[],function(){return'<li class="goods-evaluate-list-li">\n    <div class="goods-evaluate-clear">\n        <div class="goods-evaluate-li-collection">\n            <img class="goods-evaluate-li-head" src="<%=userHead%>">\n        </div>\n        <% if(typeof(userName) != "undefined" ) { %>\n        <span class="goods-evaluate-li-said"><%=userName%></span>\n        <% }else{ %>\n        <span class="goods-evaluate-li-said">未知用户</span>\n        <% } %>\n        <div class="goods-evaluate-li-toggle">\n            <% for(var i=0;i< grade ;i++){ %>\n            <div class="goods-evaluate-li-star icomoon-star"></div>\n            <% } %>\n            <% for(var i=0;i< 5-grade ;i++){ %>\n            <div class="goods-evaluate-li-star-no icomoon-starunclick"></div>\n            <% } %>\n        </div>\n    </div>\n    <div class="goods-evaluate-li-said"><%=comment%></div>\n</li>\n'}),define("text!templates/goodscollectorlist.html",[],function(){return'<li class="goods-collector-li" data-cid="<%=productId%>">\n  <div class="goods-collector-list">\n    <div class="goods-collector-circle" data-cid="<%=productId%>"></div>\n    <div class="goods-collector-img">\n      <img class="goods-collector-img-style" src="<%=productImage%>">\n    </div>\n    <div class="goods-collector-sell">\n      <div class="goods-collector-name"><%=productName%></div>\n      <div class="goods-collector-money">\n        <div class="goods-collector-rmb theme-color">¥</div>\n        <div class="goods-collector-num theme-color"><%=price%></div>\n        \n      </div>\n      <div class="goods-collector-box">\n          <div  class="buy-immediate theme-color theme-border-color">立即购买</div>\n          <!-- description\n    discount -->\n\n        </div>\n    </div>\n  </div>\n</li>\n'}),define("text!templates/goodsfilter.html",[],function(){return'\n<!-- 过滤器 -->\n\n<!-- 筛选布局-->\n<div class="filtercondition fadeIn animated" style="display: none">\n    <div class="filter-wrap">\n        <div class="home-title">\n            <div class="home-head theme-backgorund-color-before">\n                <div class="home-words">\n                    品牌\n                </div>\n            </div>\n\n        </div>\n\n\n    <div class="condition-wrap">\n        <div class="condition-row" >\n            <div class="condition-item" >\n                <a href=""><img src="images/goodslist/u79.png"></a>\n            </div>\n            <div class="condition-item condition-item-mid" >\n                <a href=""><img src="images/goodslist/u79.png"></a>\n            </div>\n            <div class="condition-item" >\n                <a href=""><img src="images/goodslist/u79.png"></a>\n            </div>\n        </div>\n\n        <div class="condition-row  " >\n            <div class="condition-item condition-row-mid" >\n\n\n            </div>\n            <div class="condition-item condition-item-mid condition-row-mid" >\n                <img src="images/goodslist/u79.png">\n\n            </div>\n            <div class="condition-item condition-row-mid" >\n                <img src="images/goodslist/u79.png">\n            </div>\n\n        </div>\n        <div class="condition-row  " >\n            <div class="condition-item condition-row-mid" >\n\n\n            </div>\n            <div class="condition-item condition-item-mid condition-row-mid" >\n                <img src="images/goodslist/u79.png">\n\n            </div>\n            <div class="condition-item condition-row-mid" >\n                <img src="images/goodslist/u79.png">\n            </div>\n\n        </div>\n\n    </div>\n        <div class="filter-wrap">\n            <div class="home-title">\n                <div class="home-head theme-backgorund-color-before ">\n                    <div class="home-words">\n                        价格\n                    </div>\n                </div>\n\n            </div>\n    <div class="filtercondition-priceinput">\n        <p><span>价格区间(元)</span>&nbsp;&nbsp;<input inputprice="min" type="number"/>&nbsp;-&nbsp;<input type="number"/></p>\n    </div>\n    <!-- 分类-->\n        <div class="filter-wrap">\n          <div class="bottom-button theme-backgorund-color">\n              <div>\n                  <span>确定</span>\n              </div>\n          </div>\n        </div>\n      </div>\n<!-- 列表-->\n'}),define("text!templates/goodslist/brandgrid.html",[],function(){return'<div class="filtercondition-title">\n    <b class="filtercondition-title-icon">|</b><span></span>\n</div>\n<div class="condition-wrap">\n    <div class="condition-row" >\n\n        <div class="condition-item" >\n            <a href=""><img src="images/goodslist/u79.png"></a>\n        </div>\n        <div class="condition-item condition-item-mid" >\n            <a href=""><img src="images/goodslist/u79.png"></a>\n        </div>\n        <div class="condition-item" >\n            <a href=""><img src="images/goodslist/u79.png"></a>\n        </div>\n    </div>\n\n    <div class="condition-row  " >\n        <div class="condition-item condition-row-mid" >\n        </div>\n        <div class="condition-item condition-item-mid condition-row-mid" >\n            <img src="images/goodslist/u79.png">\n        </div>\n        <div class="condition-item condition-row-mid" >\n            <img src="images/goodslist/u79.png">\n        </div>\n    </div>\n    <div class="condition-row  " >\n        <div class="condition-item condition-row-mid" >\n        </div>\n        <div class="condition-item condition-item-mid condition-row-mid" >\n            <img src="images/goodslist/u79.png">\n        </div>\n        <div class="condition-item condition-row-mid" >\n            <img src="images/goodslist/u79.png">\n        </div>\n    </div>\n</div>'}),define("text!templates/group-buy-list-item.html",[],function(){return'<div class="group-list-item">\n  <img class="product-image" src="<%=image%>" />\n  <div class="product-info">\n    <div class="name-info">\n      <%=name%>\n    </div>\n    <div class="price-percent-number">\n      <div class="price-info">\n        <span class="g-product-price theme-color">￥<%=price%></span>\n        <span class="original-price">￥<%=originalPrice%></span>\n\n      </div>\n      <div class="percent-number">\n        <span class="buy-mumber theme-color"><%=buyMember%></span>\n        <span >/</span>\n        <span class="total-number"><%=totalMember%></span>\n      </div>\n    </div>\n    <div class="progress-info">\n      <div class="progress-des">人数</div>\n      <div class="progress-bar">\n        <span class="progress-default"></span>\n        <% var progress=buyMember*100/totalMember %>\n        <span class="progress-current" style="width:<%=progress%>%;"></span>\n      </div>\n      <% progress=parseInt(progress)%>\n      <div class="progress-percent"><%=progress%>%</div>\n    </div>\n    <div class="time-btn">\n      <div class="timer">\n        <span class="icomoon icomoon-time"></span>\n        <span class="timer-des">剩余时间</span>\n        <span class="timer-value"><%=overTime%><span>\n      </div>\n      <div class="btn-operation">去参团</div>\n    </div>\n  </div>\n</div>\n'}),define("text!templates/history-collection.html",[],function(){return'<li class="goods-collector-li" data-cid="<%=id%>">\n  <div class="goods-collector-list">\n    <div class="goods-collector-circle" data-cid="<%=id%>"></div>\n    <div class="goods-collector-img">\n      <img class="goods-collector-img-style" src="<%=imageurl%>">\n    </div>\n    <div class="goods-collector-sell">\n      <div class="goods-collector-name"><%=name%></div>\n      <div class="goods-collector-money">\n        <div class="goods-collector-rmb theme-color">¥</div>\n        <div class="goods-collector-num theme-color"><%=price%></div>\n        <div class="goods-collector-box">\n          <div  class="buy-immediate theme-color theme-border-color">立即购买</div>\n         <!--  <div class="goods-collector-selected" data-name = "goods">\n           <div class="goods-collector-btn" data-name = "goods" data-cid="<%=id%>">取消收藏</div>\n         </div> -->\n        </div>\n      </div>\n    </div>\n  </div>\n</li>\n'}),define("text!templates/home-push-brand.html",[],function(){return'<li class="home-brand-box">\n    <a href="#home-navigate/branddetail?id=<%=id%>">\n\n    <div class="home-brand-icon">\n\n      <img class="home-brand-img" src="<%=imageurl%>" alt="" />\n    </div>\n    </a>\n</li>\n'}),define("text!templates/home-push-shop.html",[],function(){return'<li class="home-shop-box">\n    <a href="#home-navigate/business?shopid=<%=id%>">\n        <div class="home-shop-icon">\n            <img class="home-shop-img" src="<%=imageurl%>" alt="" />\n            <div class="home-shop-name">\n              <%=name%>\n            </div>\n\n        </div>\n    </a>\n</li>\n'}),define("text!templates/homepush.html",[],function(){return'<li class="home-goods-discount clearfix">\n  <a href="#home-navigate/itemdetail?goodsid=<%=id%>" >\n  <div class="home-goods-box">\n    <img class="home-img" src="<%=image%>" alt="" />\n    <div class="home-goods-words">\n      <div class="home-goods-character">\n        <%=name%>\n      </div>\n      <div class="home-goods-money">\n        <div class="home-goods-price-info">\n          <span class="home-goods-rmb">¥</span>\n          <span class="home-goods-num"><%=price%></span>\n        </div>\n      </div>\n    </div>\n  </div>\n  </a>\n</li>\n'}),define("text!templates/homeseckill.html",[],function(){return'<li class="home-seckill-list">\n  <div class="home-seckill-item-img">\n    <a href="#">\n      <img src="<%=imageurl%>" alt="" />\n    </a>\n  </div>\n  <div class="home-seckill-item-price">\n    <span class="home-seckill-new-price">¥<%=discount%></span>\n	  <span class="home-seckill-original-price">¥<%=price%></span>\n	</div>\n</li>\n'}),define("text!templates/hometopic.html",[],function(){return'<li class="home-goods-topic home-goods-topic-<%= float %> home-goods-topic-<%=row%> clearfix">\n  <a href="#home-navigate/itemdetail?goodsid=<%= goodsid %>" class="home-goods-topic-small">\n    <img src="<%= imageurl %>" alt="" />\n  </a>\n</li>\n'}),define("text!templates/logistic-item.html",[],function(){return'<li class="logistic-item" data-id="<%=logisId%>">\n  <div class="logistic">\n    <div class="logistic-time"><%=logisInfo[0].messageTime%></div>\n    <div class="logistic-info"><%=logisInfo[0].logisMessage%></div>\n  </div>\n    <% for(var i = 0 ; i < productInfo.length ; i++){ %>\n  <div class="logis-product">\n    <img class="logis-product-img" src="<%=productInfo[i].image%>" />\n    <div class="logis-product-content">\n      <div class="logis-prodcut-name"><%=productInfo[i].name%></div>\n      <div class="logis-product-spec-number">\n        <div class="logis-product-spc"><%=productInfo[i].specInfo%></div>\n        <div class="logis-product-number">x<%=productInfo[i].number%></div>\n      </div>\n    </div>\n  </div>\n    <% } %>\n  <div class="logis-detail" data-id="<%=logisId%>">\n    <div class="logis-detail-btn" data-id="<%=logisId%>">查看物流详情</div>\n  </div>\n</li>\n'}),define("text!templates/logistics.html",[],function(){return'<!-- 物流信息模板 -->\n<div class="logistics">\n  <div class="address-icon-receipt">\n    <div class="icomoon icomoon-receipt">\n    </div>\n  </div>\n  <div class="order-logis-info">\n    <div class="logis-address"><%=logisAddress%></div>\n    <div class="logis-time"><%=logisTime%></div>\n  </div>\n  <div class="order-logis-icon-right"><span class="icomoon icomoon-more"></span></div>\n</div>\n'}),define("text!templates/logiticsdetail.html",[],function(){return'<li class="logitics-view-li">\n  <div class="logitics-circle">\n  </div>\n<div class="logistics logitics-detail">\n  <div class="order-logis-info order-logis-info-detail">\n    <div class="logis-address logidetail-address"><%=nodeContent%></div>\n    <div class="logis-time logidetail-time"><%=nodeTime%></div>\n  </div>\n</div>\n</li>'}),define("text!templates/messagecenterlistview.html",[],function(){return"<li class=\"mc-row\">\n  <div class='mc-rightarea message-center-circle' data-cid=\"<%=messageId%>\">\n    <div class='mc-desctime'>\n      <div class='mc-name'><%=messageTitle%></div>\n      <div class='mc-time'><%=messageTime%></div>\n    </div>\n    <div class='mc-desc'><%=messageContent%></div>\n  </div>\n</li>\n"}),define("text!templates/my-members-list-item.html",[],function(){return'<div class="member-order-list">\n    <div class="order-list-head">\n        <div class="order-list-type theme-color"><%= orderSource %></div>\n        <div class="order-list-number"><%= orderId %></div>\n        <!--\n        <div class="order-status theme-label"></div>\n        -->\n    </div>\n    <% for( i = 0; i < goodsList.length; i ++ ){ %>\n        <div class="order-list-item">\n            <div class="list-item-name">\n              <%= goodsList[i].goodsName %>\n            </div>\n            <div class="list-item-count">\n                <span class="item-measurement-unit">计量单位：<%= goodsList[i].goodsUnit %></span>\n                <span class="item-count-number">x1</span>\n            </div>\n            <div class="list-item-bottom">\n                <div class="item-label-group">\n                    <% for( j = 0; j < goodsList[i].goodsDesc.length ; j++){  %>\n                        <span class="theme-label"><%= goodsList[i].goodsDesc[j] %></span>\n                    <% } %>\n                </div>\n                <div class="item-payment-total">\n                    <span>实付款:</span>\n                    <span class="theme-color payment-total-num">¥<%= goodsList[i].goodsPrice %></span>\n                </div>\n            </div>\n        </div>\n    <% } %>\n</div>\n'}),define("text!templates/notify-name-info.html",[],function(){return'<div class="nofity-name-info">\n  <header class="headerbox">\n      <div class="left-right nav-left gobackPersonal">\n          <span class="icomoon icomoon-back"></span>\n      </div>\n      <div class=\'mid\'>\n        <span class="common-title">修改昵称</span>\n      </div>\n      <div class="left-right nav-right">\n\n      </div>\n\n  </header>\n\n  <div class="notify-name-content">\n    <input placeholder="昵称" type="text" class="notify-user-name" />\n\n    <button class="btn btn-primary btn-save">保存</button>\n  </div>\n</div>\n'}),define("text!templates/notify-sex-info.html",[],function(){return'<div class="nofity-sex-info">\n  <header class="headerbox">\n      <div class="left-right nav-left gobackPersonal">\n          <span class="icomoon icomoon-back"></span>\n      </div>\n      <div class=\'mid\'>\n        <span class="common-title">性别</span>\n      </div>\n      <div class="left-right nav-right">\n\n      </div>\n\n  </header>\n  <div class="notify-sex-content">\n    <div class="my-page-view">\n        <div class="my-item-cell notify-sex-mile">\n          <div class="item-cell-left">\n            <div class="cell-left-name">\n              男\n            </div>\n          </div>\n          <div class="item-cell-right item-sex item-mile sex-selector">\n            <div class="item-right-icon notify-sex-checked theme-border-color"></div>\n          </div>\n        </div>\n        <div class="my-item-cell notify-sex-femile">\n          <div class="item-cell-left">\n            <div class="cell-left-name">\n              女\n            </div>\n          </div>\n          <div class="item-cell-right item-sex item-femile sex-selector">\n            <div class="item-right-icon notify-sex-checked theme-border-color"></div>\n          </div>\n        </div>\n\n        <div class="my-item-cell notify-sex-unknown" style="display: none">\n          <div class="item-cell-left notify-sex-femile">\n            <div class="cell-left-name">\n              保密\n            </div>\n          </div>\n          <div class="item-cell-right item-sex item-unknown sex-selector">\n            <div class="item-right-icon notify-sex-checked theme-border-color"></div>\n          </div>\n        </div>\n        <div class="bottom-cell-line"></div>\n      </div>\n\n    </div>\n</div>\n'}),define("text!templates/order-detail-product-list-item.html",[],function(){return'<li>\n  <div class="goods-details-listitem">\n    <div hidden="true" class="goods-details-ogid"><%=ogid%></div>\n    <div hidden="true" class="goods-details-id"><%=productId%></div>\n    <div class="goods-details-img">\n      <img src="<%=productImage%>" alt="" />\n    </div>\n    <div class="goods-details-title">\n      <%=productName%>\n    </div>\n    <div class="goods-details-description">\n      <%=specInfo%>\n    </div>\n    <div class="goods-details-price">\n      <div class="goods-details-unit-price">\n          ¥<%=productPrice%>\n      </div>\n      <div class="goods-details-number">x<%=number%></div>\n    </div>\n  </div>  \n  <div class="customer-service" >\n       <a class="customer-service-button" >申请售后</a>\n  </div>\n</li>\n'}),define("text!templates/order-options-selector.html",[],function(){return'<div class="common-message-cover"></div>\n<div class="order-options-content">\n  <div class="selector-title"></div>\n  <div class="selector-options">\n    <ul class="selector-options-ul"></ul>\n  </div>\n  <div class="selector-submit">\n    <button class="btn btn-block btn-submit theme-backgorund-color">确定</button>\n  </div>\n</div>\n'}),define("text!templates/order-product-list-item-points.html",[],function(){return'<div class="shop-info">\n  <div class="shop-goodslist">\n    <ul class="shop-goodslist-ul">\n      <% for(var i = 0; i<items.length;i++){ %>\n        <li>\n          <div class="goods-details-listitem">\n            <div class="goods-details-img-points">\n              <img src="<%=items[i].imgurl%>" alt="" />\n            </div>\n            <div class="goods-details-content-points">\n              <div class="goods-details-title-points">\n                <%=items[i].name%>\n              </div>\n              <!--<div class="goods-details-spec-points">\n                &lt;!&ndash; <%=items[i].spec%> &ndash;&gt;\n                颜色分类：红色; 尺码：37\n              </div>-->\n              <div class="goods-details-price-points">\n                <div class="goods-details-unit-price theme-color">\n                  <%=items[i].point%>分\n                </div>\n                <div class="goods-details-number">\n                  x<%=items[i].itemNumber%>\n                </div>\n              </div>\n            </div>\n          </div>\n        </li>\n      <% }%>\n    </ul>\n  </div>\n</div>\n'}),define("text!templates/order-product-list-item.html",[],function(){return'<div class="shop-info">\n  <div class="shop-goodslist">\n    <ul class="shop-goodslist-ul">\n      <% for(var i = 0; i<items.length;i++){ %>\n        <li>\n          <div class="goods-details-listitem">\n            <div class="goods-details-img">\n              <img src="<%=items[i].goodsImage%>" alt="" />\n            </div>\n            <div class="goods-details-title">\n              <%=items[i].goodName%>\n            </div>\n            <div class="goods-details-description">\n              <%=items[i].goodsSpec%>\n            </div>\n            <div class="goods-details-price">\n              <div class="goods-details-unit-price">\n                  ¥<%=items[i].goodsPrice%>\n              </div>\n              <div class="goods-details-number">\n                x<%=items[i].number%>\n              </div>\n            </div>\n          </div>\n        </li>\n      <% }%>\n    </ul>\n  </div>\n</div>\n'}),define("text!templates/overdue-coupon-view.html",[],function(){return"<li class='overduecoupon-item'>\n    <div class='coupon-item-top'>\n        <div>\n            <div class='coupon-item-name'><%=name%></div>\n            <div class='coupon-item-deadline'>有效期至<%=time%></div>\n        </div>\n        <div class='overduecoupon-item-value'><%=value%>元</div>\n    </div>\n    <div  class='coupon-item-bottom'>\n        <div class='coupon-item-desc'></div>\n    </div>\n</li>\n"}),define("text!templates/package-all-order-list-item.html",[],function(){return'<li class="all-order-list-item" data-index="<%=parentSn%>">\r\n    <div class="list-item-line"></div>\r\n    <div class="shop-info-order shop-item-header">\r\n        <span class="icomoon icomoon-store order-icomoon-store"></span>\r\n        <div class="shop-info-name-shopname">三主粮</div>\r\n        <% if(orderStatus == "4" || orderStatus == "5" || orderStatus == "6" || orderStatus == "7") {%>\r\n            <span class="shop-order-delete theme-color icomoon icomoon-delete" data-name="cancelOrder">\r\n            </span>\r\n        <% } %>\r\n    </div>\r\n    <div class="order-goods-details-listitem">\r\n        <div class="goods-details-img">\r\n            <img src="<%=suitImages[0].suitImage%>" alt="" />\r\n        </div>\r\n        <div class="order-goods-details-content">\r\n            <div class="order-goods-details-title">\r\n                <%=suitName%>\r\n            </div>\r\n            <div class="order-goods-detail-mid">\r\n                <div class="order-goods-details-spec">\r\n                    <%=remark%>\r\n                </div>\r\n                <div class="order-goods-details-order-status theme-backgorund-color">\r\n                   <!--  <% if(orderStatus == \'2\') { %>\r\n                        <span>待付款</span>\r\n                    <% } else if(orderStatus == \'3\'){ %>\r\n                        <span>待发货</span>\r\n                    <% } else if(orderStatus == \'1\'){ %>\r\n                        <span>已取消</span>\r\n                    <% } else if(orderStatus == \'4\'){ %>\r\n                        <span>待收货</span>\r\n                    <% } else if(orderStatus == \'5\'){ %>\r\n                        <span>已完成</span>\r\n                    <% } %> -->\r\n                    <%=describe %>\r\n                </div>\r\n            </div>\r\n            <div class="order-goods-details-price">\r\n                <div class="order-goods-details-unit-price theme-color">\r\n                 <% if(orderFee){ %>\r\n                    ¥<%=orderFee%>\r\n                 <% }else{ %>\r\n                    ¥<%=parentAmont%>\r\n                 <% } %>   \r\n                </div>\r\n                <div class="order-goods-details-number">\r\n                    <!-- x3 -->\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <% if(orderStatus == \'2\') { %>\r\n        <div class="shop-info-order fee-info shop-item-foot shop-item-foot-btn-cell">\r\n            <span class="btn-order order-pay theme-color theme-border-color pull-right" data-name="payOrder">立即支付</span>\r\n            <span class="btn-order order-cancel theme-color theme-border-color pull-right" data-name="cancelOrder">取消订单</span>\r\n        </div>\r\n    <% } else if(orderStatus == \'3\') {  %>\r\n         <%if(suitType==1){ %>\r\n	         <%if(ladingFlag==1){ %>\r\n	        <div class="shop-info-order fee-info shop-item-foot shop-item-foot-btn-cell">\r\n	            <span class="btn-order order-recieve theme-color theme-border-color pull-right" data-name="showList">提货记录</span>\r\n	            <span class="btn-order order-recieve theme-color theme-border-color pull-right" data-name="getPackage">提货</span>\r\n	        </div>\r\n	        <% }else{ %>\r\n	           <div class="shop-info-order fee-info shop-item-foot shop-item-foot-btn-cell">\r\n	           <span class="btn-order order-recieve theme-color theme-border-color pull-right" data-name="cancelPayMoney">申请退款</span>\r\n	            <span class="btn-order order-recieve theme-color theme-border-color pull-right" data-name="showList">提货记录</span>\r\n	            <span class="btn-order order-recieve theme-color theme-border-color pull-right" data-name="getPackage">提货</span>\r\n	        </div>\r\n	        <%}%>\r\n	       <%}else{%> \r\n	       		<div class="shop-info-order fee-info shop-item-foot shop-item-foot-btn-cell">\r\n	                <span class="btn-order order-recieve theme-color theme-border-color pull-right" data-name="cancelPayMoney">申请退款</span>\r\n	             </div>\r\n	       <%}%>\r\n    <% } else if(orderStatus == \'4\') { %>\r\n         <%if(suitType != 1){ %>\r\n	        <div class="shop-info-order fee-info shop-item-foot shop-item-foot-btn-cell">\r\n	           <span class="btn-order order-recieve theme-color theme-border-color pull-right" data-name="checkLog">查看物流</span>\r\n	            <span class="btn-order order-recieve theme-color theme-border-color pull-right" data-name="ensureOrder">确认收货</span>\r\n	            <!--\r\n	            <span class="btn-order order-recieve theme-color theme-border-color pull-right" data-name="shouhou">申请售后</span>\r\n	            -->\r\n	        </div>\r\n            <% }else{ %>\r\n              <div class="shop-info-order fee-info shop-item-foot shop-item-foot-btn-cell">\r\n	           <span class="btn-order order-recieve theme-color theme-border-color pull-right" data-name="showList">提货记录</span>\r\n	        </div>\r\n            <%}%>\r\n    <% } else if(orderStatus == \'5\') { %>\r\n      <div class="shop-info-order fee-info shop-item-foot shop-item-foot-btn-cell">\r\n           <%if(suitType == 1){%>\r\n           	<span class="btn-order order-recieve theme-color theme-border-color pull-right" data-name="showList">提货记录</span>\r\n           <%}%>\r\n           <!--  <span class="btn-order comment-add theme-color theme-border-color pull-right" data-name="addComment">评价</span>\r\n            <span class="btn-order order-recieve theme-color theme-border-color pull-right" data-name="shouhou">申请售后</span> -->\r\n        </div>\r\n    <% }else if(orderStatus == \'6\'){ %>\r\n         <div class="shop-info-order fee-info shop-item-foot shop-item-foot-btn-cell">\r\n            <span class="btn-order comment-add theme-color theme-border-color pull-right" data-name="buyAgain">再次购买</span>\r\n            <span class="btn-order order-recieve pull-right" style="border:#ccc 1px solid;" data-name="cancelPayMoney">退款处理中</span>\r\n        </div>\r\n    <%}%>\r\n</li>\r\n'}),define("text!templates/package-commodity-item.html",[],function(){return'<ul class="table-view" style="border-top-width: 1px; border-top-style: solid; border-top-color: rgb(221, 221, 221); border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgb(221, 221, 221); margin-bottom: 5px; background-color: rgb(255, 255, 255); padding-top: 1.17333333rem;">\n	<%for(var i=0;i < suitList.length;i++) {%>\n	 <li class="table-view-cell media  favorite-item list-content" style="border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgb(221, 221, 221); ">\n	  <div class="list-item">\n	    <div hidden="true" class="package-list-id"><%=suitList[i].SUIT_ID%></div>\n	    <img class="item-media-object media-object pull-left item-media-object-single-line" src="<%=suitList[i].IMG_URL%>">\n	    <div class="media-body item-media-body">\n	         <div class="package-list-title">\n	            <!-- 101020套餐商品 大米+红桃+甘露 --><%=suitList[i].SUIT_TITLE%>\n	         </div>\n	         <div class="package-list-Selling"><!--  超值好礼   促销优惠 --><%=suitList[i].REMARK %><i>热销</i></div>\n	         <div class="package-list-money">￥<!--  12202 --><%=suitList[i].SALE_PRICE %> <span><!-- 22500 --></span></div>\n	         <div class="package-list-shopping">\n	              <div><!-- 购买：130 --></div>\n	              <div class="text-right"><!-- 评价：120 --></div>\n	         </div>\n	    </div>\n	  </div>\n	</li>\n	<%}%>\n</ul>'}),define("text!templates/package-detail-buy-item.html",[],function(){return'<ul class="table-view"\n	style="border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgb(221, 221, 221); margin-bottom: 5px; background-color: rgb(255, 255, 255);">\n	<li class="table-view-cell media favorite-item list-content"\n		style="border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgb(221, 221, 221);">\n		<div class="list-item">\n			<img class="item-package-detail-img"\n				src="<%=goodsImage%>">\n			<div class="media-body item-media-body">\n				<div class="item-package-detail-title">\n					<div class="item-package-detail-name"><%=goodsTitle%></div>\n					<div class="item-net-content"></div>\n				</div>\n				<div class="item-package-detail-price">\n					<div class="price-money">￥<%=goodsPrice%></div>\n					<div class="right-text">x<%=goodsNum%></div>\n				</div>\n			</div>\n		</div>\n	</li>\n</ul>'}),define("text!templates/package-detail-info.html",[],function(){return'<li class="table-view-cell media favorite-item list-content" style="border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgb(221, 221, 221);">\n    <div class="list-item">\n        <img class="item-package-detail-img" src="http://szli.yonyou.com//upload/20160602/0100R1K064AC0QJ7K7UW.jpg">\n        <div class="media-body item-media-body">\n            <div class="item-package-detail-title">\n                <div class="item-package-detail-name">\n                    <%=goodsTitle%>\n                </div>\n                <div class="item-net-content"></div>\n            </div>\n            <div class="item-package-detail-price">\n                <div class="price-money">\n                    <%=marketPrice%>\n                </div>\n                <div class="right-text">\n                    <%=goodsNum%>\n                </div>\n            </div>\n        </div>\n    </div>\n</li>'}),define("text!templates/package-product-item.html",[],function(){return'<div class="coupon-packages-table">\n    <div class="coupon-packages-num">套餐<%=(index+1)%></div>\n    <div class="goods-group">\n      <% for(var i = 0 ; i < products.length; i++){ %>\n       <div class="goods-group-img"><img src="<%=products[i].productImage%>"></div>\n       <% if(i < products.length -1){ %>\n        <div class="goods-plus">+</div>\n      <%\n       }\n      }\n      %>\n    </div>\n</div>\n'}),define("text!templates/popup-menu.html",[],function(){return'<div class="root-popup-menu">\n  <div class="popup-menu">\n    <div class="menu-arrow">\n      <span class="icomoon icomoon-pullup"></span>\n    </div>\n    <div class="menu-content">\n      <div class="menu-home menu-item">\n        <span class="menu-icomoon icomoon icomoon-home pull-left"></span>\n        <span class="pull-right">首页</span>\n      </div>\n      <div class="menu-message menu-item">\n        <span class="menu-icomoon icomoon icomoon-talk pull-left"></span>\n        <span class="pull-right">消息</span>\n      </div>\n      <div class="menu-search menu-item">\n        <span class="menu-icomoon icomoon icomoon-search pull-left"></span>\n        <span class="pull-right">搜索</span>\n      </div>\n    </div>\n  </div>\n</div>\n'}),define("text!templates/product-bottom-bar.html",[],function(){return'<div class="bar bar-tab product-bottom-bar yyfixed">\n  <!--<a class="tab-item tab-left tab-tel">\n    <span class="icon icomoon-phone pb-tab"></span>\n    <span class="tab-label pb-tab">电话</span>\n  </a>\n  -->\n  <a class="tab-item tab-left pb-tab first-tab goods-title-selected collection-goods">\n      <div class="collect-in">\n        <span class="ico ico-star icomoon-starunclick goods-title-collection"></span>\n        <span class="tab-label" style="display: block">收藏</span>\n      </div>\n  </a>\n  <a class="tab-item tab-left pb-tab item-shopcart">\n\n    <div class="shopcart-in">\n        <div class="goods-shoppingcart-tips">\n        </div>\n        <span class="icon icomoon-cart"></span>\n        <span class="tab-label">购物车</span>\n    </div>\n  </a>\n  <a class="tab-item item-cart tab-right">加入购物车</a>\n  <a class="tab-item item-buy theme-backgorund-color tab-right">  轻松购  </a>\n</div>\n'}),define("text!templates/product-detail-comment.html",[],function(){return'<div style="display: block" id="goods-all-comments">\n<div class="goods-label-evaluate">\n  <div class="goods-evaluate-title">\n    <div class="goods-evaluate-number">\n      评价 <span class="goods-evaluate-number-text"></span>\n    </div>\n    <div class="goods-evaluate-skip">\n      <div class="goods-evaluate-style">\n        好评率:\n      </div>\n      <div class="goods-evaluate-ratio">\n\n      </div>\n    </div>\n  </div>\n</div>\n  <div class="goods-evaluate-list comment-list">\n    <ul class="goods-evaluate-ul">\n\n    </ul>\n  </div>\n</div>\n<div class="blank_tips" id="no-comments-tips" style="display: none;overflow: hidden">\n    <div class="icomoon-indent blank_tips_ico"></div>\n    <span class="blank_tips_label"> 此商品暂无售后详情</span>\n</div>\n'}),define("text!templates/product-detail-head.html",[],function(){return'<header class="headerbox">\n    <div class="goods-label-collection-link">\n      <span class="goods-collection-words">点击关闭图片详情</span><span class="goods-collection-icon icomoon-spread"></span>\n    </div>\n</header>\n'}),define("text!templates/product-detail-info.html",[],function(){return'<div class="product-info-content">\n  <img class="product-detail-info-img" src="http://img10.360buyimg.com/popWareDetail/jfs/t2359/117/531556423/77677/1d888a2b/56172242N63d88833.jpg" />\n  <img class="product-detail-info-img" src="http://img10.360buyimg.com/popWareDetail/jfs/t2395/120/553273336/55446/879245e1/56172243N85713414.jpg" />\n  <img class="product-detail-info-img" src="http://img10.360buyimg.com/popWareDetail/jfs/t2425/129/579345046/90631/f6dc931a/5617224aNc8dcf2f0.jpg" />\n  <img class="product-detail-info-img" src="http://img10.360buyimg.com/popWareDetail/jfs/t1900/162/560924300/77607/63e235b5/56172277N4fd7b9e4.jpg" />\n</div>\n'}),define("text!templates/product-list-filter.html",[],function(){return'<div class="goodsfilter">\n    <div class="order-all filter">\n        <span>综合排序</span>\n    </div>\n    <div class="order-sales filter">\n        <span>销量优先</span>\n    </div>\n    <div class="order-price filter">\n        <span>价格</span>\n        <span class="filter-icon filter-price-icon">\n          <div class="icomoon icomoon-pullup filter-icon-up"></div>\n          <div class="icomoon icomoon-pulldown filter-icon-down"></div>\n        </span>\n    </div>\n</div>\n'}),define("text!templates/product-list-header.html",[],function(){return'    <header class="headerbox">\n        <div class="left-right nav-left">\n            <span class="icomoon icomoon-back"></span>\n        </div>\n        <div class=\'mid\'>\n          <div class=\'header-box-mid-inner\'>\n                <span class=\'icomoon-search\'></span>\n                <span class=\'common-search-holder\'>请输入商品</span>\n          </div>\n        </div>\n        <div class="left-right nav-right">\n            <span class="icomoon icomoon-list menu-list-type"></span>\n        </div>\n    </header>\n'}),define("text!templates/product-list.html",[],function(){return'<li class="table-view-cell media favorite-item list-content">\n  <div class="list-item">\n    <img class="item-media-object media-object pull-left item-media-object-single-line" src="<%=image%>">\n    <div class="media-body item-media-body">\n      <div class="item-media-title"><%=name%></div>\n      <div class="item-media-mark"><span class="price-unit">¥</span><span class="price"><%=price%></span></div>\n      <div class="item-media-des"><span>销量: <%= salesNumber %></span></div>\n    </div>\n  </div>\n</li>\n'}),define("text!templates/product-parameter.html",[],function(){return'<li class="table-view-cell media favorite-item list-content">\n  <div class="parameter-list-item">\n    <div class="product-parameter-des parameter-content"><%=attrName%></div>\n    <div class="product-parameter-value parameter-content"><%=attrValue%></div>\n  </div>\n</li>\n'}),define("text!templates/push-for-you-item.html",[],function(){return'<li class="home-goods-discount clearfix" data-pid="<%= id %>">\n  <div class="home-goods-box">\n    <img class="home-img" src="<%=image%>" alt="" />\n    <div class="home-goods-words">\n      <div class="home-goods-character">\n        <%=name%>\n      </div>\n      <div class="home-goods-money">\n        <div class="home-goods-price-info">\n          <span class="home-goods-rmb">¥</span>\n          <span class="home-goods-num"><%=price%></span>\n        </div>\n      </div>\n    </div>\n  </div>\n</li>\n'}),define("text!templates/push-for-you.html",[],function(){return'<div class="push-for-you">\n  <div class="pfy-title">\n    <div class="pfy-bg-line"></div>\n    <span class="pfy-title-title">为您推荐</span>\n  </div>\n  <div class="pfy-content"></div>\n\n</div>\n'}),define("text!templates/searchReceiverView.html",[],function(){return'<div class="search-transfer-view">\n    <header class="headerbox">\n        <div class="left-right nav-left hide-search">\n            <span class="icomoon icomoon-back"> </span>\n        </div>\n        <div class="search-right">\n            <div class="search-block-title" id="completeinput">\n                完成\n            </div>\n        </div>\n    </header>\n    <div style="clear: both;\n    height: 1rem;\n    background: #fff;\n    margin-top: 1.4rem;">\n            <div class="search-block" style="padding-top:0.1rem;">\n                <input type="text" id="searchTransfer" placeholder=" 请输入接收人手机号码">\n            </div>\n        </div>\n    <!--<div class="left-right nav-left hide-search">\n        <span class="icomoon icomoon-back"></span>\n    </div>  -->\n</div>'}),define("text!templates/senderSelect.html",[],function(){return'<li>\n	<div class="sender-select-item" data-id=<%=channelId%> >\n		<span class="sender-content"> <%=channelName%> </span>\n	</div>\n</li>'}),define("text!templates/shareview.html",[],function(){return'<div class="share-popup-view yyfixed">\n    <div class="share-select-pad">\n        <div class="title-cross-line"></div>\n        <div class="share-title">推荐给好友</div>\n        <div class="share-type shortMessage-share"><div class="share-ico icomoon-message"></div><div class="share-describe">短信</div></div>\n        <div class="share-type QQ-share"><div class="share-ico icomoon-qq"></div><div class="share-describe">QQ</div></div>\n        <div class="share-type wechat-share"><div class="share-ico icomoon-weixin"></div><div class="share-describe">微信</div></div>\n        <div class="share-type wechat-moment-share"><div class="share-ico icomoon-friend"></div><div class="share-describe">朋友圈</div></div>\n        <div class="share-type weibo-share"><div class="share-ico icomoon-weibo"></div><div class="share-describe">微博</div></div>\n    </div>\n    <div class="cancel-share">取消</div>\n</div>\n<div class="common-message-cover-no"></div>\n'}),define("text!templates/shopcollectorlist.html",[],function(){return'<li class="shop-collector-li" data-cid="<%=id%>">\n  <div class="shop-collector-list">\n    <div class="shop-collector-image">\n      <img src="<%=imageurl%>" class="collector-image-style" />\n    </div>\n    <div class="shop-collector-name"><%=name%> </div>\n    <div class="shop-collector-selected" data-name="shop">\n        <div class="shop-collector-btn" data-name = "shop" data-cid="<%=id%>">取消收藏</div>\n    </div>\n  </div>\n</li>\n'}),define("text!templates/shopingcart-allgoods.html",[],function(){return'<div class="shopingcart-item">\n  <div class="shopingcart-item-goods">\n      <div class="shopingcart-goods-listitem" data-index="<%=cartId%>" data-pid="<%=productId%>">\n\u2028\n        <span class="icomoon icomoon-choicebox shopingcart-choicebox-goods" ></span>\n        <div class="shopingcart-goods-details-img">\n          <img src="<%=image%>" alt="" />\n        </div>\n\u2028\n        <div class="shopingcart-goods-details-spec">\n            <!-- <%=mark%> -->\n        </div>\n\u2028\n        <div class="shopingcart-goods-details-info-show">\n          <div class="shopingcart-goods-details-title" style="color:#666">\n            <%=name%>\n          </div>\n\u2028\n          <div class="shopingcart-goods-details-price">\n            <div class="shopingcart-goods-details-unit-price" data-price="<%=price%>">\n                ¥<%=price%>\n            </div>\n            <div class="shopingcart-goods-details-number">\n               x<%=number%>\n            </div>\n          </div>\n        </div>\n\u2028\n        <div class="shopingcart-goods-edit">\n          <div class="shopingcart-goods-edit-number">\n            <button  data-cid="<%=cartId%>" type="button" class="shopingcart-goods-edit-btn-minus" data-minimum="1">-</button>\n            <input value="<%=number%>"  data-cid="<%=cartId%>"  class="shopingcart-goods-edit-input" type="number" pattern="[0-9]*"  onKeyUp="value=value.replace(/\\D/g,\'\')" onafterpaste="value=value.replace(/\\D/g,\'\')">\n            <button  data-cid="<%=cartId%>" type="button" class="shopingcart-goods-edit-btn-plus">+</button>\n          </div>\n          <div class="shopingcart-goods-edit-spec">\n            <span class="icomoon icomoon-spread"></span>\n          </div>\n\u2028\n          <div class="shopingcart-goods-delete theme-backgorund-color">\n            删除\n          </div>\n        </div>\n\u2028\n      </div>\n  </div>\n</div>\n'}),define("text!templates/unusecouponlistview.html",[],function(){return"<li class='unusecoupon-item'>\n    <div class='coupon-item-top'>\n        <div>\n            <div class='coupon-item-name'><%=name%></div>\n            <div class='coupon-item-deadline'>有效期至<%=time%></div>\n        </div>\n        <div class='unusecoupon-item-value'><%=value%>元</div>\n    </div>\n    <div  class='coupon-item-bottom'>\n        <div class='coupon-item-desc'></div>\n        <div>\n      <!--<button class='coupon-item-use-btn'>立即使用</button>-->\n        </div>\n    </div>\n</li>\n"}),define("extension-library",["require","./components/AdCardView","./components/AddressInOrderView","./components/AddressListView","./components/AddressSelectView","./components/AllCustomerService","./components/AllOrderListView","./components/AreaLoading","./components/BillEditView","./components/Blank_pageView","./components/BrandGrid","./components/BranddetailListFilter","./components/BussinessCategory","./components/CartEditorView","./components/CommentListView","./components/CouponView","./components/CreateCommentListView","./components/CreditCardView","./components/CreditFilter","./components/Creditlistingerror","./components/Detailslist","./components/EditAddressView","./components/EnsureOrder","./components/EvaluatePushView","./components/FilterControlView","./components/GoodsCollectorView","./components/GroupBuyListView","./components/HistoryView","./components/HomePushBrandView","./components/HomePushShopView","./components/HomePushView","./components/HomeSeckillTimerView","./components/HomeSeckillView","./components/HomeTopicView","./components/LogisticInfoView","./components/LogiticListView","./components/MembersOrderSelectView","./components/MySegmentedView","./components/NotifyUserInfoView","./components/NotifyUserSexView","./components/OrderOptionsSelectorView","./components/OrderShopListView","./components/PopupMenu","./components/ProductBottomBarView","./components/ProductCommentView","./components/ProductDetailInfoHeadView","./components/ProductDetailInfoView","./components/ProductListFilter","./components/ProductListHeader","./components/ProductListView","./components/PushForYouView","./components/SearchMidPageView","./components/SenderSelect","./components/ShareView","./components/ShopCollectorView","./components/ShopingcartListView","./components/SwitchView","./components/balancePayment","./components/myMembersOrderList","./libs/ajaxfileupload","./libs/canlendar","./libs/cityselector/jquery.cxselect","./libs/jweixin","./libs/wechat","./models/AddShoppingCart","./models/AddressDetailModel","./models/AddressListCollection","./models/AjaxCollection","./models/AjaxCollection0","./models/AllOrderListCollection","./models/AllServiceListCollection","./models/BalanceDetailCollection","./models/BaseModel","./models/BranIntroduceModel","./models/BrandListCollection","./models/BrandsModel","./models/BusinessModle","./models/BusunessAllProductsCollection","./models/BusunessNewProductsCollection","./models/BusunessProductsCollection","./models/CategoryCollection","./models/CatelogDetailListCollection","./models/CatelogListCollection","./models/CommentCollection","./models/ConfirmOrderSetCollection","./models/ConfirmSetModel","./models/CouponCollection","./models/CouponCollection1","./models/CreditCardCollection","./models/CreditCollection","./models/CreditDetailCollection","./models/CreditFilterCondition","./models/CrowdfundingCollection","./models/EvaluateGoodsModel","./models/GoodDetailModel","./models/GoodsCollector","./models/GroupBuyListCollection","./models/HistoryCollection","./models/HomeADImgsModel","./models/HomeAllModel","./models/HomeBrandModel","./models/HomeRecommendModel","./models/HomeSeckillModel","./models/HomeShopModel","./models/HomeTopicModel","./models/LogisticsModel","./models/MessageCenterCollection","./models/MyAccountModel","./models/OrderAddressModel","./models/OrderInfoModel","./models/OrderShopListCollection","./models/OverdueCouponCollection","./models/PackageAllOrderListCollection","./models/PayModel","./models/ProductListCollection","./models/ProductParameterCollection","./models/PushCollection","./models/ShopCollector","./models/ShoppingcartnumCollection","./models/SlickViewCollection","./models/credit-list","./models/itemDetailCollection","./models/logiticsCollection","./models/logiticsModel","./models/myOrderListCollection","./models/packageCollection","./models/packageDetailCollection","./models/senderCollection","text!./pages/about.html","./pages/about","text!./pages/about.json","text!./pages/addressSelect.html","./pages/addressSelect","text!./pages/addressSelect.json","text!./pages/addshoppingcart.html","./pages/addshoppingcart","text!./pages/addshoppingcart.json","text!./pages/afterPayment.html","./pages/afterPayment","text!./pages/afterPayment.json","text!./pages/applyAfterSale.html","./pages/applyAfterSale","text!./pages/applyAfterSale.json","text!./pages/bill-lading.html","./pages/bill-lading","text!./pages/bill-lading.json","text!./pages/bind-mobile.html","./pages/bind-mobile","text!./pages/bind-mobile.json","text!./pages/bind-new.html","./pages/bind-new","text!./pages/bind-new.json","text!./pages/brand-navigate.json","text!./pages/brand.html","./pages/brand","text!./pages/brand.json","./pages/branddetail","text!./pages/branddetail.json","text!./pages/brandintroduce.html","./pages/brandintroduce","text!./pages/brandintroduce.json","text!./pages/business.html","./pages/business","text!./pages/business.json","text!./pages/cancel-back-money.html","./pages/cancel-back-money","text!./pages/cancel-back-money.json","text!./pages/cancel-order-money.html","./pages/cancel-order-money","text!./pages/cancel-order-money.json","text!./pages/cancel-order-reason.html","./pages/cancel-order-reason","text!./pages/cancel-order-reason.json","text!./pages/category-navigate.json","text!./pages/category.html","./pages/category","text!./pages/category.json","text!./pages/confirm-order-completion.html","./pages/confirm-order-completion","text!./pages/confirm-order-completion.json","text!./pages/confirm-order-details.html","./pages/confirm-order-details","text!./pages/confirm-order-details.json","text!./pages/confirm-order-set.html","./pages/confirm-order-set","text!./pages/confirm-order-set.json","text!./pages/coupdes.html","./pages/coupdes","text!./pages/coupdes.json","text!./pages/create-comment.html","./pages/create-comment","text!./pages/create-comment.json","text!./pages/create-order-for-point.html","./pages/create-order-for-point","text!./pages/create-order-for-point.json","text!./pages/create-order.html","./pages/create-order","text!./pages/create-order.json","text!./pages/credit-detail.html","./pages/credit-detail","text!./pages/credit-detail.json","text!./pages/credit-list.html","./pages/credit-list","text!./pages/credit-list.json","text!./pages/credit-order-detail.html","./pages/credit-order-detail","text!./pages/credit-order-detail.json","text!./pages/credit.html","./pages/credit","text!./pages/credit.json","text!./pages/crowdfunding-detail.html","./pages/crowdfunding-detail","text!./pages/crowdfunding-detail.json","text!./pages/crowdfunding-list.html","./pages/crowdfunding-list","text!./pages/crowdfunding-list.json","text!./pages/details.html","./pages/details","text!./pages/details.json","text!./pages/discountPackage.html","./pages/discountPackage","text!./pages/discountPackage.json","text!./pages/distributionMode.html","./pages/distributionMode","text!./pages/distributionMode.json","text!./pages/evaluate.html","./pages/evaluate","text!./pages/evaluate.json","text!./pages/feedback.html","./pages/feedback","text!./pages/feedback.json","text!./pages/forgetpasswd.html","./pages/forgetpasswd","text!./pages/forgetpasswd.json","text!./pages/forgetpwd-newpwd.html","./pages/forgetpwd-newpwd","text!./pages/forgetpwd-newpwd.json","text!./pages/goodCollected.html","./pages/goodCollected","text!./pages/goodCollected.json","text!./pages/goods-create-order.html","./pages/goods-create-order","text!./pages/goods-create-order.json","text!./pages/goods-order-list.html","./pages/goods-order-list","text!./pages/goods-order-list.json","text!./pages/goodsComments.html","./pages/goodsComments","text!./pages/goodsComments.json","text!./pages/goodscategory.html","./pages/goodscategory","text!./pages/goodscategory.json","text!./pages/group-buy-detail.html","./pages/group-buy-detail","text!./pages/group-buy-detail.json","text!./pages/group-buy-list.html","./pages/group-buy-list","text!./pages/group-buy-list.json","text!./pages/home-navigate.json","text!./pages/home.html","./pages/home","text!./pages/home.json","text!./pages/index.json","text!./pages/invoice-information.html","./pages/invoice-information","text!./pages/invoice-information.json","text!./pages/invoice.html","./pages/invoice","text!./pages/invoice.json","text!./pages/itemdetail.html","./pages/itemdetail","text!./pages/itemdetail.json","text!./pages/login.html","./pages/login","text!./pages/login.json","text!./pages/logistic-list.html","./pages/logistic-list","text!./pages/logistic-list.json","text!./pages/logiticsDetail.html","./pages/logiticsDetail","text!./pages/logiticsDetail.json","text!./pages/message-detail.html","./pages/message-detail","text!./pages/message-detail.json","text!./pages/message-setting.html","./pages/message-setting","text!./pages/message-setting.json","text!./pages/messageCenter.html","./pages/messageCenter","text!./pages/messageCenter.json","text!./pages/modify-pwd.html","./pages/modify-pwd","text!./pages/modify-pwd.json","text!./pages/modify-success.html","./pages/modify-success","text!./pages/modify-success.json","text!./pages/my-account.html","./pages/my-account","text!./pages/my-account.json","text!./pages/my-address.html","./pages/my-address","text!./pages/my-address.json","text!./pages/my-customer-detail.html","./pages/my-customer-detail","text!./pages/my-customer-detail.json","text!./pages/my-customerservice.html","./pages/my-customerservice","text!./pages/my-customerservice.json","text!./pages/my-navigate.json","text!./pages/my-webview.html","./pages/my-webview","text!./pages/my-webview.json","text!./pages/my.html","./pages/my","text!./pages/my.json","text!./pages/myBalance.html","./pages/myBalance","text!./pages/myBalance.json","text!./pages/myBalanceDetail.html","./pages/myBalanceDetail","text!./pages/myBalanceDetail.json","text!./pages/myCoupon.html","./pages/myCoupon","text!./pages/myCoupon.json","text!./pages/myHistory.html","./pages/myHistory","text!./pages/myHistory.json","text!./pages/myMembersOrders.html","./pages/myMembersOrders","text!./pages/myMembersOrders.json","text!./pages/mySecurity.html","./pages/mySecurity","text!./pages/mySecurity.json","text!./pages/myback.html","./pages/myback","text!./pages/myback.json","text!./pages/order-detail.html","./pages/order-detail","text!./pages/order-detail.json","text!./pages/order-list.html","./pages/order-list","text!./pages/order-list.json","text!./pages/orderCompletion.html","./pages/orderCompletion","text!./pages/orderCompletion.json","text!./pages/overdueCoupon.html","./pages/overdueCoupon","text!./pages/overdueCoupon.json","text!./pages/package-commodity.html","./pages/package-commodity","text!./pages/package-commodity.json","text!./pages/package-order-list.html","./pages/package-order-list","text!./pages/package-order-list.json","text!./pages/packagedetail.html","./pages/packagedetail","text!./pages/packagedetail.json","text!./pages/payMode.html","./pages/payMode","text!./pages/payMode.json","text!./pages/paySelector.html","./pages/paySelector","text!./pages/paySelector.json","text!./pages/pointitemdetail.html","./pages/pointitemdetail","text!./pages/pointitemdetail.json","./pages/product-detail-info","text!./pages/product-detail-info.json","./pages/product-list","text!./pages/product-list.json","text!./pages/refund-method.html","./pages/refund-method","text!./pages/refund-method.json","text!./pages/register-pwd.html","./pages/register-pwd","text!./pages/register-pwd.json","text!./pages/register-success.html","./pages/register-success","text!./pages/register-success.json","text!./pages/register.html","./pages/register","text!./pages/register.json","text!./pages/security.html","./pages/security","text!./pages/security.json","text!./pages/service-evalution.html","./pages/service-evalution","text!./pages/service-evalution.json","text!./pages/shopcollecor.html","./pages/shopcollector","text!./pages/shopcollector.json","text!./pages/shopingcart-navigate.json","text!./pages/shopingcart.html","./pages/shopingcart","text!./pages/shopingcart.json","text!./pages/show-view.html","./pages/show-view","text!./pages/show-view.json","text!./pages/transferPoint.html","./pages/transferPoint","text!./pages/transferPoint.json","text!./pages/usersetting.html","./pages/usersetting","text!./pages/usersetting.json","text!./pages/weixinlogin.html","./pages/weixinlogin","text!./pages/weixinlogin.json","text!./templates/MembersOrderSelect.html","text!./templates/address-in-order-selector.html","text!./templates/address-in-order.html","text!./templates/address-in-order1.html","text!./templates/addressEditView.html","text!./templates/addressListView.html","text!./templates/addressSelectView.html","text!./templates/after-payment-address.html","text!./templates/all-order-list-item.html","text!./templates/all-service-list-item.html","text!./templates/balancePayment.html","text!./templates/balancedetaillistview.html","text!./templates/bill-edit.html","text!./templates/bill-loding-item.html","text!./templates/brand-list.html","text!./templates/brand.html","text!./templates/branddetail-head.html","text!./templates/branddetail-list-filter.html","text!./templates/business-product.html","text!./templates/cancel-order-money-list.html","text!./templates/cancel-order-reasion-list.html","text!./templates/cart-editor-view.html","text!./templates/common/covered.html","text!./templates/common/header.html","text!./templates/component-category-it.html","text!./templates/confirm-order-completion-item.html","text!./templates/confirm-order-set-wait.html","text!./templates/coupon-view.html","text!./templates/couponlistview.html","text!./templates/create-comment-product-item.html","text!./templates/credit-list-item.html","text!./templates/credit-order-detail-product-list-item.html","text!./templates/creditcard-view.html","text!./templates/creditdetaillistview.html","text!./templates/creditlistview.html","text!./templates/crowdfunding-detail-buy-item.html","text!./templates/crowdfunding-detail.html","text!./templates/crowdfunding-list-item.html","text!./templates/discount-package-list-item.html","text!./templates/discount-package-list.html","text!./templates/ensure-order.html","text!./templates/evaluatepush.html","text!./templates/goodsCommentsListView.html","text!./templates/goodscollectorlist.html","text!./templates/goodsfilter.html","text!./templates/goodslist/brandgrid.html","text!./templates/group-buy-list-item.html","text!./templates/history-collection.html","text!./templates/home-push-brand.html","text!./templates/home-push-shop.html","text!./templates/homepush.html","text!./templates/homeseckill.html","text!./templates/hometopic.html","text!./templates/logistic-item.html","text!./templates/logistics.html","text!./templates/logiticsdetail.html","text!./templates/messagecenterlistview.html","text!./templates/my-members-list-item.html","text!./templates/notify-name-info.html","text!./templates/notify-sex-info.html","text!./templates/order-detail-product-list-item.html","text!./templates/order-options-selector.html","text!./templates/order-product-list-item-points.html","text!./templates/order-product-list-item.html","text!./templates/overdue-coupon-view.html","text!./templates/package-all-order-list-item.html","text!./templates/package-commodity-item.html","text!./templates/package-detail-buy-item.html","text!./templates/package-detail-info.html","text!./templates/package-product-item.html","text!./templates/popup-menu.html","text!./templates/product-bottom-bar.html","text!./templates/product-detail-comment.html","text!./templates/product-detail-head.html","text!./templates/product-detail-info.html","text!./templates/product-list-filter.html","text!./templates/product-list-header.html","text!./templates/product-list.html","text!./templates/product-parameter.html","text!./templates/push-for-you-item.html","text!./templates/push-for-you.html","text!./templates/searchReceiverView.html","text!./templates/senderSelect.html","text!./templates/shareview.html","text!./templates/shopcollectorlist.html","text!./templates/shopingcart-allgoods.html","text!./templates/unusecouponlistview.html"],function(e){return e("./components/AdCardView"),e("./components/AddressInOrderView"),e("./components/AddressListView"),e("./components/AddressSelectView"),e("./components/AllCustomerService"),e("./components/AllOrderListView"),e("./components/AreaLoading"),e("./components/BillEditView"),e("./components/Blank_pageView"),e("./components/BrandGrid"),e("./components/BranddetailListFilter"),e("./components/BussinessCategory"),e("./components/CartEditorView"),e("./components/CommentListView"),e("./components/CouponView"),e("./components/CreateCommentListView"),e("./components/CreditCardView"),e("./components/CreditFilter"),e("./components/Creditlistingerror"),e("./components/Detailslist"),e("./components/EditAddressView"),e("./components/EnsureOrder"),e("./components/EvaluatePushView"),e("./components/FilterControlView"),e("./components/GoodsCollectorView"),e("./components/GroupBuyListView"),e("./components/HistoryView"),e("./components/HomePushBrandView"),e("./components/HomePushShopView"),e("./components/HomePushView"),e("./components/HomeSeckillTimerView"),e("./components/HomeSeckillView"),e("./components/HomeTopicView"),e("./components/LogisticInfoView"),e("./components/LogiticListView"),e("./components/MembersOrderSelectView"),e("./components/MySegmentedView"),e("./components/NotifyUserInfoView"),e("./components/NotifyUserSexView"),e("./components/OrderOptionsSelectorView"),e("./components/OrderShopListView"),e("./components/PopupMenu"),e("./components/ProductBottomBarView"),e("./components/ProductCommentView"),e("./components/ProductDetailInfoHeadView"),e("./components/ProductDetailInfoView"),e("./components/ProductListFilter"),e("./components/ProductListHeader"),e("./components/ProductListView"),e("./components/PushForYouView"),e("./components/SearchMidPageView"),e("./components/SenderSelect"),e("./components/ShareView"),e("./components/ShopCollectorView"),e("./components/ShopingcartListView"),e("./components/SwitchView"),e("./components/balancePayment"),e("./components/myMembersOrderList"),e("./libs/ajaxfileupload"),e("./libs/canlendar"),e("./libs/cityselector/jquery.cxselect"),e("./libs/jweixin"),e("./libs/wechat"),e("./models/AddShoppingCart"),e("./models/AddressDetailModel"),e("./models/AddressListCollection"),e("./models/AjaxCollection"),e("./models/AjaxCollection0"),e("./models/AllOrderListCollection"),e("./models/AllServiceListCollection"),e("./models/BalanceDetailCollection"),e("./models/BaseModel"),e("./models/BranIntroduceModel"),e("./models/BrandListCollection"),e("./models/BrandsModel"),e("./models/BusinessModle"),e("./models/BusunessAllProductsCollection"),e("./models/BusunessNewProductsCollection"),e("./models/BusunessProductsCollection"),e("./models/CategoryCollection"),e("./models/CatelogDetailListCollection"),e("./models/CatelogListCollection"),e("./models/CommentCollection"),e("./models/ConfirmOrderSetCollection"),e("./models/ConfirmSetModel"),e("./models/CouponCollection"),e("./models/CouponCollection1"),e("./models/CreditCardCollection"),e("./models/CreditCollection"),e("./models/CreditDetailCollection"),e("./models/CreditFilterCondition"),e("./models/CrowdfundingCollection"),e("./models/EvaluateGoodsModel"),e("./models/GoodDetailModel"),e("./models/GoodsCollector"),e("./models/GroupBuyListCollection"),e("./models/HistoryCollection"),e("./models/HomeADImgsModel"),e("./models/HomeAllModel"),e("./models/HomeBrandModel"),e("./models/HomeRecommendModel"),e("./models/HomeSeckillModel"),e("./models/HomeShopModel"),e("./models/HomeTopicModel"),e("./models/LogisticsModel"),e("./models/MessageCenterCollection"),e("./models/MyAccountModel"),e("./models/OrderAddressModel"),e("./models/OrderInfoModel"),e("./models/OrderShopListCollection"),e("./models/OverdueCouponCollection"),e("./models/PackageAllOrderListCollection"),e("./models/PayModel"),e("./models/ProductListCollection"),e("./models/ProductParameterCollection"),e("./models/PushCollection"),e("./models/ShopCollector"),e("./models/ShoppingcartnumCollection"),e("./models/SlickViewCollection"),e("./models/credit-list"),e("./models/itemDetailCollection"),e("./models/logiticsCollection"),e("./models/logiticsModel"),e("./models/myOrderListCollection"),e("./models/packageCollection"),e("./models/packageDetailCollection"),e("./models/senderCollection"),e("text!./pages/about.html"),e("./pages/about"),e("text!./pages/about.json"),e("text!./pages/addressSelect.html"),e("./pages/addressSelect"),e("text!./pages/addressSelect.json"),e("text!./pages/addshoppingcart.html"),e("./pages/addshoppingcart"),e("text!./pages/addshoppingcart.json"),e("text!./pages/afterPayment.html"),e("./pages/afterPayment"),e("text!./pages/afterPayment.json"),e("text!./pages/applyAfterSale.html"),e("./pages/applyAfterSale"),e("text!./pages/applyAfterSale.json"),e("text!./pages/bill-lading.html"),e("./pages/bill-lading"),e("text!./pages/bill-lading.json"),e("text!./pages/bind-mobile.html"),e("./pages/bind-mobile"),e("text!./pages/bind-mobile.json"),e("text!./pages/bind-new.html"),e("./pages/bind-new"),e("text!./pages/bind-new.json"),e("text!./pages/brand-navigate.json"),e("text!./pages/brand.html"),e("./pages/brand"),e("text!./pages/brand.json"),e("./pages/branddetail"),e("text!./pages/branddetail.json"),e("text!./pages/brandintroduce.html"),e("./pages/brandintroduce"),e("text!./pages/brandintroduce.json"),e("text!./pages/business.html"),e("./pages/business"),e("text!./pages/business.json"),e("text!./pages/cancel-back-money.html"),e("./pages/cancel-back-money"),e("text!./pages/cancel-back-money.json"),e("text!./pages/cancel-order-money.html"),e("./pages/cancel-order-money"),e("text!./pages/cancel-order-money.json"),e("text!./pages/cancel-order-reason.html"),e("./pages/cancel-order-reason"),e("text!./pages/cancel-order-reason.json"),e("text!./pages/category-navigate.json"),e("text!./pages/category.html"),e("./pages/category"),e("text!./pages/category.json"),e("text!./pages/confirm-order-completion.html"),e("./pages/confirm-order-completion"),e("text!./pages/confirm-order-completion.json"),e("text!./pages/confirm-order-details.html"),e("./pages/confirm-order-details"),e("text!./pages/confirm-order-details.json"),e("text!./pages/confirm-order-set.html"),e("./pages/confirm-order-set"),e("text!./pages/confirm-order-set.json"),e("text!./pages/coupdes.html"),e("./pages/coupdes"),e("text!./pages/coupdes.json"),e("text!./pages/create-comment.html"),e("./pages/create-comment"),e("text!./pages/create-comment.json"),e("text!./pages/create-order-for-point.html"),e("./pages/create-order-for-point"),e("text!./pages/create-order-for-point.json"),e("text!./pages/create-order.html"),e("./pages/create-order"),e("text!./pages/create-order.json"),e("text!./pages/credit-detail.html"),e("./pages/credit-detail"),e("text!./pages/credit-detail.json"),e("text!./pages/credit-list.html"),e("./pages/credit-list"),e("text!./pages/credit-list.json"),e("text!./pages/credit-order-detail.html"),e("./pages/credit-order-detail"),e("text!./pages/credit-order-detail.json"),e("text!./pages/credit.html"),e("./pages/credit"),e("text!./pages/credit.json"),e("text!./pages/crowdfunding-detail.html"),e("./pages/crowdfunding-detail"),e("text!./pages/crowdfunding-detail.json"),e("text!./pages/crowdfunding-list.html"),e("./pages/crowdfunding-list"),e("text!./pages/crowdfunding-list.json"),e("text!./pages/details.html"),e("./pages/details"),e("text!./pages/details.json"),e("text!./pages/discountPackage.html"),e("./pages/discountPackage"),e("text!./pages/discountPackage.json"),e("text!./pages/distributionMode.html"),e("./pages/distributionMode"),e("text!./pages/distributionMode.json"),e("text!./pages/evaluate.html"),e("./pages/evaluate"),e("text!./pages/evaluate.json"),e("text!./pages/feedback.html"),e("./pages/feedback"),e("text!./pages/feedback.json"),e("text!./pages/forgetpasswd.html"),e("./pages/forgetpasswd"),e("text!./pages/forgetpasswd.json"),e("text!./pages/forgetpwd-newpwd.html"),e("./pages/forgetpwd-newpwd"),e("text!./pages/forgetpwd-newpwd.json"),e("text!./pages/goodCollected.html"),e("./pages/goodCollected"),e("text!./pages/goodCollected.json"),e("text!./pages/goods-create-order.html"),e("./pages/goods-create-order"),e("text!./pages/goods-create-order.json"),e("text!./pages/goods-order-list.html"),e("./pages/goods-order-list"),e("text!./pages/goods-order-list.json"),e("text!./pages/goodsComments.html"),e("./pages/goodsComments"),e("text!./pages/goodsComments.json"),e("text!./pages/goodscategory.html"),e("./pages/goodscategory"),e("text!./pages/goodscategory.json"),e("text!./pages/group-buy-detail.html"),e("./pages/group-buy-detail"),e("text!./pages/group-buy-detail.json"),e("text!./pages/group-buy-list.html"),e("./pages/group-buy-list"),e("text!./pages/group-buy-list.json"),e("text!./pages/home-navigate.json"),e("text!./pages/home.html"),e("./pages/home"),e("text!./pages/home.json"),e("text!./pages/index.json"),e("text!./pages/invoice-information.html"),e("./pages/invoice-information"),e("text!./pages/invoice-information.json"),e("text!./pages/invoice.html"),e("./pages/invoice"),e("text!./pages/invoice.json"),e("text!./pages/itemdetail.html"),e("./pages/itemdetail"),e("text!./pages/itemdetail.json"),e("text!./pages/login.html"),e("./pages/login"),e("text!./pages/login.json"),e("text!./pages/logistic-list.html"),e("./pages/logistic-list"),e("text!./pages/logistic-list.json"),e("text!./pages/logiticsDetail.html"),e("./pages/logiticsDetail"),e("text!./pages/logiticsDetail.json"),e("text!./pages/message-detail.html"),e("./pages/message-detail"),e("text!./pages/message-detail.json"),e("text!./pages/message-setting.html"),e("./pages/message-setting"),e("text!./pages/message-setting.json"),e("text!./pages/messageCenter.html"),e("./pages/messageCenter"),e("text!./pages/messageCenter.json"),e("text!./pages/modify-pwd.html"),e("./pages/modify-pwd"),e("text!./pages/modify-pwd.json"),e("text!./pages/modify-success.html"),e("./pages/modify-success"),e("text!./pages/modify-success.json"),e("text!./pages/my-account.html"),e("./pages/my-account"),e("text!./pages/my-account.json"),e("text!./pages/my-address.html"),e("./pages/my-address"),e("text!./pages/my-address.json"),e("text!./pages/my-customer-detail.html"),e("./pages/my-customer-detail"),e("text!./pages/my-customer-detail.json"),e("text!./pages/my-customerservice.html"),e("./pages/my-customerservice"),e("text!./pages/my-customerservice.json"),e("text!./pages/my-navigate.json"),e("text!./pages/my-webview.html"),e("./pages/my-webview"),e("text!./pages/my-webview.json"),e("text!./pages/my.html"),e("./pages/my"),e("text!./pages/my.json"),e("text!./pages/myBalance.html"),e("./pages/myBalance"),e("text!./pages/myBalance.json"),e("text!./pages/myBalanceDetail.html"),e("./pages/myBalanceDetail"),e("text!./pages/myBalanceDetail.json"),e("text!./pages/myCoupon.html"),e("./pages/myCoupon"),e("text!./pages/myCoupon.json"),e("text!./pages/myHistory.html"),e("./pages/myHistory"),e("text!./pages/myHistory.json"),e("text!./pages/myMembersOrders.html"),e("./pages/myMembersOrders"),e("text!./pages/myMembersOrders.json"),e("text!./pages/mySecurity.html"),e("./pages/mySecurity"),e("text!./pages/mySecurity.json"),e("text!./pages/myback.html"),e("./pages/myback"),e("text!./pages/myback.json"),e("text!./pages/order-detail.html"),e("./pages/order-detail"),e("text!./pages/order-detail.json"),e("text!./pages/order-list.html"),e("./pages/order-list"),e("text!./pages/order-list.json"),e("text!./pages/orderCompletion.html"),e("./pages/orderCompletion"),e("text!./pages/orderCompletion.json"),e("text!./pages/overdueCoupon.html"),e("./pages/overdueCoupon"),e("text!./pages/overdueCoupon.json"),e("text!./pages/package-commodity.html"),e("./pages/package-commodity"),e("text!./pages/package-commodity.json"),e("text!./pages/package-order-list.html"),e("./pages/package-order-list"),e("text!./pages/package-order-list.json"),e("text!./pages/packagedetail.html"),e("./pages/packagedetail"),e("text!./pages/packagedetail.json"),e("text!./pages/payMode.html"),e("./pages/payMode"),e("text!./pages/payMode.json"),e("text!./pages/paySelector.html"),e("./pages/paySelector"),e("text!./pages/paySelector.json"),e("text!./pages/pointitemdetail.html"),e("./pages/pointitemdetail"),e("text!./pages/pointitemdetail.json"),e("./pages/product-detail-info"),e("text!./pages/product-detail-info.json"),e("./pages/product-list"),e("text!./pages/product-list.json"),e("text!./pages/refund-method.html"),e("./pages/refund-method"),e("text!./pages/refund-method.json"),e("text!./pages/register-pwd.html"),e("./pages/register-pwd"),e("text!./pages/register-pwd.json"),e("text!./pages/register-success.html"),e("./pages/register-success"),e("text!./pages/register-success.json"),e("text!./pages/register.html"),e("./pages/register"),e("text!./pages/register.json"),e("text!./pages/security.html"),e("./pages/security"),e("text!./pages/security.json"),e("text!./pages/service-evalution.html"),e("./pages/service-evalution"),e("text!./pages/service-evalution.json"),e("text!./pages/shopcollecor.html"),e("./pages/shopcollector"),e("text!./pages/shopcollector.json"),e("text!./pages/shopingcart-navigate.json"),e("text!./pages/shopingcart.html"),e("./pages/shopingcart"),e("text!./pages/shopingcart.json"),e("text!./pages/show-view.html"),e("./pages/show-view"),e("text!./pages/show-view.json"),e("text!./pages/transferPoint.html"),e("./pages/transferPoint"),e("text!./pages/transferPoint.json"),e("text!./pages/usersetting.html"),e("./pages/usersetting"),e("text!./pages/usersetting.json"),e("text!./pages/weixinlogin.html"),e("./pages/weixinlogin"),e("text!./pages/weixinlogin.json"),e("text!./templates/MembersOrderSelect.html"),e("text!./templates/address-in-order-selector.html"),e("text!./templates/address-in-order.html"),e("text!./templates/address-in-order1.html"),e("text!./templates/addressEditView.html"),e("text!./templates/addressListView.html"),e("text!./templates/addressSelectView.html"),e("text!./templates/after-payment-address.html"),e("text!./templates/all-order-list-item.html"),e("text!./templates/all-service-list-item.html"),e("text!./templates/balancePayment.html"),e("text!./templates/balancedetaillistview.html"),e("text!./templates/bill-edit.html"),e("text!./templates/bill-loding-item.html"),e("text!./templates/brand-list.html"),e("text!./templates/brand.html"),e("text!./templates/branddetail-head.html"),e("text!./templates/branddetail-list-filter.html"),e("text!./templates/business-product.html"),e("text!./templates/cancel-order-money-list.html"),e("text!./templates/cancel-order-reasion-list.html"),e("text!./templates/cart-editor-view.html"),e("text!./templates/common/covered.html"),e("text!./templates/common/header.html"),e("text!./templates/component-category-it.html"),e("text!./templates/confirm-order-completion-item.html"),e("text!./templates/confirm-order-set-wait.html"),e("text!./templates/coupon-view.html"),e("text!./templates/couponlistview.html"),e("text!./templates/create-comment-product-item.html"),e("text!./templates/credit-list-item.html"),e("text!./templates/credit-order-detail-product-list-item.html"),e("text!./templates/creditcard-view.html"),e("text!./templates/creditdetaillistview.html"),e("text!./templates/creditlistview.html"),e("text!./templates/crowdfunding-detail-buy-item.html"),e("text!./templates/crowdfunding-detail.html"),e("text!./templates/crowdfunding-list-item.html"),e("text!./templates/discount-package-list-item.html"),e("text!./templates/discount-package-list.html"),e("text!./templates/ensure-order.html"),e("text!./templates/evaluatepush.html"),e("text!./templates/goodsCommentsListView.html"),e("text!./templates/goodscollectorlist.html"),e("text!./templates/goodsfilter.html"),e("text!./templates/goodslist/brandgrid.html"),e("text!./templates/group-buy-list-item.html"),e("text!./templates/history-collection.html"),e("text!./templates/home-push-brand.html"),e("text!./templates/home-push-shop.html"),e("text!./templates/homepush.html"),e("text!./templates/homeseckill.html"),e("text!./templates/hometopic.html"),e("text!./templates/logistic-item.html"),e("text!./templates/logistics.html"),e("text!./templates/logiticsdetail.html"),e("text!./templates/messagecenterlistview.html"),e("text!./templates/my-members-list-item.html"),e("text!./templates/notify-name-info.html"),e("text!./templates/notify-sex-info.html"),e("text!./templates/order-detail-product-list-item.html"),e("text!./templates/order-options-selector.html"),e("text!./templates/order-product-list-item-points.html"),e("text!./templates/order-product-list-item.html"),e("text!./templates/overdue-coupon-view.html"),e("text!./templates/package-all-order-list-item.html"),e("text!./templates/package-commodity-item.html"),e("text!./templates/package-detail-buy-item.html"),e("text!./templates/package-detail-info.html"),e("text!./templates/package-product-item.html"),e("text!./templates/popup-menu.html"),e("text!./templates/product-bottom-bar.html"),e("text!./templates/product-detail-comment.html"),e("text!./templates/product-detail-head.html"),e("text!./templates/product-detail-info.html"),e("text!./templates/product-list-filter.html"),e("text!./templates/product-list-header.html"),e("text!./templates/product-list.html"),e("text!./templates/product-parameter.html"),e("text!./templates/push-for-you-item.html"),e("text!./templates/push-for-you.html"),e("text!./templates/searchReceiverView.html"),e("text!./templates/senderSelect.html"),e("text!./templates/shareview.html"),e("text!./templates/shopcollectorlist.html"),e("text!./templates/shopingcart-allgoods.html"),e("text!./templates/unusecouponlistview.html"),[]});